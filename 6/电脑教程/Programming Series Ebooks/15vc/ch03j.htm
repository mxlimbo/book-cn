<HTML>
<HEAD>
<LINK REL=StyleSheet HREF="basicIE4.css" TYPE="text/css">
<TITLE>Understanding Precompiled Headers</TITLE>

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</HEAD>
<BODY>
<A NAME="49"><H1>Understanding Precompiled Headers</H1></A><P>When AppWizard generates a project, it generates switch settings and files for <U>precompiled</U> <U>headers</U>. You must understand how the make system 
processes precompiled headers in order to manage your projects effectively.
<P>
<DIV CLASS=note>
<BLOCKQUOTE>
<IMG SRC="note.jpg" width=123 height=18 BORDER=0><P>
Visual C++ has two precompiled header &quot;systems:&quot; automatic and manual. <U>Automatic</U> precompiled headers, activated with the /Yx compiler switch, store compiler output in a &quot;database&quot; file. <U>Manual</U> precompiled headers are activated by the /Yc and /Yu switch settings and are central to all AppWizard-generated projects.
</BLOCKQUOTE>
</DIV>
<P>Precompiled headers represent compiler &quot;snapshots&quot; taken at a 
particular line of source code. In MFC library programs, the snapshot is generally taken immediately after the following statement:<P>
<PRE>#include  &quot;StdAfx.h&quot;</PRE>
<P>The file StdAfx.h contains <I>#include</I> statements for the MFC library header files. The file's contents depend on the options that you select when you run AppWizard, but the file <U>always</U> contains these statements:<P>
<PRE>#include &lt;afxwin.h&gt;
#include &lt;afxext.h&gt;
</PRE>
<P>If you're using compound documents, StdAfx.h also contains the statement<P>
<PRE>#include &lt;afxole.h&gt;
</PRE>
<P>and if you're using Automation or ActiveX Controls, it contains<P>
<PRE>#include &lt;afxdisp.h&gt;
</PRE>
<P>If you're using Internet Explorer 4 Common Controls, StdAfx.h contains the statement<P>
<PRE>#include &lt;afxdtctl.h&gt;
</PRE>
<P>Occasionally you will need other header files&#151;for example, the header 
for template-based collection classes that is accessed by the statement<P>
<PRE>#include &lt;afxtempl.h&gt;
</PRE>
<P>The source file StdAfx.cpp contains only the statement<P>
<PRE>#include  &quot;StdAfx.h&quot;
</PRE>
<P>and is used to generate the precompiled header file in the project directory. The MFC library headers included by StdAfx.h never change, but they do take a long time to compile. The compiler switch /Yc, used only with StdAfx.cpp, causes <U>creation</U> of the precompiled header (PCH) file. The switch /Yu, used with all the other source code files, causes <U>use</U> of an existing PCH file. The switch /Fp specifies the PCH filename that would otherwise default to the project name (with the PCH extension) in the target's output files subdirectory. Figure 3-1 illustrates the whole process.
<P>AppWizard sets the /Yc and /Yu switches for you, but you can make changes if you need to. It's possible to define compiler switch settings for individual source files. On the C/C++ tab in the Project Settings dialog box, if you select only StdAfx.cpp, you'll see the /Yc setting. This overrides the /Yu setting that is defined for the target.
<P>Be aware that PCH files are big&#151;5 MB is typical. If you're not careful, you'll fill up your hard disk. You can keep things under control by periodically cleaning out your projects' Debug directories, or you can use the 
/Fp compiler option to reroute PCH files to a common directory.
<P><IMG SRC="F03OG01.GIF" width=401 height=321 BORDER=0><P>
<!-- caption -->
<B>Figure 3-1.</B> <I>The Visual C++ precompiled header process.</I>
<!-- /caption -->

</BODY>
</HTML>



