<HTML>
<HEAD>
<TITLE>Lesson 5: Creating a Remote Access Policy</TITLE>
<link rel="STYLESHEET" type="text/css" href="upwin2k.css">

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</head>
<SCRIPT LANGUAGE="JavaScript">
<!--

function fullSize(sURL){
	window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}

function LibraryHeaderNav(sBackward, sForward, sImgLeftOff, sImgLeftOn, sImgRightOff, sImgRightOn, iH, iW, sImgLeftStyle, sImgRightStyle, sImgRuleStyle, sRuleColor, sRuleSize){
	var tableStr;
	//validate questionable args for defs
	tableStr = "<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 border=0 width=100%>";
	tableStr += "<TR VALIGN=top ALIGN=right>";

	tableStr += "<TD align=right class=" + sImgRuleStyle + ">&nbsp;</TD>";	
	
	tableStr += "<TD width=34 align=right class=" + sImgLeftStyle + ">";
	tableStr += "<A href='" + sBackward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgLeftOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgLeftOff + '\'\"';
	tableStr += " SRC='" + sImgLeftOff + "' vspace=0 hspace=0></a></TD>";
	
	tableStr += "<TD width=34 align=left class=" + sImgRightStyle + ">";
	tableStr += "<A href='" + sForward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgRightOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgRightOff + '\'\"';
	tableStr += " SRC='" + sImgRightOff + "' vspace=0 hspace=0></a></TD></TR>";

	tableStr += "<TR VALIGN=top>";
	tableStr += "<TD height=3 align=center colspan=3 class=" + sImgRuleStyle + ">";
	tableStr += "<HR color=" + sRuleColor + " size=" + sRuleSize + "></TD></TR></TABLE>";
	//alert(tableStr);
	document.write(tableStr);
}

 																						     //purple is: #aa22aa   orange is: #ff9900
LibraryHeaderNav("ch09e.htm", "ch09g.htm", "images/unit_p_a1.gif", "images/unit_p_a2.gif", "images/unit_p_b1.gif", "images/unit_p_b2.gif", 18, 34, "unit01", "unit02", "headerrule", "#aa22aa", "2");
//--></SCRIPT><P>

<A NAME="464"><H1>Lesson 5: Creating a Remote Access Policy</H1></A>

<p>A number of options and settings are available to you for
configuring remote access. Creating a remote access policy involves the following three
major steps:</p>

<ul>
<p><li>Configuring dial-in settings for users by using the Active
Directory Users and Computers tool</li></p>

<p><li>Creating a policy and its conditions by using the Routing
and Remote Access tool</li></p>

<p><li>Editing the policy's profile</li></p>
</ul>


<p>These do not have to be completed in any order or at the same time.
However, it is important to plan these policies thoroughly and address
all three components of creating remote access policies in order to
provide secure access to your users.</p>

<p>
<div class="sidebar"><blockquote>
<p><b>After this lesson, you will be able to</b></p>

<ul>
<p><li>Create a remote access policy.</li></p>

<p><li>Create a remote access profile.</li></p>
</ul>


<p><b>Estimated lesson time: 30 minutes</b></p>
</blockquote></div>
</p>

<A NAME="465"><H2>Configuring User Dial-In Settings</H2></A>

<p>On a stand-alone server, the dial-in settings are found on the
Dial-In tab of the Properties dialog box for a user account in the
Users folder. For a server using Active Directory directory services,
the dial-in settings are found on the Dial-In tab of the Properties
dialog box for a user account in the Active Directory Users And
Computers window. Figure 9.6 shows a user's Properties dialog
box.</p>

<p>
<A HREF="javascript:fullSize('f09up06x.htm')"> <img src="images/f09up06.JPG" width=404 height=369 border=0 ALT = "Click to view at full size."> </A>
</p><p>
<!--caption--><b>Figure 9.6</b> <i>A user's Properties dialog box</i><!--/caption-->
</p>


<A NAME="466"><H3>Remote Access Permission</H3></A>

<p>The Remote Access Permission (Dial-In Or VPN) property determines
whether remote access is explicitly allowed, explicitly denied, or
determined through remote access policies. If access is explicitly allowed, remote access
policy conditions, user account properties, or profile properties can
still deny the connection attempt. The Control Access Through Remote
Access Policy option is only available on user accounts for stand-alone
Windows 2000 remote access servers or members of a native Windows 2000
domain.</p>

<A NAME="467"><H3>Verify Caller-ID</H3></A>

<p>If the Verify Caller-ID check box is selected, the server verifies
the caller's phone number. If the caller's phone number does
not match the configured phone number, the connection attempt is
denied.</p>

<p>All parts of the connection must support caller ID. Caller ID
support on the remote access server consists of caller ID answering equipment and the
driver that passes caller ID information to RRAS. If you configure a
caller ID phone number for a user and you do not have support for the
passing of caller ID information from the caller to RRAS, the
connection attempt is denied.</p>

<A NAME="468"><H3>Callback Options</H3></A>

<p>If the Callback Options property is enabled, the server calls back a
specific phone number (set by the caller or by the network
administrator) during the connection process. To disable callback, select No Callback, and the
user cannot use callback. To enable callback, select either of the two
following options: Set By Caller (Routing And Remote Access Service
Only) or Always Callback To. If you want the user to determine whether or not to use callback,
select Set By Caller (Routing And Remote Access Service Only). If you
want the user to always use callback, select Always Callback To.</p>

<p>
<div class="note"><blockquote><b>NOTE</b><hr>
If the Windows 2000 remote access server is a
stand-alone server or a member of a native-mode domain, the callback
number can be of unlimited size. If a Windows 2000 remote access server
is a member of a mixed-mode domain, the callback number can only be 128
characters.
</blockquote></div>
</p>

<A NAME="469"><H3>Assign a Static IP Address</H3></A>

<p>If the Assign A Static IP Address check box option is enabled, the
network administrator assigns a specific IP address to the user when a
connection is made.</p>

<A NAME="470"><H3>Apply Static Routes</H3></A>

<p>If the Apply Static Routes check box option is selected, the network
administrator defines a series of static IP routes that are added to
the routing table of the remote access server when a connection is
made. This setting is designed for use with demand-dial routing.</p>

<p>
<div class="note"><blockquote><b>NOTE</b><hr>
If a Windows 2000 remote access server is a
member of a Windows燦T 4.0 domain or a Windows 2000 mixed-mode domain,
only the Remote Access Permission (Allow Access and Deny Access
options) and Callback Options dial-in settings are available. You can
also use the User Manager for Domains tool on Windows燦T servers to
grant or deny dial-in access and set callback options. When a Windows NT 4.0 remote access server uses a native-mode domain
to obtain the dial-in properties of a user account, the Control Access
Through Remote Access Policy option is interpreted as Deny Access. Callback
settings are interpreted correctly.
</blockquote></div>
</p>

<A NAME="471"><H2>Creating a Policy and Its Conditions in Routing and Remote Access</H2></A>

<p>Remote access policy conditions are assigned attributes that are
compared to the settings of a connection attempt. If there are multiple
conditions in a policy, all of the conditions must correspond to the settings of the connection
attempt to result in a match. The condition attributes you can set are described
in the following list:</p>

<ul>
<p><li><b>Called-Station-ID.</b> A character string identifying the
phone number of the network access server (NAS). The phone line,
hardware, and hardware driver must support reception of caller ID data.
You can use a wildcard (asterisk) in this attribute, but the attribute
is not used by Windows 2000 IAS.</li></p>

<p><li><b>Calling-Station-ID.</b> A character string identifying
the phone number used by the caller. You can use a wildcard (asterisk)
in this attribute, but the attribute is not used by Windows 2000
IAS.</li></p>

<p><li><b>Client-Friendly-Name.</b> A character string identifying
the name of the RADIUS client computer requesting authentication. You can use a
wildcard (asterisk) in this attribute, and the attribute is used by
Windows 2000 IAS.</li></p>

<p><li><b>Client-IP-Address.</b> A character string identifying the
IP address of the RADIUS client. You can use a wildcard (asterisk) in this attribute,
and the attribute is used by Windows 2000 IAS.</li></p>

<p><li><b>Client-Vendor.</b> A character string identifying the
vendor of the network access server (NAS) that is requesting
authentication. The Windows 2000 remote access server is the Microsoft
RAS NAS manufacturer. This attribute configures separate policies for
different NAS manufacturers who are RADIUS clients to an IAS server.
Because this attribute is designed for the IAS server, be sure that you
also configure the NAS as a RADIUS client on the IAS server.</li></p>

<p><li><b>Day-And-Time-Restrictions.</b> The day of the week and
the time of day for the server's connection attempt. You cannot use a wildcard
(asterisk) in this attribute, and the attribute is not used by Windows
2000 IAS.</li></p>

<p><li><b>Framed-Protocol.</b> The type of framing for incoming
packets. Examples are PPP, AppleTalk, Serial Line Internet Protocol
(SLIP), Frame Relay, and X.25. You cannot use a wildcard (asterisk) in
this attribute, but the attribute is used by Windows 2000 IAS.</li></p>

<p><li><b>NAS-Identifier.</b> A character string identifying the
NAS from which the request originated. You can use a wildcard (asterisk) in this
attribute, but the attribute is not used by Windows 2000 IAS.</li></p>

<p><li><b>NAS-IP-Address.</b> A character string identifying the IP
address of the NAS. You can use a wildcard (asterisk) in this
attribute, and the attribute is used by Windows 2000 IAS.</li></p>

<p><li><b>NAS-Port-Type.</b> The type of media used by the caller.
Examples are analog phone lines (Async), ISDN, and VPNs. You cannot use
a wildcard (asterisk) in this attribute, and the attribute is not used
by Windows 2000 IAS.</li></p>

<p><li><b>Service-Type.</b> The type of service being requested.
Examples include framed (such as PPP connections) and login (such as
Telnet connections). For more information on RADIUS service types, see
RFC 2138. You cannot use a wildcard (asterisk) in this attribute, but
the attribute is used by Windows 2000 IAS.</li></p>

<p><li><b>Tunnel-Type.</b> The types of Tunnel protocols to be
used. Examples include Ascend Tunnel Management Protocol (ATMP), Layer
Two Tunneling Protocol (L2TP), Point-to-Point Tunneling Protocol
(PPTP), and Virtual Tunneling Protocol (VTP).</li></p>

<p><li><b>Windows Groups.</b> The names of the Windows 2000 groups
to which the user attempting the connection belongs. For a native
domain-based remote access or IAS server, use universal groups. There
is no condition attribute for a specific user name. You cannot use a
wildcard (asterisk) in this attribute, and the attribute is not used by
Windows 2000 IAS.</li></p>
</ul>


<p>You can create a remote access policy and an associated profile
under the Remote Access Policies node of the Routing And Remote Access console
tree. Right-click the Remote Access Policies node, and then click New
Remote Access Policy. In the Add Remote Access Policy dialog box, type
the name of the profile in the Policy Friendly Name text box, and then
click Next.</p>

<p>To configure a new condition, click the Add button, in the Select
Attribute dialog box, click the attribute that you want to add, and
then click Add. In the attribute dialog box, enter the information
required by the attribute, and then click OK.</p>

<p>In the Permissions section, if you want to grant access to these
users, click the Grant Remote Access Permission option, and if you want
to deny access to these users, click the Deny Remote Access Permission
option.</p>

<A NAME="472"><H3>Configuring Profile Settings</H3></A>

<p>The profile specifies what kind of access the user will be given if
the conditions match. This access will only be granted if the
connection attempt does not conflict with the settings of the user
account or the profile. There are six different tabs that can be used
to configure a profile:</p>

<ul>
<p><li><b>Dial-In Constraints.</b> These options include settings
for idle-time disconnect, maximum session time, day and time, phone
number, and media type (ISDN, VPN, etc.).</li></p>

<p><li><b>IP.</b> These settings configure client IP address
assignment and TCP/IP packet filtering. Separate filters can be defined
for inbound or outbound packets.</li></p>

<p><li><b>Multilink.</b> These settings configure multilink and
BAP. A line can be dropped if bandwidth drops below a certain level for
a given length of time. Multilink can also be set to require the use of
BAP.</li></p>

<p><li><b>Authentication.</b> These settings define the
authentication protocols that are allowed for connections using this
policy. The protocol selected must also be enabled in the server's
properties.</li></p>

<p><li><b>Encryption.</b> These four settings specify the level of
encryption. If you select <i>No Encryption,</i> no data encryption is
required. If No Encryption is the only option selected, you cannot
connect by using data encryption. If you select <i>Basic,</i> you can
use IPSec 56-bit DES or Microsoft Point-to-Point Encryption (MPPE) 40-bit data encryption. If you select <i>
Strong</i>, you can use IPSec 56-bit DES or MPPE 56-bit data
encryption. If you select <i>Strongest,</i> you can use IPSec triple
DES (3DES) or MPPE 128-bit encryption.</li></p>
</ul>


<p>
<div class="note"><blockquote><b>NOTE</b><hr>
The Strongest option is only available with
North American versions of Windows 2000.
</blockquote></div>
</p>

<ul>
<p><li><b>Advanced.</b> This tab allows for the configuration of
additional network parameters that could be sent from non_Microsoft
RADIUS servers.</li></p>
</ul>


<p>You can create a remote access profile from the Add Remote Access
Policy dialog box. To edit the policy's profile, click the Edit
Profile button. In the Edit Dial-In Profile dialog box, configure the
settings on any of the six tabs, and then click OK. Click OK to close
the Add Remote Access Policy dialog box.</p>

<p><img src="images/practic.JPG" width=68 height=54 border="0"></p>

<A NAME="473"><H2>Optional Practice: Creating a Remote Access Policy and Profile</H2></A>

<p>In this practice, you will create a user with dial-in capabilities.
You will then create a global group and add the user to the group.</p>

<p>
<div class="note"><blockquote><b>NOTE</b><hr>
To complete all the procedures in this practice,
you must have two computers.
</blockquote></div>
</p>


<p><li><b>To create a user with dial-in capabilities</b></li></p>
<ol>
<p><li>Log on to your domain as Administrator, and open Active
Directory Users and Computers.</li></p>

<p><li>In the console tree, right-click Users, point to New, and then
click User.</li></p>

<p><li>In the New Object - User dialog box, create a user named Rasuser
with no password and accept all default settings. Click Next twice, and
then click Finish.</li></p>

<p><li>In the details pane, double-click Rasuser.</li></p>

<p><li>In the Rasuser Properties dialog box, click the Dial-In tab.
Select Allow Access, and then click OK.</li></p>
</ol>

<p><li><b>To create a global group</b></li></p>
<ol>
<p><li>In the console tree, right-click Users, point to New, and then
click Group.</li></p>

<p><li>In the New Object - Group dialog box, enter the name
Rasgroup. Ensure that Global is selected in the Group Scope section, then
click OK.</li></p>

<p><li>In the details pane, right-click Rasuser, and then click Add
Members To A Group.</li></p>

<p><li>In the Select Group dialog box, select Rasgroup, and then click
OK.</li></p>

<p><li>Click OK to close the message box that informs you the operation
was successful.</li></p>
</ol>

<p><li><b>To test the dial-in configuration</b></li></p>


<p>
<div class="note"><blockquote><b>NOTE</b><hr>
This is one of the procedures that requires two
computers.
</blockquote></div>
</p>

<ol>
<p><li>Right-click the My Network Places icon and click Properties.
Double-click the Virtual Private Network icon.</li></p>

<p><li>Connect as Rasuser, with no password.</li></p>

<p><li>Close the connection.</li></p>
</ol>

<p><li><b>To configure a user's dial-in permissions to control
access through remote access policy</b></li></p>
<ol>
<p><li>In the Active Directory Users And Computers window, double-click
Rasuser.</li></p>

<p><li>In the Rasuser Properties dialog box, click the Dial-In
tab.</li></p>

<p><li>Select the Control Access Through Remote Access Policy option,
and then click OK.</li></p>
</ol>

<p><li><b>To test the dial-in configuration</b></li></p>


<p>
<div class="note"><blockquote><b>NOTE</b><hr>
This is one of the procedures that requires two
computers.
</blockquote></div>
</p>

<ol>
<p><li>Double-click the Virtual Private Network icon in the Network And
Dial-Up Connections window.</li></p>

<p><li>Connect using Rasuser and no password.</li></p>

<p>The Connect Virtual Private Connection dialog box appears informing
you that the connection fails.</p>
</ol>
<p>
<div class="note"><blockquote><b>NOTE</b><hr>
The default remote access policy denies access
to all attempts. To fix this, either control access through user
settings or create another policy that grants access to this
user.
</blockquote></div>
</p>

<ol>
<p><li value="3">Click Cancel.</li></p>
</ol>

<p><li><b>To add a new policy that grants access to users in the
Rasgroup</b></li></p>
<ol>
<p><li>In the Routing And Remote Access window's console tree,
right-click Remote Access Policies, and select New Remote Access
Policy.</li></p>

<p><li>On the Policy Name page, type <b>Allow Rasgroup access</b> in
the Policy Friendly Name box. Click Next.</li></p>

<p><li>On the Conditions page, click Add.</li></p>

<p><li>In the Select Attribute dialog box, click Windows-Groups, and
then click Add.</li></p>

<p><li>In the Groups dialog box, click Add. In the Select Groups dialog
box, select Rasgroup and click Add.</li></p>

<p><li>Click OK twice.</li></p>

<p><li>On the Conditions page, click Next.</li></p>

<p><li>On the Permissions page, select the Grant Remote Access
Permission option, and then click Next.</li></p>

<p><li>On the User Profile page, click Finish.</li></p>

<p><li>In the details pane, right-click the new policy and select Move
Up.</li></p>
</ol>
<p><li><b>To test the dial-in configuration</b></li></p>


<p>
<div class="note"><blockquote><b>NOTE</b><hr>
This is one of the procedures that requires two
computers.
</blockquote></div>
</p>

<ol>
<p><li>Double-click the Virtual Private Connection icon in the Network
And Dial-Up Connections window.</li></p>

<p><li>Connect using Rasuser and no password.</li></p>

<p>The connection succeeds.</p>
</ol>
<p>
<div class="note"><blockquote><b>NOTE</b><hr>
Dial-in permissions of the user override the
remote access policy permissions.
</blockquote></div>
</p>

<ol>
<p><li value="3">Close all open windows and log off.</li></p>
</ol>

<A NAME="474"><H2>Lesson Summary</H2></A>

<p>When you create a remote access policy, you must configure the
dial-in settings for users, create a policy and its conditions, and
edit the policy's profile. You do not have to complete these in any
order or at the same time. To configure a user's dial-in settings
on a stand-alone server, use the dial-in settings found on the Dial-In
tab of the Properties dialog box for a user account in the Users
folder. To configure a user's dial-in settings on a server using
Active Directory technology, the dial-in settings are found on the
Dial-In tab of the Properties dialog box for a user account in the
Active Directory Users And Computers window.</p>

<p>You can create a remote access policy and an associated profile
under the Remote Access Policies node of the Routing And Remote Access console
tree. In the If A User Matches The Specified Conditions section, if you want
to grant access to these users, click the Grant Remote Access
Permission option, and if you want to deny access to these users, click
the Deny Remote Access Permission option. Finally, you edit the
user's policy's profile. The profile specifies what kind of
access the user will be given if the conditions match. This access will
only be granted if the connection attempt does not conflict with the
settings of the user account or the profile.</p>

</BODY>
</HTML>



