<!DOCTYPE html SYSTEM "msxhtml1-strict.dtd">
<html lang="en" xml:lang="en">
<head>
<link rel="stylesheet" type="text/css" href="styles.css" />
<script type="text/javascript" language="JavaScript" src="expando.js"></script>
<title>Lesson 9: Managing Disk Quotas</title>


</head>
<body>
<div class="prevnext"><p><a href="ch02i.htm">3</a> <a href="ch02k.htm">4</a></p></div>

<h1><a name="241">Lesson 9: Managing Disk Quotas</a></h1>


<p>While it may sound like a fine idea to allow users to have all the storage space they desire, this practice can start increasing the total cost of ownership (TCO) of your computer systems. In large distributed environments in particular it may become important to manage the amount of disk storage users can utilize.</p>

<p>When you must manage storage growth in distributed environments, you use disk quotas. <i>Disk quotas</i> allow you to allocate disk space usage based on the files and folders that users own. You can set disk quotas, quota thresholds, and quota limits for all users and for individual users. You can also monitor the amount of hard disk space that users have and the amount that they have left against their quota.</p>
<hr />
<p><b>After this lesson, you will be able to</b></p>

<ul>
<li>Configure and manage disk quotas</li>
</ul>
<p><b>Estimated lesson time: 20 minutes</b></p>
<hr />
<h2><a name="242">Understanding Windows 2000 Disk Quota Management</a></h2>


<p>Windows 2000 disk quotas track and control disk usage on a per-user, per-volume basis. Windows 2000 tracks disk quotas for each volume, even if the volumes are on the same hard disk. Because quotas are tracked on a per-user basis, every user's disk space is tracked regardless of the folder in which the user stores files. Table 2.10 describes the characteristics of Windows 2000 Professional disk quotas.</p>

<p><b>Table  2.10 </b><i> Disk Quota Characteristics and Descriptions</i></p>
<table>
<tr>
<th>Characteristic </th><th>Description</th>
</tr>
<tr>
<td>Disk usage is based on file and folder ownership</td><td>Windows 2000 Professional calculates disk space 
. usage based on the files and folders that users own. When a user copies or saves a new file to an NTFS volume or takes ownership of a file on an NTFS volume, Windows 2000 charges the disk space for the file against the user's quota limit.</td>
</tr>
<tr>
<td>Disk quotas do not use compression.</td><td>Windows 2000 Professional ignores compression 
 when it calculates hard disk space usage. Usage totals are based on uncompressed file sizes, regardless of how much hard disk space is actually used. This is done partially because file compression produces different degrees of compression for different types of files. Different uncompressed file types that are the same size might end up to be different sizes when they are compressed</td>
</tr>
<tr>
<td>Free space for applications is based on quota limit.</td><td>When you enable disk quotas, the free space that 
 Windows 2000 Professional reports to applications for the volume is the amount of space remaining within the user's disk quota limit</td>
</tr>
</table>


<blockquote><div class="note"><b>NOTE</b><hr />
Disk quotas can be applied only to Windows 2000 NTFS volumes.
</div></blockquote>

<p>You use disk quotas to monitor and control hard disk space usage. System administrators can do the following:</p>

<ul>
<li>Set a disk quota limit to specify the amount of disk space for each user.</li>

<li>Set a disk quota warning to specify when Windows 2000 should log an event, indicating that the user is nearing his or her limit.</li>

<li>Enforce disk quota limits and deny users access if they exceed their limit, or allow them continued access.</li>

<li>Log an event when a user exceeds a specified disk space threshold. The threshold could be when users exceed their quota limit, or when they exceed their warning level.</li>
</ul>



<p>After you enable disk quotas for a volume, Windows 2000 collects disk usage data for all users who own files and folders on the volume. This allows you to monitor volume usage on a per-user basis. By default, only members of the Administrators group can view and change quota settings. However, you can allow users to view quota settings.</p>

<h2><a name="243">Setting Disk Quotas</a></h2>


<p>You can enable disk quotas and enforce disk quota warnings and limits for all users or for individual users.</p>

<p>If you want to enable disk quotas, open the Properties dialog box for a disk, click the Quota tab, and configure the options that are described in Table 2.11 and displayed in Figure 2.16.</p>

<p><b>Table  2.11 </b><i> Quota Tab Options</i></p>
<table>
<tr>
<th>Option</th><th> Description</th>
</tr>
 <tr>
 <td>Enable Quota Management</td><td>Select this check box to enable disk quota 
 management.</td>
 </tr>
 <tr>
 <td>Deny Disk Space To Users Exceeding Quota Limit</td><td>Select this check box so that when users exceed 
 their hard disk space allocation, they receive an &quot;out of disk space&quot; message and cannot write to the volume.</td>
 </tr>
 <tr>
 <td>Do Not Limit Disk Usage </td><td>Click this option when you don't want to limit the amount of hard disk space for users.</td>
 </tr>
 <tr>
 <td>Limit Disk Space To</td><td> Configure the amount of disk space that users 
 can have.</td>
 </tr>
 <tr>
 <td>Set Warning Level To</td><td> Configure the amount of disk space that users can fill before Windows 2000 logs an event indicating that a user is nearing his or her limit.</td>
 </tr>
 <tr>
 <td>Quota Entries</td><td>Click this button to open the Quota Entries For dialog box, where you can add a new entry, delete an entry, and view the per-user quota information.</td>
 </tr>
</table>


<div class="figure">
<img src="images/F02cc16.JPG" />
<div class="caption"><b>Figure 2.16</b> <i>The Quota tab of the Properties dialog box for a disk</i></div>
</div>


<p><b>You can enforce identical quota limits for all users as follows:</b></p>

<ol>
<li>In the Limit Disk Space To box and the Set Warning Level To box, enter the values for the limit and warning level that you want to set.</li>

<li>Select the Deny Disk Space To Users Exceeding Quota Limit check box.</li>
</ol>

<p>Windows 2000 will monitor usage and will not allow users to create files or folders on the volume when they exceed the limit.</p>

<h2><a name="244">Determining the Status of Disk Quotas</a></h2>


<p>You can determine the status of disk quotas in the Properties dialog box for a disk by checking the traffic light icon and by reading the status message to its right (see Figure 2.16).</p>

<ul>
<li>A red traffic light indicates that disk quotas are disabled.</li>

<li>A yellow traffic light indicates that Windows 2000 is rebuilding disk quota information.</li>

<li>A green traffic light indicates that the disk quota system is active.</li>
</ul>



<div class="figure">
<a href="javascript:fullSize('F02cc17x.htm')"><img src="images/F02cc17.JPG" /></a>
<div class="caption"><b>Figure 2.17</b> <i>The Quota Entries for Local Disk window</i>
</div>
</div>


<p><b>You can enforce different quota limits for one or more specific users, 
as follows:</b></p>

<ol>
<li>Open the Properties dialog box for a disk, click the Quota tab, and then click the Quota Entries button.</li>

<li>In the Quota Entries For window, shown in Figure 2.17, double-click the user account for which you want to set a disk quota limit, or create an entry (in which you will establish a disk quota for a particular user) by clicking New Quota Entry on the Quota menu.</li>

<li>Configure the disk space limit and the warning level for the user. Do the same for other users according to the individual warning levels you want to assign to them.</li>
</ol>

<h2><a name="245">Monitoring Disk Quotas</a></h2>


<p>You use the Quota Entries For window to monitor usage for all users who have copied, saved, or taken ownership of files and folders on the volume. Windows 2000 will scan the volume and monitor the amount of disk space that each user occupies. Use the Quota Entries For window to view the following:</p>

<ul>
<li>The amount of hard disk space that each user occupies</li>

<li>Users who are over their quota-warning threshold, which is signified by a yellow triangle</li>

<li>Users who are over their quota limit, which is signified by a red circle</li>

<li>The warning threshold and the disk quota limit for each user</li>
</ul>



<h2><a name="246">Determining Best Uses of Disk Quotas</a></h2>


<p>The following are general guidelines for using disk quotas:</p>

<ul>
<li>If you enable disk quota settings on the volume where Windows 2000 is installed and your user account has a disk quota limit, log on as Administrator to install additional Windows 2000 components and applications. This way, Windows 2000 won't count the disk space that you use to install applications against the disk quota allowance for your user account.</li>

<li>You can monitor hard disk usage and generate hard disk usage information without preventing users from saving data. To do so, clear the Deny Disk Space To Users Exceeding Quota Limit check box when you enable disk quotas.</li>

<li>Set more restrictive default limits for all user accounts, and then modify the limits to allow more disk space to users who work with large files.</li>

<li>If computers running Windows 2000 Professional are shared by more than one user, set disk quota limits on computer volumes so that disk space is shared by all users who share the computer.</li>

<li>Generally, you should set disk quotas on shared volumes to limit storage for users. Set disk quotas on public folders and network servers to ensure that users share hard disk space appropriately. When storage resources are scarce, you might want to set disk quotas on all shared hard disk space.</li>

<li>Delete disk quota entries for a user who no longer stores files on a volume. You can delete quota entries for a user account only after all files that the user owns have been removed from the volume or another user has taken ownership of the files.</li>

<li>Before you can delete a quota entry for a user account, you or the user must remove all files that the user owns from the volume, or another user must take ownership of the files.</li>
</ul>



<p><img src="images/practice.jpg" /></p><h2><a name="247">Practice: Enabling and Disabling Disk Quotas</a></h2>


<p>In this practice, you configure default quota management settings to limit the amount of data that users can store on drive C (their hard disk drive). Next, you configure a custom quota setting for a user account. You increase the amount of data the user can store on drive C to 20 MB with a warning level set to 16. Finally, you turn off quota management for drive C.</p>

<blockquote><div class="note"><b>NOTE</b><hr />
If you didn't install Windows 2000 Professional on drive C, substitute the NTFS partition on which you did install Windows 2000 Professional whenever drive C is referred to in this practice.
</div></blockquote>

<h3><a name="248">Exercise 1: Configuring Quota Management Settings</a></h3>


<p>In this exercise, you configure the quota management settings for drive C to limit the data that users can store on the volume. You can then configure custom quota settings for a user account.</p>

<p><b>To configure default quota management settings</b></p>

<ol>
<li>Log on as Administrator and create a user account, User5. Assign the password of <i>password</i> to the account<i>,</i> and clear the User Must Change Password At Next Logon check box.</li>

<li>In Windows Explorer, right-click drive C, and then click Properties.

<p>Windows 2000 displays the Local Disk (C:) Properties dialog box with the General tab active.</p></li>


<li>Click the Quota tab.


<p>Notice that disk quotas are disabled by default.</p></li>


<li>On the Quota tab, click the Enable Quota Management check box.


<p>What is the default disk space limit for new users?</p></li>


<li>Select Deny Disk Space To Users Exceeding Quota Limit.</li>

<li>Click Limit Disk Space To.</li>

<li>Type <b>10</b> in the Limit Disk Space To box and then type <b>6</b> in the Set Warning Level To box.


<p>Notice the default unit size is KB.</p></li>


<li>Change the unit sizes to MB, and then click Apply.


<p>Windows 2000 displays the Disk Quota message box, warning you that the volume will be rescanned to update disk usage statistics if you enable quotas.</p></li>


<li>Click OK to enable disk quotas.</li>
</ol>

<p><b>To configure quota management settings for a user</b></p>

<ol>
<li>On the Quota tab of the Local Disk (C:) Properties dialog box, click the Quota Entries button.


<p>Windows 2000 displays the Quota Entries For Local Disk (C:) window.</p>

<p>Are any user accounts listed? Why or why not?</p>

<p><a href="chaaa.htm#q03">Answer</a></p></li>


<li>On the Quota menu, click New Quota Entry.


<p>Windows 2000 displays the Select Users dialog box.</p></li>


<li>In the Look In box, select PRO1.


<blockquote><div class="note"><b>NOTE</b><hr />
If you didn't name your computer PRO1 or if your computer is part of a domain, select the appropriate computer or domain name.
</div></blockquote></li>

<li>At the top of the dialog box, under Name, select User5, and then click Add.


<p>The user name appears in the Name list at the bottom of the dialog box.</p></li>


<li>Click OK.


<p>Windows 2000 displays the Add New Quota Entry dialog box.</p>

<p>What are the default settings for the user you just set a quota limit for?</p>
<p><a href="chaaa.htm#q04">Answer</a></p></li>


<li>Increase the amount of data that User5 can store on drive C: by changing the Limit Disk Space To option to 20 MB and the Set Warning Level To option to 16 MB.</li>

<li>Click OK to return to the Quota Entries window.</li>

<li>Close the Quota Entries window.</li>

<li>Click OK to close the Local Disk (C:) Properties dialog box.</li>

<li>Log off.</li>
</ol>

<p><b>To test quota management settings</b></p>

<ol>
<li>Log on as User5 with a password of <i>password.</i></li>

<li>Start Windows Explorer and create a User5 folder on drive C.</li>

<li>Insert into your CD-ROM drive the CD-ROM you used to install Windows 2000 Professional.</li>

<li>If a dialog box appears as a result of inserting the CD-ROM, close it.</li>

<li>Copy the i386 folder from your CD-ROM to the User5 folder.


<p>Windows 2000 Professional begins copying files from the i386 folder 
on the CD-ROM to a new i386 folder in the User5 folder on drive C. After copying several files, however, Windows 2000 displays the Error Copying File Or Folder dialog box, indicating that there isn't enough room on the disk.</p>

<p>Why did you get this error message?</p>

<p><a href="chaaa.htm#q05">Answer</a></p></li>


<li>Click OK to close the dialog box.</li>

<li>Right-click the User5 folder and then click Properties.


<p>Notice that the Size On Disk value is slightly less than your quota limit of 20 MB.</p></li>


<li>Close all open windows and log off.</li>
</ol>

<h3><a name="249">Exercise 2: Disabling Quota Management</a></h3>


<p>In this exercise, you disable quota management settings for drive C.</p>

<ol>
<li>Log on as Administrator and start Windows Explorer.</li>

<li>Delete the User5 folder.</li>

<li>Right-click drive C, and then click Properties.


<p>Windows 2000 displays the Local Disk (C:) Properties dialog box with the General tab active.</p></li>


<li>Click the Quota tab.</li>

<li>On the Quota tab, clear the Enable Quota Management check box.


<p>Notice that all quota settings for drive C are no longer available.</p></li>


<li>Click Apply.


<p>Windows 2000 displays the Disk Quota message box, warning you that if you disable quotas, the volume will be rescanned if you enable them later.</p></li>


<li>Click OK to close the Disk Quota message box.</li>

<li>Click OK to close the Local Disk (C:) Properties dialog box.</li>

<li>Close all applications.</li>
</ol>

<h2><a name="250">Lesson Summary</a></h2>


<p>In this lesson, you learned that you use disk quotas to allocate disk space usage. You can set disk quotas, quota thresholds, and quota limits for all users and for individual users. You can also monitor the amount of hard disk space that users have and the amount that they have left against their quota. You also learned that Windows 2000 ignores compression when it calculates hard disk space usage and that you can apply disk quotas only to Windows 2000 NTFS volumes.</p>

<p>Windows 2000 disk quotas track and control disk usage on a per-user, per-volume basis. Windows 2000 tracks disk quotas for each volume, even if the volumes are on the same hard disk. Because quotas are tracked on a per-user basis, every user's disk space is tracked regardless of the folder in which the user stores files.</p>

</body>
</html>



