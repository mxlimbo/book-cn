<!DOCTYPE html SYSTEM "msxhtml1-strict.dtd">
<html lang="en" xml:lang="en">
<head>
<link rel="stylesheet" type="text/css" href="styles.css" />
<script type="text/javascript" language="JavaScript" src="expando.js"></script>
<title>Lesson 2: Microsoft TCP/IP Configuration</title>


</head>
<body>
<div class="prevnext"><p><a href="ch09b.htm">3</a> <a href="ch09d.htm">4</a></p></div>

<h1><a name="676">Lesson 2: Microsoft TCP/IP Configuration</a></h1>


<p>This lesson describes the procedure for configuring Microsoft TCP/IP. Follow this procedure if you have not previously installed the TCP/IP network protocol on the computer(s) you are using to perform the practice procedures for this course.</p>

<hr />
<p><b>After this lesson, you will be able to</b></p>
<ul>
<li>Set TCP/IP configuration parameters</li>
<li>Identify some common TCP/IP utilities</li>
<li>Describe packet filtering</li>
</ul>
<p><b>Estimated lesson time: 15 minutes</b></p>
<hr />

<h2><a name="677">Configuring TCP/IP</a></h2>


<p>If you are implementing TCP/IP for the first time on your network, you should construct a detailed plan for IP addressing on your network. Your TCP/IP network addressing scheme can include either public or private addresses. You can use either public or private addresses if your network is not connected to the Internet. However, you will most likely implement some public IP addresses for Internet interconnectivity support. This is because devices connected directly to the Internet require a public IP address. InterNIC assigns public addresses to Internet service providers (ISPs). ISPs, in turn, assign IP addresses to organizations when network connectivity is purchased. IP addresses assigned this way are guaranteed to be unique and are programmed into Internet routers in order for traffic to reach the destination host.</p>

<p>Furthermore, you can implement a private addressing scheme to shield your internal addresses from the rest of the Internet by configuring private addresses on all the computers on your private network (or intranet). Private addresses are not reachable on the Internet because they are separate from public addresses, and they do not overlap.</p>
<p><img src="images/cdrom.jpg" /></p>
<blockquote><div class="note"><b>NOTE</b><hr />
Before you continue with the lesson, run the Ch09A.exe demonstration file located in the Media folder on the <i>Supplemental Course Materials</i> CD-ROM that accompanies this book. The file provides an overview of installing the TCP/IP protocol.
</div></blockquote>

<p>You can assign IP addresses in Windows 2000 dynamically using Dynamic Host Configuration Protocol (DHCP), as well as Automatic Private IP Addressing (see <a href="ch05a.htm">Chapter 5</a>, &quot;Managing Network Protocols and Services&quot; for more details). You can also configure TCP/IP manually. You configure TCP/IP on a particular computer based on that computer's function. For example, servers in a client/server relationship within an organization should be assigned an IP address manually. However, you can configure TCP/IP dynamically through a DHCP server for the majority of clients on a network.</p>

<h3><a name="678">Dynamic Configuration</a></h3>


<p>Windows 2000 computers attempt to obtain the TCP/IP configuration from a DHCP server on your network by default, as illustrated in Figure 9.7. If a static TCP/IP configuration is currently implemented on a computer, you can implement a dynamic TCP/IP configuration.</p>

<p><b>Follow these steps to implement a dynamic TCP/IP configuration:</b></p>

<ol>
<li>Click Start, point to Settings, and then click Network And Dial-Up Connections.</li>
<li>Right-click the Local Area Connection, and then click Properties.


<div class="figure">
<img src="images/F09cc07.JPG" />
<div class="caption"><b>Figure 9.7</b> <i>Configuring your computer to obtain TCP/IP settings automatically</i></div></div>
</li>

<li>On the General tab, click Internet Protocol (TCP/IP), and then click Properties.
<p>For other types of connections, click the Networking tab.</p></li>
<li>Click Obtain An IP Address Automatically, and then click OK.</li>
</ol>

<h3><a name="679">Manual Configuration</a></h3>


<p>Some servers, such as DHCP, DNS, and WINS servers, should be assigned an IP address manually. If you do not have a DHCP server on your network, you must configure TCP/IP computers manually to use a static IP address.</p>

<p><b>Follow these steps to configure a TCP/IP computer to use static addressing:</b></p>

<ol>
<li>Click Start, point to Settings, and then click Network And Dial-Up Connections.</li>
<li>Right-click Local Area Connection, and then click Properties.</li>
<li>On the General tab, click Internet Protocol (TCP/IP), and then click Properties.</li>
<li>Select Use The Following IP Address.</li>
</ol>

<p>You will then have to type in an IP, subnet mask, and default gateway address. If your network has a DNS server, you can set up your computer to use DNS.</p>

<p><b>Follow these steps to set up your computer to use DNS:</b></p>

<ol>
<li>Select Use The Following DNS Server Addresses.</li>

<li>In Preferred DNS Server and Alternate DNS Server, type the primary and secondary DNS server addresses, as illustrated in Figure 9.8.</li>
</ol>

<div class="figure">
<img src="images/F09cc08.JPG" />
<div class="caption"><b>Figure 9.8</b> <i>Manually configuring TCP/IP settings on your computer</i></div></div>


<p>You can also configure additional IP addresses and default gateways by performing the following procedure.</p>

<p><b>Follow these steps to configure additional IP addresses and default gateways:</b></p>

<ol>
<li>In the Internet Protocol (TCP/IP) Properties dialog box, click Advanced.</li>
<li>On the IP Settings tab, in IP Addresses, click Add.</li>
<li>In IP Address And Subnet Mask, type an IP address and subnet mask, and then click Add.</li>
<li>Repeat steps 2 and 3 for each IP address you want to add, and then click OK.</li>
<li>On the IP Settings tab, in Default Gateways, click Add.</li>
<li>In Gateway And Metric, type the IP address of the default gateway and the metric, and then click Add.
<p>You can also type a metric value in Interface Metric to configure a custom metric for this connection.</p></li>
<li>Repeat steps 5 and 6 for each IP address you want to add, and then click OK.</li>
</ol>

<h3><a name="680">Automatic Private IP Address Assignment</a></h3>


<p>Another TCP/IP address configuration option is to use Automatic Private IP Addressing when DHCP is not available. In previous versions of Windows, IP address configuration could be performed either manually or dynamically through DHCP. If a client was not able to obtain an IP address from a DHCP server, network services for the client were unavailable. The Automatic Private IP Addressing feature of Windows 2000 automates the process of assigning an unused IP address in the event that DHCP is not available.</p>

<p>The Automatic Private IP Addressing address is selected from the Microsoft-reserved address block 169.254.0.0, with the subnet mask 255.255.0.0. When the Automatic Private IP Addressing feature of Windows 2000 is used, an address in the Microsoft-reserved IP addressing range from 169.254.0.1 through 169.254.255.254 is assigned to the client. The assigned IP address is used until a DHCP server is located. The subnet mask 255.255.0.0 is automatically used.</p>

<h2><a name="681">Testing TCP/IP with Ipconfig and Ping</a></h2>


<p>You should always verify and test your TCP/IP configuration to make sure your computer can connect to other TCP/IP hosts and networks. You can perform basic TCP/IP configuration testing using Ipconfig and ping utilities.</p>

<p>With Ipconfig, you verify the TCP/IP configuration parameters on a host, including the IP address, subnet mask, and default gateway, from a command prompt. This is useful in determining whether the configuration is initialized, or if a duplicate IP address is configured.</p>

<p><b>Follow these steps to use Ipconfig from a command prompt:</b></p>

<ol>
<li>Open a command prompt.</li>
<li>When the command prompt is displayed, type <b>Ipconfig</b> and then press Enter.
<p>TCP/IP configuration information is displayed, as illustrated in Figure 9.9.</p></li>
</ol>

<div class="figure">
<a href="javascript:fullSize('F09cc09x.htm')"><img src="images/F09cc09.JPG" /></a>
<div class="caption"><b>Figure 9.9</b> <i>Using Ipconfig to display TCP/IP configuration information</i>
</div>
</div>


<p>After you verify the configuration with the Ipconfig utility, you can use the ping utility to test connectivity. The ping utility is a diagnostic tool that tests TCP/IP configurations and diagnoses connection failures. Ping uses the Internet Control Message Protocol (ICMP) Echo Request and Echo Reply messages to determine whether a particular TCP/IP host is available and functional. Like the Ipconfig utility, the ping utility is executed at the command prompt. The command syntax is:</p>

<div class="code">
<pre>
Ping IP_Address
</pre>
</div>

<p>If ping is successful, a message appears that is similar to that shown in 
Figure 9.10.</p>

<div class="figure">
<a href="javascript:fullSize('F09cc10x.htm')"><img src="images/F09cc10.JPG" /></a>
<div class="caption"><b>Figure 9.10</b> <i>Reply messages displayed by the ping utility</i>
</div>
</div>


<h2><a name="682">Configuring Packet Filters</a></h2>


<p>You can use IP packet filtering to trigger security negotiations for a communication based on the source, destination, and type of IP traffic. This allows you to define which specific IP and IPX traffic triggers will be secured, blocked, or allowed to pass through a network unfiltered.</p>

<p>For example, you can limit the type of access allowed to and from the network to restrict traffic to desired systems. You should make sure that you do not configure packet filters that are too restrictive, impairing the functionality of useful protocols on the computer. For example, if a computer running Windows 2000 is also running Internet Information Services (IIS) as a Web server, and packet filters are defined so that only Web-based traffic is allowed, you cannot use ping (which uses ICMP Echo Requests and Echo Replies) to perform basic IP troubleshooting.</p>

<p>You can configure the TCP/IP protocol to filter IP packets based on the following:</p>

<ul>
<li>TCP port number</li>
<li>UDP port number</li>
<li>IP protocol number</li>
</ul>

<p><img src="images/practice.jpg" /></p><h2><a name="683">Practice: Implementing IP Packet Filters</a></h2>


<p>In this practice, you implement TCP/IP packet filtering on a Windows 2000 Server computer for a LAN connection.</p>

<h3><a name="684">Exercise 1: Implementing TCP/IP Packet Filtering</a></h3>


<ol>
<li>On Server01, Click Start, point to Settings, and then click Network And Dial-Up Connections.</li>
<li>Right-click Local Area Connection and then click Properties. The Local Area Connection Properties dialog box appears.</li>
<li>Select Internet Protocol (TCP/IP), then click Properties. The Internet Protocol (TCP/IP) Properties dialog box appears.</li>
<li>Click Advanced.
<p>The Advanced TCP/IP Settings dialog box appears.</p></li>
<li>Click the Options tab, select TCP/IP Filtering, and then click Properties.
<p>The TCP/IP Filtering dialog box appears, as illustrated in Figure 9.11.</p></li>
</ol>

<div class="figure">
<a href="javascript:fullSize('F09cc11x.htm')"><img src="images/F09cc11.JPG" /></a>
<div class="caption"><b>Figure 9.11</b> <i>Setting TCP/IP packet filters in the TCP/IP Filtering dialog box</i>
</div>
</div>


<ol start="6">
<li>Click Enable TCP/IP Filtering (All Adapters).
<p>You can now add TCP, UDP, and IP protocol filtering by clicking the Permit Only option and then clicking Add below the TCP, UDP, or IP Protocols list.</p>
<p>Some TCP/IP filtering implementations you can use include:</p>
<ul>
<li>Enabling only TCP port 23, which filters all traffic except Telnet traffic</li>
<li>Enabling only TCP port 80 on a dedicated Web server to process only Web-based TCP traffic</li>
</ul>
<blockquote><div class="caution"><b>CAUTION</b><hr />
By enabling only TCP port 80, all network communications outside of port 80 will be disabled.
</div></blockquote></li>
<li>Click OK repeatedly to close all open dialog boxes.</li>
</ol>

<h2><a name="685">Lesson Summary</a></h2>


<p>By default, Windows 2000 installs the TCP/IP protocol if Setup detects a network adapter. You can also manually install TCP/IP. After you install TCP/IP on a computer, you can either configure it to obtain an IP address automatically or set configuration properties manually. You can also implement packet filters to limit the type of access allowed to and from the network to restrict traffic to desired systems.</p>

</body>
</html>



