<!DOCTYPE html SYSTEM "msxhtml1-strict.dtd">
<html lang="en" xml:lang="en">
<head>
<link rel="stylesheet" type="text/css" href="styles.css" />
<script type="text/javascript" language="JavaScript" src="expando.js"></script>
<title>Lesson 3: Configuring DNS</title>


</head>
<body>
<div class="prevnext"><p><a href="ch10c.htm">3</a> <a href="ch10e.htm">4</a></p></div>

<h1><a name="799">Lesson 3: Configuring DNS</a></h1>


<p>There are two ways to manage the Microsoft DNS server. Use the DNS Manager or manually edit the DNS configuration files. This lesson reviews the tools used to administer a DNS server.</p>

<hr />
<p><b>After this lesson, you will be able to</b></p>

<ul>
<li>Administer a DNS server</li>

<li>Create a zone file and populate it with resource records</li>
</ul>

<p><b>Estimated lesson time: 60 minutes</b></p>
<hr />

<h2><a name="800">Configuring DNS Server Properties</a></h2>


<p>The primary tool that you use to manage a Windows 2000 DNS server is the DNS console, which is illustrated in Figure 10.5. Because the DNS server has no initial information about a user's network, the DNS server installs as a caching-only name server for the Internet. This means that the DNS server contains only information on the Internet root servers. For most DNS server configurations, additional information must be supplied to obtain the preferred operation.</p>

<div class="figure">
<a href="javascript:fullSize('F10cc05x.htm')"><img src="images/F10cc05.JPG" /></a>
<div class="caption"><b>Figure 10.5</b> <i>DNS settings in Microsoft Management Console (MMC)</i>
</div>
</div>


<ul><li>Follow these steps to configure a new DNS server:</li></ul>

<ol>
<li>Click Start, point to Programs, point to Administrative Tools, and then click DNS.</li>

<li>Highlight your server. On the Action menu, click Configure The Server.</li>

<li>Follow the instructions in the Configure DNS Server Wizard.

<p>In the Configure DNS Server Wizard, you can create one or more forward lookup zones. The following are types of zones you can create:</p>

<ul>
<li><b>Active Directory-integrated.</b> Active Directory-integrated DNS enables Active Directory storage and replication of DNS zone databases. Zone data is stored as an Active Directory object and is replicated as part of domain replication.</li>

<li><b>Standard primary.</b> Standard primary zones are required to create and manage zones in your DNS name space if you are not using Active Directory services.</li>

<li><b>Standard secondary.</b> Standard secondary zones help balance the processing load of primary servers and provide fault tolerance.</li>
</ul></li>

<li>The next step in the New Zone Wizard is to create a forward or reverse lookup zone. If you select Forward lookup zone, you must provide a name for the new zone and then specify a zone file. If you select Reverse lookup zone, you must provide the network ID or zone name, and then specify a zone file.</li>

<li>Click Finish to close the wizard.</li>
</ol>

<h3><a name="801">Manually Configuring DNS</a></h3>


<p>The DNS server may be configured manually by editing files in the default installation path \<i>%systemroot%</i>\System32\Dns. Administration is identical to traditional DNS administration. The files can be modified using a text editor, as illustrated in Figure 10.6. The DNS service must then be stopped and restarted.</p>

<div class="figure">
<a href="javascript:fullSize('F10cc06x.htm')"><img src="images/F10cc06.JPG" /></a>
<div class="caption"><b>Figure 10.6</b> <i>Editing the Cache.dns file</i>
</div>
</div>

<h2><a name="802">Adding DNS Domains and Zones</a></h2>


<p>The first step in configuring the DNS server is to determine the hierarchy for your DNS domains and zones. Once the domain and zone information has been determined, this information must be entered into the DNS configuration using the DNS console.</p>

<h3><a name="803">Adding Primary or Secondary Zones</a></h3>


<p>You add primary and secondary zones through the DNS console, as illustrated in Figure 10.7. After you enter your zone information, DNS Manager constructs a default zone file name. If the zone file already exists in the DNS directory, DNS console automatically imports these records.</p>

<div class="figure">
<a href="javascript:fullSize('F10cc07x.htm')"><img src="images/F10cc07.JPG" /></a>
<div class="caption"><b>Figure 10.7</b> <i>Creating a new zone with the DNS console</i>
</div>
</div>


<p>A primary zone stores name-to-address mappings locally. When you configure a primary zone, you need no information other than the zone name.</p>

<p>Secondary zones obtain name-to-address mappings from a master server by zone transfer. When you configure a secondary zone, you must supply the names for the zone and master name server.</p>

<p>Once all zones have been added to the server, subdomains under the zones can be added. If multiple levels of subdomains are needed, create each successive subdomain. There is a key written to the DNS registry entry for each zone for which the DNS will be authoritative. The keys are located under HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\DNS\Zones.</p>

<p>Each zone has its own key that contains the name of the database file, which indicates whether the DNS server is a primary or secondary name server. For example, for the zone dev.volcano.com, there is the following registry entry: HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\DNS\Zones\dev.volcano.com.</p>

<h3><a name="804">Configuring Zone Properties</a></h3>


<p>After you have successfully added a zone, you can configure and modify the zone properties, which are described in Table 10.3.</p>

<p><b>Table 10.3</b> <i>Zone Properties</i></p>

<table>
<tr><th>Property</th><th>Description</th></tr>
<tr><td>General</td><td>Configures the zone file in which the resource records are stored and specifies whether this is a primary or secondary name server.</td></tr>
<tr><td>SOA record</td><td>Configures zone transfer information and the name server administrator mailbox.</td></tr>
<tr><td>Notify</td><td>Specifies the secondary servers to be alerted when the primary server database changes. Also, additional security can be applied to the name server by specifying that only the listed secondary servers can contact this server.</td></tr>
<tr><td>WINS lookup</td><td>Enables the name server to query WINS to resolve names. A list of WINS servers can be configured in this dialog. The WINS servers can be set on a per-name-server basis by selecting the Settings Only Affect Local Server check box. If this is not selected, secondary servers will also use the configured
WINS servers.</td></tr>
</table>

<p><img src="images/practice.jpg" /></p><h2><a name="805">Practice: Configuring a DNS Server</a></h2>


<p>In this practice, you configure the DNS server by adding a primary zone. Complete this practice from the DNS server computer.</p>
<p><img src="images/multi.jpg" /></p>
<blockquote><div class="note"><b>NOTE</b><hr />
Before you continue with the lesson, run the Ch10b.exe demonstration file located in the Media folder on the <i>Supplemental Course Materials</i> CD-ROM that accompanies this book. The file provides an overview of configuring the DNS Server service.
</div></blockquote>

<h3><a name="806">Exercise 1: Adding a Zone to a Server</a></h3>


<ol>
<li>Right-click your computer name, and then click New Zone. The New Zone wizard appears.</li>
<li>Click Next, select Standard Primary, and then click Next.</li>
<li>Select Forward Lookup Zone, and then click Next.</li>
<li>In the Name box, type <b>zone1.org</b> (where zone1.org is your zone name).</li>
<li>Click Create A New File With This File Name, and then click Next.
<p>Zone1.org.dns will be the file name (where zone1.org is your zone name).</p></li>
<li>Click Finish to create the new zone.
<p>The Forward Lookup Zones folder now contains your new zone, as illustrated in Figure 10.8.</p>

<div class="figure">
<a href="javascript:fullSize('F10cc08x.htm')"><img src="images/F10cc08.JPG" /></a>
<div class="caption"><b>Figure 10.8</b> <i>Zone added to the Forward Lookup Zones folder</i>
</div>
</div></li>
</ol>


<h2><a name="807">Adding Resource Records</a></h2>


<p>Once the zones and subdomains are configured, resource records can be added. To create a new host, right-click a zone or subdomain and then click New Host, as illustrated in Figure 10.9. Simply type the host name and click Add Host, and the host record is created.</p>

<div class="figure">
<a href="javascript:fullSize('F10cc09x.htm')"><img src="images/F10cc09.JPG" /></a>
<div class="caption"><b>Figure 10.9</b> <i>Adding a new host</i>
</div>
</div>


<p>To create a record of a different type, right-click a zone or subdomain and then click Other New Records. Next, select which resource record type to create. A dialog box displays various fields specific to record type, as illustrated in Figure 10.10.</p>

<div class="figure">
<img src="images/F10cc10.JPG" />
<div class="caption"><b>Figure 10.10</b> <i>Selecting a type of record to create</i></div></div>


<h2><a name="808">Configuring Reverse Lookup</a></h2>


<p>If you just have the host's IP address, and you want to be able to find the host's name, you need to use a reverse lookup zone. Like all zones, you must create the reverse lookup zone before it can be used.</p>

<p>You create a reverse lookup zone for each subnet on which the hosts in the DNS database reside. Adding a reverse lookup zone is procedurally identical to adding any other type of zone, except for the zone name which is reversed. For example, if a host has an address of 198.231.25.89, it would be represented in the in-addr.arpa domain as 89.25.231.198.in-addr.arpa. To enable this host to appear to a client who has the host's IP address, a zone would need to be added to the DNS for 25.231.198.in-addr.arpa. All PTR records for the network 198.231.25.0 would be added to this reverse lookup zone.</p>

<h2><a name="809">Lesson Summary</a></h2>


<p>The first step in configuring Windows 2000 DNS server is to determine the hierarchy for your DNS domains and zones. Using MMC, you can create Active Directory-integrated zones, standard primary zones, and standard secondary zones. Once the zones and subdomains are configured, resource records can be added.</p>

<p>If you want the ability to find a host name using only the host IP address, you need to create a reverse lookup zone for each subnet on which hosts in the DNS database reside.</p>

</body>
</html>



