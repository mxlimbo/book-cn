<!DOCTYPE html SYSTEM "msxhtml1-strict.dtd">
<html lang="en" xml:lang="en">
<head>
<link rel="stylesheet" type="text/css" href="styles.css" />
<script type="text/javascript" language="JavaScript" src="expando.js"></script>
<title>Lesson 4: Configuring, Monitoring, and Troubleshooting Driver Signing</title>


</head>
<body>
<div class="prevnext"><p><a href="ch06d.htm">3</a> <a href="ch06f.htm">4</a></p></div>

<h1><a name="503">Lesson 4: Configuring, Monitoring, and Troubleshooting Driver Signing</a></h1>


<p>The source of many system problems can be traced to inappropriate drivers being installed. To reduce the occurrence of such problems, Windows 2000 drivers and operating system files have been digitally signed by Microsoft to ensure their quality. In Device Manager, you can look at the Driver tab to verify that the digital signer of the installed driver is correct. Some applications overwrite existing operating files as part of their installation process. These files can cause system errors that are difficult to troubleshoot. Microsoft has greatly simplified the tracking and troubleshooting of altered files by signing the original operating system files and allowing you to easily verify these signatures.</p>

<hr />
<p><b>After this lesson, you will be able to</b></p>
<ul>
<li>Configure driver signing</li>
<li>Describe the System File Checker (SFC) utility and how to use it to verify and troubleshoot driver signing</li>
<li>Use the Windows Signature Verification utility (sigverif) to monitor and troubleshoot driver signing</li>
</ul>
<p><b>Estimated lesson time: 20 minutes</b></p>
<hr />

<h2><a name="504">Configuring Driver Signing</a></h2>


<p>You can configure how the system responds to unsigned files by opening System in Control Panel and clicking the Hardware tab. On the Hardware tab, in the Device Manager box, click Driver Signing to display the Driver Signing Options dialog box (see Figure 6.9).</p>

<div class="figure">
<img src="images/F06cc09.JPG" />
<div class="caption"><b>Figure 6.9</b> <i>Configuring driver signing</i></div></div>


<p>The following three settings are available to configure driver signing:</p>

<ul>
<li><b>Ignore.</b> This option allows any files to be installed regardless of their digital signature or the lack thereof.</li>

<li><b>Warn.</b> This option displays a warning message before allowing the installation of an unsigned file. This is the default option.</li>

<li><b>Block.</b> This option prevents the installation of unsigned files.</li>
</ul>



<p>If you are logged on as Administrator or as a member of the Administrators group, you can select Apply Setting As System Default to apply the driver signing configuration you set up to all users who log on to this computer.</p>

<h2><a name="505">Monitoring and Troubleshooting Driver Signing</a></h2>


<p>You can use Device Manager to track the digital signature of files. Windows 2000 also provides System File Checker (SFC), a command-line utility you can use to check the digital signature of files. The syntax of the SFC utility is as follows:</p>

<div class="code">
<pre>
Sfc [/scannow] [/scanonce] [/scanboot] [/cancel] [/quiet] 
[/enable] [/purgecache] [/cachesize=x]
</pre>
</div>

<p>Table 6.6 describes System File Checker's optional parameters.</p>

<p><b>Table 6.6</b><i> SFC's Parameters</i></p>

<table>
<tr><th>Parameter</th><th>Description</th></tr>
<tr><td>/scannow</td><td>Causes the SFC utility to scan all protected system files immediately</td></tr>
<tr><td>/scanonce</td><td>Causes the SFC utility to scan all protected system files at the next system restart</td></tr>
<tr><td>/scanboot</td><td>Causes the SFC utility to scan all protected system files every time the system
restarts</td></tr>
<tr><td>/cancel</td><td>Cancels all pending scans of protected system files</td></tr>
<tr><td>/quiet</td><td>Replaces all incorrect system file versions without prompting the user</td></tr>
<tr><td>/enable</td><td>Returns Windows File Protection to default operation, prompting the user to restore protected system files when files with incorrect versions are detected</td></tr>
<tr><td>/purgecache</td><td>Purges the file cache and scans all protected system files immediately</td></tr>
<tr><td>/cachesize=x</td><td>Sets the file cache size</td></tr>
</table>

<h2><a name="506">Using the File Signature Verification Utility</a></h2>


<p>Windows 2000 also provides a File Signature Verification utility. To use this utility, click Start, point to Run, type <b>sigverif</b> and press Enter. Once the File Signature Verification utility starts, you can click the Advanced button to configure it. The File Signature Verification utility allows you to view the file's name, its location, its modification date, its type, and its version number.</p>

<p><img src="images/practice.jpg" /></p>
<h2><a name="507">Practice: Using the Windows Signature Verification Utility</a></h2>


<p>In this practice, you use the File Signature Verification utility (sigverif) to monitor and troubleshoot driver signing on your system.</p>

<h3><a name="508">Exercise 1: Using the Signature Verification Utility</a></h3>

<ol>
<li>Click Start, point to Run, type <b>sigverif</b> and then press Enter.
<p>The File Signature Verification dialog box appears.</p></li>
<li>Click Advanced.
<p>The Advanced File Signature Verification Settings dialog box appears with the Search tab active. Notice that, by default, you are notified if any system files are not signed. Notice also that you can select Look For Other Files That Are Not Digitally Signed. This setting has the File Signature Verification utility verify nonsystem files to see whether they are digitally signed. If you select this option, you can specify the search parameters for the files you want checked.</p></li>
<li>Leave the default setting Notify Me If Any System Files Are Not Signed selected, and then click the Logging tab.
<p>Notice that, by default, the File Signature Verification utility saves the file signature verification to a log file, named Sigverif.txt.</p></li>
<li>Leave the default settings and click OK to close the Advanced File Signature Verification Settings dialog box.</li>
<li>Click Start.
<p>When the File Signature Verification utility completes its check, a Signature Verification Results window appears if there are files that are not signed. Otherwise you see a message box telling you that your files have been scanned and verified as being digitally signed.</p></li>
<li>If you get a Signature Verification Results window, review the results and then click Close to close the Signature Verification Results window. Otherwise, click OK to close the message box.</li>
<li>Click Close to exit the File Signature Verification utility.</li>
</ol>

<h2><a name="509">Lesson Summary</a></h2>


<p>In this lesson, you learned about the two utilities that verify the digital signatures of system files. One is a command-line utility, System File Checker (SFC). It has a number of optional parameters that let you control how and when it will run. The second utility is a Windows utility, File Signature Verification (sigverif). You practiced monitoring and troubleshooting digital signatures using the sigverif utility.</p>

</body>
</html>



