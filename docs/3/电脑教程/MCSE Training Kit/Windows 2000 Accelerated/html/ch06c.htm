<!DOCTYPE html SYSTEM "msxhtml1-strict.dtd">
<html lang="en" xml:lang="en">
<head>
<link rel="stylesheet" type="text/css" href="styles.css" />
<script type="text/javascript" language="JavaScript" src="expando.js"></script>
<title>Lesson 2: Backing Up Data</title>


</head>
<body>
<div class="prevnext"><p><a href="ch06b.htm">3</a> <a href="ch06d.htm">4</a></p></div>

<h1><a name="475">Lesson 2: Backing Up Data</a></h1>


<p>Backing up data is probably one of the most important tasks you can perform. You never know when some disaster may occur that will cause a hard disk to fail, potentially losing important data. However, backing up data manually can be a tiresome and boring task.</p>

<p>Windows 2000 provides the Backup wizard to automate the task of backing up data. You can even use Task Scheduler to automate the process so you don't even have to be present.</p>

<hr />
<p><b>After this lesson, you will be able to</b></p>
<ul>
<li>Identify the user rights and permissions that are necessary to back up and restore data</li>
<li>Identify the different backup types</li>
<li>Back up data at a computer and over the network</li>
<li>Schedule a backup job</li>
<li>Set backup options for the Backup wizard</li>
<li>Restore data, whether an entire volume or a single file</li>
<li>Configure and use offline folders and files</li>
</ul>
<p><b>Estimated lesson time: 40 minutes</b></p>
<hr />

<p>Windows 2000 contains the Windows 2000 Backup And Recovery Tools, which are shown in Figure 6.2. These tools includes the Backup wizard, a tool that allows you to easily back up and restore data.</p>

<p>You can use Backup to back up data manually or to schedule unattended backup jobs regularly. You can back up data to a file or to a tape. Files can be stored on hard disks, removable disks (such as Iomega Zip and Jaz drives), and recordable compact discs and optical drives.</p>

<p>To launch Backup, on the Start menu, point to Programs, point to Accessories, point to System Tools, and then click Backup. Or, on the Start menu, click Run, type <b>ntbackup</b> and then click OK.</p>

<div class="figure">
<a href="javascript:fullSize('F06cc02x.htm')"><img src="images/F06cc02.JPG" /></a>
<div class="caption"><b>Figure 6.2</b> <i>The Windows 2000 Backup And Recovery Tools</i>
</div>
</div>


<p>To successfully back up and restore data on a computer running Windows 2000 Professional, you must have the appropriate permissions and user rights, as described in the following list:</p>

<ul>
<li>All users can back up their own files and folders. They can also back up files for which they have the Read, Read &amp; Execute, Modify, or Full Control permission.</li>

<li>All users can restore files and folders for which they have the Write, Modify, or Full Control permission.</li>

<li>Members of the Administrators and Backup Operators groups can back up and restore all files (regardless of the assigned permissions). By default, members of these groups have the Backup Files and Directories, and the Restore Files and Directories user rights.</li>
</ul>



<h2><a name="476">Backup Types</a></h2>


<p>There are a variety of ways you can use the Backup wizard, depending on your needs. For example you may want to backup all the files on a daily basis or you may want to back up just the files that have changed since the last backup. The Backup wizard lets you select from five different types of backup operations (see Figure 6.3).</p>

<div class="figure">
<a href="javascript:fullSize('F06cc03x.htm')"><img src="images/F06cc03.JPG" /></a>
<div class="caption"><b>Figure 6.3</b> <i>Selecting the backup type</i>
</div>
</div>

<p>Some backup types use backup <i>markers,</i> also known as archive attributes, which mark files as having changed. When a file changes, an attribute is set on the file that indicates that the file has changed since the last backup. When you back up the file, this clears or resets the attribute.</p>

<h3><a name="477">Normal</a></h3>


<p>During a <i>normal</i> backup, all selected files and folders are backed up. A normal backup doesn't rely on markers to determine which files to back up. During a normal backup, any existing marks are cleared and each file is marked as having been backed up. Normal backups speed up the restore process because all of the backup files are marked as the most current and you don't need to restore multiple backup jobs with different dates to get all the data restored.</p>

<h3><a name="478">Copy</a></h3>


<p>During a <i>copy</i> backup, all selected files and folders are backed up. The Backup wizard neither looks for nor clears markers. Because other backup methods use the markers to determine which files should be backed up, use a copy backup if you don't want to clear markers and affect the other backup methods. For example, use a copy backup between a normal and an incremental backup to create an archival snapshot of network data.</p>

<h3><a name="479">Incremental</a></h3>


<p>During an <i>incremental</i> backup, only selected files and folders that have a marker are backed up, and then the markers are cleared. Because an incremental backup clears markers, if incremental backups were performed in a row on a file and nothing changed in the file, the file would not be backed up the second time.</p>

<h3><a name="480">Differential</a></h3>


<p>During a <i>differential</i> backup, only selected files and folders that have markers are backed up, but the backup doesn't clear markers. Because a differential backup doesn't clear markers, if two differential backups were performed in a row on a file and nothing changed in the file, the entire file would be backed up each time.</p>

<h3><a name="481">Daily</a></h3>


<p>During a <i>daily</i> backup, all selected files and folders that have changed during the day are backed up. The Backup wizard neither looks for nor clears markers. If you want to back up all files and folders that change during the day, use a daily backup.</p>

<h3><a name="482">Combining Backup Methods</a></h3>


<p>An effective backup strategy will likely use a combination of different backup methods. Some backup methods require more time to back up data but less time to restore data. Conversely, other backup methods require less time to back up data but more time to restore data. If you combine backup methods, markers are critical. Incremental and differential backup methods check for and rely on the markers.</p>

<p>The following are some examples of ways to combine backup methods:</p>

<ul>
<li><b>Normal and differential backups.</b> On Monday a normal backup is performed, and on Tuesday through Friday differential backups are performed. Differential backups don't clear markers, which means that each backup includes all changes made since Monday. If data becomes corrupt on Friday, you need to restore only the normal backup from Monday and the differential backup from Thursday. This strategy takes more time for backup but less time to restore.</li>

<li><b>Normal and incremental backups.</b> On Monday a normal backup is performed, and on Tuesday through Friday incremental backups are performed. Incremental backups clear markers, which means that each backup includes only the files that have changed since the previous backup. If data becomes corrupt on Friday, you must restore the normal backup from Monday and all incremental backups from Tuesday through Friday. This strategy takes less time for backup but more time to restore.</li>

<li><b>Normal, differential, and copy backups.</b> This strategy is the same as the first example that used normal and incremental backups, except that on Wednesday, you perform a copy backup. Copy backups include all selected files and do not clear markers or interrupt the usual backup schedule. Therefore, each differential backup includes all changes made since Monday. The copy backup done on Wednesday is not part of the Friday restore. Copy backups are helpful when you need to create a snapshot of your data.</li>
</ul>



<h2><a name="483">Performing Preliminary Tasks</a></h2>


<p>An important part of each backup job is performing the necessary preliminary tasks. One task that you must do is ensure that the files that you want to back up are closed. You should notify users to close files before you begin backing up data. The Backup wizard doesn't back up files that are locked open by applications. You can use e-mail or the Send Console Message dialog box in the Computer Management snap-in to send administrative messages to users.</p>

<p><b>Follow these steps to send a console message:</b></p>

<ol>
<li>On the Start menu, point to Programs, point to Administrative tools, and click Computer Management.</li>
<li>On the Action menu, click All Tasks, and then click Send Console Message.
<p>The Send Console Message dialog box appears. See Figure 6.4.</p></li>
</ol>

<div class="figure">
<a href="javascript:fullSize('F06cc04x.htm')"><img src="images/F06cc04.JPG" /></a>
<div class="caption"><b>Figure 6.4</b> <i>The Send Console Message dialog box</i>
</div>
</div>

<ol start="3">
<li>Type the desired message in the Message box. Note the recipients in the Recipients box. You can add or remove recipients.</li>
<li>Click Send to send the message to the listed recipients.</li>
</ol>

<p>If you use a removable media device, make sure that the following preliminary issues are addressed:</p>

<ul>
<li>The backup device is attached to a computer on the network and is turned on. If you are backing up to tape, you must attach the tape device to the computer on which you run the Backup wizard.</li>

<li>The media device is listed on the Windows 2000 Hardware Compatibility List (HCL).</li>

<li>The media is loaded in the media device. For example, if you are using a tape drive, ensure that a tape is loaded in the tape drive.</li>
</ul>



<h2><a name="484">Selecting Files and Folders to Back Up</a></h2>


<p>After you have completed the preliminary tasks, you can perform the backup. Use the Backup Wizard button shown in Figure 6.5 to start the Backup wizard. To start the Backup wizard, click Start, point to Accessories, point 
to System Tools, click Backup, and then click Backup Wizard; or you can 
use the Run command on the Start menu to run Ntbackup, and then click Backup Wizard. Click Next to close the Welcome tab and display the What 
To Back Up page.</p>

<div class="figure">
<a href="javascript:fullSize('F06cc05x.htm')"><img src="images/F06cc05.JPG" /></a>
<div class="caption"><b>Figure 6.5</b> <i>The What To Back Up page of the Backup wizard</i>
</div>
</div>


<p>The first phase of backup is to specify what to back up by choosing one of the following options:</p>

<ul>
<li><b>Back Up Everything On My Computer.</b> Backs up all files on the computer on which you are running Backup wizard, except those files that Backup wizard excludes by default, such as certain power management files.</li>

<li><b>Back Up Selected Files, Drives, Or Network Data.</b> Backs up selected files and folders. This includes files and folders on the computer on which you run Backup wizard and any shared file or folder on the network. When you click this option, the Backup wizard provides a hierarchical view of the computer and the network (through My Network Places).</li>

<li><b>Only Back Up The System State Data.</b> Backs up important system components, such as the Registry and the boot files for the computer on which you are running Backup wizard.</li>
</ul>



<h2><a name="485">Specifying Backup Destination and Media Settings</a></h2>


<p>After you select what you want to back up, you need to provide information about backup media. Table 6.3 describes the information that you must provide on the Where To Store The Backup page.</p>

<p><b>Table  6.3 </b><i> Where To Store The Backup Page Options</i></p>

<table>
<tr><th>Option</th><th>Description</th></tr>
<tr><td>Backup Media Type</td><td>The target medium to use, such as a tape or file. A file can be located on any disk-based media, including a hard disk, a shared network folder, or a removable disk, such as an Iomega Zip drive.</td></tr>
<tr><td>Backup Media Or File Name</td><td>The location where Windows Backup stores the data. For a tape, enter the tape name. For a file, enter the path for the backup file.</td></tr>
</table>

<p>After you have provided the media information, the Backup wizard displays the Completing The Backup Wizard page. You may then do either of the following:</p>

<ul>
<li><b>Start the backup.</b> If you click Finish, during the backup process the Backup wizard displays status information about the backup job in the Backup Progress dialog box.</li>

<li><b>Specify advanced backup options.</b> If you click Advanced, the Backup wizard allows you to select the advanced backup settings described in Table 6.4.</li>
</ul>



<p><b>Table 6.4</b><i> Advanced Backup Settings</i></p>

<table>
<tr><th>Advanced option</th><th>Description</th></tr>
<tr><td>Select The Type Of Backup Operation To Perform</td><td>Allows you to choose the backup type that is used for this normal, copy, incremental, differential, or daily.</td></tr>
<tr><td>Backup Migrated Remote</td><td>Backs up the contents of files that have been migrated to remote storage. Windows 2000 Server automatically moves files that are rarely used to remote storage.</td></tr>
<tr><td>Verify Data After Backup</td><td>Confirms that files are correctly backed up. The Backup wizard compares the backup data and the source data to verify that they are the same. <i>Microsoft recommends that you select this option</i>.</td></tr>
<tr><td>Use Hardware Compression, If Available</td><td>Enables hardware compression for tape devices that support it. If your tape device doesn't support hardware compression, this option is unavailable.</td></tr>
<tr><td colspan="2">If The Archive Media Already Contains Backups:</td></tr>
<tr><td>Append This Backup To The Media</td><td>Choose Append This Backup To The Media to store multiple backup jobs on a storage device.</td></tr>
<tr><td colspan="2">Or</td></tr>
<tr><td>Replace The Data On The Media With This Backup</td><td>Choose Replace The Data On The Media With This Backup if you don't need to save previous backup jobs and you want to save only the most recent backup data.</td></tr>
<tr><td>Allow Only The Owner And The Administrator Access To The Backup Data And To Any Backups Appended To This Media</td><td>Allows you to restrict who can gain access to the completed backup file or tape. This option is available only if you choose to replace an existing backup on a backup medium, rather than appending to the backup medium. If you back up the registry or Active Directory directory services, click this option to prevent others from getting copies of the backup job.</td></tr>
<tr><td>Backup Label</td><td>Allows you to specify a name and description for the backup job. The name and description appear in the backup log. The default is Set Created <i>date</i> At <i>time</i>. You can change the name and description to a more intuitive name (for example, Sales-normal backup September 14, 2000).</td></tr>
<tr><td>Media Label</td><td>Allows you to specify the name of the backup media (for example, the tape name). The default name is Media Created <i>date</i> At <i>time</i>, where <i>date</i> is the current date and <i>time</i> is the current time. The first time you back up to a new medium or overwrite an existing backup job, you can specify the name, such as Active Directory backup.</td></tr>
<tr><td>When To Back Up</td><td>Allows you to specify Now or Later. If you choose Later, you specify the job name and the start date. You can also set the schedule.</td></tr>
</table>

<blockquote><div class="note"><b>NOTE</b><hr />
When the backup process is complete, you can choose to review the backup report, which is the backup log. A <i>backup log</i> is a text file that records backup operations and is stored on the hard disk of the computer on which you are running the Backup wizard.
</div></blockquote>

<h2><a name="486">Specifying Advanced Backup Settings</a></h2>


<p>When you specify advanced backup settings, you are changing the default backup settings for only the current backup job. The advanced settings cover the backup media and characteristics of the backup job.</p>

<p>Depending on whether you chose to back up now or later, Backup wizard provides you with the opportunity to do either of the following:</p>

<ul>
<li>If you chose to finish the backup process, the Backup wizard displays the Completing The Backup Wizard settings and then presents the option to finish and immediately start the backup. During the backup, the wizard displays status information about the backup job.</li>

<li>If you chose to back up later, you are shown additional dialog boxes to schedule the backup process to occur later, as described in the next section.</li>
</ul>



<h2><a name="487">Scheduling Backup Jobs</a></h2>


<p>Scheduling a backup job means you can have an unattended backup job take place when users aren't at work and files are closed. You can also schedule backup jobs to occur at regular intervals. To make this possible, Windows 2000 integrates the Backup wizard with the Task Scheduler service.</p>

<p><b>Follow these steps to schedule a backup:</b></p>

<ol>
<li>Click Later on the When To Back Up page of the Backup wizard.
<p>Task Scheduler presents the Set Account Information dialog box, prompting you for your password. The user account must have the appropriate user rights and permissions to perform backup jobs.</p>
<blockquote><div class="note"><b>NOTE</b><hr />
If the Task Scheduler service isn't running or isn't set to start auto-matically, Windows 2000 displays a dialog box prompting you to start the service. Click OK, and the Set Account Information dialog box appears.
</div></blockquote></li>
<li>Enter your password in the Password box and Confirm Password box, and then click OK.
<p>The When To Back Up page appears. You must provide a name for the backup job, and by default, the wizard displays the present date and time for the start date.</p></li>
<li>Type the appropriate name in the Job Name box.</li>
<li>Click Set Schedule to set a different start date and time. This selection causes Task Scheduler to display the Schedule Job dialog box.
<p>In the Schedule Job dialog box, you can set the date, time, and number of occurrences for the backup job to repeat, such as every Friday at 10:00 P.M. You can also display all of the scheduled tasks for the computer by selecting the Show Multiple Schedules check box. This helps you avoid scheduling multiple tasks on the same computer at the same time.</p></li>
</ol>

<p>You can click the Advanced button to schedule how long the backup can last and for how many days, weeks, months, or years you want this schedule to continue.</p>

<p>After you schedule the backup job and the Backup wizard finishes, Windows Backup places the backup job on the calendar on the Schedule Jobs tab in Windows Backup. The backup job automatically starts at the time you specified.</p>

<h2><a name="488">Restoring Data</a></h2>


<p>The first step in restoring data is selecting the data to restore. You can select individual files and folders, an entire backup job, or a backup set. A <i>backup set</i> is a collection of files or folders from one volume that you back up during a backup job. If you back up two volumes on a hard disk during a backup job, the job has two backup sets.</p>

<p><b>Follow these steps to restore data using the Restore wizard:</b></p>

<ol>
<li>In the Restore wizard, expand the media type that contains the data you want to restore. This can be either tape or file media.</li>

<li>Expand the appropriate media set until the data you want to restore is visible. You can restore a backup set or specific files and folders.</li>

<li>Select the data you want to restore, and then click Next.

<p>The Restore wizard displays the settings for the restore.</p></li>

<li>Do one of the following:

<ul>
<li>Finish the restore process. If you choose to finish the restore job, during the restore The Restore wizard requests verification for the source of the restore media and then performs the restore. During the restore, the Restore wizard displays status information about the restore.</li>

<li>Specify advanced restore options.</li>
</ul>
</li>
</ol>


<h3><a name="489">Specifying Advanced Restore Settings</a></h3>


<p>The advanced settings in the Restore wizard vary, depending on the type of backup media from which you are restoring, such as a tape device or an Iomega Zip drive. Table 6.5 describes the advanced restore options.</p>

<p><b>Table 6.5</b> <i>Advanced Restore Settings</i></p>

<table>
<tr><th>Option</th><th>Description</th></tr>

<tr><td>Restore Files To</td><td>The target location for the data you are restoring. 
<p>The choices are:</p>
<p><b>Original Location.</b> Replaces corrupted or lost data.</p>
<p><b>Alternate Location.</b> Restores an older version of a file or does a practice restore.</p>
<p><b>Single Folder.</b> Consolidates the files from a tree structure into a single folder. Use this option if, for example, you want copies of specific files but don't want to restore the hierarchical structure of the files.</p>
<p>If you select either an alternate location or a single directory, you must provide the path.</p></td></tr>
<tr><td>When Restoring Files That Already Exist (Click Options on the Tools menu to access these options.)</td><td>Use this option to choose whether you want to overwrite existing files. The choices are: 
<p><b>Do Not Replace The File On My Disk (Recommended).</b> Prevents accidental overwriting of existing data. (This is the default.)</p>
<p><b>Replace The File On Disk Only If It Is Older Than The Backup Copy.</b> Verifies that the most recent copy exists on the computer.</p>
<p><b>Always Replace The File On Disk.</b> The Restore wizard doesn't provide a confirmation message if it encounters a duplicate filename during the restore operation.</p></td></tr>
<tr><td>Select The Special Restore Options You Want To Use (Click the Start Restore button to access these options.)</td><td>Use this option to choose whether you want to restore 
security or special system files. The choices are: 

<p><b>Restore Security.</b> Applies the original permissions to files you are restoring to a Windows 2000 NTFS volume. Security settings include access permissions, audit entries, and ownership. This option is available only if you have backed up data from an NTFS volume and are restoring to an NTFS volume.</p>

<p><b>Restore Removable Storage Database.</b> Restores the configuration database for removable storage devices and the media pool settings. The database is located in systemroot\system32\ remotestorage.</p>

<p><b>Restore Junction Points, Not The Folders And File Data They Reference.</b> Restores junction points on your hard disk as well as the data that the junction points refer to. If you have any mounted drives, and you want to restore the data that mounted drives point to, select this check box. If you don't select this check box, the junction point will be restored but the data your junction point refers to might not be accessible.</p>

<p><b>When Restoring Replicated Data Sets, Make The Restored Data As The Primary Data For All Replicas.</b> Restores the data for all replicated data sets.</p></td></tr>
</table>

<p>After you have finished using the Restore wizard, Windows Backup does the following:</p>

<ul>
<li>Prompts you to verify your selection of the source media to use to restore data. After the verification, Windows Backup starts the restore process.</li>

<li>Displays status information about the restore process. As with a backup process, you can choose to view the report (restore log) of the restore. It contains information about the restore, such as the number of files that have been restored and the duration of the restore process.</li>
</ul>

<h2><a name="490">Lesson Summary</a></h2>


<p>In this lesson, you learned that after you have planned your backup, the next step is to prepare to back up your data. An important part of each backup job is performing certain preliminary tasks. One task is to ensure that the files you want to back up are closed, because Windows Backup doesn't back up files that are locked open by applications. Next you perform the backup.</p>

<p>You also learned that in the Backup wizard, the first phase is to specify what to back up. You can choose from three options: back up everything on the computer; back up selected files, drives, or network data; or back up only the system state data. After you have selected what you want to back up, you must provide the target destination and the backup media or filename. Then you can finish the backup or you can specify any advanced backup options. This lesson concluded with an explanation of using the Restore wizard to restore the backed up files.</p>

</body>
</html>



