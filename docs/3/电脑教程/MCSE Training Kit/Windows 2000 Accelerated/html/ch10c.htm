<!DOCTYPE html SYSTEM "msxhtml1-strict.dtd">
<html lang="en" xml:lang="en">
<head>
<link rel="stylesheet" type="text/css" href="styles.css" />
<script type="text/javascript" language="JavaScript" src="expando.js"></script>
<title>Lesson 2: Installing DNS</title>


</head>
<body>
<div class="prevnext"><p><a href="ch10b.htm">3</a> <a href="ch10d.htm">4</a></p></div>

<h1><a name="791">Lesson 2: Installing DNS</a></h1>


<p>Microsoft DNS is an RFC-compliant DNS server. As a result, it creates and uses standard DNS zone files and supports all standard resource record types. It is interoperable with other DNS servers and includes the DNS diagnostic utility NSLOOKUP. Microsoft DNS is tightly integrated with Windows Internet Name Service (WINS) and is administered through the graphical administration utility called DNS Manager. In this lesson, you install the DNS service on Windows 2000.</p>

<hr />
<p><b>After this lesson, you will be able to</b></p>

<ul>
<li>Install the Microsoft DNS Server service</li>

<li>Troubleshoot DNS with NSLOOKUP</li>
</ul>

<p><b>Estimated lesson time: 45 minutes</b></p>
<hr />

<p>Before installing the Microsoft Windows 2000 DNS Server service, it is important that the Windows 2000 server's TCP/IP protocol be configured correctly. The DNS Server service obtains the default settings for the host name and domain name through the Microsoft TCP/IP Properties dialog box. The DNS Server service creates default SOA, host, and NS records based on the specified domain name and host name. If the host name and domain name are not specified, only the SOA record is created.</p>

<p><img src="images/practice.jpg" /></p>

<h2><a name="792">Practice: Installing the DNS Server Service</a></h2>


<p>In this practice, you install the Microsoft DNS Server service. You will configure DNS in a later lesson.</p>

<p><img src="images/multi.jpg" /></p>
<blockquote><div class="note"><b>NOTE</b><hr />
Before you continue with the lesson, run the Ch10A.exe demonstration file located in the Media folder on the <i>Supplemental Course Materials</i> CD-ROM that accompanies this book. The file provides an overview of installing the DNS Server service.
</div></blockquote>

<blockquote><div class="note"><b>NOTE</b><hr />
Complete this procedure from the computer you designate as the DNS server.
</div></blockquote>

<h3><a name="793">Exercise 1: Verifying DNS Client Settings</a></h3>


<p>Before you install DNS, you need to verify that the client computer has the appropriate settings and specify what DNS server to use.</p>

<ol>
<li>Right-click My Network Places, and then click Properties.
<p>The Network And Dial-Up Connections dialog box appears.</p></li>
<li>Right-click the connection (typically the Local Area Network properties) for which you want to configure the DNS server, and then click Properties.
<p>The Connection Properties dialog box appears.</p></li>
<li>Click Internet Protocol (TCP/IP), then click Properties.
<p>The Internet Protocol (TCP/IP) Properties dialog box appears.</p></li>
<li>On the Internet Protocol (TCP/IP) Properties page, type in the IP address of the existing DNS server in the Preferred DNS Server field.
<p>You can also add the IP address of an alternate DNS server in the Alternate DNS Server field.</p></li>
<li>If you need to specify more than one alternate DNS server, click Advanced, click the DNS tab, and then enter the servers in the DNS Server Addresses box.</li>
<li>Click OK to close the TCP/IP Properties dialog box.</li>
<li>Click OK to close the Connection Properties dialog box.</li>
</ol>

<h3><a name="794">Exercise 2: Installing the DNS Server Service</a></h3>


<p>Once the client is properly configured, you can install DNS Server service.</p>

<ol>
<li>In Control Panel, double-click Add/Remove Programs, and then click Add/Remove Windows Components.
<p>The Windows Components wizard appears.</p></li>
<li>Click Networking Services, and then click Details.
<p>The Networking Services dialog box appears.</p></li>
<li>If it is not already selected, select the check box next to Domain Name System (DNS), as illustrated in Figure 10.2, and then click OK.

<div class="figure">
<a href="javascript:fullSize('F10cc02x.htm')"><img src="images/F10cc02.JPG" /></a>
<div class="caption"><b>Figure 10.2</b> <i>Domain Name System (DNS) check box in Networking Services</i>
</div>
</div>
</li>

<li>Click Next.
<p>Windows 2000 installs DNS.</p></li>
<li>Click Finish.</li>
</ol>

<h2><a name="795">Troubleshooting DNS with NSLOOKUP</a></h2>


<p>NSLOOKUP is a useful tool for troubleshooting DNS problems such as host name resolution. When you start NSLOOKUP, it shows the host name and IP address of the DNS server that is configured for the local system, and then displays a command prompt for further queries. If you type a question mark (?), NSLOOKUP shows all available commands. You can exit the program by typing <b>exit</b>. To look up a host's IP address using DNS, type the host name and press Enter. NSLOOKUP defaults to using the DNS server configured for the computer on which it is running, but you can focus it on a different DNS server by typing <b>server &lt;<i>name</i>&gt;</b> (where &lt;name&gt; is the host name of the server you want to use for future lookups). Once another server is specified, anything entered after that point is interpreted as a host name.</p>

<h3><a name="796">NSLOOKUP Modes</a></h3>


<p>NSLOOKUP has two modes: Interactive and Noninteractive. If a single piece of data is needed, use Noninteractive or Command-line mode. If more than one piece of data is needed, Interactive mode can be used.</p>

<h3><a name="797">NSLOOKUP Syntax</a></h3>


<p>NSLOOKUP.EXE is a command-line administrative tool for testing and troubleshooting DNS servers. The following syntax is used to run the NSLOOKUP utility:</p>

<div class="code"><pre><b>nslookup</b> [-option ...] [computer-to-find | - [server]]</pre></div>

<table>
<tr><th>Syntax</th><th>Description</th></tr>
<tr><td><i>-option ...</i></td><td>Specifies one or more NSLOOKUP commands. For a list of commands, use the help option inside NSLOOKUP.</td></tr>
<tr><td><i>computer-to-find</i></td><td>If computer-to-find is an IP address and the query type is host or PTR, the name of the computer is returned. If computer-to-find is a name and does not have a trailing period, the default DNS domain name is appended to the name. To look up a computer outside the current DNS domain, append a period to the name. If a hyphen (-) is typed instead of computer-to-find, the command prompt changes to NSLOOKUP Interactive mode.</td></tr>
<tr><td><i>server</i></td><td>Use this server as the DNS name server. If the server is omitted, the currently configured default DNS server is used.</td></tr>
</table>

<p>Follow these steps to use NSLOOKUP in Command-line mode:</p>

<ol>
<li>At a command prompt, modify the properties so that the command prompt window has a screen buffer size of 50.

<p>As illustrated in Figure 10.3, use the Layout property page to do this. When prompted, you should apply this change to all future instances of the command-prompt window; this will be needed in later lessons.</p>

<div class="figure">
<img src="images/F10cc03.JPG" />
<div class="caption"><b>Figure 10.3</b> <i>Command Prompt Properties dialog box</i></div></div>
</li>

<li>Type the following command:

<div class="code">
<pre>
nslookup <i>hostx</i>
</pre>
</div>

<p>where hostx is a host in your domain.</p></li>

<li>NSLOOKUP returns the IP address of the computer hostx because the information is stored in the DNS database.</li>

<li>Exit the command prompt.</li>
</ol>

<p>Follow these steps to use NSLOOKUP in Interactive mode:</p>

<ol>
<li>At a command prompt, type <b>nslookup</b> and then press Enter.
<p>The &gt; prompt appears.</p></li>
<li>Type <b>set all</b> at the &gt; prompt.
<p>This command lists all of the current values of the NSLOOKUP options.</p></li>
<li>Use the following set commands to change the timeout value to 1 second and the number of retries to 7, as illustrated in Figure 10.4.
<div class="code">
<pre>
Set ti=1
Set ret=7
</pre>
</div>

<div class="figure">
<a href="javascript:fullSize('F10cc04x.htm')"><img src="images/F10cc04.JPG" /></a>
<div class="caption"><b>Figure 10.4</b> <i>Setting the timeout and retry values in NSLOOKUP</i>
</div>
</div>
</li>
<li>Use Set All to verify that the defaults were changed.</li>
<li>Type the names of the other computers, one at a time, at the &gt; prompt. Press Enter after each name.</li>
<li>Exit the command prompt.</li>
</ol>

<h2><a name="798">Lesson Summary</a></h2>


<p>Microsoft DNS is interoperable with other DNS servers. Before installing the DNS Server service, you should make sure that the Windows 2000 server's TCP/IP protocol is configured correctly.</p>

<p>The NSLOOKUP utility is the primary diagnostic tool for DNS. It allows you to display resource records on DNS servers.</p>

</body>
</html>



