<!DOCTYPE html SYSTEM "msxhtml1-strict.dtd">
<html lang="en" xml:lang="en">
<head>
<link rel="stylesheet" type="text/css" href="styles.css" />
<script type="text/javascript" language="JavaScript" src="expando.js"></script>
<title>Lesson 8: Monitoring Network Security Events</title>


</head>
<body>
<div class="prevnext"><p><a href="ch09h.htm">3</a> <a href="ch09j.htm">4</a></p></div>

<h1><a name="761">Lesson 8: Monitoring Network Security Events</a></h1>


<p>Administrative policies for a security plan should include policies for delegation of administrative tasks and monitoring of audit logs to detect suspicious activity. In this lesson, you learn how to monitor network security events in Windows 2000 to prevent attacks and intrusion on your network.</p>

<hr />
<p><b>After this lesson, you will be able to</b></p>
<ul>
<li>Manage and monitor network traffic</li>
<li>Manage and monitor remote access</li>
</ul>
<p><b>Estimated lesson time: 45 minutes</b></p>
<hr />

<h2><a name="762">Monitoring Your Network Security</a></h2>


<p>The network security technologies you implement, such as Microsoft Proxy Server, can meet your security goals only if you plan and configure them carefully. With thorough preparation, this work can be done very successfully. However, anticipating all possible risks can be very difficult because</p>

<ul>
<li>New risks develop.</li>
<li>Systems can break down and the environment in which your systems are placed changes over time.</li>
</ul>

<p>By continually reviewing your network security strategies, you can minimize security risks. However, you also need to watch the actual network security activity to spot weaknesses before they are exploited, and to stop attempts to break security before they are effective.</p>

<p>To watch your network security activity, you need tools to capture the details about the activities and to analyze the data. For example, Microsoft Proxy Server includes logging at two levels: normal and verbose. Windows 2000 also has event logging, which can be enhanced by enabling security auditing. IAS, discussed later in this chapter, has extensive activity reporting options. Third-party products are also available that can help with monitoring servers and applications, including security servers and applications.</p>

<blockquote><div class="note"><b>NOTE</b><hr />
When using security servers and applications, be sure to review the documentation for the systems you use and select the logging options that best meet your requirements.
</div></blockquote>

<h2><a name="763">Using Event Viewer to Monitor Security</a></h2>


<p>Event Viewer allows you to monitor events in your system. It maintains logs about program, security, and system events on your computer. You can use Event Viewer to view and manage the event logs, gather information about hardware and software problems, and monitor Windows 2000 security events. The Event Log service starts automatically when you start Windows 2000. All users can view application and system logs. You can also set up the Windows operating system to audit accesses on specific resources and to have them recorded in the Security Log. Table 9.4 lists various events that you can audit and the specific security monitored by particular audit event monitors.</p>

<p><b>Table 9.4</b><i> Threats Detected with Auditing</i></p>

<table>
<tr><th>Audit event</th><th>Threat detected</th></tr>
<tr><td>Failure audit for logon/logoff</td><td>Random password hack</td></tr>
<tr><td>Success audit for logon/logoff</td><td>Stolen password break-in</td></tr>
<tr><td>Success audit for user rights, user and group management, security change policies, restart, shutdown, and system events</td><td>Misuse of privileges</td></tr>
<tr><td>Success and failure audit for file-access and object-access events. File Manager success and failure audit of read/write access by suspect users or groups for the sensitive files</td><td>Improper access to sensitive files</td></tr>
<tr><td>Success and failure audit for file-access printers and object-access events. Print Manager success and failure audit of print access by suspect users or groups for the printers</td><td>Improper access to printers</td></tr>
<tr><td>Success and failure write access auditing for program files (.exe and .dll extensions). Success and failure auditing for process tracking. (Run suspect programs; examine security log for unexpected attempts to modify program files or create unexpected processes. Run only when actively monitoring the system log.)</td><td>Virus outbreak</td></tr>
</table>

<p><img src="images/practice.jpg" /></p><h2><a name="764">Practice: Recording Failed Logon Attempts</a></h2>


<p>Security auditing is not enabled by default. You have to activate the types of auditing you require by using the Group Policy snap-in to Microsoft Management Console (MMC). You also must enable auditing for the general areas 
or specific items you want to track. Perform the next two exercises on the same computer.</p>

<h3><a name="765">Exercise 1: Activating Security Auditing for Failed Logon Attempts</a></h3>


<ol>
<li>Click Start, click Run, type <b>mmc</b>, and then click OK.</li>
<li>On the Console menu, click Add/Remove Snap-In, then click Add.
<p>The Add/Remove Snap-In dialog box appears.</p></li>
<li>Click Add.
<p>The Add Standalone Snap-In dialog box appears.</p></li>
<li>Select Group Policy, and then click Add.
<p>The Select Group Policy dialog box appears.</p></li>
<li>Click Finish to add the local computer.
<p>You can also click Browse and then select another computer on your network.</p></li>
<li>In the Add Standalone Snap-In dialog box, click Close.</li>
<li>In the Add/Remove Snap-In dialog box, click OK.</li>
<li>Under Local Computer Policy\Computer Configuration\Windows Settings\Security Settings\Local Policies, click Audit Policy, as illustrated in Figure 9.26.

<div class="figure">
<a href="javascript:fullSize('F09cc26x.htm')"><img src="images/F09cc26.JPG" /></a>
<div class="caption"><b>Figure 9.26</b> <i>Selecting audit policy for the local computer policy</i>
</div>
</div>
</li>


<li>In the details pane, right-click the Audit Logon Events attribute, then right-click Security.
<p>The Local Security Policy Setting dialog box appears.</p></li>
<li>Under Audit These Attempts, select Failure, and then click OK.</li>
</ol>

<h3><a name="766">Viewing the Security Event Log</a></h3>


<p>You can specify that an audit entry be written to the security event log whenever certain actions are performed or files are accessed. The audit entry shows the action performed, the user who performed it, and the date and time of the action. You can audit both successful and failed attempts at actions, so the audit trail can show who performed actions on the network and who tried to perform actions that are not permitted. You can view the security log in the Event Viewer.</p>

<p>Recording security events is a form of intrusion detection through auditing. Auditing and security logging of network activity are important safeguards. Windows 2000 enables you to monitor a wide variety of events that can be used to track the activities of an intruder.</p>

<p>The security log records security events, such as valid and invalid logon attempts, and events related to resource use, such as creating, opening, or deleting files or other objects. The security log helps track changes to the security system and identifies any possible breaches of security. For example, attempts to log on to the system might be recorded in the security log, if logon and logoff auditing are enabled. If the security log is examined regularly, it makes it possible to detect some types of attacks, such as password attacks, before they succeed. After a break-in, the security log can help you determine how the intruder entered and what he or she did. The log file entries can serve as legal evidence after the intruder has been identified.</p>

<blockquote><div class="note"><b>NOTE</b><hr />
For the highest level of security, monitor the log files constantly.
</div></blockquote>

<p><img src="images/practice.jpg" /></p><h2><a name="767">Practice: Viewing the Security Log</a></h2>


<p>Event logs consist of a header, a description of the event (based on the event type), and, optionally, additional data that you may want recorded about a specific event. Most security log entries consist of the header and a description. Event Viewer displays events from each log separately. Each line shows information about a single event, including date, time, source, event type, category, event ID, user account, and computer name. In this practice, will view the security event log to detect attempted unauthorized network access. To complete this practice, you must have performed the steps in the Exercise of the previous practice, &quot;<a href="ch09i.htm#764">Recording Failed Logon Attempts</a>.&quot;</p>

<h3><a name="768">Exercise 1: Viewing the Security Event Log</a></h3>


<ol>
<li>Attempt to log on to the Windows 2000 computer on which you activated security auditing for failed logon attempts using an invalid user name and password.</li>

<li>After failing to log on, use a valid user name and password to log on to Windows 2000.</li>

<li>Click Start, point to Programs, point to Administrative Tools, then click Event Viewer.
<p>Event Viewer opens.</p></li>
<li>Click Security Log in the left pane.
<p>Notice that the failed logon attempt is shown in the right pane of the Event Viewer, as illustrated in Figure 9.27.</p>
<div class="figure">
<a href="javascript:fullSize('F09cc27x.htm')"><img src="images/F09cc27.JPG" /></a>
<div class="caption"><b>Figure 9.27</b> <i>Invalid logon entry made in the security event log</i>
</div>
</div>
</li>
<li>Double-click the Failure Audit item in the event view to open the Event Properties window.
<p>Notice that the description section tells you the reason for the failure and the user name entered, but not the password entered.</p></li>
<li>Click OK to close the Event Properties window.</li>
</ol>

<h2><a name="769">System Monitor</a></h2>


<p>System Monitor is a tool that can be used to track system resources usage. System Monitor can be used to test an application's usage of system resources. Common objects that a user can log are memory, CPU, network, and disk activity. Some additional counters, although not performance related, provide useful information about server security. These include</p>

<ul>
<li>Server\Errors Access Permissions</li>
<li>Server\Errors Granted Access</li>
<li>Server\Errors Logon</li>
<li>IIS Security</li>
</ul>

<p><b>Follow these steps to monitor security events using System Monitor:</b></p>

<ol>
<li>Click Start, point to Programs, point to Administrative Tools, and then click Performance.
<p>System Monitor opens in the MMC.</p></li>
<li>In the right pane, click Add.
<p>The Add Counters dialog box appears, as illustrated in Figure 9.28.</p>

<div class="figure">
<img src="images/F09cc28.JPG" />
<div class="caption"><b>Figure 9.28</b> <i>Adding the Error Logon counter</i></div></div>
</li>

<li>In the Performance Object drop-down list box, select Server.</li>
<li>Click Select Counters From List.</li>
<li>In the Counters list, select a counter, and then click Add.</li>
<li>Click Close to close the Add Counters dialog box.</li>
</ol>

<h2><a name="770">Monitoring Security Overhead</a></h2>


<p>Security is achieved only at some cost in performance. Measuring the performance overhead of a security strategy is not simply a matter of monitoring a separate process or thread. The features of the Windows 2000 security model and other security services are integrated into several different operating system services. You cannot monitor security features separately from other aspects of the services. Instead, the most common way to measure security overhead is to run tests comparing server performance with and without a security feature. The tests should be run with fixed workloads and a fixed server configuration so that the security feature is the only variable. During the tests, you should measure</p>

<ul>
<li>Processor activity and the processor queue</li>
<li>Physical memory used</li>
<li>Network traffic</li>
<li>Latency and delays</li>
</ul>

<h2><a name="771">Lesson Summary</a></h2>


<p>You should monitor network security activity to identify weaknesses before they are exploited. You can use Event Viewer to view and manage Windows 2000 security events. The audit entry shows the action performed, the user who performed it, and the date and time of the action. Both System Monitor and Network Monitor can provide useful information about server security. The IPSec Monitor can confirm whether your secured communications are successful. In addition, you can use Routing and Remote Access to monitor remote access traffic in Windows 2000, and enable logging to review this data.</p>

</body>
</html>



