<HTML>
<HEAD>
<TITLE>Lesson 2: Managing Disk Quotas</TITLE>
<link rel="STYLESHEET" type="text/css" href="mmpro.css"><SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</HEAD>
<SCRIPT LANGUAGE="JavaScript">
<!--

function fullSize(sURL){
	window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}

function LibraryHeaderNav(sBackward, sForward, sImgLeftOff, sImgLeftOn, sImgRightOff, sImgRightOn, iH, iW, sImgLeftStyle, sImgRightStyle, sImgRuleStyle, sRuleColor, sRuleSize){
	var tableStr;
	//validate questionable args for defs
	tableStr = "<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 border=0 width=100%>";
	tableStr += "<TR VALIGN=top ALIGN=right>";

	tableStr += "<TD align=right class=" + sImgRuleStyle + ">&nbsp;</TD>";	
	
	tableStr += "<TD width=34 align=right class=" + sImgLeftStyle + ">";
	tableStr += "<A href='" + sBackward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgLeftOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgLeftOff + '\'\"';
	tableStr += " SRC='" + sImgLeftOff + "' vspace=0 hspace=0></a></TD>";
	
	tableStr += "<TD width=34 align=left class=" + sImgRightStyle + ">";
	tableStr += "<A href='" + sForward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgRightOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgRightOff + '\'\"';
	tableStr += " SRC='" + sImgRightOff + "' vspace=0 hspace=0></a></TD></TR>";

	tableStr += "<TR VALIGN=top>";
	tableStr += "<TD height=3 align=center colspan=3 class=" + sImgRuleStyle + ">";
	tableStr += "<HR color=" + sRuleColor + " size=" + sRuleSize + "></TD></TR></TABLE>";
	//alert(tableStr);
	document.write(tableStr);
}

 																						     //purple is: #aa22aa   orange is: #ff9900
LibraryHeaderNav("ch18b.htm", "ch18d.htm", "images/unit_p_a1.gif", "images/unit_p_a2.gif", "images/unit_p_b1.gif", "images/unit_p_b2.gif", 18, 34, "unit01", "unit02", "headerrule", "#aa22aa", "2");
//--></SCRIPT><P>



<A NAME="619"><H1>Lesson 2: Managing Disk Quotas</H1></A>

<p>You use disk quotas to manage storage growth in distributed environments. <i>Disk quotas</i> allow you to allocate disk space usage based on the files and folders that users own. You can set disk quotas, quota thresholds, and quota limits for all 
users and for individual users. You can also monitor the amount of hard disk space that users have and the amount that they have left against their quota.</p>

<p><div class="sidebar"><blockquote>
<b>After this lesson, you will be able to</b>

<ul>
<p><li>Configure and manage disk quotas.</li></p>
</ul>

<p><b>Estimated lesson time: 20 minutes</b></p>
</blockquote></div></p>

<A NAME="620"><H2>Understanding Windows 2000 Disk Quota Management</H2></A>

<p>Windows 2000 disk quotas track and control disk usage on a per-user, per-volume basis. Windows 2000 tracks disk quotas for each volume, even if the volumes are on the same hard disk. Because quotas are tracked on a per-user basis, every user's disk space is tracked regardless of the folder in which the user stores files. Table 18.2 describes the characteristics of Windows 2000 disk quotas.</p>

<p><b>Table 18.2</b> <i>Disk Quota Characteristics and Descriptions</i></p>

<p>
<table cellpadding=5 width="95%">
<tr> 
<th>Characteristic  </th>
<th>Description  </th></tr>
<tr>
<td valign="top">Disk usage is based on file and folder ownership. </td>
<td valign="top">Windows 2000 calculates disk space usage based on the 
 files and folders that users own. When a user copies or 
 saves a new file to an NTFS volume or takes ownership 
 of a file on an NTFS volume, Windows 2000 charges the 
 disk space for the file against the user's quota limit.  </td></tr>
<tr>
<td valign="top">Disk quotas do not use compression. </td>
<td valign="top">Windows 2000 ignores compression when it calculates 
 hard disk space usage. Users are charged for each 
 uncompressed byte, regardless of how much hard disk 
 space is actually used. This is done partially because file 
 compression produces different degrees of compression 
 for different types of files. Different uncompressed file 
 types that are the same size might end up to be different 
 sizes when they are compressed.  </td></tr>
<tr>
<td valign="top">Free space for applications is based on quota limit.  </td>
<td valign="top">When you enable disk quotas, the free space that 
 Windows 2000 reports to applications for the volume 
 is the amount of space remaining within the user's disk 
 quota limit.  </td></tr>
</table></p>


<p><div class="note"><blockquote><b>NOTE</b><HR>Disk quotas can be applied only to Windows 2000 NTFS volumes.</blockquote></div></p>

<p>You use disk quotas to monitor and control hard disk space usage. System 
administrators can do the following:</p>

<ul>
<p><li>Set a disk quota limit to specify the amount of disk space for each user.</li></p>

<p><li>Set a disk quota warning to specify when Windows 2000 should log an event, indicating that the user is nearing his or her limit.</li></p>

<p><li>Enforce disk quota limits and deny users access if they exceed their limit, or allow them continued access.</li></p>

<p><li>Log an event when a user exceeds a specified disk space threshold. The threshold could be when users exceed their quota limit, or when they exceed their warning level.</li></p>
</ul>



<p>After you enable disk quotas for a volume, Windows 2000 collects disk usage data for all users who own files and folders on the volume. This allows you to monitor volume usage on a per-user basis. By default, only members of the 
Administrators group can view and change quota settings. However, you can 
allow users to view quota settings.</p>

<A NAME="621"><H2>Setting Disk Quotas</H2></A>

<p>You can enable disk quotas and enforce disk quota warnings and limits for all users or for individual users.</p>

<p>If you want to enable disk quotas, open the Properties dialog box for a disk, click the Quota tab, and configure the options that are described in Table 18.3 and displayed in Figure 18.3.</p>

<p><b>Table 18.3</b> <i>Quota Tab Options</i></p>

<p>
<table cellpadding=5 width="95%">
<tr> 
<th>Option   </th>
<th>Description  </th></tr>
<tr>
<td valign="top">Enable Quota Management  </td>
<td valign="top">Select this check box to enable disk quota management.  </td></tr>
<tr>
<td valign="top">Deny Disk Space To Users Exceeding Quota Limit  </td>
<td valign="top">Select this check box so that when users exceed their 
 hard disk space allocation, they receive an &quot;out of disk 
 space&quot; message and cannot write to the volume.  </td></tr>
<tr>
<td valign="top">Do Not Limit Disk Usage  </td>
<td valign="top">Click this option when you don't want to limit the 
 amount of hard disk space for users.  </td></tr>
<tr>
<td valign="top">Limit Disk Space To   </td>
<td valign="top">Configure the amount of disk space that users can have.  </td></tr>
<tr>
<td valign="top">Set Warning Level To   </td>
<td valign="top">Configure the amount of disk space that users can fill 
 before Windows 2000 logs an event, indicating that a 
 user is nearing his or her limit.  </td></tr>
<tr>
<td valign="top">Quota Entries  </td>
<td valign="top">Click this button to open the Quota Entries For dialog 
 box, where you can add a new entry, delete an entry, and 
 view the per-user quota information.  </td></tr>
</table></p>


<p>
<img src="images/F18tk03.JPG" width=367 height=443 border="0">
</p><p>
<!-- caption --><b>Figure 18.3</b> <i>The Quota tab of the Properties dialog box for a disk</i><!-- /caption -->
</p>

<p>You can enforce identical quota limits for all users as follows:</p>

<ol>
<p><li> In the Limit Disk Space To box and the Set Warning Level To box, enter the values for the limit and warning level that you want to set.</li></p>

<p><li> Select the Deny Disk Space To Users Exceeding Quota Limit check box.</li></p>
</ol>

<p>Windows 2000 will monitor usage and will not allow users to create files or folders on the volume when they exceed the limit.</p>

<A NAME="622"><H2>Determining the Status of Disk Quotas</H2></A>

<p>You can determine the status of disk quotas in the Properties dialog box for a disk by checking the traffic light icon and by reading the status message to its right (see Figure 18.3):</p>

<ul>
<p><li>A red traffic light indicates that disk quotas are disabled.</li></p>

<p><li>A yellow traffic light indicates that Windows 2000 is rebuilding disk quota information.</li></p>

<p><li>A green traffic light indicates that the disk quota system is active.</li></p>
</ul>



<p>You can enforce different quota limits for one or more specific users, as follows:</p>

<ol>
<p><li> Open the Properties dialog box for a disk, click the Quota tab, and then click the Quota Entries button.</li></p>

<p><li> In the Quota Entries For window, shown in Figure 18.4, double-click the user account for which you want to set a disk quota limit, or create an entry by clicking New Quota Entry on the Quota menu.</li></p>

<p><li>Configure the disk space limit and the warning level for each individual user.</li></p>


<p>
<A HREF="javascript:fullSize('F18tk04x.htm')"> <img src="images/F18tk04.JPG" width=404 height=235 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 18.4</b> <i>The Quota Entries For window</i><!-- /caption -->
</p>
</ol>

<A NAME="623"><H2>Monitoring Disk Quotas</H2></A>

<p>You use the Quota Entries For window to monitor usage for all users who have copied, saved, or taken ownership of files and folders on the volume. Windows 2000 will scan the volume and monitor the amount of disk space that each user occupies. Use the Quota Entries For window to view the following:</p>

<ul>
<p><li>The amount of hard disk space that each user occupies.</li></p>

<p><li>Users who are over their quota-warning threshold, which is signified by a yellow triangle.</li></p>


<p><li>Users who are over their quota limit, which is signified by a red circle.</li></p>

<p><li>The warning threshold and the disk quota limit for each user.</li></p>
</ul>

<A NAME="624"><H2>Determining Best Uses of Disk Quotas</H2></A>

<p>The following list provides guidelines for using disk quotas:</p>

<ul>
<p><li>If you enable disk quota settings on the volume where Windows 2000 is installed and your user account has a disk quota limit, log on as Administrator to install additional Windows 2000 components and applications. By doing so, Windows 2000 won't charge the disk space that you use to install applications against the disk quota allowance for your user account. </li></p>

<p><li>You can monitor hard disk usage and generate hard disk usage information without preventing users from saving data. To do so, clear the Deny Disk Space To Users Exceeding Quota Limit check box when you enable disk quotas.</li></p>

<p><li>Set more restrictive default limits for all user accounts, and then modify the limits to allow more disk space to users who work with large files.</li></p>

<p><li>If computers running Windows 2000 Professional are shared by more than one user, set disk quota limits on computer volumes so that disk space is shared by all users who share the computer.</li></p>

<p><li>Generally, you should set disk quotas on shared volumes to limit storage for users. Set disk quotas on public folders and network servers to ensure that users share hard disk space appropriately. When storage resources are scarce, you might want to set disk quotas on all shared hard disk space.</li></p>


<p><li>Delete disk quota entries for a user who no longer stores files on a volume. You can delete quota entries for a user account only after all files that the user owns have been removed from the volume or another user has taken ownership of the files.</li></p>

<p><li>Before you can delete a quota entry for a user account, you or the user must remove all files that the user owns from the volume or another user must take ownership of the files.</li></p>
</ul>

<p><img src="images/practic.JPG" width=92 height=74 border="0">
</p>

<A NAME="625"><H2>Practice: Enabling and Disabling Disk Quotas</H2></A>

<p>In this practice, you will configure default quota management settings to limit the amount of data users can store on drive C (their hard disk drive). Next you will configure a custom quota setting for a user account. You will increase the amount of data the user can store on drive C to 20 MB with a warning level set to 16. 
Finally you will turn off quota management for drive C.</p>

<p><div class="note"><blockquote><b>NOTE</b><HR>If you didn't install Windows 2000 Professional on drive C, substitute the NTFS partition on which you did install Windows 2000 Professional whenever drive C is referred to in the practice.</blockquote></div></p>

<A NAME="626"><H3>Exercise 1: Configuring Quota Management Settings</H3></A>

<p>In this exercise, you will configure the quota management settings for drive C to limit the data that users can store on the volume. You can then configure custom quota settings for a user account.</p>

<p><li> <b>To configure default quota management settings</b></li></p>

<ol>
<p><li> Log on as Administrator and create a user account, User5. Assign it the password of <i>password,</i> and clear the User Must Change Password At Next Logon check box.</li></p>

<p><li> In Windows Explorer, right-click drive C, and then click Properties.</li></p>


<p>Windows 2000 displays the Local Disk (C:) Properties dialog box with the General tab active.</p>

<p><li> Click the Quota tab.</li></p>


<p>Notice that disk quotas are disabled by default.</p>


<p><li> On the Quota tab, click the Enable Quota Management check box.</li></p>


<p>What is the default disk space limit for new users? </p>

<p><a href="chaaa.htm#964">Answer</a></p>


<p><li> Select Deny Disk Space To Users Exceeding Quota Limit.</li></p>

<p><li> Click Limit Disk Space To.</li></p>

<p><li> Type 10 in the Limit Disk Space To box and then type 6 in the Set Warning Level To box.</li></p>


<p>Notice the default unit size is KB.</p>


<p><li> Change the unit sizes to MB and then click Apply.</li></p>


<p>Windows 2000 displays the Disk Quota message box, warning you that the volume will be rescanned to update disk usage statistics if you enable quotas.</p>

<p><li>Click OK to enable disk quotas.</li></p>
</ol>

<p><li> <b>To configure quota management settings for a user</b></li></p>

<ol>
<p><li> On the Quota tab of the Local Disk (C:) Properties dialog box, click the Quota Entries button.</li></p>


<p>Windows 2000 displays the Quota Entries For Local Disk (C:) window.</p>

<p>Are any user accounts listed? Why or why not?</p>

<p><a href="chaaa.htm#964">Answer</a></p>


<p><li> On the Quota menu, click New Quota Entry.</li></p>


<p>Windows 2000 displays the Select Users dialog box.</p>


<p><li> In the Look In box, select PRO1.</li></p>
</ol>

<p><div class="note"><blockquote><b>NOTE</b><hr>If you didn't name your computer PRO1 or if your computer is part of a domain, select the appropriate computer or domain name.</blockquote></div>
</p>

<ol>
<p><li value="4"> At the top of the dialog box, under Name, select User5, and then click Add.</li></p>


<p>The user name appears in the Name list at the bottom of the dialog box.</p>


<p><li> Click OK.</li></p>


<p>Windows 2000 displays the Add New Quota Entry dialog box.</p>

<p>What are the default settings for the user you just set a quota limit for? 
</p>

<p><a href="chaaa.htm#964">Answer</a></p>


<p><li> Increase the amount of data that User5 can store on drive C by changing the Limit Disk Space To option to 20 MB and the Set Warning Level To option to 16 MB.</li></p>

<p><li> Click OK to return to the Quota Entries window.</li></p>

<p><li>Close the Quota Entries window.</li></p>

<p><li> Click OK to close the Local Disk (C:) Properties dialog box.</li></p>

<p><li> Log off.</li></p>
</ol>

<p><li> <b>To test quota management settings</b></li></p>

<ol>
<p><li> Log on as User5 with a password of <i>password.</i></li></p>

<p><li> Start Windows Explorer and create a User5 folder on drive C.</li></p>

<p><li> Insert the CD-ROM you used to install Windows 2000 Professional in your CD-ROM drive.</li></p>

<p><li> If a dialog box appears as a result of inserting the CD-ROM, close it.</li></p>

<p><li> Copy the i386 folder from your CD-ROM to the User5 folder.</li></p>


<p>Windows 2000 Professional begins copying files from the i386 folder on the CD-ROM to a new i386 folder in the User5 folder on drive C. After copying several files, however, Windows 2000 displays the Error Copying File Or Folder dialog box, indicating that there isn't enough room on the disk.</p>

<p>Why did you get this error message? </p>

<p><a href="chaaa.htm#964">Answer</a></p>


<p><li> Click OK to close the dialog box.</li></p>

<p><li> Right-click the User5 folder and then click Properties.</li></p>


<p>Notice that the Size On Disk value is slightly less than your quota limit of 
20 MB.</p>


<p><li> Close all open windows and log off.</li></p>
</ol>

<A NAME="627"><H3>Exercise 2: Disabling Quota Management</H3></A>

<p>In this exercise, you will disable quota management settings for drive C.</p>

<p><li><b> To disable quota management settings for drive C</b></li></p>

<ol>
<p><li> Log on as Administrator and start Windows Explorer.</li></p>

<p><li> Delete the User5 folder.</li></p>

<p><li> Right-click drive C, and then click Properties.</li></p>


<p>Windows 2000 displays the Local Disk (C:) Properties dialog box with the General tab active.</p>


<p><li> Click the Quota tab.</li></p>

<p><li> On the Quota tab, clear the Enable Quota Management check box.</li></p>


<p>Notice that all quota settings for drive C are no longer available.</p>


<p><li> Click Apply.</li></p>


<p>Windows 2000 displays the Disk Quota message box, warning you that if you disable quotas, the volume will be rescanned if you enable them later.</p>

<p><li> Click OK to close the Disk Quota message box.</li></p>

<p><li> Click OK to close the Local Disk (C:) Properties dialog box.</li></p>

<p><li> Close all applications.</li></p>
</ol>

<A NAME="628"><H2>Lesson Summary</H2></A>

<p>In this lesson, you learned that you use disk quotas to allocate disk space usage. You can set disk quotas, quota thresholds, and quota limits for all users and for individual users. You can also monitor the amount of hard disk space that users have and the amount that they have left against their quota. You also learned that Windows 2000 ignores compression when it calculates hard disk space usage and that you can apply disk quotas only to Windows 2000 NTFS volumes.</p>

<p>Windows 2000 disk quotas track and control disk usage on a per-user, per-volume basis. Windows 2000 tracks disk quotas for each volume, even if the volumes are on the same hard disk. Because quotas are tracked on a per-user basis, every user's disk space is tracked regardless of the folder in which the user stores files.</p>

</BODY>
</HTML>






