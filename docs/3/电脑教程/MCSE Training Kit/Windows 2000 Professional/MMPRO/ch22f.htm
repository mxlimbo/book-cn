<HTML>
<HEAD>
<TITLE>Lesson 5: Using the Recovery Console</TITLE>
<link rel="STYLESHEET" type="text/css" href="mmpro.css"><SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</HEAD>
<SCRIPT LANGUAGE="JavaScript">
<!--

function fullSize(sURL){
	window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}

function LibraryHeaderNav(sBackward, sForward, sImgLeftOff, sImgLeftOn, sImgRightOff, sImgRightOn, iH, iW, sImgLeftStyle, sImgRightStyle, sImgRuleStyle, sRuleColor, sRuleSize){
	var tableStr;
	//validate questionable args for defs
	tableStr = "<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 border=0 width=100%>";
	tableStr += "<TR VALIGN=top ALIGN=right>";

	tableStr += "<TD align=right class=" + sImgRuleStyle + ">&nbsp;</TD>";	
	
	tableStr += "<TD width=34 align=right class=" + sImgLeftStyle + ">";
	tableStr += "<A href='" + sBackward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgLeftOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgLeftOff + '\'\"';
	tableStr += " SRC='" + sImgLeftOff + "' vspace=0 hspace=0></a></TD>";
	
	tableStr += "<TD width=34 align=left class=" + sImgRightStyle + ">";
	tableStr += "<A href='" + sForward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgRightOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgRightOff + '\'\"';
	tableStr += " SRC='" + sImgRightOff + "' vspace=0 hspace=0></a></TD></TR>";

	tableStr += "<TR VALIGN=top>";
	tableStr += "<TD height=3 align=center colspan=3 class=" + sImgRuleStyle + ">";
	tableStr += "<HR color=" + sRuleColor + " size=" + sRuleSize + "></TD></TR></TABLE>";
	//alert(tableStr);
	document.write(tableStr);
}

 																						     //purple is: #aa22aa   orange is: #ff9900
LibraryHeaderNav("ch22e.htm", "ch22g.htm", "images/unit_p_a1.gif", "images/unit_p_a2.gif", "images/unit_p_b1.gif", "images/unit_p_b2.gif", 18, 34, "unit01", "unit02", "headerrule", "#aa22aa", "2");
//--></SCRIPT><P>



<A NAME="764"><H1>Lesson 5: Using the Recovery Console</H1></A>

<p>The Windows 2000 Recovery Console is a command-line interface that you can use to perform a variety of troubleshooting and recovery tasks, including</p>

<ul>
<p><li>Starting and stopping services.</li></p>

<p><li>Reading and writing data on a local drive (including drives that are formatted with the NTFS file system).</li></p>

<p><li>Formatting hard disks.</li></p>
</ul>

<p><div class="sidebar"><blockquote>
<b>After this lesson, you will be able to</b>

<ul>
<p><li>Install and use the Recovery Console.</li></p>
</ul>

<p><b>Estimated lesson time: 20 minutes</b></p>
</blockquote></div></p>

<A NAME="765"><H2>Installing and Starting the Recovery Console</H2></A>

<p>To install the Recovery Console, insert the Microsoft Windows 2000 Professional CD into your CD-ROM drive, and close the Microsoft Windows 2000 CD dialog box, if it opens. Open the Run dialog box or a Command Prompt window in Windows 2000, change to the i386 folder on the Windows 2000 CD-ROM, and then run the winnt32 command with the /cmdcons switch. After you install the Recovery Console, you can access it from the Please Select Operating System To Start menu. You can also use the Windows 2000 Setup disks or the Windows 2000 Professional CD to start your computer and then select the Recovery Console option, when you are prompted to choose repair options, to access the Recovery Console.</p>

<p>After you start the Recovery Console, you must specify which installation of Windows 2000 you want to log on to (if you have a dual boot or multiple boot configuration), and then you must log on as the Administrator user.</p>

<A NAME="766"><H2>Using the Windows 2000 Recovery Console</H2></A>

<p>You can also run the Recovery Console from the Windows 2000 CD-ROM. The Recovery Console provides you with a limited set of administrative commands that you can use to repair your Windows 2000 installation. You can use the following steps to start the Recovery Console from a Windows 2000 Professional CD-ROM.</p>

<ol>
<p><li> Insert the Windows 2000 Professional CD-ROM into the CD-ROM drive and restart the computer. If your computer or the workstation you want to repair does not have a bootable CD-ROM drive, you will need to insert your Windows 2000 Setup Boot disk into your floppy disk drive, and then insert the additional Windows 2000 Setup disks when you are prompted to do so.</li></p>

<p><li> When Setup displays the Setup Notification message, read it, and then press Enter to continue.</li></p>

<p>Setup displays the Welcome To Setup screen. Notice that, in addition to the initial installation of Windows 2000, you can use Windows 2000 Setup to repair or recover a damaged Windows 2000 installation.</p>

<p><li> Press R to repair a Windows 2000 installation.</li></p>

<p>The Windows 2000 Repair Options screen appears. Notice that you can repair a Windows 2000 installation using the Recovery Console or the Emergency Repair Process.</p>

<p><li> Press C to start the Recovery Console.</li></p>

<p>If you have more than one installation of Windows 2000 on the computer, you will be prompted to select which installation you want to repair.</p>

<p><li> Type <b>1</b> and then press Enter.</li></p>

<p>You are prompted to enter the Administrator's password.</p>

<p><li> Type the Administrator password and then press Enter.</li></p>

<p>A command prompt appears.</p>

<p><li> Type <b>Help</b> and press Enter for a list of the commands available.</li></p>

<p><li> When you have completed the repair process, type <b>exit</b> and press Enter.</li></p>

<p>The computer will restart.</p>
</ol>

<A NAME="767"><H2>Understanding the Recovery Console Commands</H2></A>

<p>There are a number of commands available in the Recovery Console. Table 22.8 describes some of these commands.</p>

<p><b>Table 22.8</b> <i>Recovery Console commands</i></p>

<p>
<table valign="top" cellpadding="5" width="95%">
<tr>
<th>Command</th>
<th>Description</th>
</tr>
<tr>
<td valign="top">Chdir (cd)</td>
<td valign="top">Displays the name of the current folder or changes the current folder</td>
</tr>
<tr>
<td valign="top">Chkdsk</td>
<td valign="top">Checks a disk and displays a status report</td>
</tr>
<tr>
<td valign="top">Cls</td>
<td valign="top">Clears the screen</td>
</tr>
<tr>
<td valign="top">Copy</td>
<td valign="top">Copies a single file to another location</td>
</tr>
<tr>
<td valign="top">Delete (del)</td>
<td valign="top">Deletes one or more files</td>
</tr>
<tr>
<td valign="top">Dir</td>
<td valign="top">Displays a list of files and subfolders in a folder</td>
</tr>
<tr>
<td valign="top">Disable</td>
<td valign="top">Disables a system service or a device driver</td>
</tr>
<tr>
<td valign="top">Enable</td>
<td valign="top">Starts or enables a system service or a device driver</td>
</tr>
<tr>
<td valign="top">Exit</td>
<td valign="top">Exits the Recovery Console and restarts your computer</td>
</tr>
<tr>
<td valign="top">Fdisk</td>
<td valign="top">Manages partitions on your hard disks</td>
</tr>
<tr>
<td valign="top">Fixboot</td>
<td valign="top">Writes a new partition boot sector onto the system partition</td>
</tr>
<tr>
<td valign="top">Fixmbr</td>
<td valign="top">Repairs the master boot record of the partition boot sector</td>
</tr>
<tr>
<td valign="top">Format</td>
<td valign="top">Formats a disk</td>
</tr>
<tr>
<td valign="top">Help</td>
<td valign="top">Lists the commands that you can use in the Recovery Console</td>
</tr>
<tr>
<td valign="top">Logon</td>
<td valign="top">Logs on to a Windows 2000 installation</td>
</tr>
<tr>
<td valign="top">Map</td>
<td valign="top">Displays the drive letter mappings</td>
</tr>
<tr>
<td valign="top">Mkdir (md)</td>
<td valign="top">Creates a folder</td>
</tr>
<tr>
<td valign="top">More</td>
<td valign="top">Displays a text file</td>
</tr>
<tr>
<td valign="top">Rmdir (rd)</td>
<td valign="top">Deletes a folder</td>
</tr>
<tr>
<td valign="top">Rename (ren)</td>
<td valign="top">Renames a single file</td>
</tr>
<tr>
<td valign="top">Systemroot</td>
<td valign="top">Sets the current folder to the systemroot folder of the system that you are currently logged on to</td>
</tr>
<tr>
<td valign="top">Type</td>
<td valign="top">Displays a text file</td>
</tr>
</table>
</p>

<p><img src="images/practic.JPG" width=92 height=74 border="0"></p>

<A NAME="768"><H2>Practice: Using the Windows 2000 Recovery Console</H2></A>

<p>In this practice you will use the Windows 2000 Recovery Console to troubleshoot a Windows 2000 installation that will not boot. You will also install and start the Recovery Console, and you will look at Help to determine the commands available in the Recovery Console. You will also use the Listsvc command to view the services and then use the Disable command to disable the Alerter service.</p>

<A NAME="769"><H3>Exercise 1: Troubleshooting a Windows 2000 Installation</H3></A>

<p>In this exercise you troubleshoot a Windows 2000 installation and repair it by using the Recovery Console.</p>


<p><li> <b>To create a system boot failure</b></li></p>
<ol>
<p><li> Rename the file Ntldr to Oldntldr.</li></p>

<p><li> Restart the computer.</li></p>

<p>What error do you receive when attempting to restart the computer?</p>

<p><a href="chaaa.htm#982">Answer</a></p>
</ol>


<p><li> <b>To use the Recovery Console to repair the installation</b></li></p>
<ol>

<p><li> Insert the Windows 2000 installation CD into the CD-ROM drive and restart the computer.</li></p>
</ol>

<p>
<div class="note"><blockquote><b>NOTE</b><hr>
If your computer is not equipped with a CD-ROM drive that is capable of booting from a CD-ROM, then also insert your Windows 2000 Setup Boot disk into your floppy disk drive for step 3. Insert the other three Windows 2000 Setup disks when you are prompted to do so. (To create the Setup disks, see <a href="chaba.htm">Appendix B</a>, &quot;Creating Setup Boot Disks.&quot;)
</blockquote></div>
</p>

<ol>
<p><li value="2"> When Setup displays the Setup Notification message, read it, and then press Enter to continue.</li></p>

<p>Setup displays the Welcome To Setup screen.</p>

<p><li> Press R to repair a Windows 2000 installation.</li></p>

<p>The Windows 2000 Repair Options screen appears.</p>

<p><li> Press C to start the Recovery Console.</li></p>

<p><li> Type <b>1</b> and then press Enter.</li></p>

<p>You are prompted to enter the Administrator's password.</p>

<p><li> Type <b>password</b> and then press Enter.</li></p>

<p>A C:\Winnt command prompt appears.</p>

<p><li> Type <b>cd ..</b> and press Enter to change to the root folder (C:\). Be sure to include a space between the &quot;cd&quot; and the &quot;..&quot; characters in the command.</li></p>

<p><li> Type <b>copy oldntldr ntldr</b> and press Enter.</li></p>

<p><li> If there is a disk in your floppy drive, remove it. If your computer is capable of booting from the CD-ROM drive, remove the Windows 2000 Professional CD from your CD-ROM drive.</li></p>

<p><li> Type <b>exit</b> and press Enter.</li></p>

<p>The computer reboots and should start normally.</p>
</ol>

<A NAME="770"><H3>Exercise 2: Installing the Windows 2000 Recovery Console</H3></A>

<p>In this exercise, you will install the Recovery Console.</p>


<p><li> <b>To install the Recovery Console</b></li></p>
<ol>

<p><li> Log on as Administrator.</li></p>

<p><li> Insert the Windows 2000 Professional CD into the CD-ROM drive.</li></p>

<p><li> When the Microsoft Windows 2000 CD window appears, close it.</li></p>

<p><li> In the Run dialog box, type <b><i>&lt;cd_drive&gt;</i>:\i386\winnt32 /cmdcons</b> (where <i>&lt;cd_drive&gt;</i> represents the letter assigned to your CD-ROM drive), and then click OK.</li></p>

<p>The Windows 2000 Setup message box appears.</p>

<p><li> Click Yes to install the Windows 2000 Recovery Console.</li></p>

<p>Windows 2000 Setup installs the Windows 2000 Recovery Console to your hard disk.</p>

<p><li> Click OK to close the Microsoft Windows 2000 Professional Setup dialog box.</li></p>
</ol>

<A NAME="771"><H3>Exercise 3: Using the Windows 2000 Recovery Console</H3></A>

<p>In this exercise you will use the Help command to view the available commands. You will then use the available Listsvc and Disable commands.</p>

<ol>
<p><li> Restart your computer.</li></p>

<p><li> Select Microsoft Windows 2000 Command Console from the boot loader menu.</li></p>
</ol>

<p>The Windows 2000 Recovery Console starts up and prompts you to select which Windows 2000 installation you would like to log on to. If you had more than one Windows 2000 installation on this computer, they would be listed here.</p>

<ol>
<p><li> Type <b>1</b> and then press Enter.</li></p>

<p><li> Type <b>password</b> when prompted for the Administrator password, and then press Enter.</li></p>

<p><li> Type <b>help</b> and then press Enter to see the list of available commands.</li></p>

<p>Notice the Listsvc command. You can use this command to view all available services.</p>

<p><li> Type <b>listsvc</b> and press Enter, and then scroll through the list of available services.</li></p>

<p><li> Press Esc to stop.</li></p>

<p><li> Type <b>disable /?</b> and then press Enter.</li></p>

<p>The Disable command allows you to disable a Windows system service or driver.</p>

<p><li> Type <b>disable alerter</b> and then press Enter.</li></p>

<p>Recovery Console displays several lines of text describing how the registry entry for the Alerter service has been modified. The Alerter service is now disabled.</p>

<p><li> Type <b>exit</b> and then press Enter to restart your computer.</li></p>
</ol>

<A NAME="772"><H3>Exercise 4: Restarting the Alerter service</H3></A>

<p>In this exercise you will confirm that the Alerter service is disabled and then restart it.</p>

<ol>
<p><li> Log on as Administrator.</li></p>

<p><li> Open the Computer Management window, expand Services And Applications, and then click Services.</li></p>

<p>Notice that the Startup Type value for the Alerter service is Disabled.</p>

<p><li> Double-click Alerter, change the Startup Type option to Automatic, and then click OK.</li></p>

<p><li> Right-click Alerter, and then click Start.</li></p>

<p><li> Close the Computer Management window.</li></p>
</ol>

<A NAME="773"><H2>Lesson Summary</H2></A>

<p>The Windows 2000 Recovery Console is a command-line interface that you can use to perform a variety of troubleshooting and recovery tasks, including starting and stopping services, reading and writing data on a local drive, and formatting hard disks.</p>

<p>You install the Recovery Console by starting a command prompt, changing to the i386 folder on the Windows 2000 CD-ROM, and running the winnt32 command with the /cmdcons switch. After you install the Recovery Console, you 
can access it from the Startup menu or by using the Windows 2000 Setup disks 
or the Windows 2000 CD to start your computer, and then selecting the Recovery Console option when you are prompted to choose repair options.</p>

</BODY>
</HTML>






