<HTML>
<HEAD>
<TITLE>Lesson 4: Using Event Viewer</TITLE>
<link rel="STYLESHEET" type="text/css" href="mmpro.css"><SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</HEAD>
<SCRIPT LANGUAGE="JavaScript">
<!--

function fullSize(sURL){
	window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}

function LibraryHeaderNav(sBackward, sForward, sImgLeftOff, sImgLeftOn, sImgRightOff, sImgRightOn, iH, iW, sImgLeftStyle, sImgRightStyle, sImgRuleStyle, sRuleColor, sRuleSize){
	var tableStr;
	//validate questionable args for defs
	tableStr = "<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 border=0 width=100%>";
	tableStr += "<TR VALIGN=top ALIGN=right>";

	tableStr += "<TD align=right class=" + sImgRuleStyle + ">&nbsp;</TD>";	
	
	tableStr += "<TD width=34 align=right class=" + sImgLeftStyle + ">";
	tableStr += "<A href='" + sBackward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgLeftOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgLeftOff + '\'\"';
	tableStr += " SRC='" + sImgLeftOff + "' vspace=0 hspace=0></a></TD>";
	
	tableStr += "<TD width=34 align=left class=" + sImgRightStyle + ">";
	tableStr += "<A href='" + sForward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgRightOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgRightOff + '\'\"';
	tableStr += " SRC='" + sImgRightOff + "' vspace=0 hspace=0></a></TD></TR>";

	tableStr += "<TR VALIGN=top>";
	tableStr += "<TD height=3 align=center colspan=3 class=" + sImgRuleStyle + ">";
	tableStr += "<HR color=" + sRuleColor + " size=" + sRuleSize + "></TD></TR></TABLE>";
	//alert(tableStr);
	document.write(tableStr);
}

 																						     //purple is: #aa22aa   orange is: #ff9900
LibraryHeaderNav("ch16d.htm", "ch16f.htm", "images/unit_p_a1.gif", "images/unit_p_a2.gif", "images/unit_p_b1.gif", "images/unit_p_b2.gif", 18, 34, "unit01", "unit02", "headerrule", "#aa22aa", "2");
//--></SCRIPT><P>



<A NAME="572"><H1>Lesson 4: Using Event Viewer</H1></A>

<p>You use Event Viewer to perform a variety of tasks, including viewing the audit logs that are generated as a result of setting the audit policy and auditing events. You can also use Event Viewer to view the contents of security log files and find specific events within log files.</p>

<p><div class="sidebar"><blockquote>
<b>After this lesson, you will be able to</b>

<ul>
<p><li>View a log.</li></p>

<p><li>Locate events in a log.</li></p>

<p><li>Archive security logs.</li></p>

<p><li>Configure the size of audit logs.</li></p>
</ul>



<p><b>Estimated lesson time: 45 minutes</b></p>
</blockquote></div></p>

<A NAME="573"><H2>Understanding Windows 2000 Logs</H2></A>

<p>You use Event Viewer to view information contained in Windows 2000 logs. By default, Event Viewer has three logs available to view. These logs are described in Table 16.5.</p>

<p><b>Table 16.5</b> <i>Logs Maintained by Windows 2000</i></p>

<p><table cellpadding=5 width="95%"><tr>
<th>Log</th><th>Description</th>
</tr><tr>
<td valign="top">Application log</td> <td valign="top">Contains errors, warnings, or information that programs, such 
 as a database program or an e-mail program, generate. The 
 program developer presets which events to record.</td>
</tr><tr>
<td valign="top">Security log</td> <td valign="top">Contains information about the success or failure of audited 
 events. The events that Windows 2000 records are a result of 
 your audit policy.</td>
</tr><tr>
<td valign="top">System log</td> <td valign="top">Contains errors, warnings, and information that Windows 2000 
 generates. Windows 2000 presets which events to record.</td>
</tr></table></p>

<p><div class="note"><blockquote><b>NOTE</b><HR>If additional services are installed, they might add their own event log.</blockquote></div></p>

<A NAME="574"><H2>Viewing Security Logs</H2></A>

<p>The security log contains information about events that are monitored by an audit policy, such as failed and successful logon attempts. You can view the security log, as follows:</p>

<ol>
<p><li>Click the Start button, point to Programs, point to Administrative Tools, and then click Event Viewer.</li></p>

<p><li>In the console tree, select Security Log.</li></p>

<p>In the details pane, Event Viewer displays a list of log entries and summary information for each item, as shown in Figure 16.5.</p>

<p>Successful events appear with a key icon, and unsuccessful events appear with a lock icon. Other important information includes the date and time that the event occurred, the category of the event, and the user who generated the event.</p>

<p>The category indicates the type of event, such as object access, account management, directory service access, or logon events.</p>

<p><li>To view additional information for any event, select the event, and then click Properties on the Action menu.</li></p>
</ol>

<p>Windows 2000 records events in the security log on the computer at which the event occurred. You can view these events from any computer as long as you have administrative privileges for the computer where the events occurred. To view the security log on a remote computer, start the MMC and create a custom console; point Event Viewer to a remote computer when you add this snap-in 
to a console.</p>

<p>
<A HREF="javascript:fullSize('F16tk05x.htm')"> <img src="images/F16tk05.JPG" width=404 height=281 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 16.5</b> <i>Event Viewer displaying a sample security log</i><!-- /caption -->
</p>

<A NAME="575"><H2>Locating Events</H2></A>

<p>When you first start Event Viewer, it automatically displays all events that are recorded in the selected log. To change what appears in the log, you can locate selected events by using the Filter command. You can also search for specific events by using the Find command.</p>

<p>To filter or find events, start Event Viewer, and then click Filter or click Find on the View menu. (See Figure 16.6.)</p>

<p>
<A HREF="javascript:fullSize('F16tk06x.htm')"> <img src="images/F16tk06.JPG" width=404 height=289 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 16.6</b> <i>Using Event Viewer to filter or find events in a log</i><!-- /caption -->
</p>

<p>Table 16.6 describes the options for filtering and finding events.</p>

<p><b>Table 16.6</b> <i>Options for Filtering and Finding Events</i></p>

<p><table cellpadding=5 width="95%"><tr>
<th>Option</th><th>Description</th>
</tr><tr>
<td valign="top">From and To</td> <td valign="top">The date range for which to view events (Filter tab only).</td>
</tr><tr>
<td valign="top">Event Types</td> <td valign="top">The types of events to view.</td>
</tr><tr>
<td valign="top">Event Source</td> <td valign="top">The software or component driver that logged the event.</td>
</tr><tr>
<td valign="top">Category</td> <td valign="top">The type of event, such as a logon or logoff attempt or a system 
 event.</td>
</tr><tr>
<td valign="top">Event ID</td> <td valign="top">An event number to identify the event. This number helps product 
 support representatives track events.</td>
</tr><tr>
<td valign="top">Computer</td> <td valign="top">A computer name.</td>
</tr><tr>
<td valign="top">User</td> <td valign="top">A user logon name.</td>
</tr><tr>
<td valign="top">Description</td> <td valign="top">The text that is in the description of the event 
 (Find dialog box only).</td>
</tr><tr>
<td valign="top">Search Direction</td> <td valign="top">The direction (up or down) in which to search the log 
 (Find dialog box only).</td>
</tr></table></p>

<A NAME="576"><H2>Managing Audit Logs</H2></A>

<p>You can track trends in Windows 2000 by archiving event logs and comparing logs from different periods. Viewing trends helps you determine resource use and plan for growth. You can also use logs to determine a pattern if unauthorized use of resources is a concern. Windows 2000 allows you to control the size of the logs and to specify the action that Windows 2000 takes when a log becomes full.</p>

<p>You can configure the properties of each individual audit log. To configure the settings for logs, select the log in Event Viewer, and then display the Properties dialog box for the log.</p>

<p>Use the Properties dialog box for each type of audit log to control the following:</p>

<ul>
<p><li>The size of each log, which can be from 64 KB to 4,194,240 KB (4 GB). The default size is 512 KB.</li></p>

<p><li>The action that Windows 2000 takes when the log fills up, by clicking one of the options described in Table 16.7.</li></p>
</ul>

<p><b>Table 16.7</b> <i>Options for Handling Full Audit Log Files</i></p>

<p><table cellpadding=5 width="95%"><tr>
<th>Option</th><th>Description</th>
</tr><tr>
<td valign="top">Overwrite Events As Needed</td> <td valign="top">You might lose information if the log becomes 
 full before you archive it. However, this setting 
 requires no maintenance.</td>
</tr><tr>
<td valign="top">Overwrite Events Older Than <i>X</i> Days</td> <td valign="top">You might lose information if the log becomes 
 full before you archive it, but Windows 2000 
 will only lose information that is at least <i>x</i> days 
 old. Enter the number of days for this option.</td>
</tr><tr>
<td valign="top">Do Not Overwrite Events (Clear Log Manually)</td><td valign="top">This option requires you to clear the log 
 manually. When the log becomes full, Windows 
 2000 will stop. However, no security log entries 
 are overwritten.</td>
</tr></table></p>

<A NAME="577"><H2>Archiving Logs</H2></A>

<p>Archiving security logs allows you to maintain a history of security-related events. Many companies have policies on keeping archive logs for a specified period to track security-related information over time.</p>

<p>If you want to archive, clear, or view an archived log, select the log you want 
to configure in Event Viewer, click the Action menu, and then click one of the options described in Table 16.8.</p>

<p><b>Table 16.8</b> <i>Options to Archive, Clear, or View a Log File</i></p>
<p><table cellpadding=5 width="95%"><tr>
<th>To</th><th>Do this</th>
</tr><tr>
<td valign="top">Archive the log</td> <td valign="top">Click Save Log File As, and then type a filename.</td>
</tr><tr>
<td valign="top">Clear the log</td> <td valign="top">Click Clear All Events to clear the log. Windows 2000 creates 
 a security log entry, stating that the log was cleared.</td>
</tr><tr>
<td valign="top">View an archived log</td> <td valign="top">Click New Log View to add another view of the selected log.</td>
</tr></table></p>

<p><img src="images/practic.JPG" width=92 height=74 border="0"></p>
<A NAME="578"><H2>Practice: Auditing Resources and Events</H2></A>


<p>In this practice, you will plan an audit policy for your computer. Then you will set up an audit policy by enabling auditing on certain events. You will also set up auditing of a file and a printer. Then you will view the security log file and configure Event Viewer to overwrite events when the log file is filled.</p>

<A NAME="579"><H3>Exercise 1: Planning an Audit Policy</H3></A>

<p>In this exercise, you will plan an audit policy for your computer. You need to determine the following:</p>

<ul>
<p><li>Which types of events to audit</li></p>

<p><li>Whether to audit the success or failure of an event, or both</li></p>
</ul>

<p>Use the following criteria to make your decisions:</p>

<ul>
<p><li>Record unsuccessful attempts to gain access to the computer.</li></p>

<p><li>Record unauthorized access to the files that make up the Customer database.</li></p>

<p><li>For billing purposes, track color printer use.</li></p>

<p><li>Track whenever someone tries to tamper with the computer's hardware.</li></p>

<p><li>Keep a record of actions that an administrator performs to track unauthorized changes.</li></p>

<p><li>Track backup procedures to prevent data theft.</li></p>

<p><li>Track unauthorized access to sensitive Active Directory objects.</li></p>
</ul>



<p>Record your decisions to audit successful events, failed events, or both for the actions listed in the following table:</p>

<p><table cellpadding=5 width="95%"><tr>
<th>Action to audit</th><th>Successful</th><th>Failed</th>
</tr><tr>
<td valign="top">Account Logon Events</td> <td valign="top"></td>
<td valign="top"></td>
</tr><tr>
<td valign="top">Account Management</td> <td valign="top"></td>
<td valign="top"></td>
</tr><tr>
<td valign="top">Directory Service Access</td> <td valign="top"></td>
<td valign="top"></td>
</tr><tr>
<td valign="top">Logon Events</td> <td valign="top"></td>
<td valign="top"></td>
</tr><tr>
<td valign="top">Object Access</td><td valign="top"></td>
<td valign="top"></td>
</tr><tr>
<td valign="top">Policy Change</td> <td valign="top"></td>
<td valign="top"></td></tr><tr>
<td valign="top">Privilege Use</td> <td valign="top"></td>
<td valign="top"></td></tr><tr>
<td valign="top">Process Tracking</td> <td valign="top"></td>
<td valign="top"></td></tr><tr>
<td valign="top">System Events</td> <td valign="top"></td>
<td valign="top"></td>
</tr></table></p>

<A NAME="580"><H3>Exercise 2: Setting Up an Audit Policy</H3></A>

<p>In this exercise, you will enable auditing for selected events.</p>


<p><li><b>To set up an audit policy</b></li></p>

<ol>
<p><li>Log on to your computer as Administrator.</li></p>

<p><li>Click Start, point to Programs, point to Administrative Tools, and then click Local Security Policy.</li></p>

<p><li>In the Local Security Settings window's console tree, double-click Local Policies, and then click Audit Policy.</li></p>

<p><li>To set the audit policy, in the details pane, double-click each type of event, and then select either the Success check box or the Failure check box for the Audit These Attempts setting, as listed in the following table.</li></p>


<p><table cellpadding=5 width="95%"><tr>
<th>Event</th><th>Audit Successful Attempts</th><th>Audit Failed Attempts</th>
</tr><tr>
<td valign="top">Account Logon Events</td><td valign="top"></td>
<td valign="top"></td></tr><tr>
<td valign="top">Account Management</td><td valign="top"></td>
<td valign="top"></td></tr><tr>
<td valign="top">Directory Service Access</td><td valign="top"></td>
<td valign="top"></td></tr><tr>
<td valign="top">Logon Events</td><td valign="top"></td>
<td valign="top">X</td></tr><tr>
<td valign="top">Object Access</td><td valign="top">X</td>
<td valign="top">X</td></tr><tr>
<td valign="top">Policy Change</td><td valign="top"></td>
<td valign="top"></td></tr><tr>
<td valign="top">Privilege Use</td><td valign="top">X</td>
<td valign="top"></td></tr><tr>
<td valign="top">Process Tracking</td><td valign="top"></td>
<td valign="top"></td></tr><tr>
<td valign="top">System Events</td><td valign="top">X</td>
<td valign="top">X</td></tr><tr>
</tr></table></p>

<p><li value="5">Close the Local Security Settings window.</li></p>

<p><li>Restart your computer.</li></p>
</ol>

<A NAME="581"><H3>Exercise 3: Setting Up Auditing of Files</H3></A>

<p>In this exercise, you will set up auditing for a file.</p>


<p><li><b>To set up auditing of files</b></li></p>

<ol>
<p><li>In Windows Explorer, create a text file named Audit in the root folder of your system disk (for example, C:\Audit).</li></p>

<p><li>Right-click the Audit.txt file, and then click Properties.</li></p>

<p><li>In the Properties dialog box, click the Security tab, and then click Advanced.</li></p>

<p><li>In the Access Control Settings dialog box, click the Auditing tab.</li></p>

<p><li>Click Add.</li></p>

<p><li>In the Select User, Computer, Or Group dialog box, double-click Everyone in the list of user accounts and groups.</li></p>

<p><li>In the Audit Entry For Audit dialog box, select the Successful check box and the Failed check box for each of the following events:</li></p>

<ul>
<p><li>Create Files/Write Data</li></p>

<p><li>Delete</li></p>

<p><li>Change Permissions</li></p>

<p><li>Take Ownership</li></p>
</ul>

<p><li>Click OK.</li></p>

<p>Windows 2000 displays the Everyone group in the Access Control Settings For Audit dialog box.</p>

<p><li>Click OK to apply your changes.</li></p>
</ol>

<p><li><b>To change file permissions</b></li></p>

<ol>
<p><li>In the Properties dialog box, change the NTFS permissions for the file to only the Read permission for Everyone. Remove any other permissions and prevent inheritable permissions to propagate from the parent.</li></p>

<p><li>Click OK to close the Properties dialog box, and then close Windows Explorer.</li></p>
</ol>

<A NAME="582"><H3>Exercise 4: Setting Up Auditing of a Printer</H3></A>

<p>In this exercise, you will set up auditing of a printer.</p>

<p><li><b>To set up auditing of a printer</b></li></p>

<ol>
<p><li>Click the Start button, point to Settings, and then click Printers.</li></p>

<p><li>In the Printers window, right-click HP LaserJet 5Si (the procedures for installing this printer are in <A HREF="ch12a.htm">Chapter 12</A>, &quot;Setting Up and Configuring Network Printers&quot;), and then click Properties.</li></p>

<p><li>Click the Security tab, and then click Advanced.</li></p>

<p><li>In the Access Control Settings For HP LaserJet 5Si dialog box, click the Auditing tab, and then click Add.</li></p>

<p><li>In the Select User, Computer, Or Group dialog box, double-click Everyone in the list box.</li></p>

<p><li>In the Audit Entry For HP LaserJet 5Si dialog box, select the Successful check box for all types of access.</li></p>

<p><li>Click OK.</li></p>

<p>Windows 2000 displays the Everyone group in the Access Control Settings For HP LaserJet 5Si dialog box.</p>

<p><li>Click OK to apply your changes.</li></p>

<p><li>Click OK to close the HP LaserJet 5Si Properties dialog box.</li></p>

<p><li>Close the Printers window.</li></p>
</ol>

<A NAME="583"><H3>Exercise 5: Viewing the Security Log</H3></A>

<p>In this exercise, you will view the security log for your computer. Then you will use Event Viewer to filter events and to search for potential security breaches.</p>

<p><li><b>To view the security log for your computer</b></li></p>

<ol>
<p><li>Click the Start menu, click Programs, click Administrative Tools, and then click Event Viewer.</li></p>

<p><li>In the console tree, click each of the three logs and view the contents. As you scroll through the logs, double-click a couple of events to view a description.</li></p>
</ol>

<A NAME="584"><H3>Exercise 6: Managing the Security Log</H3></A>

<p>In this exercise, you will configure Event Viewer to overwrite events when 
the Security log gets full. You will also increase the size of the Security log 
to 2048 KB.</p>

<p><li><b>To control the size and contents of a log file</b></li></p>

<ol>
<p><li>Verify that in the console tree, Security Log is selected.</li></p>

<p><li>On the Action menu, click Properties.</li></p>

<p><li>In the Security Log Properties dialog box, click Overwrite Events As Needed.</li></p>

<p><li>In the Maximum Log Size box, change the maximum log size to 2048 (KB), and click OK.</li></p>

<p>Windows 2000 will now allow the log to grow to 2048 KB and will then overwrite older events with new events as necessary.</p>

<p><li>Close Event Viewer.</li></p>
</ol>

<A NAME="585"><H2>Lesson Summary</H2></A>

<p>In this lesson, you learned that Windows 2000 Professional has the following three logs by default: the Application log, the Security log, and the System log. You use Event Viewer to view the contents of the Windows 2000 logs. You can use the Filter and Find commands in Event Viewer to easily locate specific 
events or types of events. You can manage the Windows 2000 logs by archiving them to allow you to track trends over time and by controlling the size of the log files. The practice portion of this exercise gave you hands-on experience with these tasks.</p>

</BODY>
</HTML>






