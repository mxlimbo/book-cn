<HTML>
<HEAD>
<TITLE>Lesson 4: Combining Shared Folder Permissions and NTFS Permissions</TITLE>
<link rel="STYLESHEET" type="text/css" href="mmpro.css"><SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</HEAD>
<SCRIPT LANGUAGE="JavaScript">
<!--

function fullSize(sURL){
	window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}

function LibraryHeaderNav(sBackward, sForward, sImgLeftOff, sImgLeftOn, sImgRightOff, sImgRightOn, iH, iW, sImgLeftStyle, sImgRightStyle, sImgRuleStyle, sRuleColor, sRuleSize){
	var tableStr;
	//validate questionable args for defs
	tableStr = "<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 border=0 width=100%>";
	tableStr += "<TR VALIGN=top ALIGN=right>";

	tableStr += "<TD align=right class=" + sImgRuleStyle + ">&nbsp;</TD>";	
	
	tableStr += "<TD width=34 align=right class=" + sImgLeftStyle + ">";
	tableStr += "<A href='" + sBackward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgLeftOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgLeftOff + '\'\"';
	tableStr += " SRC='" + sImgLeftOff + "' vspace=0 hspace=0></a></TD>";
	
	tableStr += "<TD width=34 align=left class=" + sImgRightStyle + ">";
	tableStr += "<A href='" + sForward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgRightOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgRightOff + '\'\"';
	tableStr += " SRC='" + sImgRightOff + "' vspace=0 hspace=0></a></TD></TR>";

	tableStr += "<TR VALIGN=top>";
	tableStr += "<TD height=3 align=center colspan=3 class=" + sImgRuleStyle + ">";
	tableStr += "<HR color=" + sRuleColor + " size=" + sRuleSize + "></TD></TR></TABLE>";
	//alert(tableStr);
	document.write(tableStr);
}

 																						     //purple is: #aa22aa   orange is: #ff9900
LibraryHeaderNav("ch15d.htm", "ch15f.htm", "images/unit_p_a1.gif", "images/unit_p_a2.gif", "images/unit_p_b1.gif", "images/unit_p_b2.gif", 18, 34, "unit01", "unit02", "headerrule", "#aa22aa", "2");
//--></SCRIPT><P>



<A NAME="541"><H1>Lesson 4: Combining Shared Folder Permissions and NTFS Permissions</H1></A>

<p>You share folders to provide network users with access to resources. If you are using a FAT volume, the shared folder permissions are the only resource available to provide security for the folders you have shared and the folders and files they contain. If you are using an NTFS volume, you can assign NTFS permissions to individual users and groups to better control access to the files and subfolders in the shared folders. When you combine shared folder permissions and NTFS permissions, the more restrictive permission is always the overriding permission.</p>

<p><div class="sidebar"><blockquote>
<b>After this lesson, you will be able to</b>

<ul>
<p><li>Combine shared folder permissions and NTFS permissions.</li></p>
</ul>

<p><b>Estimated lesson time: 45 minutes</b></p>
</blockquote></div></p>

<A NAME="542"><H2>Strategies for Combining Shared Folder Permissions and NTFS Permissions</H2></A>

<p>One strategy for providing access to resources on an NTFS volume is to share folders with the default shared folder permissions and then control access by 
assigning NTFS permissions. When you share a folder on an NTFS volume, 
both shared folder permissions and NTFS permissions combine to secure file 
resources.</p>

<p>Shared folder permissions provide limited security for resources. You gain the greatest flexibility by using NTFS permissions to control access to shared folders. Also, NTFS permissions apply whether the resource is accessed locally or over the network.</p>

<p>When you use shared folder permissions on an NTFS volume, the following rules apply:</p>

<ul>
<p><li>You can apply NTFS permissions to files and subfolders in the shared folder. You can apply different NTFS permissions to each file and subfolder that a shared folder contains.</li></p>

<p><li>In addition to shared folder permissions, users must have NTFS permissions for the files and subfolders that shared folders contain to gain access to those files and subfolders. This is in contrast to FAT volumes where permissions for a shared folder are the only permissions protecting files and subfolders in the shared folder.</li></p>

<p><li>When you combine shared folder permissions and NTFS permissions, the more restrictive permission is always the overriding permission.</li></p>
</ul>



<p>In Figure 15.9, the Everyone group has the shared folder Full Control permission for the Public folder and the NTFS Read permission for FileA. The Everyone group's effective permission for FileA is Read because Read is the more restrictive permission. The effective permission for FileB is Full Control because both the shared folder permission and the NTFS permission allow this level of access.</p>

<p>
<A HREF="javascript:fullSize('F15tk09x.htm')"> <img src="images/F15tk09.JPG" width=404 height=304 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 15.9</b> <i>Combining shared folder permissions and NTFS permissions</i><!-- /caption -->
</p>

<p><img src="images/practic.JPG" width=92 height=74 border="0"></p>

<A NAME="543"><H2>Practice: Managing Shared Folders</H2></A>

<p>In this practice, you will determine users' effective permissions, plan shared folders, plan permissions, share a folder, assign shared folder permissions, connect to a shared folder, stop sharing a folder, and test the combined effects of shared folder permissions and NTFS permissions.</p>

<p><div class="caution"><blockquote><b>IMPORTANT</b><HR>To complete the optional exercises (5 and 8), you must have two networked computers. One computer must be running Windows 2000 Professional and the other must be running one of the following Windows 2000 products: Windows 2000 Professional, Windows 2000 Server, or Windows 2000 Advanced Server. Both computers should have the Administrator user account using password for the Administrator account password.</blockquote></div></p>

<A NAME="544"><H3>Exercise 1: Combining Permissions</H3></A>

<p>Figure 15.10 shows examples of shared folders on NTFS volumes. These shared folders contain subfolders that have also been assigned NTFS permissions. 
Determine a user's effective permissions for each example.</p>

<p>
<A HREF="javascript:fullSize('F15tk10x.htm')"> <img src="images/F15tk10.JPG" width=404 height=332 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 15.10</b> <i>Combined permissions</i><!-- /caption -->
</p>

<ol>
<p><li> In the first example, the Data folder is shared. The Sales group has the shared folder Read permission for the Data folder and the NTFS Full Control permission for the Sales subfolder.</li></p>


<p>What are the Sales group's effective permissions for the Sales subfolder when they gain access to 
the Sales subfolder by making a connection to the Data shared folder? 

<p><a href="chaaa.htm#944">Answer</a></p>
 </p>


<p><li> In the second example, the Users folder contains user home folders. Each user home folder contains data that is accessible only to the user for whom the folder is named. The Users folder has been shared, and the Users group has the shared folder Full Control permission for the Users folder. User1 and User2 have the NTFS Full Control permission for <i>only</i> their home folder and no NTFS permissions for other folders. These users are all members of the Users group.</li></p>


<p>What permissions does User1 have when he or she accesses the User1 subfolder by making a connection 
to the Users shared folder? What are User1's permissions for the User2 subfolder? 
</p>

<p><a href="chaaa.htm#944">Answer</a></p>
</ol>

<A NAME="545"><H3>Exercise 2: Planning Shared Folders</H3></A>

<p>In this exercise, you will plan how to share resources on servers in the main 
office of a manufacturing company. Record your decisions in the table at the 
end of this exercise.</p>

<p>Figure 15.11 illustrates a partial folder structure for the servers at the manufacturing company.</p>

<p>
<A HREF="javascript:fullSize('F15tk11x.htm')"> <img src="images/F15tk11.JPG" width=404 height=306 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 15.11</b> <i>A partial folder structure for the servers at a manufacturing company</i><!-- /caption -->
</p>

<p>You need to make resources on these servers available to network users. To do this, determine which folders to share and which permissions to assign to groups, including the appropriate built-in groups.</p>

<p>Base your planning decisions on the following criteria:</p>

<ul>
<p><li>Members of the Managers group need to read and revise documents in the Management Guidelines folder. 
Nobody else should have access to this folder.</li></p>

<p><li>Administrators need complete access to all shared folders, except for Management Guidelines.</li></p>

<p><li>The customer service department requires its own network location to store working files. 
All customer service representatives are members of the Customer Service group.</li></p>

<p><li>All employees need a network location to share information with each other.</li></p>

<p><li>All employees need to use the spreadsheet, database, and word processing software.</li></p>

<p><li>Only members of the Managers group should have access to the project management software.</li></p>

<p><li>Members of the CustomerDBFull group need to read and update the customer database.</li></p>

<p><li>Members of the CustomerDBRead group need to read only the customer database.</li></p>

<p><li>Each user needs a private network location to store files. This location must be accessible only by that user.</li></p>

<p><li>Share names must be accessible from Windows 2000, Windows NT, Windows 98, Windows 95, and non-Windows-NT-based platforms.</li></p>
</ul>



<p>Record your answers in the following table.</p>

<p>
<table valign="top" cellpadding="5" width="95%">
<tr>
<th>Folder name and location</th> <th>Shared name</th> <th>Groups and permissions</th>
</tr>

<tr>
<td valign="top"><i>Example:</i></td><td valign="top"></td><td valign="top"></td>
</tr><tr>
<td valign="top">Management Guidelines</td> <td valign="top">MgmtGd </td><td valign="top">Managers: Full Control</td>
</tr><tr>
<td valign="top">&nbsp;</td><td valign="top">&nbsp;</td><td valign="top">&nbsp;</td>
</tr><tr>
<td valign="top">&nbsp;</td><td valign="top">&nbsp;</td><td valign="top">&nbsp;</td>
</tr><tr>
<td valign="top">&nbsp;</td><td valign="top">&nbsp;</td><td valign="top">&nbsp;</td>
</tr>
</table>
</p>

<p><a href="chaaa.htm#945">Answer</a></p>

<A NAME="546"><H3>Exercise 3: Sharing Folders</H3></A>

<p>In this exercise, you will share a folder.</p>


<p><li><b>To share a folder</b></li></p>




<ol>
<p><li> Log on as Administrator.</li></p>

<p><li> Start Windows Explorer, create a C:\MktApps folder, right-click MktApps, and then click Properties.</li></p>

<p><li> In the MktApps Properties dialog box, click the Sharing tab.</li></p>


<p>Notice that the folder is currently not shared.</p>


<p><li> Click Share This Folder.</li></p>


<p>Notice that Share Name defaults to the name of the folder. If you want the share name to be different from the folder's name, change it here.</p>


<p><li> In the Comment box, type <b>Shared Marketing Applications</b> and then click OK.</li></p>

<p>Notice that Windows Explorer changes the appearance of the Apps folder by placing a hand under it to indicate that it is a shared folder.</p>
</ol>

<A NAME="547"><H3>Exercise 4: Assigning Shared Folder Permissions</H3></A>

<p>In this exercise, you will determine the current permissions for a shared folder and assign shared folder permissions to groups in your domain.</p>


<p><li><b>To determine the current permissions for the MktApps shared folder</b></li></p>




<ol>
<p><li> In Windows Explorer, right-click C:\MktApps, and then click Properties.</li></p>

<p><li> In the MktApps Properties dialog box, click the Sharing tab, and then click Permissions.</li></p>


<p>Windows 2000 displays the Permissions For MktApps dialog box.</p>

<p>Notice that the default permissions for the MktApps shared folder is for the Everyone group to have Full Control permissions.</p>
</ol>


<p><li><b>To remove permissions for a group</b></li></p>



<ol>
<p><li> Verify that Everyone is selected.</li></p>

<p><li> Click Remove.</li></p>
</ol>

<p><li><b>To assign Full Control to the Administrators group</b></li></p>



<ol>
<p><li> Click Add.</li></p>


<p>Windows 2000 displays the Select Users, Computers, Or Groups dialog box.</p>

<p><li> Ensure that your computer name, PRO1, is displayed in the Look In box. In the Name box, click Administrators, and then click Add.</li></p>

<p><li> Click OK.</li></p>


<p>Windows 2000 adds Administrators to the list of names with permissions.</p>

<p>Which type of access does Windows 2000 assign to Administrators by 
default? 
</p>

<p><a href="chaaa.htm#946">Answer</a></p>

<p><li> In the Permissions box, under Allow, click the Full Control check box.</li></p>


<p>Why did Windows Explorer also select the Change permission for you? </p>

<p><a href="chaaa.htm#946">Answer</a></p>
 



<p><li> Click OK to close the Permissions For MktApps dialog box.</li></p>

<p><li> Click OK to close the MktApps Properties dialog box.</li></p>

<p><li> Close Windows Explorer.</li></p>
</ol>

<A NAME="548"><H3>Exercise 5 (Optional): Connecting to a Shared Folder</H3></A>

<p>In this exercise, you will use two methods to connect to a shared folder.</p>

<p>
<div class="warning"><blockquote>
<b>IMPORTANT</b><hr>To complete Exercise 5, you must have two networked computers. One computer must be running Windows 2000 Professional, and the other 
must be running either Windows 2000 Professional, Windows 2000 Server, or 
Windows 2000 Advanced Server. Both computers should have the Administrator user account using 
<i>password</i> for the Administrator account password.
</blockquote></div>
</p>


<p><li><b>To connect to a network drive by using the Run command</b></li></p>


<ol>
<p><li> Log on as Administrator on your second computer.</li></p>

<p><li> Click the Start button, and then click Run.</li></p>

<p><li> In the Open box, type <b>\\PRO1</b>. (If you didn't use PRO1 as the name of your computer, use the appropriate name here and in the following steps.) Click OK.</li></p>


<p>Windows 2000 displays the PRO1 window. Notice that only the folders that are shared appear to network users.</p>


<p><li> Double-click MktApps to confirm that you can gain access to its contents.</li></p>


<p>MktApps contains no files or folders for you to access, but the system opens the folder and displays the contents of MktApps.</p>


<p><li> Close the MktApps On PRO1 window.</li></p>
</ol>


<p><li><b>To connect a network drive to a shared folder by using the Map Network Drive command</b></li></p>



<ol>
<p><li> Right-click My Network Places, and then click Map Network Drive.</li></p>

<p><li> In the Map Network Drive wizard, in the Folder box, type <b>\\PRO1\MktApps</b> (if you didn't use PRO1 as the name of your computer, use the appropriate name here).</li></p>

<p><li> In the Drive box, select P.</li></p>

<p><li> Clear the Reconnect At Logon check box.</li></p>


<p>You will gain access to this shared folder only in this exercise. Disabling 
the option to reconnect will ensure that Windows 2000 won't automatically attempt to reconnect to this shared folder later.</p>


<p><li> To complete the connection, click Finish.</li></p>


<p>Windows 2000 displays the MktApps On `PRO1' (P:) window.</p>

<p>How does Windows Explorer indicate that this drive points to a remote shared folder? </p>

<p><a href="chaaa.htm#947">Answer</a></p>


<p><li> Close the MktApps On `PRO1' (P:) window.</li></p>
</ol>


<p><li><b>To disconnect from a network drive by using Windows Explorer</b></li></p>

<ol>
<p><li> Start Windows Explorer.</li></p>

<p><li> Right-click MktApps On `Pro1' (P:), and then click Disconnect.</li></p>


<p>Windows 2000 removes MktApps On `PRO1' (P:) from the Windows 
Explorer window.</p>


<p><li> Close Windows Explorer.</li></p>
</ol>

<A NAME="549"><H3>Exercise 6: Stopping Folder Sharing</H3></A>

<p>In this exercise, you will stop sharing a shared folder.</p>

<p><li><b>To stop sharing a folder</b></li></p>

<ol>
<p><li> Log on as Administrator on the PRO1 computer (or the computer running Windows 2000 Professional 
with the name you specified), and then start Windows Explorer.</li></p>

<p><li> Right-click C:\MktApps, and then click Properties.</li></p>

<p><li> In the MktApps Properties dialog box, click the Sharing tab.</li></p>

<p><li> Click Do Not Share This Folder, and then click OK.</li></p>


<p>Notice that Windows 2000 no longer displays the hand that identifies a 
shared folder under the Apps folder. You might need to refresh the screen; 
if so, press F5.</p>


<p><li> Close Windows Explorer.</li></p>
</ol>

<A NAME="550"><H3>Exercise 7: Assigning NTFS Permissions and Sharing Folders</H3></A>

<p>In this exercise, you will assign NTFS permissions to the MktApps, Public, and Manuals folders. Then you will share the MktApps, Manuals, and Public folders.</p>


<p><li><b>To assign NTFS permissions</b></li></p>



<p>Use Windows Explorer to create the necessary folders and to assign the NTFS permissions that are listed in the table that follows. For each folder, do not allow inherited permissions to propagate to the object and remove any previously existing NTFS permissions.</p>

<p>
<table valign="top" cellpadding="5" width="95%">
<tr>
<th>Path</th> <th>Group or user account</th> <th>NTFS permissions</th>
</tr>

<tr>
<td valign="top">C:\MktApps </td><td valign="top">Administrators <br> Users </td>
<td valign="top">Full Control 
 <br> Read &amp; Execute</td>
</tr>

<tr>
<td valign="top">C:\MktApps\Manuals</td> 
<td valign="top">Administrators<br>  Users </td>
<td valign="top">Full Control <br>Read &amp; Execute</td></tr>

<tr>
<td valign="top">C:\MktApps\Public </td><td valign="top">Administrators <br> Users </td>
<td valign="top">Full Control <br>
Full Control</td>
</tr>
 
</table>
</p>

<p><li><b>To share folders and assign shared folder permissions</b></li></p>



<p>Share the appropriate application folders and assign permissions to network user accounts 
based on the information in the table that follows. Remove all other shared folder permissions.</p>

<p>
<table valign="top" cellpadding="5" width="95%">
<tr>
<th>Path and shared folder name</th>
<th>Group or user account</th>
<th>Shared folder permissions</th>
</tr>

<tr>
<td valign="top">C:\MktApps shared as MktApps </td><td valign="top">Administrators <br>Users</td> 
<td valign="top">Full Control<br>
Full Control</td>
</tr>
</table>
</p>




<A NAME="551"><H3>Exercise 8 (Optional): Testing NTFS and Shared Folder Permissions</H3></A>

<p>In this exercise, you will use different user accounts to test the permissions that you assigned in Exercise 1. To answer the questions in this exercise, refer to the tables in Exercise 7.</p>

<p><div class="caution"><blockquote><b>IMPORTANT</b><HR>To complete Exercise 8, you must have two networked computers. One computer must be running Windows 2000 Professional, and the other must be running either Windows 2000 Professional, Windows 2000 Server, or Windows 2000 Advanced Server. Both computers should have the Administrator user account using <i>password</i> for the Administrator account password.</blockquote></div></p>

<p><li><b>To test permissions for the Manuals folder when a user logs on locally</b></li></p>



<ol>
<p><li> Log on as User1 with a password of <i>password</i> on the PRO1 computer (or the computer running Windows 2000 Professional with the name you specified).</li></p>

<p><li> In Windows Explorer, expand C:\MktApps\Manuals.</li></p>

<p><li> In the Manuals folder, attempt to create a file.</li></p>


<p>Were you successful? Why or why not? </p>

<p><a href="chaaa.htm#948">Answer</a></p>


<p><li>Close Windows Explorer and log off.</li></p>
</ol>

<p><li><b>To test permissions for the Manuals folder when a user makes a connection over the network</b></li></p>



<ol>
<p><li> Log on as Administrator with a password of <i>password</i> on your second computer.</li></p>

<p><li> Create a user account, User1, with a password of <i>password</i> and clear the User Must Change Password At Next Logon check box, if necessary.</li></p>
</ol>

<p><div class="note"><blockquote><b>NOTE</b><HR>In a workgroup, no centralized database of user accounts exists. Therefore, you must create the same user account with the same password on each computer in the workgroup. This applies to the Administrator account as well.</blockquote></div></p>

<ol>
<p><li value="3"> Log off and then log on as User1 at your second computer.</li></p>

<p><li> Click the Start button, and then click Run.</li></p>

<p><li> In the Open box, type <b>\\PRO1\MktApps</b> and then click OK.</li></p>

<p><li> In the MktApps On PRO1 window, double-click Manuals.</li></p>

<p><li> In the Manuals window, attempt to create a file.</li></p>


<p>Were you successful? Why or why not? </p>

<p><a href="chaaa.htm#948">Answer</a></p>

<p><li> Close all windows and log off.</li></p>
</ol>

<p><li><b>To test permissions for the Manuals folder when a user logs on over the network as Administrator</b></li></p>



<ol>
<p><li> Log on as Administrator with a password of <i>password</i> at your second computer, not PRO1.</li></p>

<p><li> Make a connection to the shared folder C:\MktApps on PRO1.</li></p>

<p><li> In the MktApps On PRO1 window, double-click Manuals.</li></p>

<p><li> In the Manuals window, attempt to create a file.</li></p>


<p>Were you successful? Why or why not? </p>

<p><a href="chaaa.htm#948">Answer</a></p>


<p><li> Close all windows and log off.</li></p>
</ol>

<p><li><b>To test permissions for the Public folder when a user makes a connection over the network</b></li></p>



<ol>
<p><li> Log on as User1 with a password of <i>password</i> on your second computer.</li></p>

<p><li> Click the Start button, and then click Run.</li></p>

<p><li> In the Open box, type <b>\\PRO1\MktApps</b> and then click OK.</li></p>

<p><li> In the MktApps On PRO1 window, double-click Public.</li></p>

<p><li> In the Public window, attempt to create a file.</li></p>


<p>Were you successful? Why or why not? </p>

<p><a href="chaaa.htm#948">Answer</a></p>


<p><li>Close all windows and log off.</li></p>
</ol>

<A NAME="552"><H2>Lesson Summary</H2></A>

<p>In this lesson, you learned that you share folders to provide network users with access to resources. On a FAT volume, the shared folder permissions are all that is available to provide security for the folders you have shared and for the folders and files they contain. On an NTFS volume, you can assign NTFS permissions to individual users and groups to better control access to the files and subfolders in the shared folders. When you combine shared folder permissions and NTFS permissions, the more restrictive permission is always the overriding permission.</p>

<p>In the practice portion of this lesson, you created and shared folders, stopped sharing a folder, created folders, applied NTFS permissions, and then shared 
the folders. If you have a second computer, you were able to test how the 
shared folder permissions and NTFS permissions combined to provide access 
to resources.</p>



</BODY>
</HTML>






