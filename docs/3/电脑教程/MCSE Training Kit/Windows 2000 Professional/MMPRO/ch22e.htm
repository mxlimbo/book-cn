<HTML>
<HEAD>
<TITLE>Lesson 4: The Boot.ini File</TITLE>
<link rel="STYLESHEET" type="text/css" href="mmpro.css"><SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</HEAD>
<SCRIPT LANGUAGE="JavaScript">
<!--

function fullSize(sURL){
	window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}

function LibraryHeaderNav(sBackward, sForward, sImgLeftOff, sImgLeftOn, sImgRightOff, sImgRightOn, iH, iW, sImgLeftStyle, sImgRightStyle, sImgRuleStyle, sRuleColor, sRuleSize){
	var tableStr;
	//validate questionable args for defs
	tableStr = "<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 border=0 width=100%>";
	tableStr += "<TR VALIGN=top ALIGN=right>";

	tableStr += "<TD align=right class=" + sImgRuleStyle + ">&nbsp;</TD>";	
	
	tableStr += "<TD width=34 align=right class=" + sImgLeftStyle + ">";
	tableStr += "<A href='" + sBackward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgLeftOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgLeftOff + '\'\"';
	tableStr += " SRC='" + sImgLeftOff + "' vspace=0 hspace=0></a></TD>";
	
	tableStr += "<TD width=34 align=left class=" + sImgRightStyle + ">";
	tableStr += "<A href='" + sForward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgRightOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgRightOff + '\'\"';
	tableStr += " SRC='" + sImgRightOff + "' vspace=0 hspace=0></a></TD></TR>";

	tableStr += "<TR VALIGN=top>";
	tableStr += "<TD height=3 align=center colspan=3 class=" + sImgRuleStyle + ">";
	tableStr += "<HR color=" + sRuleColor + " size=" + sRuleSize + "></TD></TR></TABLE>";
	//alert(tableStr);
	document.write(tableStr);
}

 																						     //purple is: #aa22aa   orange is: #ff9900
LibraryHeaderNav("ch22d.htm", "ch22f.htm", "images/unit_p_a1.gif", "images/unit_p_a2.gif", "images/unit_p_b1.gif", "images/unit_p_b2.gif", 18, 34, "unit01", "unit02", "headerrule", "#aa22aa", "2");
//--></SCRIPT><P>



<A NAME="758"><H1>Lesson 4: The Boot.ini File</H1></A>

<p>In this lesson, you will learn about the Boot.ini file. When you install Windows 2000 on an Intel-based computer, Windows 2000 Setup saves the Boot.ini file 
in the active partition. Ntldr uses information in the Boot.ini file to display the Please Select The Operating System To Start menu, from which you select 
the operating system to start. In this lesson, you will learn how to modify the Boot.ini file, including modifying ARC paths and using the optional Boot.ini switches.</p>

<p><div class="sidebar"><blockquote>
<b>After this lesson, you will be able to</b>

<ul>
<p><li>Explain the purpose and function of the Boot.ini file.</li></p>
</ul>

<p><b>Estimated lesson time: 15 minutes</b></p>
</blockquote></div></p>

<A NAME="759"><H2>Components of the Boot.ini File</H2></A>

<p>The Boot.ini file includes two sections, [boot loader] and [operating systems], which contain information that Ntldr uses to create the Please Select The Operating System To Start menu. A typical Boot.ini file might contain the following lines:</p>

<p>
<table cellpadding=5 width="95%"><tr><td>
<pre>[boot loader]

timeout=30

default=multi(0)disk(0)rdisk(1)partition(2)\ WINNT


[operating systems]

multi(0)disk(0)rdisk(1)partition(2)\ WINNT=&quot;Microsoft Windows 2000
Professional&quot; /fastdetect

multi(0)disk(0)rdisk(1)partition(1)\ WINNT=&quot;Windows NT Workstation
Version 4.00&quot;&quot;

multi(0)disk(0)rdisk(1)partition(1)\ WINNT=&quot;Windows NT Server
Workstation 4.00 [VGA mode]&quot; /basevideo /sos

C:\ =&quot;Previous Operating System on C:&quot;&quot;</pre>
</td></tr>
</table>
</p>


<p>The [operating systems] section of a Boot.ini file that is created during a default installation of Windows 2000 Professional contains a single entry for Windows 2000. If your computer is a Windows 2000 and Windows 95- or 98-based dual-boot system, the [operating systems] section also contains an entry for starting the system using the other operating system, for example, <font face="courier">C:\ =&quot;Previous Operating System on C&quot;</font>. If you installed Windows 2000 on a computer and kept an installation of NT 4 on another partition of the same computer, the 
[operating systems] section also contains an entry for starting the system using this version of Windows NT, for example, <font face="courier">C:\ =&quot;Windows NT Workstation Version 4.00&quot;</font>.</p>

<A NAME="760"><H2>ARC Paths</H2></A>

<p>During installation, Windows 2000 generates the Boot.ini file, which contains Advanced RISC Computing (ARC) paths pointing to the computer's boot partition. (<i>RISC</i> stands for reduced instruction set computing, a microprocessor design that uses a small set of simple instructions for fast execution.) The following is an example of an ARC path:</p>

<p>
<table cellpadding=5 width="95%"><tr><td>
<pre>multi(0)disk(0)rdisk(1)partition(2)</pre>
</td></tr>
</table>
</p>

<p>Table 22.6 describes the naming conventions for ARC paths.</p>

<p><b>Table 22.6</b> <i>ARC Path Naming Conventions</i></p>
<p>
<table valign="top" cellpadding="5" width="95%">
<tr>
<th>Convention</th>
<th>Description</th>
</tr>
<tr>
<td valign="top">Multi(<i>x</i>) | scsi(<i>x</i>)</td>
<td valign="top">The adapter/disk controller. Use scsi to indicate a SCSI controller on which SCSI BIOS is <i>not</i> enabled. For all other adapter/disk 
 controllers, use multi, including SCSI disk controllers <i>with</i> the 
 BIOS enabled. The <i>x</i> represents a number that indicates the load 
 order of the hardware adapter. For example, if you have two SCSI 
 adapters in a computer, the first to load and initialize receives 
 number 0, and the next SCSI adapter receives number 1.</td>
</tr>
<tr>
<td valign="top">Disk(<i>y</i>)</td>
<td valign="top">The SCSI ID. For multi, this value (<i>y</i>) is always 0.</td>
</tr>
<tr>
<td valign="top">Rdisk(<i>z</i>)</td>
<td valign="top">A number (<i>z</i>) that identifies the disk (ignored for SCSI controllers).</td>
</tr>
<tr>
<td valign="top">Partition(<i>a</i>)</td>
<td valign="top">A number (<i>a</i>) that identifies the partition.</td>
</tr>
</table>
</p>
<p>In both multi and scsi conventions, multi, scsi, disk, and rdisk numbers are assigned starting with (0). Partition numbers start with (1). All nonextended 
partitions are assigned numbers first, followed by logical drives in 
extended partitions.</p>
 
<p>See Figure 22.3 for some examples of how to determine the ARC pathname.</p>

<p>The scsi ARC naming convention varies the disk(<i>y</i>) parameter for successive disks on one controller, while the multi format varies the rdisk(<i>z</i>) parameter.</p>

<p>
<A HREF="javascript:fullSize('F22tk03x.htm')"> <img src="images/F22tk03.JPG" width=404 height=260 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 22.3</b> <i>ARC paths</i><!-- /caption -->
</p>

<A NAME="761"><H2>Boot.ini Switches</H2></A>

<p>You can add a variety of switches to the entries in the [operating systems] section of the Boot.ini file to provide additional functionality. Table 22.7 describes some of the optional switches that you can use for entries in the Boot.ini file.</p>

<p><b>Table 22.7</b> <i>Boot.ini Optional Switches</i></p>
<p>
<table valign="top" cellpadding="5" width="95%">
<tr>
<th>Switch</th>
<th>Description</th>
</tr>
<tr>
<td valign="top">/basevideo</td>
<td valign="top">Boots the computer using the standard VGA video driver. If a new video driver isn't working correctly, use this switch to start Windows 2000, and then change to a different driver. </td>
</tr>
<tr>
<td valign="top">/fastdetect=[com<i>x</i> | com<i>x,y,z.</i>]</td>
<td valign="top">Disables serial mouse detection. Without a port specification, this switch disables peripheral detection on all 
 COM ports. This switch is included in every entry in 
 the Boot.ini file by default.</td>
</tr>
<tr>
<td valign="top">/maxmem:<i>n</i></td>
<td valign="top">Specifies the amount of RAM that Windows 2000 uses. Use this switch if you suspect that a memory chip is bad.</td>
</tr>
<tr>
<td valign="top">/noguiboot</td>
<td valign="top">Boots the computer without displaying the graphical boot status screen.</td>
</tr>
<tr>
<td valign="top">/sos</td>
<td valign="top">Displays the device driver names as they are loading.
Use this switch when startup fails while loading drivers 
 to determine which driver is triggering the failure.</td>
</tr>
</table>
</p>
<A NAME="762"><H2>Modifications to Boot.ini</H2></A>

<p>You can modify the timeout and default parameter values in the Boot.ini file by using System Properties in Control Panel. In addition, you can manually edit these and other parameter values in the Boot.ini file. For example, you might modify the Boot.ini file to add more descriptive entries for the Please Select The Operating System To Start menu or to include various switches to aid in troubleshooting the boot process.</p>

<p>During Windows 2000 installation, Windows 2000 Setup sets the read-only and system attributes for the Boot.ini file. Before editing the Boot.ini file with a text editor, you must make the file visible and turn off the read-only attribute. You can change file attributes by using My Computer, Windows Explorer, or the 
command prompt. You use My Computer or Windows Explorer to change file attributes, as follows:</p>

<ol>
<p><li> Double-click the icon for the drive containing the Boot.ini file.</li></p>

<p><li> On the Tools menu, click Folder Options.</li></p>

<p><li> In the Folder Options dialog box, click the View tab.</li></p>

<p><li> Under Hidden Files And Folders, click Show Hidden Files And Folders, and then click OK.</li></p>

<p><li> In the My Computer or Windows Explorer window, on the View menu, click Refresh.</li></p>

<p><li> Right-click Boot.ini, and then click Properties.</li></p>

<p><li> On the General tab, under Attributes, clear the Read-Only check box, and then click OK.</li></p>
</ol>

<p>To change file attributes by using the command prompt, change to the folder containing the Boot.ini file, if necessary, and then type</p>

<p>
<table cellpadding=5 width="95%"><tr><td>
<pre><b>attrib -s -r -h boot.ini</b></pre>
</td></tr>
</table>
</p>

<p>Once you have changed the attributes of the Boot.ini file, you can open and modify the file using a text editor.</p>

<A NAME="763"><H2>Lesson Summary</H2></A>

<p>In this lesson, you learned that when you install Windows 2000 on an Intel-based computer, Windows 2000 Setup saves the Boot.ini file in the active partition. Ntldr uses information in the Boot.ini file to display the Please Select The Operating System To Start menu, from which you select the operating system to start. You can edit the Boot.ini file, including modifying ARC paths and using the optional Boot.ini switches.</p>

</BODY>
</HTML>






