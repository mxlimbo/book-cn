<HTML>
<HEAD>
<TITLE>Lesson 3: Implementing Disaster Protection</TITLE>
<link rel="STYLESHEET" type="text/css" href="mmserver.css">

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</HEAD>
<SCRIPT LANGUAGE="JavaScript">
<!--

function fullSize(sURL){
	window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}

function LibraryHeaderNav(sBackward, sForward, sImgLeftOff, sImgLeftOn, sImgRightOff, sImgRightOn, iH, iW, sImgLeftStyle, sImgRightStyle, sImgRuleStyle, sRuleColor, sRuleSize){
	var tableStr;
	//validate questionable args for defs
	tableStr = "<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 border=0 width=100%>";
	tableStr += "<TR VALIGN=top ALIGN=right>";

	tableStr += "<TD align=right class=" + sImgRuleStyle + ">&nbsp;</TD>";	
	
	tableStr += "<TD width=34 align=right class=" + sImgLeftStyle + ">";
	tableStr += "<A href='" + sBackward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgLeftOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgLeftOff + '\'\"';
	tableStr += " SRC='" + sImgLeftOff + "' vspace=0 hspace=0></a></TD>";
	
	tableStr += "<TD width=34 align=left class=" + sImgRightStyle + ">";
	tableStr += "<A href='" + sForward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgRightOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgRightOff + '\'\"';
	tableStr += " SRC='" + sImgRightOff + "' vspace=0 hspace=0></a></TD></TR>";

	tableStr += "<TR VALIGN=top>";
	tableStr += "<TD height=3 align=center colspan=3 class=" + sImgRuleStyle + ">";
	tableStr += "<HR color=" + sRuleColor + " size=" + sRuleSize + "></TD></TR></TABLE>";
	//alert(tableStr);
	document.write(tableStr);
}

 																						     //purple is: #aa22aa   orange is: #ff9900
LibraryHeaderNav("ch12c.htm", "ch12e.htm", "images/unit_p_a1.gif", "images/unit_p_a2.gif", "images/unit_p_b1.gif", "images/unit_p_b2.gif", 18, 34, "unit01", "unit02", "headerrule", "#aa22aa", "2");
//--></SCRIPT><P>

<A NAME="706"><h1>Lesson 3: Implementing Disaster Protection</h1></A>
<p>A <i>computer disaster</i> is any event that renders a computer unable to start. 
This can include the destruction of the master boot record stored on a system device, the deletion of one or more operating system files, destruction of a computer's physical system device, or destruction of the computer itself. The term <i>disaster protection</i> refers to any effort to prevent computer disasters and minimize downtime in the event of system failure. You can achieve a level of disaster protection by configuring an uninterruptible power supply (UPS) and implementing fault-tolerant disk configurations.</p>

<p>
<div class="sidebar"><blockquote>
<b>After this lesson, you will be able to</b> 

<ul>
<p><li>Configure a UPS to provide power if a local power source fails</li></p>

<p><li>Implement disk fault tolerance</li></p>
</ul>

<b>Estimated lesson time: 40 minutes</b> 
</blockquote></div>
</p>

<A NAME="707"><h2>Configuring an Uninterruptible Power Supply</h2></A>
<p><i>Disaster recovery</i> is the restoration of a computer so that you can log on and access system resources after a computer disaster has occurred. One common type of computer disaster is the loss of local power, which can result in damaged or lost data on a server or client computer. While companies usually protect servers against this type of disaster, you might also consider providing protection for client computers against power loss, depending on the reliability of your local power supply.</p>

<p>An <i>uninterruptible power supply</i> provides power if the local power fails and usually is rated to provide a specific amount of power for a specific period of time. In general, a UPS should provide power long enough for you to shut down a computer in an orderly way by quitting processes and closing sessions.</p>

<p>
<div class="note"><blockquote><b>NOTE</b> <hr>
Before purchasing a UPS for use with Windows 2000, determine whether the proposed device is on the Windows 2000 HCL.</blockquote></div>
</p>

<A NAME="708"><h3>Configuring Options for the UPS Service</h3></A>
<p>Use the UPS tab of Power Options Properties dialog box to configure the 
UPS service. You can access this dialog box by selecting Power Options in Control Panel. To configure the UPS service, you must specify the following information:</p>

<ul>
<p><li>The COM port to which the UPS device is connected</li></p>

<p><li>The conditions that trigger the UPS device to send a signal, such as a power failure, low battery power, and remote shutdown by the UPS device</li></p>

<p><li>The time interval for maintaining battery power, recharging the battery, and sending warning messages after power failure</li></p>
</ul>

<p>
<div class="note"><blockquote><b>NOTE</b> <hr>
The configuration options for the UPS service can vary depending on the specific UPS device attached to your computer. For details about possible settings, see the manufacturer's documentation included with the UPS device.</blockquote></div>
</p>

<A NAME="709"><h3>Testing a UPS Configuration</h3></A>
<p>After you have configured the UPS service for your computer, test the configuration to ensure that your computer is protected from power failures. You can simulate a power failure by disconnecting the main power supply to the UPS device. During the test, the computer and peripherals connected to the UPS device should remain operational, messages should display, and events should be logged.</p>

<p>
<div class="note"><blockquote><b>NOTE</b> <hr>
You should not use a production computer to test the UPS configuration. You should use a spare computer or test computer. If you use a production computer, you could lose some of the data on the computer and possibly have to reinstall Windows 2000. Remember, when a computer suddenly stops, data can be lost or corrupted. The reason for having a UPS is to allow a graceful shutdown of the computers rather than an abrupt stop.</blockquote></div>
</p>

<p>In addition, you should wait until the UPS battery reaches a low level to verify that an orderly shutdown occurs. Then, restore the main power source to the UPS device and check the event log to ensure that all actions were logged and there were no errors.</p>

<p>
<div class="note"><blockquote><b>NOTE</b> <hr>
Some UPS manufacturers provide their own UPS software to take advantage of the unique features of their UPS devices.</blockquote></div>
</p>

<A NAME="710"><h2>Implementing Disk Fault Tolerance</h2></A>
<p><i>Fault tolerance</i> is the ability of a computer or operating system to respond to a catastrophic event, such as a power outage or hardware failure, so that no data is lost and that work in progress is not corrupted. Fully fault-tolerant systems using fault-tolerant disk arrays prevent the loss of data.</p>

<p>Although the data is available and current in a fault-tolerant system, you should still make backups to protect the information on hard disks from erroneous deletions, fire, theft, or other disasters. Disk fault tolerance is not an alternative to a backup strategy with offsite storage, which is the best insurance for recovering lost or damaged data.</p>

<p>If you experience the loss of a hard disk due to mechanical or electrical failure and have not implemented fault tolerance, your only option for recovering the data on the failed drive is to replace the hard disk and restore your data from a backup. However, the loss of access to the data while you replace the hard disk and restore your data can translate into lost time and money.</p>

<A NAME="711"><h3>RAID Implementations</h3></A>
<p>To maintain access to data during the loss of a single hard disk, Windows 2000 Server provides a software implementation of a fault tolerance technology known as redundant array of independent disks (RAID). RAID provides fault tolerance by implementing data redundancy. With data redundancy, a computer writes data to more than one disk, which protects the data in the event of a single hard disk failure.</p>

<p>You can implement RAID fault tolerance as either a software or hardware solution.</p>

<p><b>Software Implementations of RAID</b></p>

<p>Windows 2000 Server supports two software implementations of RAID: mirrored volumes (RAID 1) and striped volumes with parity (RAID 5), otherwise known as RAID-5 volumes. However, you can create new RAID volumes only on Windows 2000 dynamic disks.</p>

<p>With software implementations of RAID, there is no fault tolerance following a failure until the fault is repaired. If a second fault occurs before the data lost from the first fault is regenerated, you can recover the data only by restoring it from a backup.</p>

<p>
<div class="note"><blockquote><b>NOTE</b> <hr>
When you upgrade Windowsç‡¦T 4.0 to Windows 2000, any existing mirror sets or stripe sets with parity are retained. Windows 2000 provides limited support for these fault tolerance sets, allowing you to manage and delete them.</blockquote></div>
</p>

<p><b>Hardware Implementations of RAID</b></p>

<p>In a hardware solution, the disk controller interface handles the creation and regeneration of redundant information. Some hardware vendors implement RAID data protection directly in their hardware, as with disk array controller cards. Because these methods are vendor specific and bypass the fault tolerance software drivers of the operating system, they offer performance improvements over software implementations of RAID. In addition, hardware implementations of RAID usually include extra features, such as additional fault-tolerant RAID configurations, hot swapping of failed hard disks, hot sparing for online failover, and dedicated cache memory for improved performance.</p>

<p>
<div class="note"><blockquote><b>NOTE</b> <hr>
The level of RAID supported in a hardware implementation is dependent on the hardware manufacturer.</blockquote></div>
</p>

<p>Consider the following when deciding whether to use a software or hardware implementation of RAID:</p>

<ul>
<p><li>Hardware fault tolerance is more expensive than software fault tolerance.</li></p>

<p><li>Hardware fault tolerance generally provides faster disk I/O than software fault tolerance.</li></p>

<p><li>Hardware fault tolerance solutions might limit equipment options to a single vendor.</li></p>

<p><li>Hardware fault tolerance solutions might implement hot swapping of hard disks to allow for replacement of a failed hard disk without shutting down the computer and hot sparing so that a failed disk is automatically replaced by an online spare.</li></p>
</ul>

<A NAME="712"><h3>Mirrored Volumes</h3></A>
<p>A mirrored volume uses the Windows 2000 Server fault tolerance driver (Ftdisk.sys) to write the same data to a volume on each of two physical disks simultaneously, as shown in Figure 12.11. Each volume is considered a member of the mirrored volume. Implementing a mirrored volume helps to ensure the survival of data in the event that one member of the mirrored volume fails.</p>

<p>
<A HREF="javascript:fullSize('f12xx11gx.htm')"> <img src="images/f12xx11g.jpg" border=0 ALT = "Click to view at full size."> </A>
</p><p>
<!--caption--><b>Figure 12.11</b> <i>Mirrored volume</i><!--/caption-->
</p>

<p>A mirrored volume can contain any partition, including the boot or system partition; however, both disks in a mirrored volume must be Windows 2000 dynamic disks.</p>

<p>Mirrored volumes can be striped across multiple disks. This configuration is often referred to as RAID 10, RAID 1 mirroring and RAID 0 striping. Unlike RAID 0, RAID 10 is a fault-tolerant RAID configuration because each disk in the stripe is also mirrored. RAID 10 improves disk I/O by performing read and write operations across the stripe.</p>

<p><b>Performance on Mirrored Volumes</b></p>

<p>Mirrored volumes can enhance read performance because the fault tolerance driver reads from both members of the volume at once. There can be a slight decrease in write performance because the fault tolerance driver must write to both members. When one member of a mirrored volume fails, performance returns to normal because the fault tolerance driver works with only a single partition.</p>

<p>Because disk space usage is only 50 percent (two members for one set of data), mirrored volumes can be expensive.</p>

<p>
<div class="caution"><blockquote><b>CAUTION</b><hr>
Deleting a mirrored volume will delete all the information stored on that volume.</blockquote></div>
</p>

<p><b>Disk Duplexing</b></p>

<p>If the same disk controller controls both physical disks in a mirrored volume and the disk controller fails, neither member of the mirrored volume is accessible. You can install a second controller in the computer so that each disk in the mirrored volume has its own controller. This arrangement, called <i>disk duplexing</i>, can protect the mirrored volume against both controller failure and hard disk failure. Some hardware implementations of disk duplexing use two or more channels on a single disk controller card.</p>

<p>Disk duplexing reduces bus traffic and potentially improves read performance. Disk duplexing is a hardware enhancement to a Windows 2000 mirrored volume and requires no additional software configuration.</p>

<A NAME="713"><h3>RAID-5 Volumes</h3></A>
<p>Windows 2000 Server also supports fault tolerance through striped volumes with parity (RAID 5). Parity is a mathematical method of determining the number of odd and even bits in a number or series of numbers, which can be used to reconstruct data if one number in a sequence of numbers is lost.</p>

<p>In a RAID-5 volume, Windows 2000 achieves fault tolerance by adding a parity-information stripe to each disk partition in the volume, as shown in Figure 12.12. If a single disk fails, Windows 2000 can use the data and parity information on the remaining disks to reconstruct the data that was on the failed disk.</p>

<p>
<A HREF="javascript:fullSize('f12xx12gx.htm')"> <img src="images/f12xx12g.jpg" border=0 ALT = "Click to view at full size."> </A>
</p><p>
<!--caption--><b>Figure 12.12</b> <i>Raid-5 parity-information stripes</i><!--/caption-->
</p>

<p>Because of the parity calculation, write operations on a RAID-5 volume are slower than on a mirrored volume. However, RAID-5 volumes provide better read performance than mirrored volumes, especially with multiple controllers, because data is distributed among multiple drives. If a disk fails, however, the read performance on a RAID-5 volume slows while Windows 2000 Server reconstructs the data for the failed disk by using parity information.</p>

<p>RAID-5 volumes have a cost advantage over mirrored volumes because disk usage is optimized. The more disks you have in the RAID-5 volume, the less the cost of the redundant data stripe. The following table shows how the amount of space required for the data stripe decreases with the addition of 
2-gigabyte (GB) disks to the RAID-5 volume:</p>

<p><table cellpadding=5 width="95%"><tr>
<th>Number of disks</th><th>Disk space used</th><th>Available disk space</th><th>Redundancy</th>
</tr><tr>
<td valign="top">3</td> <td valign="top">6 GB</td> <td valign="top">4 GB</td> <td valign="top">33 percent</td></tr><tr>
<td valign="top">4</td> <td valign="top">8 GB</td> <td valign="top">6 GB</td> <td valign="top">25 percent</td></tr><tr>
<td valign="top">5</td> <td valign="top">10 GB</td> <td valign="top">8 GB</td> <td valign="top">20 percent</td></tr></table></p>

<p>There are some restrictions that RAID-5 volumes implement in software. First, RAID-5 volumes involve a minimum of three drives and a maximum of 32 drives. Second, a software-level RAID-5 volume cannot contain the boot or system partition.</p>

<p>The Windows 2000 operating system is not aware of RAID implementations in hardware. Therefore, the restrictions that apply to software-level RAID do not apply to hardware-level RAID configurations.</p>

<A NAME="714"><h3>Mirrored Volumes versus RAID-5 Volumes</h3></A>
<p>Mirrored volumes and RAID-5 volumes provide different levels of fault tolerance. Deciding which option to implement depends on the level of protection you require and the cost of hardware. The major differences between mirrored volumes (RAID 1) and RAID-5 volumes are performance and cost. The following table describes some differences between software-level RAID 1 and RAID 5.</p>

<p><table cellpadding=5 width="95%"><tr>
<th>Mirrored volumes<br> RAID 1</th><th>Striped volumes with parity<br> RAID 5</th>
</tr><tr>
<td valign="top">Supports FAT and NTFS</td> <td valign="top">Supports FAT and NTFS</td></tr><tr>
<td valign="top">Can protect system or boot partition</td> <td valign="top">Cannot protect system or boot partition</td></tr><tr>
<td valign="top">Requires 2 hard disks</td> <td valign="top">Requires a minimum of 3 hard disks and allows a maximum of 32 hard disks</td></tr><tr>
<td valign="top">Has a higher cost per megabyte</td> <td valign="top">Has a lower cost per megabyte</td></tr><tr>
<td valign="top">50 percent utilization</td> <td valign="top">33 percent minimum utilization</td></tr><tr>
<td valign="top">Has good write performance</td> <td valign="top">Has moderate write performance</td></tr><tr>
<td valign="top">Has good read performance</td> <td valign="top">Has excellent read performance</td></tr><tr>
<td valign="top">Uses less system memory</td> <td valign="top">Requires more system memory</td></tr></table></p>

<p>Generally, mirrored volumes offer read and write performance comparable to that of single disks. RAID-5 volumes offer better read performance than mirrored volumes, especially with multiple controllers, because data is distributed among multiple drives. However, the need to calculate parity information requires more computer memory, which can slow write performance.</p>

<p>Mirroring uses only 50 percent of the available disk space, so it is more expensive in cost per megabyte (MB) than disks without mirroring. RAID 5 uses 33 percent of the available disk space for parity information when you use the minimum number of hard disks (three). With RAID 5, disk utilization improves as you increase the number of hard disks.</p>

<A NAME="715"><h3>Implementing RAID Systems</h3></A>
<p>The software-level fault tolerance features of Windows 2000 Server are available only on Windows 2000 dynamic disks. In Windows 2000 Server, you create software-level mirrored and RAID-5 volumes by using the Create Volume wizard in the Computer Management snap-in.</p>

<p>To create a volume by using the Create Volume wizard, access the Disk Management folder in the Computer Management snap-in. When you select the Disk Management folder, the details pane of the Computer Management window displays a text view of the physical disks in your computer and a graphical view (Figure 12.13).</p>

<p>
<A HREF="javascript:fullSize('f12xx13x.htm')"> <img src="images/f12xx13.jpg" border=0 ALT = "Click to view at full size."> </A>
</p><p>
<!--caption--><b>Figure 12.13</b> <i>Disk Management folder of the Computer Management snap-in</i><!--/caption-->
</p>

<p>In the details pane, select an area of unallocated space, and then from the Action menu point to All Tasks and then click Create Volume. Follow the steps in the Create Volume wizard to create a volume.</p>

<p>
<div class="note"><blockquote><b>NOTE</b> <hr>
Windows 2000 Advanced Server and Windows 2000 Data Center support server clustering for an even higher level of fault tolerance. Clustering is beyond the scope of this course.</blockquote></div>
</p>

<A NAME="716"><h2>Lesson Summary</h2></A>
<p>You can achieve a level of disaster protection by configuring a UPS and by implementing disk fault tolerance. A UPS provides power in case the local power fails. In general, a UPS should provide power long enough to warn users connected to the server and perform an orderly shut down. You can configure the UPS service on the UPS tab of the Power Options Properties dialog box. After you have configured the UPS service for your computer, you should test the configuration to ensure that your computer is protected from power failures. In addition to UPS for power protection, fault-tolerant RAID provides an additional level of data protection. You can use fault-tolerant RAID configurations to implement disk fault tolerance as either a software or hardware solution. A software-level mirrored volume uses the Windows 2000 Server fault tolerance driver (Ftdisk.sys) to write the same data to a volume on each of two physical disks simultaneously. Windows 2000 Server also supports fault tolerance through
software-level striped volumes with parity (RAID 5). In a RAID-5 volume, Windows 2000 achieves fault tolerance by adding a parity-information stripe to each disk partition in the volume. Generally, mirrored volumes offer read and write performance comparable to that of single disks. RAID-5 volumes offer better read performance than mirrored volumes. RAID implementations benefit from using multiple controllers (disk duplexing) because disk I/O is distributed among multiple data channels to increase performance and fault tolerance. You create software-level mirrored and RAID-5 volumes by using the Create Volume wizard in the Computer Management snap-in.</p>

</BODY>
</HTML>



