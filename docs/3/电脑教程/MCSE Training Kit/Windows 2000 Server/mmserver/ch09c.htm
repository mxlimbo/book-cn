<HTML>
<HEAD>
<TITLE>Lesson 2: Transmission Control Protocol/Internet Protocol</TITLE>
<link rel="STYLESHEET" type="text/css" href="mmserver.css">

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</HEAD>
<SCRIPT LANGUAGE="JavaScript">
<!--

function fullSize(sURL){
	window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}

function LibraryHeaderNav(sBackward, sForward, sImgLeftOff, sImgLeftOn, sImgRightOff, sImgRightOn, iH, iW, sImgLeftStyle, sImgRightStyle, sImgRuleStyle, sRuleColor, sRuleSize){
	var tableStr;
	//validate questionable args for defs
	tableStr = "<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 border=0 width=100%>";
	tableStr += "<TR VALIGN=top ALIGN=right>";

	tableStr += "<TD align=right class=" + sImgRuleStyle + ">&nbsp;</TD>";	
	
	tableStr += "<TD width=34 align=right class=" + sImgLeftStyle + ">";
	tableStr += "<A href='" + sBackward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgLeftOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgLeftOff + '\'\"';
	tableStr += " SRC='" + sImgLeftOff + "' vspace=0 hspace=0></a></TD>";
	
	tableStr += "<TD width=34 align=left class=" + sImgRightStyle + ">";
	tableStr += "<A href='" + sForward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgRightOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgRightOff + '\'\"';
	tableStr += " SRC='" + sImgRightOff + "' vspace=0 hspace=0></a></TD></TR>";

	tableStr += "<TR VALIGN=top>";
	tableStr += "<TD height=3 align=center colspan=3 class=" + sImgRuleStyle + ">";
	tableStr += "<HR color=" + sRuleColor + " size=" + sRuleSize + "></TD></TR></TABLE>";
	//alert(tableStr);
	document.write(tableStr);
}

 																						     //purple is: #aa22aa   orange is: #ff9900
LibraryHeaderNav("ch09b.htm", "ch09d.htm", "images/unit_p_a1.gif", "images/unit_p_a2.gif", "images/unit_p_b1.gif", "images/unit_p_b2.gif", 18, 34, "unit01", "unit02", "headerrule", "#aa22aa", "2");
//--></SCRIPT><P>

<A NAME="436"><h1>Lesson 2: Transmission Control Protocol/Internet Protocol</h1></A>
<p>TCP/IP provides communication across networks that contain computers with various hardware architectures and operating systems. Microsoft's implementation of TCP/IP enables enterprise networking and connectivity on computers running Windows 2000.</p>

<p>
<div class="sidebar"><blockquote>
<b>After this lesson, you will be able to</b> 

<ul>
<p><li>Describe the TCP/IP protocol suite and the TCP/IP utilities that ship with Windows 2000</li></p>

<p><li>Configure TCP/IP</li></p>
</ul>

<b>Estimated lesson time: 60 minutes</b> 
</blockquote></div>
</p>

<A NAME="437"><h2>Overview of the TCP/IP Suite</h2></A>
<p>TCP/IP is an industry-standard suite of protocols that enables enterprise networking and connectivity on Windows 2000-based computers. Adding TCP/IP to a Windows 2000 configuration offers the following advantages:</p>

<ul>
<p><li>A routable networking protocol supported by most operating systems. Most large networks rely on TCP/IP.</li></p>

<p><li>A technology for connecting dissimilar systems. You can use many standard connectivity utilities to access and transfer data between dissimilar systems. Windows 2000 includes several of these standard utilities.</li></p>

<p><li>A robust, scalable, cross-platform client/server framework. TCP/IP supports the Winsock interface, which is ideal for developing client/server applications for Winsock-compliant stacks.</li></p>

<p><li>A method of gaining access to Internet resources.</li></p>
</ul>

<p>The TCP/IP suite of protocols provides a set of standards for how computers communicate and how networks are interconnected. The TCP/IP suite of protocols maps to a four-layer conceptual model: network interface, Internet, transport, and application (Figure 9.3).</p>

<p>
<A HREF="javascript:fullSize('f09xx03gx.htm')"> <img src="images/f09xx03g.jpg" border=0 ALT = "Click to view at full size."> </A>
</p><p>
<!--caption--><b>Figure 9.3</b> <i>The TCP/IP suite of protocols within four layers</i><!--/caption-->
</p>

<A NAME="438"><h3>Network Interface Layer</h3></A>
<p>At the base of the model is the network interface layer. This layer puts frames on the wire and pulls frames off the wire.</p>

<A NAME="439"><h3>Internet Layer</h3></A>
<p>Internet-layer protocols encapsulate packets in Internet datagrams and run all the necessary routing algorithms. The four Internet layer protocols are Internet Protocol (IP), Address Resolution Protocol (ARP), Internet Control Message Protocol (ICMP), and Internet Group Management Protocol (IGMP). The following table describes these four protocols.</p>

<p><table cellpadding=5 width="95%"><tr>
<th>Protocol</th><th>Description</th>
</tr><tr>
<td valign="top">IP</td> <td valign="top">Provides connectionless packet delivery for all other protocols in the suite. Does not guarantee packet arrival or correct packet sequence.</td></tr><tr>
<td valign="top">ARP</td> <td valign="top">Provides IP address mapping to the MAC sublayer address to acquire the physical MAC control address of the destination. IP broadcasts a special ARP inquiry packet containing the IP address of the destination system. The system that owns the IP address replies by sending its physical address to the requester. The MAC sublayer communicates directly with the network adapter card and is responsible for delivering error-free data between two computers on a network.</td></tr><tr>
<td valign="top">ICMP</td> <td valign="top">Provides special communication between hosts, allowing them to share status and error information. Higher-level protocols use this information to recover from transmission problems. Network administrators use this information to detect network trouble. The ping utility uses ICMP packets to determine whether a particular IP device on a network is functional.</td></tr><tr>
<td valign="top">IGMP</td> <td valign="top">Provides multicasting, which is a limited form of broadcasting, to communicate and manage information between all member devices in a multicast group. IGMP informs neighboring multicast routers of the host group memberships present on a particular network. Windows 2000 supports multicast capabilities, such as Windows 2000 Server NetShow Services, that allow developers to create multicast programs.</td></tr></table></p>

<A NAME="440"><h3>Transport Layer</h3></A>
<p>Transport layer protocols provide communication sessions between computers. The desired method of data delivery determines the transport protocol. The two transport layer protocols are Transmission Control Protocol (TCP) and User Datagram Protocol (UDP). The following table describes these two protocols.</p>

<p><table cellpadding=5 width="95%"><tr>
<th>Protocol</th><th>Description</th>
</tr><tr>
<td valign="top">TCP</td> <td valign="top">Provides connection-oriented, reliable communications for applications that typically transfer large amounts of data at one time or that require an acknowledgment for data received. TCP guarantees the delivery of packets, ensures proper sequencing of data, and provides a checksum feature that validates both the packet header and its data for accuracy.</td></tr><tr>
<td valign="top">UDP</td> <td valign="top">Provides connectionless communications and does not guarantee that packets will be delivered. Applications that use UDP typically transfer small amounts of data at one time. Reliable delivery is the responsibility of the application.</td></tr></table></p>

<A NAME="441"><h3>Application Layer</h3></A>
<p>At the top of the model is the application layer, in which applications gain access to the network. There are many standard TCP/IP utilities and services in the application layer, such as FTP, Telnet, Simple Network Management Protocol (SNMP), DNS, and so on.</p>

<p>TCP/IP provides two interfaces for network applications to use the services of the TCP/IP protocol stack: Winsock and the NetBIOS over TCP/IP (NetBT) interface. The following table describes these two interfaces.</p>

<p><table cellpadding=5 width="95%"><tr>
<th>Interface</th><th>Description</th>
</tr><tr>
<td valign="top">Winsock</td> <td valign="top">Serves as the standard interface between socket-based applications and TCP/IP protocols.</td></tr><tr>
<td valign="top">NetBT</td> <td valign="top">Serves as the standard interface for NetBIOS services, including name, datagram, and session services. It also provides a standard interface between NetBIOS-based applications and TCP/IP protocols.</td></tr></table></p>

<p><img src="images/cd.JPG" border="0"></p>

<p>
<div class="note"><blockquote><b>NOTE</b> <hr>
For more information about TCP/IP and TCP/IP implementation, see the Supplemental Course Materials CD-ROM (\chapt09\articles\tcpip2000.doc) that accompanies this book.</blockquote></div>
</p>

<A NAME="442"><h2>Configuring TCP/IP to Use a Static IP Address</h2></A>
<p>By default, client computers running Microsoft Windows 2000, Windows NT, Windows 95, or Windows 98 obtain TCP/IP configuration information automatically from the Dynamic Host Configuration Protocol (DHCP) Service. However, even in a DHCP-enabled environment, you should assign a static IP address to selected network computers. For example, a computer running the DHCP Service cannot be a DHCP client, so it must have a static IP address. If the DHCP Service is not available, you must also configure TCP/IP to use a static IP address.</p>

<p>
<div class="note"><blockquote><b>NOTE</b> <hr>
In a small private network where a DHCP server is not available, you can use the Windows 2000 Server feature called Automatic Private IP Addressing (APIPA) to automatically assign IP addresses for you. This feature is described later in this lesson.</blockquote></div>
</p>

<p>For each network adapter card that uses TCP/IP in a computer, you can configure an IP address, subnet mask, and default gateway, as shown in Figure 9.4.</p>

<p>
<img src="images/f09xx04.jpg" border="0">
</p><p>
<!--caption--><b>Figure 9.4</b> <i>Configuring a static TCP/IP address in the Internet Protocol (TCP/IP) Properties dialog box</i><!--/caption-->
</p>

<p>The following table describes the options used in configuring a static TCP/IP address.</p>

<p><table cellpadding=5 width="95%"><tr>
<th>Option</th><th>Description</th>
</tr><tr>
<td valign="top">IP Address</td> <td valign="top">A logical 32-bit address that identifies a TCP/IP host. Each network adapter card in a computer running TCP/IP requires a unique IP address, such as 192.168.0.108. Each address has two parts: a network ID, which identifies all hosts on the same physical network, and a host ID, which identifies a host on the network. In this example, the network ID is 192.168.0, and the host ID is 108.</td></tr><tr>
<td valign="top">Subnet Mask</td> <td valign="top">A network in a multiple-network environment that uses IP addresses derived from a single network ID. Subnets divide a large network into multiple physical networks connected with routers. A subnet mask blocks out part of the IP address so that TCP/IP can distinguish the network ID from the host ID. When TCP/IP hosts try to communicate, the subnet mask determines whether the destination host is on a local or remote network. To communicate within a local network, computers must have the same subnet mask.</td></tr><tr>
<td valign="top">Default Gateway</td> <td valign="top">The intermediate device on a local network that stores network IDs of other networks in the enterprise or on the Internet. To communicate with a host on another network, configure an IP address for the default gateway. TCP/IP sends packets for remote networks to the default gateway (if no other route is configured), which forwards the packets to other gateways until the packet is delivered to a gateway connected to the specified destination.</td></tr></table></p>

<p>You can open the Internet Protocol (TCP/IP) Properties dialog box by first opening the Properties dialog box for My Network Places, opening the Properties dialog box for the appropriate network adapter card, and then opening the Internet Protocol (TCP/IP) Properties dialog box for the Internet Protocol (TCP/IP) component.</p>

<p>
<div class="caution"><blockquote><b>CAUTION</b><hr> 
IP communications can fail if duplicate IP addresses exist on a network. Therefore, you should always check with the network administrator to obtain a valid static IP address.</blockquote></div>
</p>

<A NAME="443"><h2>Configuring TCP/IP to Obtain an IP Address Automatically</h2></A>
<p>If a server running the DHCP Service is available on the network, it can automatically assign TCP/IP configuration information to the DHCP client. You can then configure any clients running MS-DOS, Windows 3.<i>x</i>, Windows for Workgroups, Windows 95, Windows 98, Windows NT, or Windows 2000 to obtain TCP/IP configuration information automatically from the DHCP Service. Using DHCP to configure TCP/IP automatically on client computers can simplify administration and ensure correct configuration information. To use the DHCP Service to provide clients with TCP/IP configuration information automatically, however, you must first configure a computer as a DHCP client.</p>

<p>To configure a DHCP client, open the Internet Protocol (TCP/IP) Properties dialog box and click Obtain An IP Address Automatically. (DHCP is described in more detail in Lesson 3, &quot;<A HREF="ch09d.htm#453">Dynamic Host Configuration Protocol Service</A>.&quot;)</p>

<A NAME="444"><h2>Using Automatic Private IP Addressing</h2></A>
<p>The Windows 2000 implementation of TCP/IP supports a new mechanism for automatic address assignment of IP addresses for simple LAN-based network configurations. This addressing mechanism is an extension of dynamic IP address assignment for LAN adapters, enabling configuration of IP addresses without using static IP address assignment or installing the DHCP Service.</p>

<p>For the Automatic Private IP Addressing (APIPA) feature to function properly on a computer running Windows 2000, you must configure a network LAN adapter for TCP/IP and click Obtain An IP Address Automatically in the Internet Protocol (TCP/IP) Properties dialog box.</p>

<p>The following steps outline how APIPA assigns an IP address:</p>

<ol>
<p><li>Windows 2000 TCP/IP attempts to find a DHCP server on the attached network to obtain a dynamically assigned IP address.</li></p>

<p><li>In the absence of a DHCP server during startup (for example, if the server is down for maintenance or repairs), the client cannot obtain an IP address.</li></p>

<p><li>APIPA generates an IP address in the form of 169.254.<i>x.y</i> (where <i>x.y</i> is the client's unique identifier) and a subnet mask of 255.255.0.0. If the address is in use, APIPA selects another IP address and, if necessary, reselects addresses up to 10 times.</li></p>
</ol>

<p>
<div class="note"><blockquote><b>NOTE</b> <hr>
The Internet Assigned Numbers Authority (IANA) has reserved 169.254.0.0 through 169.254.255.255 for Automatic Private IP Addressing. As a result, APIPA provides an address that is guaranteed not to conflict with routable addresses.</blockquote></div>
</p>

<p>After the computer generates the address, it broadcasts to this address and then assigns the address to itself if no other computer responds. The computer continues to use this address until it detects and receives configuration information from a DHCP server. This allows two computers to be plugged into a LAN hub, to restart without any IP address configuration, and to use TCP/IP for local network access.</p>

<p>
<div class="note"><blockquote><b>NOTE</b> <hr>
Windows 98 also supports APIPA.</blockquote></div>
</p>

<p>Although APIPA can assign a TCP/IP address to DHCP clients automatically, it does not generate all the information that is typically provided by DHCP, such as the address of a default gateway. Consequently, computers enabled with APIPA can communicate only with computers on the same subnet that also have addresses of the form 169.254.<i>x.y</i>.</p>

<A NAME="445"><h3>Disabling Automatic Private IP Addressing</h3></A>
<p>By default, the Automatic Private IP Addressing feature is enabled. However, you can disable this feature by adding the IPAutoconfigurationEnabled value to the HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\ 
Tcpip\Parameters\Interfaces\<i>Adapter_GUID</i> subkey of the registry and setting its value to zero.</p>

<p>The IPAutoconfigurationEnabled entry takes a REG_DWORD value. To disable APIPA, specify a value of 0 for the entry. To enable APIPA, specify a value of 1, which is the default state when IPAutoconfigurationEnabled is omitted from the registry.</p>

<A NAME="446"><h2>Troubleshooting TCP/IP</h2></A>
<p>Windows 2000 offers several utilities to assist you in troubleshooting TCP/IP. The following table describes the Windows 2000 utilities you can use to troubleshoot TCP/IP.</p>

<p><table cellpadding=5 width="95%"><tr>
<th>Option</th><th>Description</th>
</tr><tr>
<td valign="top">Ping</td> <td valign="top">Verifies configurations and tests connections</td></tr><tr>
<td valign="top">Arp</td> <td valign="top">Displays locally resolved IP addresses as physical addresses</td></tr><tr>
<td valign="top">Ipconfig</td> <td valign="top">Displays the current TCP/IP configuration</td></tr><tr>
<td valign="top">Nbtstat</td> <td valign="top">Displays statistics and connections using NetBIOS over TCP/IP</td></tr><tr>
<td valign="top">Netstat</td> <td valign="top">Displays TCP/IP protocol statistics and connections</td></tr><tr>
<td valign="top">Route</td> <td valign="top">Displays or modifies the local routing table</td></tr><tr>
<td valign="top">Hostname</td> <td valign="top">Prints the name of the host on which the command is issued</td></tr><tr>
<td valign="top">Tracert</td> <td valign="top">Checks the route to a remote system</td></tr></table></p>

<A NAME="447"><h2>Testing TCP/IP Connectivity</h2></A>
<p>Windows 2000 also provides a number of common TCP/IP utilities. These tools are described in the following table.</p>

<p><table cellpadding=5 width="95%"><tr>
<th>Option</th><th>Description</th>
</tr><tr>
<td valign="top">FTP</td> <td valign="top">Provides bidirectional file transfer between a computer running Windows 2000 and any TCP/IP host running FTP. Windows 2000 Server ships can serve as an FTP client or server.</td></tr><tr>
<td valign="top">Trivial File Transfer Protocol (TFTP)</td> <td valign="top">Provides bidirectional file transfer between a computer running Windows 2000 and a TCP/IP host running TFTP.</td></tr><tr>
<td valign="top">Telnet</td> <td valign="top">Provides terminal emulation to a TCP/IP host running Telnet. Windows 2000 Server ships can serve as a 
 Telnet client.</td></tr><tr>
<td valign="top">Remote Copy Protocol (RCP)</td> <td valign="top">Copies files between a client and a host that support RCP (for example, a computer running Windows 2000 and a UNIX host).</td></tr><tr>
<td valign="top">Remote shell (RSH)</td> <td valign="top">Runs commands on a UNIX host.</td></tr><tr>
<td valign="top">Remote execution (REXEC)</td><td valign="top">Runs a process on a remote computer.</td></tr><tr> 
<td valign="top">Finger</td> <td valign="top">Retrieves system information from a remote computer that supports TCP/IP and the finger utility.</td></tr></table></p>

<p>After configuring TCP/IP and restarting the computer, you should use the ipconfig and ping command-prompt utilities to test the configuration and connections to other TCP/IP hosts and networks. Such testing helps to verify that TCP/IP is functioning properly.</p>

<A NAME="448"><h3>Using Ipconfig</h3></A>
<p>You can use the ipconfig utility to verify the TCP/IP configuration parameters on a host. This helps to determine whether the configuration is initialized or whether a duplicate IP address exists. Use the ipconfig command with the /all switch to verify all configuration information.</p>

<p>
<div class="tip"><blockquote><b>TIP</b><hr>
Type <b>ipconfig /all | more</b> to prevent the ipconfig output from scrolling off the screen; to scroll down and view additional output, press the Spacebar. Type <b>ipconfig /all &gt; ipconfig.txt</b> to write the screen output to a file named ipconfig.txt. You can then view this file with an ASCII text editor such as Notepad.</blockquote></div>
</p>

<p>Executing the ipconfig /all command provides the following results:</p>

<ul>
<p><li>If a configuration has initialized, the ipconfig utility displays the IP address and subnet mask, and, if it is assigned, the default gateway.</li></p>

<p><li>If a duplicate IP address exists, the ipconfig utility indicates that the IP address is configured; however, the subnet mask is 0.0.0.0.</li></p>

<p><li>If the computer is unable to obtain an IP address from a server running the DHCP Service on the network, the ipconfig utility displays the IP address provided by APIPA.</li></p>
</ul>

<A NAME="449"><h3>Using Ping</h3></A>
<p>After you have verified the TCP/IP configuration, use the ping utility to test connectivity. The ping utility is a diagnostic tool you can use to test TCP/IP configurations and diagnose connection failures. Use the ping utility to determine whether a particular TCP/IP host is available and functional. To test connectivity, use the ping command with the following syntax:</p>

<p><table cellpadding=5 width="95%"><tr><td><pre>
ping &lt;<i>IP_address&gt;</i>
</pre></td></tr></table></p>

<A NAME="450"><h3>Using Ipconfig and Ping</h3></A>
<p>You can use a combination of the ipconfig and ping commands to verify a computer's configuration and test router connections. The following steps show how to use the tools:</p>

<ol>
<p><li>The ipconfig command is used to verify that the TCP/IP configuration has been initialized.</li></p>

<p><li>The ping command is used against the loopback address (127.0.0.1) to verify that TCP/IP is correctly installed and bound to your network adapter card.</li></p>

<p><li>The ping command is used with the IP address of the local computer to verify that the computer is not a duplicate of another IP address on the network.</li></p>

<p><li>The ping command is used with the IP address of the default gateway to verify that the default gateway is operational and that the computer can communicate with the local network.</li></p>

<p><li>The ping command is used with the IP address of a remote host to verify that the computer can communicate through a router.</li></p>
</ol>

<p>
<div class="note"><blockquote><b>NOTE</b> <hr>
Typically, if you ping the remote host (step 5) and the ping command is successful, steps 1 through 4 are successful by default. If the ping command is not successful, ping the IP address of another remote host before completing the entire diagnostic process because the current host might be turned off.</blockquote></div>
</p>

<p><img src="images/practic.JPG" border="0"></p>

<A NAME="451"><h3>Exercise 1: Configuring and Testing TCP/IP</h3></A>
<p>In this exercise, you use two TCP/IP utilities to verify the protocol configuration of Server01. Then you configure Server01 to use a static IP address and verify its new configuration. Next you configure Server01 to obtain an IP address automatically, and then you test the APIPA feature in Windows 2000. Complete this exercise on Server01.</p>

<p>
<div class="warning"><blockquote><b>IMPORTANT</b><hr>
The DHCP Service should not be running anywhere on your network. In addition, this exercise requires that you assign IP addresses that might not be valid in the network. If your network is part of a larger network in which DHCP is running, isolate your network from the larger network.</blockquote></div>
</p>

<p><li><b>Procedure 1: Verifying a computer's TCP/IP configuration</b></li></p>


<p>In this procedure, you use two TCP/IP utilities, ipconfig and ping, to verify your computer's static configuration.</p>

<ol>
<p><li>Log on to Server01 as Administrator with a password of &quot;password.&quot;</li></p>

<p><li>Open a command prompt.</li></p>

<p><li>At the command prompt, type <b>ipconfig /all | more</b> and then press Enter. (The vertical line between the words &quot;all&quot; and &quot;more&quot; is the dashed line typically located on the \ key.)</li></p>

<p>The Windows 2000 IP Configuration utility displays the TCP/IP configuration of the adapter or adapters configured on your computer.</p>

<p><li>Press the Spacebar as necessary to display the heading &lt;<i>adapter type&gt;</i> adapter Local Area Connection. Use the information displayed on the screen to complete the missing values in the following table. Some values entered in the table were set through configuration procedures in earlier exercises.</li></p>

<p><table cellpadding=5 width="95%"><tr>
<th>Local Area Connection setting</th><th>Value</th>
</tr><tr>
<td valign="top">Host Name</td> <td valign="top">SERVER01</td></tr><tr>
<td valign="top">Primary DNS Suffix</td> <td valign="top">microsoft.com</td></tr><tr>
<td valign="top">DNS Servers</td> <td valign="top">10.10.10.1</td></tr><tr>
<td valign="top">Description</td><td valign="top"></td>
</tr><tr>
<td valign="top">Physical Address</td><td valign="top"></td>
</tr><tr>
<td valign="top">DHCP Enabled</td> <td valign="top">No</td></tr><tr>
<td valign="top">Subnet Mask</td> <td valign="top">255.0.0.0</td></tr><tr>
<td valign="top">Default Gateway</td> <td valign="top">none</td></tr></table></p>

<p><li>Press the Spacebar as necessary to return to the command prompt.</li></p>

<p><li>To verify that the IP address is working and configured for your adapter, type <b>ping 127.0.0.1</b> and then press Enter.</li></p>

<p>This IP address is called the <i>loop-back</i> <i>address</i> and is used to verify that the TCP/IP stack is functioning properly.</p>

<p>A response similar to the following indicates a successful ping:</p>

<p><table cellpadding=5 width="95%"><tr><td>
<pre>Pinging 127.0.0.1 with 32 bytes of data:
Reply from 127.0.0.1: bytes=32 time&lt;10ms TTL=128
Reply from 127.0.0.1: bytes=32 time&lt;10ms TTL=128
Reply from 127.0.0.1: bytes=32 time&lt;10ms TTL=128
Reply from 127.0.0.1: bytes=32 time&lt;10ms TTL=128
Ping statistics for 127.0.0.1:
Packets: Sent = 4, Received = 4, Lost = 0 &lt;0% loss&gt;,
Approximate round trip times in milliseconds:
Minimum = 0ms, Maximum = 0ms, Average = 0ms
</pre></td></tr></table></p>


<p><li>Minimize the command prompt. You will be using it in a later procedure. 
</li></p>
</ol>

<p><li><b>Procedure 2: Configuring TCP/IP to automatically obtain an IP address</b></li></p>


<p>In this procedure, you configure TCP/IP to automatically obtain an IP address. You then test the configuration to verify that APIPA has provided the appropriate IP addressing information. Complete this procedure on Server01 and Server 02.</p>

<ol>
<p><li>Click Start, point to Settings, and then click Network And Dial-Up Connections.</li></p>

<p>The Network And Dial-Up Connections window appears.</p>

<p><li>Click Local Area Connection, click the File menu, and then click Properties.</li></p>

<p>The Local Area Connection Properties dialog box appears, displaying the network adapter in use and the network components used in this connection.</p>

<p><li>Click Internet Protocol (TCP/IP), and then verify that the check box to the left of the entry is selected.</li></p>

<p><li>Click Properties.</li></p>

<p>The Internet Protocol (TCP/IP) Properties dialog box appears.</p>

<p><li>Click the Obtain An IP Address Automatically radio button.</li></p>

<p><li>Click the Obtain DNS Server Address Automatically radio button.</li></p>

<p><li>Click OK to close the Internet Protocol (TCP/IP) Properties dialog box.</li></p>

<p><li>Click OK to close the Local Area Connection Properties dialog box.</li></p>

<p><li>Minimize the Network And Dial-Up Connections window.</li></p>

<p><li>At the command prompt, type <b>ipconfig /all | more</b> and then press Enter.</li></p>

<p><li>Pressing the Spacebar as necessary, find the current TCP/IP settings for your &lt;<i>adapter type&gt;</i> adapter Local Area Connection and enter them in the following table. Some entries have been filled in for you.</li></p>

<p><table cellpadding=5 width="95%"><tr>
<th>Setting</th><th>Value</th>
</tr><tr>
<td valign="top">Autoconfiguration Enabled</td> <td valign="top">Yes</td></tr><tr>
<td valign="top">IP Address</td><td valign="top">&nbsp;</td></tr><tr>
<td valign="top">Subnet Mask</td><td valign="top">&nbsp;</td></tr><tr>
<td valign="top">DHCP Enabled</td> <td valign="top">Yes</td></tr><tr>
<td valign="top">Default Gateway</td> <td valign="top">None&#8212;requires manual configuration or DHCP</td></tr><tr>
<td valign="top">DNS Servers</td> <td valign="top">None&#8212;requires manual configuration or DHCP</td></tr></table></p>


<p>Notice that the IP address and subnet mask assigned to you through APIPA are different than the values you specified for manual configuration. Notice also that the IP address is now labeled Autoconfiguration IP Address and that DHCP is enabled. DHCP is enabled because you specified that the IP address should be obtained automatically.</p>

<p><li>Press the Spacebar as necessary to finish scrolling through the configuration information.</li></p>

<p><li>To verify that TCP/IP is working and bound to your adapter, type <b>ping 127.0.0.1</b> and then press Enter.</li></p>

<p>The internal loop-back address test displays four replies if TCP/IP is bound to the adapter.</p>

<p><li>Exit the command prompt, and close the Network And Dial-Up Connections window.</li></p>
</ol>

<A NAME="452"><h2>Lesson Summary</h2></A>
<p>Microsoft's implementation of TCP/IP enables networking and connectivity. The TCP/IP suite maps to a four-layer conceptual model: network interface, Internet, transport, and application. By default, client computers running Windows 2000 obtain TCP/IP configuration automatically from DHCP, although some computers require a static IP address. For each network adapter card that uses TCP/IP, you can configure an IP address, subnet mask, and default gateway. In addition, the Windows 2000 implementation of TCP/IP supports APIPA, which provides automatic address assignment of IP addresses for simple LAN-based network configurations. APIPA enables a configuration of IP addresses without using static IP address assignments or installing the DHCP Service. Windows 2000 also includes utilities you can use to troubleshoot TCP/IP and test connectivity. Ping and ipconfig are two common troubleshooting utilities, and FTP and telnet are two service utilities.</p>

</BODY>
</HTML>



