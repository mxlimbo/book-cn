<HTML>
<HEAD>
<TITLE>Lesson 4: Basic Concepts of IP Routing</TITLE>
<link rel="STYLESHEET" type="text/css" href="mmnet.css">

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</HEAD>
<BODY BGCOLOR="#ffffff" TEXT="#000000">
<A HREF="ch02d.htm">[Previous]</A> <A HREF="ch02f.htm">[Next]</A><P>



<A NAME="107"><H1>Lesson 4: Basic Concepts of IP Routing</H1></A>

<p>Routing is the process of choosing a path over which to send packets, which is a primary function of IP. A router (commonly referred to as a gateway) is a device that forwards the packets from one physical network to another. When a router receives a packet, the network adapter forwards the datagrams to the IP Layer. IP examines the destination address on the datagram and then compares it to an IP routing table. A decision is then made as to where the packet is to be forwarded. This lesson explains basic IP routing concepts.</p>

<p><div class="sidebar"><blockquote><b>After this lesson, you will be able to</b>

<ul>
<p><li>Update a Windows 2000-based routing table by means of static routes</li></p>

<p><li>Manage and monitor internal routing</li></p>

<p><li>Manage and monitor border routing</li></p>
</ul>



<p><b>Estimated lesson time: 40 minutes</b></p>
</blockquote></div>
</p>

<A NAME="108"><H2>Overview of Routing</H2></A>

<p>A router helps LANs and WANs achieve interoperability and connectivity, and can link LANs that have different network topologies, such as Ethernet and Token Ring. Each packet sent over a LAN has a packet header that contains source and destination address fields. Routers match packet headers to a LAN segment and choose the best path for the packet, optimizing network performance. For example, if a packet is sent from Computer A to Computer C, as illustrated in Figure 2.15, the best route uses only one hop. If Router 1 is the default router for Computer A, the packet will be rerouted through Router 2. Computer A will be notified of the better route by which to send packets to Computer C. As each route is found, the packet is sent to the next router, called a <i>hop</i>, until finally delivered to the destination host. If a route is not found, an error message is sent to the source host.</p>

<p>
<A HREF="javascript:fullSize('02ntk15x.htm')"> <img src="images/02ntk15.JPG" width=404 height=231 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 2.15</b> <i>Packet routed from Computer A to Computer C</i><!-- /caption -->
</p>

<p>To make routing decisions, the IP Layer consults a routing table that is stored in memory, as illustrated in Figure 2.16.</p>


<p>
<A HREF="javascript:fullSize('02ntk16x.htm')"> <img src="images/02ntk16.JPG" width=404 height=185 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 2.16</b> <i>IP layer consulting a routing table</i><!-- /caption -->
</p>

<p>A routing table contains entries with the IP addresses of router interfaces to other networks that it can communicate with. A routing table is a series of entries, called <i>routes</i>, that contain information on where the network IDs of the internetwork are located. A routing table in a computer that is running Windows 2000 is built automatically, based on its TCP/IP configuration. You can view a routing table by typing <b>route print</b> at a command prompt, as illustrated in Figure 2.17.</p>


<p>
<A HREF="javascript:fullSize('02ntk17x.htm')"> <img src="images/02ntk17.JPG" width=404 height=205 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 2.17</b> <i>Displaying a routing table at a command prompt</i><!-- /caption -->
</p>

<p><div class="note"><blockquote><b>NOTE</b><HR>The routing table is not exclusive to a router. Hosts also have a routing table that is used to determine the optimal route.</blockquote></div>
</p>

<A NAME="109"><H2>Static and Dynamic IP Routing</H2></A>

<p>The process that routers use to obtain routing information is different based on whether the router performs static or dynamic IP routing. Static routing is a function of IP that limits you to fixed routing tables. Static routers require that routing tables are built and updated manually. You use the ROUTE command to add static entries to the routing table.</p>


<p>
<table cellpadding=5 width="95%">
<tr> 
<th>To add or modify a static route   </th>
<th>Function  </th></tr>
<tr>
<td valign="top"><b>route add [</b><i>network</i><b>] mask [</b><i>netmask</i><b>] [</b><i>gateway</i><b>]</b>  </td>
<td valign="top">Adds a route  </td></tr>
<tr>
<td valign="top"><b>route -p add [</b><i>network</i><b>] mask [</b><i>netmask</i><b>] [</b><i>gateway</i><b>]</b>  </td>
<td valign="top">Adds a persistent route  </td></tr>
<tr>
<td valign="top"><b>route delete [</b><i>network</i><b>] [</b><i>gateway</i><b>]</b>  </td>
<td valign="top">Deletes a route  </td></tr>
<tr>
<td valign="top"><b>route change [</b><i>network</i><b>] [</b><i>gateway</i><b>]</b>  </td>
<td valign="top">Modifies a route  </td></tr>
<tr>
<td valign="top"><b>route print</b>  </td>
<td valign="top">Displays the routing table  </td></tr>
<tr>
<td valign="top"><b>route -f</b>  </td>
<td valign="top">Clears all routes  </td></tr>
</table></p>

<p>
<img src="images/practic.JPG" width=90 height=72 border="0">
</p>

<A NAME="110"><H2>Practice: Updating a Windows 2000-Based Routing Table</H2></A>

<p>In this practice, you will update a Windows 2000-based routing table by means of static routes.</p>

<p><li><b>To update a routing table</b></li></p>

<ol>
<p><li>Open a command prompt.</li></p>

<p><li>At the command prompt, type <b>route add <i>IP_ address</i> mask <i>subnet_mask gateway</i></b>  to add a route to enable communications with a network from a host on another network.</li></p>


<p>For example, to add a route to enable communications with network 10.107.24.0 from a host on network 10.107.16.0, you would type <b>route add 10.107.24.0 mask 255.255.255.0 10.107.16.2</b>, as illustrated in Figure 2.18.</p>

<p>
<A HREF="javascript:fullSize('02ntk18x.htm')"> <img src="images/02ntk18.JPG" width=404 height=205 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 2.18</b> <i>Adding a static route to a routing table</i><!-- /caption -->
</p>

</ol>

<A NAME="111"><H3>Using Dynamic Routing</H3></A>

<p>If a route changes, static routers do not inform each other of the change, nor do static routers exchange routes with dynamic routers. In contrast, dynamic routing automatically updates the routing tables, reducing administrative overhead. However, dynamic routing increases traffic in large networks.</p>

<A NAME="112"><H3>Routing Protocols</H3></A>

<p>Dynamic routing is a function of routing protocols, such as the Routing Information Protocol (RIP) and Open Shortest Path First (OSPF). Routing protocols periodically exchange routes to known networks among dynamic routers. If a route changes, other routers are automatically informed of the change. You must have multiple network adapters (one per network) on a Windows 2000 Server or Windows 2000 Advanced Server. In addition, you must install and configure Routing and Remote Access because dynamic routing protocols are not installed by default when you install Windows 2000. You will learn how to implement IP routing for remote 
users in <A HREF="ch11a.htm">Chapter 11</A>, &quot;Providing Your Clients Remote Access Service (RAS).&quot;</p>

<p>Windows 2000 offers two primary IP routing protocols that you can choose, 
depending on factors such as network size and topology. These routing protocols are explained in the next two sections.</p>

<p><b>Routing Information Protocol (RIP)</b></p>

<p>RIP is a distance-vector routing protocol provided for backwards-compatibility with existing RIP networks. RIP allows a router to exchange routing information with other RIP routers to make them aware of any change in the internetwork layout. RIP broadcasts the information to neighboring routers, and sends periodic RIP broadcast packets containing all routing information known to the router. These broadcasts keep all internetwork routers synchronized.</p>

<p><b>Open Shortest Path First (OSPF)</b></p>

<p>OSPF is a link-state routing protocol that enables routers to exchange routing 
information and create a map of the network that calculates the best possible path to each network. Upon receiving changes to the link state database, the routing table is recalculated. As the size of the link state database increases, memory 
requirements and route computation times increase. To address this scaling 
problem, OSPF divides the internetwork into collections of contiguous networks called areas. Areas are connected to each other through a backbone area. A backbone router in OSPF is a router that is connected to the backbone area. Backbone routers include routers that are connected to more than one area. However, backbone routers do not have to be area border routers. Routers that have all networks connected to the backbone are internal routers.</p>

<p>Each router only keeps a link state database for those areas that are connected 
to the router. Area Border Routers (ABRs) connect the backbone area to other 
areas, as illustrated in Figure 2.19.</p>


<p>
<A HREF="javascript:fullSize('02ntk19x.htm')"> <img src="images/02ntk19.JPG" width=404 height=203 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 2.19</b> <i>A basic OSPF area design</i><!-- /caption -->
</p>

<p>An OSPF-routed environment is best suited to a large-to-very-large, multipath, dynamic IP internetwork such as a corporate or institutional campus, or worldwide corporate or institutional internetwork. To manage your internal and 
border routers:</p>

<ul>
<p><li>Ensure that the ABRs for the area are configured with the proper pairs (Destination, Network Mask) that summarize that area's routes.</li></p>


<p><li>Ensure that the source and route filtering configured on the ABR is not too restrictive, preventing proper routes from being propagated to the OSPF autonomous system. External source and route filtering is configured on the External Routing tab in the OSPF Routing Protocol Properties dialog box.</li></p>


<p><li>Ensure that all ABRs are either physically connected to the backbone or logically connected to the backbone by using a virtual link. There should not be backdoor routers, which are routers that connect two areas without going through the backbone.</li></p>

</ul>



<p><li><b>To administer a router</b></li></p>

<ol>
<p><li>Click Start, point to Programs, point to Administrative Tools, and then click Routing And Remote Access.</li></p>

<p><li>In the console tree, right-click Server Status, then click Add Server.</li></p>

<p><li>In the Add Server dialog box, do one of the following:</li></p>


<ul>
<p><li>Click The Following Computer, and type the computer name or IP address of the server.</li></p>

<p><li>Click All Routing And Remote Access Servers In The Domain, and then type the domain containing the server you want to administer. Click OK, and then select the server.</li></p>

<p><li>Click Browse The Active Directory, click Next, and in the Find Routers Or Remote Access Servers dialog box, select the check boxes next to the types of servers that you want to search for. Click OK, and then select the server.</li></p>
</ul>


<p><li>You can administer a remote server once it appears as an item in the console tree.</li></p>

</ol>

<A NAME="113"><H2>Lesson Summary</H2></A>

<p>Routers forward packets from one physical network to another. The IP layer consults a routing table that is stored in memory. A routing table contains entries with the IP addresses of router interfaces to other networks. Static routers require that routing tables are built and updated manually. With dynamic routing, if a route changes, other routers are automatically informed of the change.</p>

</BODY>
</HTML>





