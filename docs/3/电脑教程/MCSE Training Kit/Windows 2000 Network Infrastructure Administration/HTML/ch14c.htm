<HTML>
<HEAD>
<TITLE>Lesson 2: Configuring Routing and Remote Access Security</TITLE>
<link rel="STYLESHEET" type="text/css" href="mmnet.css">

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</HEAD>
<BODY BGCOLOR="#ffffff" TEXT="#000000">
<A HREF="ch14b.htm">[Previous]</A> <A HREF="ch14d.htm">[Next]</A><P>



<A NAME="618"><H1>Lesson 2: Configuring Routing and Remote Access Security</H1></A>

<p>Remote access enables clients to connect to your network from a remote location through various hardware devices including network interface cards and modems. Once clients obtain a remote access connection, they can use network resources such as files in the same way as they would use a client computer directly connected to your local area network (LAN). In this lesson, you will learn how to configure security for remote access on your network.</p>

<p><div class="sidebar"><blockquote>
<b>After this lesson, you will be able to</b>

<ul>
<p><li>Create a remote access policy</li></p>

<p><li>Configure remote access security</li></p>

<p><li>Configure encryption protocols</li></p>

<p><li>Configure authentication protocols</li></p>

<p><li>Configure and troubleshoot network protocol security</li></p>
</ul>

<p><b>Estimated lesson time: 60 minutes</b></p>
</blockquote></div></p>

<A NAME="619"><H2>Overview of Remote Access</H2></A>

<p>As you learned in <A HREF="ch11a.htm">Chapter 11</A>, Routing and Remote Access is the service that lets remote users connect to your local network by phone. Remote access provides an opportunity for intruders to access your network; therefore, Windows 2000 provides multiple security features to permit authorized access while limiting opportunities for mischief. When a client dials a remote access server on your network, the client is granted access to the network if the following are true:</p>

<ul>
<p><li>The request matches one of the remote access policies defined for the server.</li></p>

<p><li>The user's account is enabled for remote access.</li></p>

<p><li>Client/server authentication succeeds.</li></p>
</ul>



<p>After the client has been identified and authorized, access to the network can be limited to specific servers, subnets, and protocol types, depending on the remote access profile of the client. Otherwise, all services typically available to a user connected to a LAN (including file and print sharing, Web server access, and messaging) are enabled by means of the remote access connection.</p>

<A NAME="620"><H2>Configuring Protocols for Security</H2></A>

<p>Consider that someone can intercept a user name and password while a user is attempting to log on to the Routing and Remote Access server using techniques similar to a wiretap. To prevent this, Routing and Remote Access can use a 
secure user authentication method including</p>

<ul>
<p><li><b>Challenge Handshake Authentication Protocol (CHAP).</b> CHAP is designed to address the concern of passing passwords in plaintext. Historically, CHAP is the most common dial-up authentication protocol used. Because the algorithm for calculating CHAP responses is well known, it is very important that passwords be carefully chosen and sufficiently long. CHAP passwords that are common words or names are vulnerable to dictionary attacks if they can be discovered by comparing responses to the CHAP challenge with every entry in a dictionary. Passwords that are not sufficiently long can be discovered by brute force by comparing the CHAP response to sequential trials until a match to the user's response is found.</li></p>

<p><li><b>Microsoft Challenge Handshake Authentication Protocol (MS-CHAP).</b> MS-CHAP is a variant of CHAP that does not require a plaintext version of the password on the authenticating server. MS-CHAP passwords are stored more securely at the server but have the same vulnerabilities to dictionary and brute force attacks as CHAP. In MS-CHAP the challenge response is calculated with a Message Digest 4 (MD4)-hashed version of the password and the network access server (NAS) challenge. This enables authentication over the Internet to a Windows 2000 domain controller (or a Windows NT 4.0 domain controller on which the update has not been installed).</li></p>

<p><li><b>Password Authentication Protocol (PAP).</b> PAP passes a password as a string from the user's computer to the NAS device. When the NAS forwards the password, it is encrypted using the Remote Authentication Dial-In User Service (RADIUS) shared secret as an encryption key. PAP is the most flexible protocol because passing a plaintext password to the authentication server enables that server to compare the password with nearly any storage format. For example, UNIX passwords are stored as one-way encrypted strings that cannot be decrypted. PAP passwords can be compared to these strings by reproducing the encryption method. Because it uses a plaintext version of the password, PAP has a number of security vulnerabilities. Although the RADIUS protocol encrypts the password, it is transmitted as plaintext across the dial-up connection.</li></p>

<p><li><b>Shiva Password Authentication Protocol (SPAP).</b> SPAP is a reversible encryption mechanism employed by Shiva remote access servers. A Windows 2000 remote access client can use SPAP to authenticate itself to a Shiva remote access server. A remote access client running Windows 32-bit operating systems can use SPAP to authenticate itself to a Windows 2000 remote access server. SPAP is more secure than PAP but less secure than CHAP or MS-CHAP. SPAP offers no protection against remote server impersonation.</li></p>

<p>Like PAP, SPAP is a simple exchange of messages. First, the remote access client sends an SPAP Authenticate-Request message to the remote access server containing the remote access client's user name and encrypted password. Next, the remote access server decrypts the password, checks the user name and password, and sends back either an SPAP Authenticate-Ack message when the user's credentials are correct, or an SPAP Authenticate-Nak message with a reason why the user's credentials were not correct.</p>

<p><li><b>Extensible Authentication Protocol (EAP).</b> EAP is an extension to Point-to-Point Protocol (PPP) that allows for arbitrary authentication mechanisms to be employed for the validation of a PPP connection. With PPP authentication protocols such as MS-CHAP and SPAP, a specific authentication mechanism is chosen during the link establishment phase. Then, during the connection authentication phase, the negotiated authentication protocol is used to validate the connection. The authentication protocol itself is a fixed series of messages sent in a specific order. Architecturally, EAP is designed to allow authentication plug-in modules at both the client and server ends of a connection. By installing an EAP-type library file on both the remote access client and the remote access server, a new EAP type can be supported. This presents vendors with the opportunity to supply a new authentication scheme at any time. EAP provides the highest flexibility in authentication uniqueness and variations.</li></p>
</ul>



<p><img src="images/practic.JPG" width=90 height=72 border="0"></p>

<A NAME="621"><H3>Practice: Using Security Protocols for a Virtual Private Network Connection</H3></A>

<p><li><b>To enable your virtual private network (VPN) 
server to use the CHAP authentication method</b></li></p>

<ol>
<p><li>Click Start, point to Programs, point to Administrative Tools, then click Routing and Remote Access.</li></p>

<p><li>Right-click the server name for which you want to enable authentication protocols, then click Properties.</li></p>
<p>The Server Properties dialog box appears.</p>

<p><li>In the Security tab, click Authentication Methods.</li></p>

<p>The Authentication Methods dialog box appears.</p>

<p><li>In the Authentication Methods dialog box, select Encrypted Authentication, as illustrated in Figure 14.3, then click OK.</li></p>

<p><li>Click OK to close the Server Properties dialog box.</li></p>
</ol>

<p>
<img src="images/14ntk03.JPG" width=384 height=347 border="0">
</p><p>
<!-- caption --><b>Figure 14.3</b> <i>Using the CHAP authentication method</i><!-- /caption -->
</p>

<A NAME="622"><H2>Creating Remote Access Policies</H2></A>

<p>Windows 2000 Routing and Remote Access and Windows 2000 Internet Authentication Service (IAS) both use remote access policies to determine whether to accept or reject connection attempts. In both cases, the remote access policies are stored locally. Policy is now dictated on a per-call basis.</p>

<p>With remote access policies, you can grant or deny authorization by time of day or day of the week, by the Windows 2000 group to which the remote access user belongs, by the type of connection being requested (dial-up networking or VPN connection), and so forth.</p>

<A NAME="623"><H3>Local Versus Centralized Policy Management</H3></A>

<p>Because remote access policies are stored locally on either a remote access server or an IAS server, for centralized management of a single set of remote access policies for multiple remote access or VPN servers, you must do the following:</p>

<ol>
<p><li>Install the Windows 2000 IAS as a RADIUS server on a computer.</li></p>

<p><li>Configure IAS with RADIUS clients that correspond to each of the Windows 2000 remote access or VPN servers.</li></p>

<p><li>On the IAS server, create the central set of policies that all Windows 2000 remote access servers are using.</li></p>

<p><li>Configure each of the Windows 2000 remote access servers as a RADIUS client to the IAS server.</li></p>
</ol>

<p>After you configure a Windows 2000 remote access server as a RADIUS client to an IAS server, the local remote access policies stored on the remote access server are no longer used. Centralized management of remote access policies is also used when you have remote access servers that are running Windows NT 4.0 with the Routing and Remote Access Service (RRAS). You can configure the server that is running Windows NT 4.0 with RRAS as a RADIUS client to an IAS server. You cannot configure a remote access server that is running Windows NT 4.0 without RRAS to take advantage of centralized remote access policies.</p>

<A NAME="624"><H2>Using Encryption Protocols</H2></A>

<p>You can use data encryption to protect the data that is sent between the remote access client and the remote access server. Data encryption is important for 
financial institutions, law-enforcement and government agencies, and corporations that require secure data transfer. For installations where data confidentiality is required, the network administrator can set the remote access server to require encrypted communications. Users who connect to that server must encrypt their data, or the connection attempt is denied.</p>

<p>For VPN connections, you protect your data by encrypting it between the ends 
of the VPN. You should always use data encryption for VPN connections when private data is sent across a public network such as the Internet, where there is always a risk of unauthorized interception.</p>

<p>For dial-up networking connections, you can protect your data by encrypting it on the communications link between the remote access client and the remote access server. You should use data encryption when there is a risk of unauthorized interception of transmissions on the communications link between the remote access client and the remote access server. There are two forms of encryption available for demand-dial connections: Microsoft Point-to-Point Encryption (MPPE) and IP Security (IPSec).</p>

<ul>
<p><li><b>MPPE.</b> All PPP connections, including Point-to-Point Tunneling Protocol (PPTP) but not including Layer 2 Tunneling Protocol (L2TP), can use MPPE. MPPE uses the Rivest_Shamir_Adleman (RSA) Rivest's Cipher 4 (RC4) stream cipher and is only used when either the EAP-Transport Layer Security (TLS) or MS-CHAP (version 1 or version 2) authentication methods are used. MPPE can use 40-bit, 56-bit, or 128-bit encryption keys. The 40-bit key is designed for backward compatibility and international use. The 56-bit key is designed for international use and adheres to United States encryption export laws. The 128-bit key is designed for North American use. By default, the highest key strength supported by the calling router and answering router is negotiated during the connection establishment process. If the answering router requires a higher key strength than is supported by the calling router, the connection attempt is rejected.</li></p>
</ul>


<p><div class="note"><blockquote><b>NOTE</b><HR>For dial-up networking connections, Windows 2000 uses MPPE.</blockquote></div></p>

<ul>
<p><li><b>IPSec.</b> For demand-dial connections using L2TP over IPSec, encryption is determined by the establishment of the IPSec security association (SA). The available encryption algorithms include Data Encryption Standard (DES) with a 56-bit key, and triple DES (3DES), which uses three 56-bit keys and is designed for high-security environments. The initial encryption keys are derived from the IPSec authentication process.</li></p>
</ul>



<p>For VPN connections, Windows 2000 uses MPPE with the PPTP, and IPSec 
encryption with the L2TP.</p>

<p><li><b>To configure encryption for a dial-up connection</b></li></p>

<ol>
<p><li>Click Start, point to Programs, point to Administrative Tools, then click Routing And Remote Access.</li></p>

<p><li>Under the server name, click Remote Access Policies.</li></p>

<p><li>In the details pane, right-click the remote access policy you want to configure, then click Properties.</li></p>

<p><li>Click Edit Profile.</li></p>

<p><li>In the Encryption tab, illustrated in Figure 14.4, specify settings as needed, then click OK.</li></p>

<p><li>Click OK to close the Policy Properties dialog box.</li></p>
</ol>

<p>
<img src="images/14ntk04.JPG" width=404 height=466 border="0">
</p><p>
<!-- caption --><b>Figure 14.4</b> <i>Setting the level of encryption</i><!-- /caption -->
</p>

<A NAME="625"><H2>Lesson Summary</H2></A>

<p>Remote access enables clients to connect to your network from a remote location through various hardware devices including network interface cards and modems. Once a client obtains a remote access connection, he or she can use network 
resources, such as files, as when the client computer is directly connected to the LAN. In Windows 2000 you create remote access policies and then 
configure them for security. You can set the level of encryption and dial-up 
permissions for remote access.</p>

</BODY>
</HTML>





