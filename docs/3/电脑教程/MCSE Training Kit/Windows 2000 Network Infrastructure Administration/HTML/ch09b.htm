<HTML>
<HEAD>
<TITLE>Lesson 1: Introduction to WINS</TITLE>
<link rel="STYLESHEET" type="text/css" href="mmnet.css">

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</HEAD>
<BODY BGCOLOR="#ffffff" TEXT="#000000">
<A HREF="ch09a.htm">[Previous]</A> <A HREF="ch09c.htm">[Next]</A><P>



<A NAME="351"><H1>Lesson 1: Introduction to WINS</H1></A>

<p>WINS provides a distributed database for registering and querying dynamic mappings of NetBIOS names for computers and groups used on your network. WINS maps NetBIOS names to IP addresses and was designed to solve the problems arising from NetBIOS name resolution in routed environments. WINS is the best choice for NetBIOS name resolution in routed networks that use NetBIOS over TCP/IP.</p>

<p><div class="sidebar"><blockquote>
<b>After this lesson, you will be able to</b>

<ul>
<p><li>Describe the relationship between NetBIOS and TCP/IP</li></p>

<p><li>Describe the advantage of using WINS</li></p>

<p><li>Describe a new Windows 2000 feature relating to NetBIOS</li></p>
</ul>

<p><b>Estimated lesson time: 15 minutes</b></p>
</blockquote></div></p>

<A NAME="352"><H2>Name Resolution with NetBIOS</H2></A>

<p>This section explains NetBIOS name resolution concepts and methods to help you better understand WINS functionality. This is because previous versions of Windows, such as Windows NT 4.0, and some Windows-based applications use NetBIOS names to identify network resources.</p>

<A NAME="353"><H3>Overview of NetBIOS</H3></A>

<p>NetBIOS was developed for IBM in 1983 by Sytek Corporation to allow applications to communicate over a network. As illustrated in Figure 9.1, NetBIOS 
defines two entities:</p>

<ul>
<p><li>A session-level interface</li></p>

<p><li>A session management/data transport protocol</li></p>
</ul>


<p>
<A HREF="javascript:fullSize('09ntk01x.htm')"> <img src="images/09ntk01.JPG" width=404 height=194 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 9.1</b> <i>NetBIOS communication over TCP/IP</i><!-- /caption -->
</p>

<p>The NetBIOS interface is a presentation-layer application programming interface (API) for user applications to submit network input/output (I/O) and control 
directives to underlying network protocols. An application program that uses the NetBIOS interface API for network communication can be run on any protocol that supports the NetBIOS interface. This is implemented by the session layer software, such as NetBIOS Frame Protocol (NBFP) or NetBIOS over TCP/IP (NetBT), to perform the network I/O required to accommodate the NetBIOS 
interface command set.</p>

<p>NetBIOS provides commands and support for the following services:</p>

<ul>
<p><li>Network name registration and verification</li></p>

<p><li>Session establishment and termination</li></p>

<p><li>Reliable connection-oriented session data transfer</li></p>

<p><li>Unreliable connectionless datagram data transfer</li></p>

<p><li>Support protocol (driver) and adapter monitoring and management</li></p>
</ul>



<A NAME="354"><H3>NetBIOS Names</H3></A>

<p>A NetBIOS name is a unique 16-byte address used to identify a NetBIOS resource on the network. This name is either a unique (exclusive) or group (nonexclusive) name. Unique names are typically used to send network communication to a 
specific process on a computer. Group names are used to send information to multiple computers at one time. An example of a process that uses a NetBIOS name is the File and Printer Sharing for Microsoft Networks service on a computer running Windows 2000. When your computer starts up, this service registers a unique NetBIOS name based on the name of your computer. The exact name used by the service is the 15-character computer name plus a 16th character of 0x20. If the computer name is not 15 characters long, it is padded with spaces up to 15 characters.</p>

<p>NetBIOS name resolution is the process of mapping a computer's NetBIOS name to an IP address. A computer's NetBIOS name must be resolved to an IP address before the IP address can be resolved to a hardware address. Microsoft TCP/IP uses several methods to resolve NetBIOS names; however, the exact mechanism by which NetBIOS names are resolved to IP addresses depends on the NetBIOS node type that is configured for the node. Request for Comments (RFC) 1001, &quot;Protocol Standard for a NetBIOS Service on a TCP/UDP Transport: Concepts and Methods,&quot; defines the NetBIOS node types, as listed in Table 9.1.</p>

<p><b>Table 9.1</b> <i>NetBIOS Node Types</i></p>

<p><table cellpadding=5 width="95%"><tr>
<th>Node Type</th> <th>Description</th>
</tr><tr>
<td valign="top">B-node (broadcast)</td> <td valign="top">B-node uses broadcast NetBIOS name queries for name registration and resolution. B-node has two major problems: (1) Broadcasts disturb every node on the network. (2) Routers typically do not forward broadcasts, so only NetBIOS names on the local network can be resolved.</td>
</tr><tr>
<td valign="top">P-node (peer-peer)</td> <td valign="top">P-node uses a NetBIOS name server, such as a WINS server, to resolve NetBIOS names. P-node does not use broadcasts; instead, it queries the name server directly.</td>
</tr><tr>
<td valign="top">M-node (mixed)</td> <td valign="top">M-node is a combination of B-node and P-node. By default, an M-node functions as a B-node. If an M-node is unable to resolve a name by broadcast, it queries a NetBIOS name server using P-node.</td>
</tr><tr>
<td valign="top">H-node (hybrid)</td> <td valign="top">H-node is a combination of P-node and B-node. By default, an 
H-node functions as a P-node. If an H-node is unable to resolve a name through the NetBIOS name server, it uses a broadcast to resolve the name.</td>
</tr></table></p>

<p>Computers running Windows 2000 are B-node by default and become H-node when they are configured with a WINS server. Windows 2000 can also use a 
local database file called LMHOSTS to resolve remote NetBIOS names. The LMHOSTS file is stored in the %systemroot%\System32\Drivers\Etc folder. A sample LMHOSTS file (LMHOSTS.SAM) is included in this directory.</p>

<A NAME="355"><H3>The LMHOSTS File</H3></A>

<p>The LMHOSTS file is a static ASCII file used to resolve NetBIOS names to IP addresses of remote computers running Windows NT and other NetBIOS-based hosts.</p>

<p>Figure 9.2 shows an example of the LMHOSTS file.</p>

<p>
<A HREF="javascript:fullSize('09ntk02x.htm')"> <img src="images/09ntk02.JPG" width=404 height=239 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 9.2</b> <i>The LMHOSTS file</i><!-- /caption -->
</p>

<p><b>Predefined Keywords</b></p>

<p>An LMHOSTS file also contains predefined keywords that are prefixed with a #. If you use this LMHOSTS file on an older NetBT system such as LAN Manager, these directives are ignored as comments because they begin with a number sign (<b>#</b>). Table 9.2 lists the possible LMHOSTS keywords.</p>

<p><b>Table 9.2</b> <i>LMHOSTS Keywords</i></p>

<p><table cellpadding=5 width="95%"><tr>
<th>Predefined Keyword</th> <th>Description</th>
</tr><tr>
<td valign="top">#PRE</td> <td valign="top">Defines which entries should be initially preloaded as permanent entries in the name cache. Preloaded entries reduce network broadcasts, because names are resolved from cache 
rather than from broadcast or by parsing the LMHOSTS file. Entries with a #PRE tag are loaded automatically at initialization or manually by typing <b>nbtstat -R</b> at a command prompt.</td>
</tr><tr>
<td valign="top">#DOM:[domain_name]</td> <td valign="top">Facilitates domain activity, such as logon validation over a 
 router, account synchronization, and browsing.</td>
</tr><tr>
<td valign="top">#NOFNR</td> <td valign="top">Avoids using NetBIOS-directed name queries for older 
 LAN Manager UNIX systems.</td>
</tr><tr>
<td valign="top">#BEGIN_ALTERNATE<br>#END_ALTERNATE</td> <td valign="top">Defines a redundant list of alternate locations for LMHOSTS 
files. The recommended way to #INCLUDE remote files is 
using a Universal Naming Convention (UNC) path, to ensure 
access to the file. Of course, the UNC names must exist in 
the LMHOSTS file with a proper IP address to NetBIOS 
name translation.</td>
</tr><tr>
<td valign="top">#INCLUDE</td> <td valign="top">Loads and searches NetBIOS entries in a separate file from 
 the default LMHOSTS file. Typically, an #INCLUDE file is 
 a centrally located shared LMHOST file.</td>
</tr><tr>
<td valign="top">#MH</td><td valign="top"> Adds multiple entries for a multihomed computer.</td>
</tr></table></p>

<A NAME="356"><H2>WINS Overview</H2></A>

<p>WINS eliminates the need for broadcasts to resolve computer names to IP 
addresses and provides a dynamic database that maintains mappings of computer names to IP addresses. WINS is an enhanced NetBIOS name server (NBNS) 
designed by Microsoft to eliminate broadcast traffic associated with the B-node implementation of NetBT. It is used to register NetBIOS computer names and resolve them to IP addresses for both local and remote hosts.</p>

<p>There are several advantages of using WINS. The primary advantage is that client requests for computer name resolution are sent directly to a WINS server. If the WINS server can resolve the name, it sends the IP address directly to the client. As a result, a broadcast is not needed and network traffic is reduced. However, if the WINS server is unavailable, the WINS client can still use a broadcast in an attempt to resolve the name. Another advantage of using WINS is that the WINS database is updated dynamically, so it is always current. This eliminates the need for an LMHOSTS file. In addition, WINS provides network and interdomain browsing capabilities.</p>

<p>Before two NetBIOS-based hosts can communicate, the destination NetBIOS name must be resolved to an IP address. This is necessary because TCP/IP 
requires an IP address rather than a NetBIOS computer name to communicate. As illustrated in Figure 9.3, resolution uses the following process:</p>

<ol>
<p><li>In a WINS environment, each time a WINS client starts, it registers its NetBIOS name/IP address mapping with a configured WINS server.</li></p>

<p><li>When a WINS client initiates a command to communicate with another host, the name query request is sent directly to the WINS server instead of being broadcast on the local network.</li></p>

<p><li>If the WINS server finds a NetBIOS name/IP address mapping for the destination host in this database, it returns the destination host's IP address to the WINS client. Because the WINS database obtains NetBIOS name/IP address mappings dynamically, it is always current.</li></p>
</ol>

<p>
<A HREF="javascript:fullSize('09ntk03x.htm')"> <img src="images/09ntk03.JPG" width=404 height=142 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 9.3</b> <i>Name resolution with WINS</i><!-- /caption -->
</p>

<A NAME="357"><H2>WINS and Windows 2000</H2></A>

<p>Prior to Windows 2000, all MS-DOS and Windows-based operating systems 
required the NetBIOS naming interface to support network capabilities. With the release of Windows 2000, support for the NetBIOS naming interface is no longer required for networking computers because you can disable NetBT for each 
network connection. This feature is intended for computers that only use Domain Name System (DNS) name registration and resolution techniques, and communicate by using the Client for Microsoft Networks and the File and Print Sharing for Microsoft Networks components with other computers where NetBT is disabled. Examples of disabling NetBT include computers in specialized or secured roles for your network, such as an edge proxy server or bastion host in a firewall environment, where NetBT support is not required or desired.</p>

<p>Another example is an environment consisting of host computers and programs that support the use of the DNS that could be built to run using Windows 2000 and other operating systems not requiring NetBIOS names, such as some versions of UNIX. However, most networks still need to integrate legacy operating systems that require NetBIOS network names with computers running Windows 2000. For this reason, Microsoft has continued to provide default support for NetBIOS names with Windows 2000 to ease interoperability with legacy operating systems that require their use. This support is provided mainly in two ways:</p>

<ul>
<p><li>By default, all computers running Windows 2000 that use TCP/IP are enabled to provide client-side support for registering and resolving NetBIOS names.</li></p>
<p>This support is provided through NetBT and can, if desired, be 
manually disabled.</p>

<p><li>Windows 2000 Server continues to provide server-side support through WINS. WINS can be used to effectively manage NetBT-based networks.</li></p>
</ul>



<A NAME="358"><H2>Lesson Summary</H2></A>

<p>Some applications and previous versions of Windows use NetBIOS names to identify network resources. WINS is an enhanced NBNS designed by Microsoft to eliminate broadcast traffic associated with the B-node implementation of NetBT. There are several advantages to using WINS. The primary advantage is that broadcast traffic is reduced because requests for name resolution are sent 
directly to the WINS server.</p>

</BODY>
</HTML>





