<HTML>
<HEAD>
<TITLE>Lesson 1: Introducing NWLink</TITLE>
<link rel="STYLESHEET" type="text/css" href="mmnet.css">

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</HEAD>
<BODY BGCOLOR="#ffffff" TEXT="#000000">
<A HREF="ch03a.htm">[Previous]</A> <A HREF="ch03c.htm">[Next]</A><P>



<A NAME="118"><H1>Lesson 1: Introducing NWLink</H1></A>

<p>If some of your computer resources are on a Novell NetWare network, your 
Windows 2000-based network will have to communicate and share resources with the NetWare network. Novell uses the Internetwork Packet Exchange/ 
Sequenced Packet Exchange (IPX/SPX) protocol as its primary network protocol. NWLink is an IPX/SPX-compatible protocol developed by Microsoft to allow Windows 2000 computers to communicate with the NetWare services. This 
lesson provides an overview of the NWLink protocol.</p>

<p><div class="sidebar"><blockquote><b>
After this lesson, you will be able to</b>

<ul>
<p><li>Explain the purpose of the NWLink protocol</li></p>

<p><li>List some of the components used for internetworking Windows 2000 with Novell NetWare</li></p>

<p><li>Identify the architecture of NWLink</li></p>
</ul>



<p><b>Estimated lesson time: 25 minutes</b></p>
</blockquote></div></p>

<A NAME="119"><H2>Interoperability with NetWare</H2></A>

<p>Windows 2000 provides protocols and services that allow you to integrate 
Windows 2000-based networks with Novell NetWare networks, including the IPX/SPX/NetBIOS Compatible Transport Protocol (NWLink), Windows 2000 Gateway Service for NetWare, and Windows 2000 Client Service for NetWare. These features allow you to create a network environment composed of both Windows 2000-based and NetWare servers. You can also migrate user accounts, groups, files, and permissions from NetWare to Windows 2000 using the Directory Services Migration Tool for NetWare provided with Windows 2000.</p>

<p>The following list describes services for Windows 2000 Server that enable computers running Windows 2000 to coexist and interoperate with Novell NetWare networks and servers. Some of these services are included in Windows 2000 Server and others are available as separate products.</p>

<ul>
<p><li><b>IPX/SPX/NetBIOS Compatible Transport Protocol (NWLink).</b> NWLINK, an IPX/SPX-compatible protocol, is the fundamental building block for the NetWare-compatible services on the Windows 2000 platform. NWLink is included with all varieties of Windows 2000 Server and Windows 2000 Professional.</li></p>

<p><li><b>Gateway Service for NetWare.</b> Gateway Service for NetWare is included with all varieties of Windows 2000 Server. It enables a computer running Windows 2000 Server to communicate at the application layer to computers running NetWare 3.2 or later server software. Logon script support is also included. In addition, you can use Gateway Service for NetWare to create gateways to NetWare resources, enabling computers running only Microsoft client software to gain access to NetWare resources through the gateway. Gateway Service for NetWare is discussed in more detail in Lesson 2.</li></p>

<p><li><b>Directory Service Migration Tool.</b> The Directory Service Migration Tool enables you to migrate user accounts, groups, files, and permissions from a NetWare server to Windows 2000 Active Directory. Windows 2000 replaces the old NetWare Convert Tool with the Directory Service Migration Tool. The Directory Service Migration Tool nondestructively migrates both NetWare binderies and NetWare Domain Services into an offline database and permits administrators to model the account information before committing it to Active Directory, as illustrated in Figure 3.1.</li></p>

<p>
<A HREF="javascript:fullSize('03ntk01x.htm')"> <img src="images/03ntk01.JPG" width=404 height=121 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 3.1 </b> <i>Migration from NetWare Domain Services to Windows 2000 Active Directory </i><!-- /caption -->
</p>


<p><li><b>File and Print Services for NetWare.</b> File and Print Services for NetWare allows NetWare clients using the IPX/SPX-compatible transport to send print jobs over the network to Windows 2000 print servers. File and Print Services for NetWare is a separate product from Windows 2000 that does not require any changes to be made to NetWare clients.</li></p>
</ul>



<A NAME="120"><H3>Integrating NetWare 5.0 and Windows 2000 Servers</H3></A>

<p>Like Windows 2000, NetWare 5.0 uses Transmission Control Protocol/Internet Protocol (TCP/IP) as the native protocol, and IPX is not installed by default. 
Neither Client Service for NetWare nor Gateway Service for NetWare supports connecting to NetWare resources over IP. Therefore, when you use NWLink to connect to NetWare 5.0 servers you must enable IPX on NetWare 5.0 servers.</p>

<A NAME="121"><H2>NWLink and Windows 2000</H2></A>

<p>NWLink provides the network and transport protocols to support communications with NetWare file servers, and must be installed if you want to use Gateway Service for NetWare or Client Service for NetWare to connect to NetWare servers. To log on to a NetWare network from a Windows 2000 Professional-based computer, you must use Client Service for NetWare or a third-party NetWare client such as Novell Client for Windows 2000. Alternately, you could use a gateway-based solution by installing Gateway Service for NetWare on a Windows 2000 server. Client Service for NetWare and Gateway Service for NetWare are discussed later in this chapter.</p>

<p>Because NWLink is Network Driver Interface Specification (NDIS)-compliant, the Windows 2000-based computer can simultaneously run other protocol stacks, such as TCP/IP. NWLink can bind to multiple network adapters with multiple frame types. NWLink requires little or no initial client configuration 
on small, nonrouted networks.</p>

<A NAME="122"><H3>NetBIOS and Windows Sockets</H3></A>

<p>NWLink supports two networking application programming interfaces (APIs): NetBIOS and Windows Sockets (WinSock). These APIs allow Windows 2000-based computers to communicate with NetWare clients and servers and any 
Windows-based computer that uses NWLink. Because NWLink supports NetBIOS, it allows communications with all NetBIOS-based applications, including 
Microsoft Systems Management Server, SNA Server, SQL Server, and Exchange Server. The WinSock interface to NWLink allows Windows-based client computers that only have NWLink installed to use sockets-based applications such as Microsoft Internet Explorer.</p>

<A NAME="123"><H2>NWLink Architecture</H2></A>

<p>NWLink provides a comprehensive set of transport and network layer protocols that allow for integration with the NetWare environment. Table 3.1 lists the subprotocols and components, and shows their function and associated drivers.</p>

<p><b>Table 3.1</b> <i>NWLink Subprotocols</i></p>

<p><table cellpadding=5 width="95%"><tr>
<th>Protocol</th> <th>Function</th> <th>Driver</th>
</tr><tr>
<td valign="top">IPX</td> <td valign="top">A peer-to-peer networking protocol  
 that provides connectionless 
 datagram transfer services and 
 controls addressing and routing of 
 packets of data within and 
 between networks</td>
 <td valign="top">NWLNKIPX.SYS</td>
 </tr><tr>
<td valign="top">SPX and SPXII</td> <td valign="top">Provide connection-oriented transfer services</td> <td valign="top">NWLNKSPX.SYS </td>
</tr><tr>
<td valign="top">Router Information Protocol (RIP)</td><td valign="top">Provides route and router discovery services</td><td valign="top">NWLNKIPX.SYS</td> 
</tr><tr> 

<td valign="top">Service Advising Protocol (SAP)</td><td valign="top">Collects and distributes service names and addresses</td>
<td valign="top">NWLNKIPX.SYS</td> 
</tr><tr> 
<td valign="top">NetBIOS</td> <td valign="top">Provides compatible support with NetBIOS for IPX/SPX</td><td valign="top">NWLNKNB.SYS</td> 
</tr><tr>
<td valign="top">Forwarder</td> <td valign="top">Provides IPX router support</td> <td valign="top">NWLNKFWD.SYS</td>
</tr></table></p>

<p>Figure 3.2 shows NWLink in the Windows 2000 architecture and the files in which each protocol is implemented.</p>

<p>
<A HREF="javascript:fullSize('03ntk02x.htm')"> <img src="images/03ntk02.JPG" width=404 height=190 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 3.2</b> <i>NWLink in the Windows 2000 architecture</i><!-- /caption -->
</p>

<A NAME="124"><H3>IPX</H3></A>

<p>IPX is a peer-to-peer networking protocol that provides connectionless datagram transfer services and controls addressing and routing packets of data within and between networks. With connectionless transmission, a session does not need to be set up each time packets are transmitted; packets are simply sent out on the wire. This requires less overhead than connection-oriented transmission, in which a session must be established each time packets are transmitted. Therefore, connectionless transmission is best when data is generated in intermittent, short bursts.</p>

<p>Because IPX is a connectionless protocol, it does not provide for flow control or acknowledgment that the receiving station has received the datagram packet. Instead, individual datagram packets travel independently to their destination, and IPX assumes that they arrive intact without guarantee that they arrive at their destination or that they arrive in sequence. However, because transmission on local area networks (LANs) is relatively error-free, IPX is efficient in delivering short-burst data on LANs.</p>

<p>NWLink enables application programming for WinSock and remote procedure calls (RPCs) over WinSock. IPX supports WinSock identifications for use by WinSock applications. IPX enables NetBIOS, Named Pipes, Mailslots, Network Dynamic Data Exchange (NetDDE) service, RPC over NetBIOS, and RPC over Named Pipes programming over NetBIOS over IPX (NBIPX). NWLink also supports other applications that use IPX through direct hosting. Direct hosting is a feature that allows computers to communicate over IPX, bypassing the NetBIOS layer. Direct hosting can lower overhead and increase throughput.</p>

<A NAME="125"><H3>SPX</H3></A>

<p>SPX is a transport protocol that offers connection-oriented services over IPX. Although connection-oriented service requires overhead for session setup, once a session is established, this service requires no more overhead for data transmission than connectionless service. Therefore, it works best for utilities that require a continuous connection. SPX provides reliable delivery through sequencing and acknowledgments and verifies successful packet delivery to any network destination by requesting verification from the destination on receipt of the data. The SPX verification must include a value that matches the value calculated from the data before transmission. By comparing these values, SPX ensures not only that the data packet made it to the destination, but that it arrived intact. SPX can track data transmissions consisting of a series of separate packets. If an acknowledgment request brings no response within a specified time, SPX retransmits the request as many as eight times. If no response is
received, SPX assumes the connection has failed.</p>

<p>SPX also provides a packet burst mechanism. Packet burst, also known as burst mode, allows the transfer of multiple data packets without requiring that each packet be sequenced and acknowledged individually. By allowing multiple packets to be acknowledged once, burst mode can reduce network traffic on most IPX networks. Additionally, the packet burst mechanism monitors dropped packets and retransmits only the missing packets. In Windows 2000, burst mode is 
enabled by default.</p>

<A NAME="126"><H3>SPXII</H3></A>

<p>SPXII improves on SPX by allowing it to perform better on high-bandwidth 
networks. SPXII improves on SPX in the following ways:</p>

<ul>
<p><li><b>SPXII allows for more outstanding unacknowledged packets than SPX.</b> In SPX, there cannot be more than one outstanding unacknowledged packet at any time, whereas in SPXII, there can be as many outstanding packets as negotiated by the networked peers at connection setup time.</li></p>

<p><li><b>SPXII allows for larger packets.</b> SPX has a maximum packet size of 576 bytes, whereas SPXII can use the maximum packet size of the underlying LAN. For example, on an Ethernet network, SPXII can use 1518 bytes.</li></p>
</ul>



<A NAME="127"><H3>Router Information Protocol</H3></A>

<p>NWLink uses Router Information Protocol (RIP) over IPX (RIPX) to implement route and router discovery services used by SPX and NBIPX. RIP sends and 
receives IPX traffic and maintains a routing table. RIP runs on a layer equivalent to the Open Systems Interconnection (OSI) application layer. The RIP code is implemented within the NWLNKIPX.SYS file.</p>

<p>NWLink includes the RIP protocol for Windows-based clients and for computers running Windows 2000 Server that do not have Routing and Remote Access 
Service installed. These computers do not forward packets as routers do, but they use an RIP table to determine where to send packets. RIP clients, such as workstations, can locate the optimal route to an IPX network number by broadcasting an RIP GetLocalTarget route request. Each router that can reach the destination responds to the GetLocalTarget route request with a single route. Based on the RIP responses from the local routers, the sending station chooses the best router through which to forward the IPX packet.</p>

<A NAME="128"><H3>Service Advertising Protocol</H3></A>

<p>Service Advertising Protocol (SAP) is the mechanism by which IPX clients collect and distribute the names and addresses of services running on IPX nodes. SAP clients use SAP broadcasts only when bindery-based or NetWare Domain Services queries fail. SAP clients send the following types of messages:</p>

<ul>
<p><li>SAP clients request the name and address of the nearest server of a specific type by broadcasting an SAP GetNearestServer request.</li></p>

<p><li>SAP clients request the names and addresses of all services, or of all services of a specific type, by broadcasting an SAP general service request.</li></p>
</ul>



<p>NWLink includes a subset of the SAP protocol for Windows-based clients and for computers running Windows 2000 Server that do not have an IPX router installed.</p>

<A NAME="129"><H3>NetBIOS over IPX</H3></A>

<p>To facilitate the operation of NetBIOS-based applications on an IPX internetwork, NetBIOS over IPX (NWLNKNB.SYS) provides standard NetBIOS services such as the following:</p>

<ul>
<p><li><b>NetBIOS Datagram Services.</b> Applications use NetBIOS Datagram Services for fast, connectionless communications. Mailslots and user authentication make use of this service.</li></p>

<p><li><b>NetBIOS Session Services.</b> NetBIOS Session Services provide connection-oriented, reliable communication between applications. File and print sharing rely on this service.</li></p>

<p><li><b>NetBIOS Name Service.</b> Name management includes registering, querying, and releasing NetBIOS names.</li></p>
</ul>



<A NAME="130"><H3>Forwarder</H3></A>

<p>The Forwarder is a kernel mode component that is installed with NWLink. However, the Forwarder is used only when the Windows 2000-based server is used as an IPX router running Routing and Remote Access Service.</p>

<p>When the IPX router software is activated, the Forwarder component works with the IPX Router Manager and the filtering component to forward packets. The Forwarder component obtains configuration information from the IPX Router Manager and stores a table of the best routes. When the Forwarder component receives an incoming packet, it passes it to the filtering driver to check for input filters. When it receives an outgoing packet, it first passes it to the filtering driver. Assuming no outgoing filters prevent the packet from being transmitted, the filtering component passes the packet back, and the Forwarder component forwards the packet over the appropriate interface.</p>

<A NAME="131"><H2>Lesson Summary</H2></A>

<p>NWLink is the Microsoft 32-bit implementation of IPX/SPX. IPX is a peer-to-peer networking protocol that provides connectionless datagram transfer services and controls addressing and routing of packets. SPX is a transport protocol that offers connection-oriented services over IPX. A Forwarder component works with the IPX Router Manager and the filtering component to forward packets on the 
best route.</p>

</BODY>
</HTML>





