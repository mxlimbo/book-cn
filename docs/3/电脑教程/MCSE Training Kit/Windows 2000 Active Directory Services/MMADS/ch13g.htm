<html>
<head>
<title>Lesson 6: Security Configuration and Analysis</title>
<link rel="STYLESHEET" type="text/css" href="mmads.css">

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</head>
<SCRIPT LANGUAGE="JavaScript">
<!--

function fullSize(sURL){
	window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}

function LibraryHeaderNav(sBackward, sForward, sImgLeftOff, sImgLeftOn, sImgRightOff, sImgRightOn, iH, iW, sImgLeftStyle, sImgRightStyle, sImgRuleStyle, sRuleColor, sRuleSize){
	var tableStr;
	//validate questionable args for defs
	tableStr = "<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 border=0 width=100%>";
	tableStr += "<TR VALIGN=top ALIGN=right>";

	tableStr += "<TD align=right class=" + sImgRuleStyle + ">&nbsp;</TD>";	
	
	tableStr += "<TD width=34 align=right class=" + sImgLeftStyle + ">";
	tableStr += "<A href='" + sBackward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgLeftOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgLeftOff + '\'\"';
	tableStr += " SRC='" + sImgLeftOff + "' vspace=0 hspace=0></a></TD>";
	
	tableStr += "<TD width=34 align=left class=" + sImgRightStyle + ">";
	tableStr += "<A href='" + sForward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgRightOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgRightOff + '\'\"';
	tableStr += " SRC='" + sImgRightOff + "' vspace=0 hspace=0></a></TD></TR>";

	tableStr += "<TR VALIGN=top>";
	tableStr += "<TD height=3 align=center colspan=3 class=" + sImgRuleStyle + ">";
	tableStr += "<HR color=" + sRuleColor + " size=" + sRuleSize + "></TD></TR></TABLE>";
	//alert(tableStr);
	document.write(tableStr);
}

 																						     //purple is: #aa22aa   orange is: #ff9900
LibraryHeaderNav("ch13f.htm", "ch13h.htm", "images/unit_p_a1.gif", "images/unit_p_a2.gif", "images/unit_p_b1.gif", "images/unit_p_b2.gif", 18, 34, "unit01", "unit02", "headerrule", "#aa22aa", "2");
//--></SCRIPT><P>

<A NAME="754"><h1>Lesson 6: Security Configuration and Analysis</h1></A>
<p>Security Configuration and Analysis is a tool that offers the ability to configure 
security, analyze security, view results, and resolve any discrepancies revealed by analysis. This tool is located on the Security Configuration and Analysis console. This lesson shows you how to use the Security Configuration and Analysis console.</p>

<p>
<div class="sidebar"><blockquote>
<b>After this lesson, you will be able to</b>

<ul>
<p><li> Explain how the Security Configuration and Analysis console works</li></p>

<p><li> Use the Security Configuration and Analysis console to perform security configuration and analysis tasks</li></p>
</ul>

<p><b>Estimated lesson time: 25 minutes</b></p>
</blockquote></div>
</p>

<A NAME="755"><h2>How the Security Configuration and Analysis Console Works</h2></A>
<p>The Security Configuration and Analysis console uses a database to perform 
configuration and analysis functions. The security configuration and analysis 
database is a computer-specific data store. The database architecture allows the use of personal databases, security template import and export, and the combination of multiple security templates into one composite security template that can be used for analysis or configuration. New security templates can be incrementally added to the database to create a composite security template; overwriting a 
template is also an option. You can also create personal databases for storing your own customized security templates.</p>

<A NAME="756"><h2>Security Configuration</h2></A>
<p>The Security Configuration and Analysis console can be used to configure local system security. Through its use of personal databases, you can import security templates created with the Security Templates console and apply these templates to the GPO for the local computer. This immediately configures the system 
security with the levels specified in the template.</p>

<A NAME="757"><h2>Security Analysis</h2></A>
<p>The state of the operating system and applications on a computer is dynamic. For example, to enable immediate resolution of an administration or network issue, 
security levels may occasionally be required to change temporarily. After this security requirement is finished, the temporary change may not be reversed. This means that a computer may no longer meet the requirements for enterprise security.</p>

<p>The Security Configuration and Analysis console allows administrators to 
perform a quick security analysis. In the analysis, recommendations are 
presented alongside current system settings, and icons or remarks are used to highlight any areas where the current settings do not match the proposed level of security. Security Configuration and Analysis also offers the ability to resolve any discrepancies revealed by analysis.</p>

<p>Regular analysis enables an administrator to track and ensure an adequate level of security on each computer as part of an enterprise risk management program. Analysis is highly specified and information about all system aspects related to security is provided in the results. This enables an administrator to tune the 
security levels, and most important, to detect any security flaws that may occur 
in the system over time.</p>

<A NAME="758"><h2>Using Security Configuration and Analysis</h2></A>
<p>The tasks for using Security Configuration and Analysis are</p>

<ol>
<p><li> Accessing the Security Configuration and Analysis console</li></p>

<p><li> Setting a working security database</li></p>

<p><li> Importing a security template into a security database</li></p>

<p><li> Analyzing system security</li></p>

<p><li> Viewing security analysis results</li></p>

<p><li> Configuring system security</li></p>

<p><li> Exporting security database settings to a security template</li></p>
</ol>

<A NAME="759"><h3>Accessing the Security Configuration and Analysis Console</h3></A>
<p>The Security Configuration and Analysis console is the main tool for using the security configuration and analysis tool.</p>

<p><li> <b>To access the Security Configuration and Analysis console</b></li></p>

<ol>
<p><li> Do one of the following:</li></p>

	<ul>
	<p><li> To add the Security Configuration and Analysis console to a new console, click Start, click Run, type <b>mmc</b>, then click OK.</li></p>
	
	<p><li> To add the Security Configuration and Analysis console to an existing console, go directly to Step 2.</li></p>
	</ul>

<p><li> On the Console menu, click Add/Remove Snap-In, then click Add.</li></p>

<p><li> In the Add Standalone Snap-In dialog box, select Security Configuration And Analysis and click Add.</li></p>

<p><li> Click Close, then click OK.</li></p>

<p><li> On the Console menu, click Save.</li></p>

<p><li> Enter the name to assign to this console and click Save.</li></p>

<p>The console appears on the Administrative Tools menu.</p>
</ol>

<A NAME="760"><h3>Setting a Working Security Database</h3></A>
<p>The Security Configuration and Analysis console uses a database to perform 
configuration and analysis functions. Before you can configure or analyze 
security you must determine the working security database to use.</p>

<p><li> <b>To set a working security database</b></li></p>

<ol>
<p><li> In the Security Configuration and Analysis console (see Figure 13.16), right-click Security Configuration And Analysis.</li></p>

<p>
<A HREF="javascript:fullSize('new13-16x.htm')"> <img src="images/new13-16.JPG" width=404 height=277 border=0 ALT = "Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 13.16</b> <i>The Security Configuration and Analysis console</i><!-- /caption -->
</p>


<p><li> Click Open Database.</li></p>

<p><li> In the Open Database dialog box, choose an existing personal database or type a filename to create a new personal database, then click Open.</li></p>

	<ul>
	<p><li> If you chose an existing personal database, this database is now the working security database.</li></p>
	
	<p><li> If you created a new personal database, the Import Template dialog box appears.</li></p>
	</ul>

<p><li> Select the security template to load into the security database, then click Open.</li></p>

<p>This database is now the working security database.</p>
</ol>

<A NAME="761"><h3>Importing a Security Template into a Security Database</h3></A>
<p>In <a href="ch13f.htm#739">Lesson 5</a> you learned to import a security template directly into a GPO. In 
this lesson you import a security template into the security database used in the Security Configuration and Analysis console.</p>

<p>You can merge several different templates into one composite template that then can be used for analysis or configuration of a system, by importing each template into a working database. The database will merge the various templates to create one composite template, resolving conflicts in order of import; the last one imported takes precedence when there is contention. Only if you chose to overwrite will they not be merged into a composite template (stored configuration). Once the templates are imported to the selected database, you can analyze or configure the system.</p>

<p><li> <b>To import a security template into a security database</b></li></p>

<ol>
<p><li> In the Security Configuration and Analysis console, right-click Security Configuration And Analysis.</li></p>

<p><li> Open or create a working security database.</li></p>

<p><li> Select Import Template.</li></p>

<p><li> Select a security template file, then click Open.</li></p>

<p><li> Repeat the previous step for each template you want to merge with previous templates into the database.</li></p>
</ol>

<p>
<div class="note"><blockquote><b>NOTE</b><hr>
If you want to replace the template rather than merge it into the stored template, click the Clear This Database Before Importing check box in the 
Import Template dialog box.</blockquote></div>
</p>

<A NAME="762"><h3>Analyzing System Security</h3></A>
<p>Security Configuration and Analysis performs security analysis by comparing the current state of system security against a security template that you have imported to a personal database. This template is the database configuration, and it is the template that contains your preferred or recommended security settings for that system.</p>

<p>Security Configuration and Analysis queries the system's security settings for all security areas in the database configuration. Values found are compared to the database configuration. If the current system settings match the database configuration settings, they are assumed to be correct. If not, the policies in question are displayed as potential problems that need investigation.</p>

<p><li> <b>To analyze system security</b></li></p>

<ol>
<p><li> In the Security Configuration and Analysis console, set a working database (if one is not currently set).</li></p>

<p><li> Right-click Security Configuration And Analysis, then click Analyze Computer Now.</li></p>

<p><li> In the Perform Analysis dialog box, verify the path for the log file location, then click OK.</li></p>

<p>The different security areas are displayed as they are analyzed. Once this is complete, you can check the log file or review the results.</p>
</ol>

<p>
<div class="note"><blockquote><b>NOTE</b><hr>
To check the log file, right-click Security Configuration And Analysis, then click View Log File.</blockquote></div>
</p>

<A NAME="763"><h3>Viewing Security Analysis Results</h3></A>
<p>The Security Configuration and Analysis console displays the analysis results organized by security area with visual flags to indicate problems. For each 
security policy in the security area, the current database and computer configuration settings are displayed.</p>

<p><li> <b>To view security analysis results</b></li></p>

<ol>
<p><li> In the Security Configuration and Analysis console, click Security Configuration And Analysis.</li></p>

<p><li> Double-click a security policies node (such as Account Policies), then click the security area (such as Password Policy) for which you want to view results.</li></p>

<p><li> In the details pane (see Figure 13.17), the Policy column indicates the policy name for the analysis results, the Database Setting column indicates the security value in your template, and the Computer Setting column indicates the current security level in the system.</li></p>

	<ul>
	<p><li> A red X indicates a difference from the database configuration.</li></p>
	
	<p><li> A green check mark indicates consistency with the database configuration.</li></p>
	
	<p><li> No icon indicates that the security policy was not included in your template and therefore not analyzed.</li></p>
	</ul>

<p>
<A HREF="javascript:fullSize('13wtk16x.htm')"> <img src="images/13wtk16.JPG" width=404 height=277 border=0 ALT = "Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 13.17</b> <i>Analysis results for Password Policy</i><!-- /caption -->
</p>

</ol>

<p><a href="chaaa.htm#1114">Answers</a></p>

<A NAME="764"><h3>Configuring System Security</h3></A>
<p>Security Configuration and Analysis offers the ability to resolve any discrepancies revealed by analysis, including the following:</p>

<ul>
<p><li> Accepting or changing some or all of the values flagged or not included in the configuration if you determine the local system security levels are valid due to the context (role) of that computer</li></p>

<p><li> Configuring the system to the original database configuration values if you determine the system is not in compliance with valid security levels</li></p>

<p><li> Importing a more appropriate template, for the role of that computer, into the database as the new database configuration and applying it to the system</li></p>
</ul>

<p>You can repeat the import process and load multiple templates. The database will merge the various templates to create one composite template, resolving conflicts in order of import; the last one imported takes precedence when there is contention. Once the templates are imported to the database, you can choose Configure System Now to apply the stored template (database configuration) to the system.</p>

<p>
<div class="warning"><blockquote><b>IMPORTANT</b><hr>
These changes are made to the stored template in the database, not to the security template file. The security template file will only be modified if you either return to Security Templates and edit that template or export the stored configuration to the same template file.</blockquote></div>
</p>

<p>Using the Security Configuration and Analysis console is not recommended when you are analyzing security for domain-based clients, as you would have to go to each client individually. In this case, you should return to the Security 
Templates console, modify the template, and reapply it to the appropriate GPO.</p>

<p><li> <b>To configure system security</b></li></p>

<ol>
<p><li> In the Security Configuration and Analysis console, set a working database (if one is not currently set).</li></p>

<p><li> Right-click Security Configuration And Analysis, then click Configure Computer Now.</li></p>

<p><li> In the Configure System dialog box, click OK to use the default analysis log or enter a filename and valid path.</li></p>

<p>The different security areas are displayed as they are configured. Once this is complete, you can check the log file or analyze system security and view the results.</p>
</ol>

<p><li> <b>To edit the database security configuration</b></li></p>

<ol>
<p><li> In the Security Configuration and Analysis console, click Security Configuration And Analysis.</li></p>

<p><li> Double-click a security policies node (such as Account Policies), then click a security area (such as Password Policy).</li></p>

<p><li> In the details pane, double-click the security attribute you want to edit.</li></p>

<p><li> Click the Define This Policy In The Database check box to allow editing.</li></p>

<p><li> Enter a new value for the security policy, then click OK.</li></p>

<p><li> Repeat the previous four steps for each security policy you want to edit.</li></p>
</ol>

<p><li> <b>To view security configuration results</b></li></p>

<ol>
<p><li> In the console from which you manage group policy, double-click the GPO.</li></p>

<p><li> In the console tree, click Security Settings.</li></p>

<p><li> Double-click a security policy node (such as Account Policies), then click a security area (such as Password Policy).</li></p>

<p><li> Double-click the security attribute you want to view (such as Minimum Password Length).</li></p>
</ol>

<A NAME="765"><h3>Exporting Security Templates</h3></A>
<p>The export feature provides the ability to save a security database configuration as a new template file that can be imported into other databases, used as is to analyze or configure a system, or even redefined with the Security Templates console.</p>

<p><li> <b>To export security database settings to a security template</b></li></p>

<ol>
<p><li> In the Security Configuration and Analysis console, right-click Security Configuration and Analysis.</li></p>

<p><li> If you have created a composite security template by importing multiple templates into one database and you want to save the composite template as a separate template file, click Export Template.</li></p>

<p><li> In the Export Template To dialog box, type a valid filename in the File Name box, type a path to where your template should be saved in the Save In list, and select the type of file you want to save in the Save As Type list, then click Save.</li></p>
</ol>

<p><img src="images/practic.JPG" width=92 height=74 border="0"></p>

<A NAME="766"><h2>Practice: Using Security Configuration and Analysis</h2></A>
<p>In this practice you access the Security Configuration and Analysis console, set a working security database, analyze system security, and then view the results.</p>

<A NAME="767"><h3>Exercise 1: Accessing the Security Configuration and Analysis Console</h3></A>
<p>In this exercise you access the Security Configuration and Analysis console, the main tool for using the Security Configuration and Analysis tool.</p>

<p><li> <b>To access the Security Configuration and Analysis console</b></li></p>

<ol>
<p><li> Click Run, type <b>mmc</b>, then click OK.</li></p>

<p><li> On the Console menu, click Add/Remove Snap-In, then click Add.</li></p>

<p><li> In the Add Standalone Snap-In dialog box, select Security Configuration And Analysis, then click Add.</li></p>

<p><li> Click Close, then click OK.</li></p>

<p><li> On the Console menu, click Save.</li></p>

<p><li> In the File Name box, type <b>security config &amp; analysis</b> to name this console and click Save.</li></p>

<p>The console appears on the Administrative Tools menu.</p>
</ol>

<A NAME="768"><h3>Exercise 2: Setting a Working Security Database</h3></A>
<p>In this exercise you determine the working security database to use.</p>

<p><li> <b>To set a working security database</b></li></p>

<ol>
<p><li> In the Security Configuration and Analysis console, right-click Security Configuration And Analysis.</li></p>

<p><li> Click Open Database.</li></p>

<p><li> In the Open Database dialog box, in the File Name box, type <b>new</b> for the new personal database file name, then click Open.</li></p>

<p><li> In the Import Template dialog box, select the securedc security template to load into the security database, then click Open.</li></p>

<p>The <i>new</i> database is now the working security database, and it contains the <i>securedc</i> security template.</p>
</ol>

<A NAME="769"><h3>Exercise 3: Analyzing System Security</h3></A>
<p>In this exercise you analyze system security, comparing the settings in the security template <i>securedc</i> with the security settings currently running on your system.</p>

<p><li> <b>To analyze system security</b></li></p>

<ol>
<p><li> Right-click Security Configuration And Analysis, then click Analyze Computer Now.</li></p>

<p><li> In the Perform Analysis dialog box, verify the path for the log file location, then click OK.</li></p>

<p>The different security areas are displayed as they are analyzed.</p>
</ol>

<A NAME="770"><h3>Exercise 4: Viewing Security Analysis Results</h3></A>
<p>In this exercise you view the security analysis results.</p>

<p><li> <b>To view security analysis results</b></li></p>

<ol>
<p><li> In the Security Configuration and Analysis console, click Security Configuration And Analysis.</li></p>

<p><li> Double-click the Account Policies node, then click the Password Policy security area.</li></p>

<p>In the details pane, what is indicated in the Policy column? In the Database Setting column? In the Computer Setting column?</p>

<p>In the Policy column, what does the red X indicate? What does the green check mark indicate?</p>
</ol>
<p><a href="chaaa.htm#1042">Answers</a></p>
<A NAME="771"><h2>Lesson Summary</h2></A>
<p>In this lesson you learned how the Security Configuration and Analysis console uses a database to perform configuration and analysis functions.</p>

<p>You learned that when you configure system security using the Security Configuration and Analysis console, changes are made to the stored template in the database, not to the security template file. The security template file will only be modified if you either return to Security Templates and edit that template or 
export the stored configuration to the same template file.</p>

<p>You also learned that Security Configuration and Analysis performs security analysis by comparing the current state of system security against a security 
template that you have imported to a personal database. This template is the 
database configuration, and it is the template that contains your preferred or 
recommended security settings for that system.</p>

<p>In the practice portion of this lesson you accessed the Security Configuration and Analysis console, set a working security database, analyzed system security, and then viewed the results.</p>

</BODY>
</HTML>







