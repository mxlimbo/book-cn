<html>
<head>
<title>çœ‹é›ªå­¦è‹‘</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<style type="text/css">
<!--
.p8 {  font-size: 8pt}
.p9 {  font-size: 9pt}
a:hover {  color: #00FF00}
a {  text-decoration: none}
.p12 {  font-size: 12pt; font-weight: bold; color: #FF3333}
-->
</style>
</head>

<body bgcolor="#FFFFFF">
<span class="p9"><font color=blue>æ ‡ é¢˜:</font>è½¬è½½ è½¯ä»¶è¯Šæ‰€è®ºå›:æä¼Ÿå¸–çš„ä¸€ç¯‡ã€Šå…³äºç¡¬ç›˜åºåˆ—å·çš„æ¢è®¨! ã€‹ã€‚ä»¥å‰æœ‰äººé—®è¿‡è¿™æ–¹é¢çš„é—®é¢˜ 
(4åƒå­—)<br>
<font color=blue>å‘ä¿¡äºº:</font>çœ‹é›ª<br>
<font color=blue>æ—¶ é—´:</font>2000-6-27 19:31:08 <br>
<font color=blue>è¯¦ç»†ä¿¡æ¯:</font><br>
</span>
<blockquote><span class="p9"> From: "Wang Xianbing" &lt;Wang.Xianbing@p0.f25.n662.z6.fidonet.org> 
  <br>
  Subject: å…³äºç¡¬ç›˜åºåˆ—å·çš„æ¢è®¨! <br>
  Newsgroups: programr.china <br>
  <br>
  å¤§å®¶å¥½: <br>
  <br>
  è¿‘æ¥åœ¨CFIDOå’ŒE-mailä¸­ä¸€ç›´æœ‰æœ‹å‹è¯¢é—®å…³äºå¦‚ä½•èƒ½åœ¨Windowsä¸‹ç”¨VBæ¥ <br>
  è·å–ç¡¬ç›˜åºåˆ—å·çš„é—®é¢˜, å› ä¸ºåœ¨VBçš„for Windowsä¸­ç‰ˆæœ¬ä¸­æ²¡æœ‰äº†ç«¯å£å­˜å– <br>
  å‡½æ•°, æ‰€ä»¥å°±å†™äº†ä¸€ä¸ªHDIDE16.DLLçš„ä¸œä¸œ, æ”¾åœ¨ä¸»é¡µä¸Šå…è´¹å‘æ”¾, å¹¶ä¸” <br>
  HDIDE32ç‰ˆæœ¬çš„å³å°†å‡ºå°, å­°çŸ¥å´é­åˆ° XXX è‚†æ„è·µè¸, ç†ç”±å¦‚ä¸‹: <br>
  ---- CUT ---- <br>
  WX> å¥½ä¹…ä¸€æ¥, ä¸€ç›´æœªèƒ½å‘ç°æœ‰ç”¨VBæ¥è·å–ç¡¬ç›˜åºåˆ—å·çš„ä¸œä¸œ, <br>
  WX> ä»¥è‡´äºVBçš„ç¨‹åº ä¸èƒ½å¾—åˆ°å¾ˆå¥½çš„ä¿æŠ¤, æ‰€ä»¥æ˜¨å¤©åšäº†ä¸ªHDIDE16.DLL, <br>
  RT> å¤ªçƒ¦äº†å§! <br>
  RT> ä¸æ˜¯æˆ‘æƒ³ç»™ä½ æ³¼å†·æ°´,ä½ çš„WINAPIçŸ¥è¯†æœ‰ç‚¹æ¬ ä¹! <br>
  RT> å–è®¡ç®—æœºç¡¬ç›˜åºåˆ—å·åŠå·åçš„å‡½æ•°æ˜¯: <br>
  RT> è¿™ä¸ªè€æ—©æˆ‘å°±ç”¨äº†. <br>
  RT> åŠ å¯†æ–¹æ³•å¾ˆå¤šç§,ä¹Ÿä¸ä¸€å®šç”¨ç¡¬ç›˜åºåˆ—å·. <br>
  RT> å¯æƒœä¸èƒ½è¯´. :))) <br>
  --- CUT --- <br>
  <br>
  å¯¹æ­¤, æˆ‘è¡¨ç¤ºå¼ºçƒˆçš„æŠ—è®®, å¹¶ä¸”ä¸ºé¿å…ç”±æ­¤å¼•èµ·çš„è¯¯å¯¼, ç‰¹å°†åŸºæœ¬çš„å¸¸è¯†åŒº <br>
  åˆ†å¦‚ä¸‹, é™„æœ‰å®Œæ•´çš„å¯¹æ¯”æºç¨‹åº: <br>
  <br>
  å…³äºç›˜åºåˆ—å·æœ‰ä¸¤ç§: <br>
  <br>
  ç¡¬ç›˜åºåˆ—å·: è‹±æ–‡å Hard Disk Serial Number, è¯¥å·æ˜¯å‡ºå‚æ—¶ç”Ÿäº§å‚å®¶ä¸º <br>
  åŒºåˆ«äº§å“è€Œè®¾ç½®çš„, æ˜¯å”¯ä¸€çš„, æ˜¯åªè¯»çš„, åˆ©ç”¨ç¡¬ç›˜åºåˆ—å·çš„ <br>
  åŠ å¯†å¾€å¾€æ˜¯åˆ©ç”¨å…¶å”¯ä¸€å’Œåªè¯»çš„ç‰¹æ€§, å¤§å¤šæ˜¯é’ˆå¯¹æœ‰åºåˆ—å·çš„ <br>
  IDE HDDè€Œè¨€, å¯¹äºæ²¡æœ‰åºåˆ—å·æˆ–SCSI HDDç¡¬ç›˜åˆ™æ— èƒ½ä¸ºåŠ›, <br>
  è¿™ä¹Ÿæ˜¯åˆ©ç”¨å®ƒè¿›è¡ŒåŠ å¯†çš„å±€é™æ€§. <br>
  å·çš„åºåˆ—å·: è‹±æ–‡å Volume Serial Number, è¯¥å·æ—¢å¯æŒ‡è½¯ç£ç›˜è¦å¾—, å¦‚: <br>
  A:ç›˜å’ŒB:ç›˜çš„, åˆå¯ä»¥æŒ‡ç¡¬ç›˜çš„é€»è¾‘ç›˜, å¦‚: C:, D:...çš„, <br>
  æ˜¯é«˜çº§æ ¼å¼åŒ–æ—¶éšæœºäº§ç”Ÿçš„, æ˜¯å¯ä»¥ä¿®æ”¹çš„, æ‰€ä»¥åˆ©ç”¨å…¶è¿›è¡Œ <br>
  åŠ å¯†, å…¶å”¯ä¸€æ€§è¿˜å¯, è€Œå…¶å¯ä¿®æ”¹æ€§å¯¹äºå®‰å…¨è€Œè¨€å°±å¤§æ‰“æŠ˜æ‰£ <br>
  äº†. <br>
  <br>
  é‚£ä¹ˆå¦‚ä½•è·å¾—å®ƒä»¬å‘¢? è¿™è¦è§†ä¸åŒçš„å¹³å°è€Œè®º, æ ¸å¿ƒå®ç°æ–¹æ³•å¦‚ä¸‹: <br>
  <br>
  DOSå¹³å° Windows 3.X Windows 9.X <br>
  <br>
  ç¡¬ç›˜åºåˆ—å·: ç«¯å£I/O ç«¯å£I/O Ring0çº§I/O <br>
  <br>
  å·çš„åºåˆ—å·: ä¸­æ–­è°ƒç”¨ WINAPI WINAPI <br>
  <br>
  <br>
  ä¸ºæ–¹ä¾¿å¤§å®¶éªŒè¯, ç‰¹è´´å¦‚ä¸‹ä¸¤ç¨‹åºç”¨TCæˆ–BCç¼–è¯‘åè¿è¡Œåœ¨DOSä¸‹å³å¯: <br>
  <br>
  /* ç¨‹åº1: è·å¾—IDEç¡¬ç›˜Cçš„åºåˆ—å· */ <br>
  #include &lt;stdio.h> <br>
  #include &lt;stdlib.h> <br>
  #include &lt;dos.h> <br>
  #include &lt;conio.h> <br>
  #include &lt;string.h> <br>
  <br>
  char *getascii (unsigned int in_data [], int off_start, int off_end); <br>
  <br>
  void main (void) <br>
  { <br>
  unsigned int dd [256]; /* DiskData */ <br>
  unsigned int dd_off; /* DiskData offset */ <br>
  <br>
  while (inp (0x1F7) != 0x50) /* Wait for controller not busy */ <br>
  ; <br>
  <br>
  outp (0x1F6, 0xA0); /* Get first/second drive */ <br>
  <br>
  outp (0x1F7, 0xEC); /* Get drive info data */ <br>
  <br>
  while (inp (0x1F7) != 0x58) /* Wait for data ready */ <br>
  ; <br>
  <br>
  for (dd_off = 0; dd_off != 256; dd_off++) /* Read "sector" */ <br>
  dd [dd_off] = inpw (0x1F0); <br>
  <br>
  printf ("The Serial Number Hard Disk [C] is %s", getascii (dd, 10, 19)); <br>
  <br>
  } <br>
  <br>
  char *getascii (unsigned int in_data [], int off_start, int off_end) <br>
  { <br>
  static char ret_val [255]; <br>
  int loop, loop1; <br>
  <br>
  for (loop = off_start, loop1 = 0; loop &lt;= off_end; loop++) <br>
  { <br>
  ret_val [loop1++] = (char) (in_data [loop] / 256); /* Get High byte */ <br>
  ret_val [loop1++] = (char) (in_data [loop] % 256); /* Get Low byte */ <br>
  } <br>
  ret_val [loop1] = ""; /* Make sure it ends in a NULL character */ <br>
  return (ret_val); <br>
  } <br>
  <br>
  /* ç¨‹åº2: è·å¾—é€»è¾‘ç›˜Cçš„åºåˆ—å· */ <br>
  #include &lt;stdio.h> <br>
  #include &lt;stdlib.h> <br>
  #include &lt;ctype.h> <br>
  #include &lt;dos.h> <br>
  <br>
  void main(void) <br>
  { <br>
  char serial_no[10]; <br>
  union REGS r; <br>
  struct SREGS s; <br>
  unsigned sno1, sno2; <br>
  <br>
  r.x.ax = 0x6900; <br>
  r.h.bl = 3; /* A:=1, B:=2, C:=3 etc. */ <br>
  segread(&amp;s); <br>
  intdosx(&amp;r, &amp;r, &amp;s); <br>
  if (r.x.cflag) <br>
  *serial_no = ""; <br>
  else <br>
  { <br>
  sno2 = *((unsigned far *)MK_FP(s.ds, r.x.dx+2)); <br>
  sno1 = *((unsigned far *)MK_FP(s.ds, r.x.dx+4)); <br>
  sprintf(serial_no, "%04X-%04X <br>
  ", sno1, sno2); <br>
  } <br>
  printf("The Serial Number of Login Disk [C] is %s", serial_no ); <br>
  <br>
  } <br>
  <br>
  åœ¨Windows 3.Xä¸­: <br>
  <br>
  ç¡¬ç›˜åºåˆ—å·: ä½¿ç”¨ç«¯å£I/Oå³å¯, å°†ä»¥ä¸Šç¨‹åºç¨åŠ ä¿®æ”¹å¹¶ç”¨VCæˆ–BCåšæˆDLL <br>
  å³å¯åœ¨VBä¸­è°ƒç”¨, æœ¬äººå°±æ˜¯è¿™æ ·åšçš„. <br>
  å·çš„åºåˆ—å·: ç”¨é‚£ä½æœ‹å‹æ‰€è¯´çš„WINAPIå‡½æ•°GetVolumeInformationå³å¯. <br>
  <br>
  åœ¨Windows 9.Xä¸­: <br>
  <br>
  ç¡¬ç›˜åºåˆ—å·: å¿…é¡»ä½¿ç”¨VxDæŠ€æœ¯, å³ä¾¿ä¸å†™VxDæ–‡ä»¶, è¦è·å¾—Ring0çº§çš„è®¿é—®æƒ <br>
  æ‰èƒ½è·å¾—, å¦åˆ™ç¨‹åºå·¥ä½œåœ¨Ring3çº§ä¼šæ­»åœ¨ä»¥ä¸‹è¯­å¥å¤„: <br>
  while (inp (0x1F7) != 0x50) /* Wait for controller not busy */ <br>
  è¯¦ç»†æŠ€æœ¯è¯·è®¿é—®http://dingkai.sdxf.com <br>
  <br>
  å·çš„åºåˆ—å·: ç”¨é‚£ä½æœ‹å‹æ‰€è¯´çš„WINAPIå‡½æ•°GetVolumeInformationå³å¯. <br>
  <br>
  <br>
  æˆ‘æ¬¢è¿æ¯ä¸€ä½çƒ­æƒ…, è¯šæŒšçš„æœ‹å‹! æ‹’ç»ç‹‚å¦„. <br>
  <br>
  è®©æˆ‘ä»¬æºèµ·æ‰‹æ¥, ä»å°åšèµ·, å…±é€šæ¨åŠ¨æ°‘æ—è½¯ä»¶å‘å±•! <br>
  <br>
  <br>
  ~~~ èµå±¯  å…‰è¾‰è½¯ä»¶å·¥ä½œå®¤ - ç‹çŒ®å†° å±¯å±¯å±¯å±¯å±¯å±¯å±¯å±¯å±¯å±¯[][âºŒ[X]? ? ===> æŒ¯å…´æ°‘æ—è½¯ä»¶ æŠ—å‡»åŒ—çº¦æš´è¡Œ &lt;=== ?~~~ 
  éŸ§å±¯ URL: http://glowsoft.126.com E-mail: wxbing@163.net å±¯å›¾ </span></blockquote>
<hr>
</body>
</html>
