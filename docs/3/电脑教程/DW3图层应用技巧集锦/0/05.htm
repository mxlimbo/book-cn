<html>
<head>
<title>DW3 图 层 应 用 技 巧 集 锦 （五）</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<link rel="stylesheet" href="all.css">
<script language="JavaScript">
<!--
function MM_findObj(n, d) { //v3.0
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document); return x;
}

function MM_dragLayer(objName,x,hL,hT,hW,hH,toFront,dropBack,cU,cD,cL,cR,targL,targT,tol,dropJS,et,dragJS) { //v3.0
  //Copyright 1998 Macromedia, Inc. All rights reserved.
  var i,j,aLayer,retVal,curDrag=null,NS=(navigator.appName=='Netscape'), curLeft, curTop;
  if (!document.all && !document.layers) return false;
  retVal = true; if(!NS && event) event.returnValue = true;
  if (MM_dragLayer.arguments.length > 1) {
    curDrag = MM_findObj(objName); if (!curDrag) return false;
    if (!document.allLayers) { document.allLayers = new Array();
      with (document) if (NS) { for (i=0; i<layers.length; i++) allLayers[i]=layers[i];
        for (i=0; i<allLayers.length; i++) if (allLayers[i].document && allLayers[i].document.layers)
          with (allLayers[i].document) for (j=0; j<layers.length; j++) allLayers[allLayers.length]=layers[j];
      } else for (i=0;i<all.length;i++) if (all[i].style&&all[i].style.position) allLayers[allLayers.length]=all[i];}
    curDrag.MM_dragOk=true; curDrag.MM_targL=targL; curDrag.MM_targT=targT;
    curDrag.MM_tol=Math.pow(tol,2); curDrag.MM_hLeft=hL; curDrag.MM_hTop=hT;
    curDrag.MM_hWidth=hW; curDrag.MM_hHeight=hH; curDrag.MM_toFront=toFront;
    curDrag.MM_dropBack=dropBack; curDrag.MM_dropJS=dropJS;
    curDrag.MM_everyTime=et; curDrag.MM_dragJS=dragJS;
    curDrag.MM_oldZ = (NS)?curDrag.zIndex:curDrag.style.zIndex;
    curLeft= (NS)?curDrag.left:curDrag.style.pixelLeft; curDrag.MM_startL = curLeft;
    curTop = (NS)?curDrag.top:curDrag.style.pixelTop; curDrag.MM_startT = curTop;
    curDrag.MM_bL=(cL<0)?null:curLeft-cL; curDrag.MM_bT=(cU<0)?null:curTop -cU;
    curDrag.MM_bR=(cR<0)?null:curLeft+cR; curDrag.MM_bB=(cD<0)?null:curTop +cD;
    curDrag.MM_LEFTRIGHT=0; curDrag.MM_UPDOWN=0; curDrag.MM_SNAPPED=false; //use in your JS!
    document.onmousedown = MM_dragLayer; document.onmouseup = MM_dragLayer;
    if (NS) document.captureEvents(Event.MOUSEDOWN|Event.MOUSEUP);
  } else {
    var theEvent = ((NS)?objName.type:event.type);
    if (theEvent == 'mousedown') {
      var mouseX = (NS)?objName.pageX : event.clientX + document.body.scrollLeft;
      var mouseY = (NS)?objName.pageY : event.clientY + document.body.scrollTop;
      var maxDragZ=null; document.MM_maxZ = 0;
      for (i=0; i<document.allLayers.length; i++) { aLayer = document.allLayers[i];
        var aLayerZ = (NS)?aLayer.zIndex:aLayer.style.zIndex;
        if (aLayerZ > document.MM_maxZ) document.MM_maxZ = aLayerZ;
        var isVisible = (((NS)?aLayer.visibility:aLayer.style.visibility).indexOf('hid') == -1);
        if (aLayer.MM_dragOk != null && isVisible) with (aLayer) {
          var parentL=0; var parentT=0;
          if (!NS) { parentLayer = aLayer.parentElement;
            while (parentLayer != null && parentLayer.style.position) {
              parentL += parentLayer.offsetLeft; parentT += parentLayer.offsetTop;
              parentLayer = parentLayer.parentElement; } }
          var tmpX=mouseX-(((NS)?pageX:style.pixelLeft+parentL)+MM_hLeft);
          var tmpY=mouseY-(((NS)?pageY:style.pixelTop +parentT)+MM_hTop);
          var tmpW = MM_hWidth;  if (tmpW <= 0) tmpW += ((NS)?clip.width :offsetWidth);
          var tmpH = MM_hHeight; if (tmpH <= 0) tmpH += ((NS)?clip.height:offsetHeight);
          if ((0 <= tmpX && tmpX < tmpW && 0 <= tmpY && tmpY < tmpH) && (maxDragZ == null
              || maxDragZ <= aLayerZ)) { curDrag = aLayer; maxDragZ = aLayerZ; } } }
      if (curDrag) {
        document.onmousemove = MM_dragLayer; if (NS) document.captureEvents(Event.MOUSEMOVE);
        curLeft = (NS)?curDrag.left:curDrag.style.pixelLeft;
        curTop = (NS)?curDrag.top:curDrag.style.pixelTop;
        MM_oldX = mouseX - curLeft; MM_oldY = mouseY - curTop;
        document.MM_curDrag = curDrag;  curDrag.MM_SNAPPED=false;
        if(curDrag.MM_toFront) {
          eval('curDrag.'+((NS)?'':'style.')+'zIndex=document.MM_maxZ+1');
          if (!curDrag.MM_dropBack) document.MM_maxZ++; }
        retVal = false; if(!NS) event.returnValue = false;
    } } else if (theEvent == 'mousemove') {
      if (document.MM_curDrag) with (document.MM_curDrag) {
        var mouseX = (NS)?objName.pageX : event.clientX + document.body.scrollLeft;
        var mouseY = (NS)?objName.pageY : event.clientY + document.body.scrollTop;
        newLeft = mouseX-MM_oldX; newTop  = mouseY-MM_oldY;
        if (MM_bL!=null) newLeft = Math.max(newLeft,MM_bL);
        if (MM_bR!=null) newLeft = Math.min(newLeft,MM_bR);
        if (MM_bT!=null) newTop  = Math.max(newTop ,MM_bT);
        if (MM_bB!=null) newTop  = Math.min(newTop ,MM_bB);
        MM_LEFTRIGHT = newLeft-MM_startL; MM_UPDOWN = newTop-MM_startT;
        if (NS) {left = newLeft; top = newTop;}
        else {style.pixelLeft = newLeft; style.pixelTop = newTop;}
        if (MM_dragJS) eval(MM_dragJS);
        retVal = false; if(!NS) event.returnValue = false;
    } } else if (theEvent == 'mouseup') {
      document.onmousemove = null;
      if (NS) document.releaseEvents(Event.MOUSEMOVE);
      if (NS) document.captureEvents(Event.MOUSEDOWN); //for mac NS
      if (document.MM_curDrag) with (document.MM_curDrag) {
        if (typeof MM_targL =='number' && typeof MM_targT == 'number' &&
            (Math.pow(MM_targL-((NS)?left:style.pixelLeft),2)+
             Math.pow(MM_targT-((NS)?top:style.pixelTop),2))<=MM_tol) {
          if (NS) {left = MM_targL; top = MM_targT;}
          else {style.pixelLeft = MM_targL; style.pixelTop = MM_targT;}
          MM_SNAPPED = true; MM_LEFTRIGHT = MM_startL-MM_targL; MM_UPDOWN = MM_startT-MM_targT; }
        if (MM_everyTime || MM_SNAPPED) eval(MM_dropJS);
        if(MM_dropBack) {if (NS) zIndex = MM_oldZ; else style.zIndex = MM_oldZ;}
        retVal = false; if(!NS) event.returnValue = false; }
      document.MM_curDrag = null;
    }
    if (NS) document.routeEvent(objName);
  } return retVal;
}
//-->
</script>
</head>

<body bgcolor="#FFFFFF" background="bar.gif" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<table width="776" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td valign="top" width="73"><img src="up1.gif" width="73" height="45"><a href="content.htm"><img src="top.gif" width="73" height="18" border="0"></a><a href="04.htm"><img src="last.gif" width="73" height="28" border="0"></a><a href="06.htm"><img src="next.gif" width="73" height="22" border="0"></a></td>
    <td><img src="up2.gif" width="495" height="113"></td>
  </tr>
</table>
<table width="776" border="0" cellspacing="0" cellpadding="0" background="bg.gif">
  <tr valign="top" align="center"> 
    <td class="h"> 
      <b><font class="h">DW3 图 层 应 用 技 巧 集 锦 （五）</font></b>
      <table width="550" border="0" align="center">
        <tr> 
          <td height="506">&nbsp;&nbsp;&nbsp;&nbsp; 
            <p><font color="#8000ff"><b>八.图层在计数器舞弊中的应用</b></font><br>
              &nbsp;&nbsp;&nbsp;&nbsp;<br>
              　　计数器的多少是站点好坏的一个标志之一，有不少的人想方设法把主页访问量搞上去，结果所有努力付诸东流，于是就用作弊的方法来提高访问量，我个人坚决反对计数器作弊，为什么我还要讲，一些建站之初的人即使他的站点很好，由于没有太多的宣传他的访问量会很低，在这个时候我觉得作弊还可以理解，等到访问量过千后再撤下来，这个时候用一用无可厚非(个人观点仅供参考）。舞弊的方法有很多种，常用的是主页自动刷新，这样做很不友好。还有一个方法就是，在每个页面光明正大的放上你的计数器，这样是不是有点不雅？对！聪明何不用隐含图层把计数器隐藏起来，它仍然计数但网页浏览者看不到，这个方法还可以吧？你不会不知怎样做隐含图层吧，前面的例子有讲过。太极链不知大家知不知道，你可以在你的每个页面放上太极链（当然要隐含起来），你交换的太极链越多，你网站被显示的机会也就越多，不过这样会牺牲你网页的浏览速度，有兴趣的朋友不防试一试。<br>
              <font color="#8000ff"><b><br>
              九.拖动图层的应用 <br>
              </b></font>&nbsp;&nbsp;&nbsp;&nbsp;<br>
              　　在DW3中建一个可以拖动的图层非常方便。先来看看这个可以拖动的图层效果（上面），拖动图层必须要事件激活，比如onClick，onMouseOver等等。下面就是实现的过程：<br>
              <br>
              1.先建一个图层放入你想放的东东，本例中插入一张图片。<br>
              <br>
              2.选定图层后按F8调出Behaviors浮动面板，点击浮动面板的加号选Drag Layer这个选项，立刻出来一个Drag Layer 
              编辑窗口按确定。<br>
              <br>
              3.在Behaviors浮动面板中，你会发现默认Events（事件）是onClick，把它改成onMouseOver事件，点击Actions下的一个小三角形选onMouseOver即可。<br>
              &nbsp;&nbsp;&nbsp;&nbsp;<br>
              　　我们的这个例子可以把图层拖到页面的任意地方，当然你也可以把图层限制一个范围，只许它在这个范围中移动。这就要把刚才的Dray 
              Layer编辑窗熟悉，具体操作很简单。我下面把Dray Layer编辑窗口解释一下:<br>
              <br>
              <img src="images/pic-26.gif" width="500" height="187"><br>
              &nbsp;&nbsp;&nbsp;&nbsp;<br>
              这就是主窗口，分两大部分，Basic（基本）和Advanced（高级）。<br>
              &nbsp;&nbsp;&nbsp;&nbsp;<br>
              　　Lagyer，当你这个页面中有多个图层时，它有下拉菜单个给你选择你要编辑的图层。 <br>
              &nbsp;&nbsp;&nbsp;&nbsp;<br>
              　　Movenment，选择你的拖动方式，它有两项个你选者，其一，Unconstrained（不受限制），选它是你拖动图层是不受任何限制，系统默认时此项。它还有一个选项是，Constraind（受限制），它就可以让你控制图层的拖动范围，选者它后编辑菜单有个小小的变化，如小图：<img src="images/pic-27.gif" width="442" height="27">这上下左右是范围，单位是像素，在你填的时候只需填数字，不带单位。<br>
              <br>
              &nbsp;&nbsp;&nbsp;&nbsp;Drop Target，设置没拖图层的目标位置，你可以通过Get Current 
              Position来获取当前图层的坐标位置。<br>
              <br>
              &nbsp;&nbsp;&nbsp;&nbsp;Snap if Within，在拖动图层中允许的最大误差。（单位是像素）<br>
              <br>
              <img src="images/pic-28.gif" width="500" height="186"> </p>
            <p>&nbsp;&nbsp;&nbsp;&nbsp;Drag Handle，他的中文翻译是不是，手柄？我的英语很差。它有两个选择项，Entire 
              Layer，整个层对象，就是说你点击图层的任意位子都可以拖动图层。Area Within Layer，指定事件响应范围。<br>
              &nbsp;&nbsp;&nbsp;&nbsp;<br>
              　　while dragging，这是有多个图层时可选者此项。<br>
              &nbsp;&nbsp;&nbsp;&nbsp;<br>
              　　菜单熟悉了限制图层拖动的范围这个特效会做了吧？如果不会，<a href="mailto:kupage@elong.com">写信</a>给我。<br>
              <br>
              　　这次讲的例子没什么特别，下次将介绍怎样在DW中实现幻灯片效果。<a href="06.htm">Go&gt;&gt; </a></p>
            <div id="Layer1" style="position:absolute; left:590px; top:72px; width:74px; height:25px; z-index:3" onMouseMove="MM_dragLayer('Layer1','',0,0,0,0,true,false,-1,-1,-1,-1,false,false,0,'',false,'')"> 
              <table width="100%" border="0" cellspacing="0" cellpadding="0">
                <tr> 
                  <td><img src="images/pic-24.gif" width="100" height="100"></td>
                </tr>
                <tr> 
                  <td> 
                    <div align="center"><b><font color="#FF9999">看我多帅！</font></b></div>
                  </td>
                </tr>
              </table>
            </div>
          </td>
        </tr>
      </table>
      <table width="540" cellspacing="0" cellpadding="0" border="0">
        <tr> 
          <td> 
            <table border=0 align=center>
              <tr> 
                <td width=101 height="21"> 
                  <div align="center"><a href='04.htm'>上一页 </a></div>
                </td>
                <td width=99 height="21"> 
                  <div align="center"><a href="content.htm">目　录</a></div>
                </td>
                <td width=100 height="21"> 
                  <div align="center"><a href='06.htm'>下一页 </a></div>
                </td>
              </tr>
            </table>
            <p align=center>□ 资料来源：<a href="http://www.163.com">www.163.com</a><br>
            
            <p align=center>本书由“<a href="http://www.eshunet.com/">E书时空</a>”免费制作； 
              <br>
              想要更多的免费电子图书，请光临 <br>
              <a href="http://www.eshunet.com/">http://www.eshunet.com/</a> 
            <p align=center>&nbsp; 
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
</body>
</html>
