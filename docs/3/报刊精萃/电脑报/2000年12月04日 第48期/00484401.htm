 
<HTML>
<!-- #BeginTemplate "/模板/internet.dwt" --> 
<HEAD>
<META HTTP-EQUIV='Content-Type' CONTENT='text/html; charset=gb2312'>
<META NAME='author' CONTENT='William Wan'>
<LINK REL='STYLESHEET' HREF='epcw.css' TYPE='text/css'>
<!-- #BeginEditable "doctitle" --> 
<TITLE>电脑报电子版 -- Wingate代理服务器特殊设置两例</TITLE>
<!-- #EndEditable --> 
<style type="text/css">
<!--
.centertitle {  font-weight: bold; text-align: center; line-height: 35px; font-size: 9pt; color: #000000}
.lefttitle {  line-height: 35px; font-weight: bold; font-size: 9pt; color: #000000}
-->
</style>
</HEAD>
<BODY BGCOLOR='white'>
<TABLE BORDER='0' WIDTH='615' CELLSPACING='0' CELLPADDING='0' HEIGHT='6' ALIGN='Center' BGCOLOR='#CCCC99'>
  <TR VALIGN='top'> 
    <TD WIDTH='100%'>&nbsp;</TD>
  </TR>
</TABLE>
<TABLE WIDTH='615' BORDER='0' CELLSPACING='0' CELLPADDING='0' ALIGN='Center'>
  <TR> 
    <TD WIDTH='145' BGCOLOR='#CCCC99' 	ALIGN='Center' VALIGN='top'><a href='http://www.yesky.com'><IMG SRC='images/logo.gif' WIDTH='140' HEIGHT='60' ALT='天极网' BORDER='0'></a></TD>
    <TD WIDTH='470' BGCOLOR='#CCCC99' HEIGHT='50'> 
      <a href="http://chat.yesky.com/" target="_blank"><img src="images/0823-3.gif" width="468" height="60" border="0" alt="天极飞翔聊天室"></a>
    </TD>
  </TR>
</TABLE>
<TABLE BORDER='0' WIDTH='615' CELLSPACING='0' CELLPADDING='0' HEIGHT='2' ALIGN='Center' BGCOLOR='#CCCC99'>
  <TR> 
    <TD WIDTH='100%'><IMG SRC='../../images/pixel.gif' WIDTH='1' HEIGHT='1'></TD>
  </TR>
</TABLE>
<TABLE BORDER='0' WIDTH='615' CELLSPACING='0' CELLPADDING='0' HEIGHT='3' ALIGN='Center' BGCOLOR='#CCCC99'>
  <TR VALIGN='bottom'> 
    <TD WIDTH='100%'><IMG SRC='../../images/dot.gif' WIDTH='615' HEIGHT='1'></TD>
  </TR>
</TABLE>
<TABLE WIDTH='615' BORDER='0' CELLSPACING='0' CELLPADDING='2' ALIGN='Center'>
  <TR> 
    <TD WIDTH='615' COLSPAN='2'><font color="#FF6666">当前位置：</font><A HREF='http://www.cpcw.com'>《电脑报》电子版</A> 
      &gt; <A HREF='http://www.cpcw.com/all.html'>2000年</A> &gt; <a href="index.html">48期<!-- #BeginEditable "%C6%DA" --><!-- #EndEditable --></a> 
      &gt; <!-- #BeginEditable "%C0%B8%C4%BF" --><a href="internet.html">大众网络</a><!-- #EndEditable --> 
      &gt; <!-- #BeginEditable "%B1%EA%CC%E2" -->Wingate代理服务器特殊设置两例<!-- #EndEditable --></TD>
  </TR>
</TABLE>
<TABLE WIDTH='615' BORDER='0' CELLSPACING='0' CELLPADDING='0' ALIGN='center'>
  <TR ALIGN='center' VALIGN='bottom'> 
    <TD HEIGHT='6'><IMG SRC='../../images/dot.gif' WIDTH='615' HEIGHT='1'></TD>
  </TR>
</TABLE>
<BR>
<TABLE WIDTH='615' BORDER='0' CELLSPACING='0' CELLPADDING='2' BGCOLOR='#FFCC66' ALIGN='center'>
  <TR> 
    <TD><SPAN CLASS='title'>《 <!-- #BeginEditable "%CE%C4%D5%C2%CD%B7" -->Wingate代理服务器特殊设置两例<!-- #EndEditable --> 
      》</SPAN></TD>
  </TR>
</TABLE>
<BR>
<TABLE WIDTH='615' BORDER='0' CELLSPACING='0' CELLPADDING='2' ALIGN='center'>
  <TR> 
    <TD> <!-- #BeginEditable "%C4%DA%C8%DD" -->{　　一、不同用户的权限设置<br>
      　　在企业局域网中多通过代理服务器实现Internet接入，Wingate为我们提供了强大的管理功能，通过给用户分组，为他们分配不同的使用权限、规定他们哪些时间可以上网、哪些时间不能上网、可以使用哪些服务、不能使用哪些服务等等，并且实现定时开放和关闭。<br>
      　　要为用户分配不同的权限，必须要把他们添加为正式的用户。Wingate中的用户分为三种：<br>
      　　第一种是Administrator，即管理员，他拥有管理的权力，可以改变别的用户的权限，但必须以该身份启动GateKeeper才能更改Wingate设置；<br>
      　　第二种是Guest用户，所有用户在未被添加为正式用户时都使用Guest作为自己的用户名，由Wingate按默认设置进行管理并提供代理服务。<br>
      　　第三种是由管理员添加的正式用户，他们有自己独立的账号和唯一的用户名。<br>
      　　下面看看如何通过分组来为不同的用户分配权限。我们引入这样一个例子：user1组里的用户限时使用WWW浏览和Socks服务，限制时间为星期一至星期五的上午8:00～11:00、下午2:00～5:00，实行定时开放和关闭，但是收发邮件等其他服务不受限制。user2组的用户不作任何限制。<br>
      　　1.为用户分组<br>
      　　首先，要为user1和user2组添加正式用户。点一下GateKeeper的“Users”选项卡，并在左侧窗口内空白处单击鼠标右键，从弹出的菜单中选择“New 
      User”，在“Properties for new user”窗口中的“Username”栏中输入为这个用户取的名字。建议用数字作用户名，该数字对应其IP最后一组，如对应202.96.112.36用户的Username为36，然后点“OK”按钮，这样，在“Users”下就出现“36”这个用户了，用同样的方法再把所有需要设置权限的用户都添加为正式用户(图1)。现在，“Users”项下己经添加了我们需要的用户，另外，还有两个默认用户是“Administrator”和“Guest”。<br>
      　　然后还要建立名为“user1”和“user2”的用户组。在窗口内空白处单击鼠标右键，从弹出的菜单中选择“New Group”，在“New Group”窗口中的“Group 
      Name”栏中输入组的名字“user1”，在窗口的下面有“Members”和“Non－members”两个列表框，“Members”中列出的用户为这个组的成员，而“Non－members”中列出的用户则不是这个组的成员。在“Non－members”中双击除“Guest”和不需要限制使用服务以外的所有用户，把他们都设为“user1”的成员。最后点“OK”按钮。用同样的方法把其他除“Guest”和“user1”组外的所有用户添加到“user2”组内。<br>
      　　现在“user1”和“user2”组中就包含了除“Guest”以外的所有用户了。我们还需要把这些用户名和他们的计算机的IP地址关联起来，以便通过这些用户名来管理不同的计算机。双击“Assumed 
      Users”项，在弹出的窗口中单击“By IP Address”选项卡，再点一下“Add”按钮，在Location窗口上面的栏中输入计算机的IP地址，然后从下面的下拉列表中选择和这台计算机对应的用户名，这下明白用IP作用户名的好处了吧，不容易出错而且便于检查，点“OK”后，这个用户名就和他的IP对应起来了。再用同样的方法把“user1”组其他用户和“user2”组所有用户都进行关联，最后点“OK”按钮即可。<br>
      　　2.设置用户权限<br>
      　　点一下GateKeeper的“Services”选项卡，首先设置WWW浏览时间限制。<br>
      　　(1)双击“WWW Proxy server”项，在弹出的对话框中单击“Policies”（权限）选项卡， 窗口中间有一个“Is granted”列表框，用来显示不同用户或组对应的权限。因为还没有任何权限设置，所以当前为空。<br>
      　　(2)单击“Add”按钮，打开“Properties for new recipient”窗口，在“Recipient”选项卡中设置分配权限的用户或组。单击“Specify 
      user or group”，选中下面列表框中的“user1”，可以看到“user1”出现在上面的框中(图2)。<br>
      　　(3)接下来为“user1”设置限制使用时间。单击“Time”选项卡，“Included times”列表框是设置允许使用时间段，系统到时间会自动开启服务；“Excluded 
      time”列表框是设置拒绝使用时间段，到规定时间会自动关闭服务。两者并无从属关系，相对独立，并且时间段设置允许交叉，只是后续的时间设置有效，不过尽量不要交叉，以免造成时间管理上的混乱。<br>
      　　(4)单击“Specify times when this recipient has right”，设置拒绝时间段。点击“Excluded 
      times”列表框的“Add”按钮，在弹出的“Time Slice”窗口中设置时间为星期一至星期五，上午8:00：00～11:00：00之间，然后点“OK”按钮，这样第一个时间段就设好了。用同样方法设置星期一至星期五下午14:00：00～17:00：00时间段。到了预定时间系统会自动关闭WWW浏览服务。<br>
      　　(5)设置允许使用时间段。注意允许使用时间段必须设，否则，系统不会自动开放。点“Included times”列表框的“Add”按钮，用上面类似的方法设置开放时间为星期六，星期日全天，星期一至星期五0：00：00～8:00：00、11:00：00～14:00：00、17：00：00～23：59：59四个开放时间段。<br>
      　　好了，点击“OK”吧。经过以上设置，“user1”组所有成员就会享受这种“自动”的服务了。<br>
      　　下面来设置“user2”组的无限制服务。<br>
      　　在“WWW Proxy server”项的Policies（权限）选项卡下，点“Add”按钮添加“user2”组的服务权限，单击“Recipient”选项卡中的“Specify 
      user or group”，然后选中下面列表框中的“user2”，单击当前窗口下面的“OK”，在窗口列表中可以看到“user2”组后面权限为“Unrestricted 
      right”（无限制权限），注意要把“user2”下面“Default rights”设置为“are ignored”。这样“user2”组的权限就设置好了，该组里成员可以无限制使用网络。<br>
      　　Socks服务权限设置方法同WWW浏览一样，在“GateKeeper”的“Services”选项卡中双击“SOCKS Proxy server”项，后面设置完全一样。像OICQ等需要Socks服务的软件就只能在规定时间内使用了。其他服务和时间段设置可根据需要按照上面的方法自行设置。<br>
      　　有些网管可能会有一些疑惑，如果用户把IP地址改为“user1”组以外的，不就可以无限制使用了吗？对，但是只要你在设置“user2”组时一个IP对应一台电脑，再将“Guest”设置为任何时间都不可以使用，无论他怎么改IP都没用了 
      。设置的方法是，在“Services”窗口中双击“WWW Proxy server”，单击Policies（权限）标签下的“Add”按钮，打开“Properties 
      for new recipient”窗口，点一下“Recipient”标签下的“Specify user or group”，选中下面列表框中的“Guest”，然后单击“Time”标签，直接点“OK”，会出现一个错误提示，点“是”，再把“Guest”组下面“Default 
      rights”设置为“are ignored”即可。<br>
      　　二、多账号收发邮件设置<br>
      　　接收邮件的设置比较简单，只须在收发邮件软件（以FoxMail 3.1为例）账户中将接收邮件服务器设为代理服务器地址，邮箱账号的格式为用户账号名＋＃＋接收邮件服务器地址，如163的接收邮件服务账号可设置为username＃pop.yeah.net,就可以正常接收新邮件了。如果收不到请检查接收邮件服务器地址是否正确和POP3服务器端口是否为默认的110。<br>
      　　发送邮件设置就比较麻烦了，有的用163的免费信箱，有的用21cn的，还有用263的，不下十几个。许多文章都介绍了Wingate使用单一账号发送的方法，其实多账号发信只不过给每个发送邮件服务器重新分配一个空的端口即可。以163和21cn免费信箱为例，具体方法如下：<br>
      　　1.启动GateKeeper，点“Services”选项卡，在空白处单击鼠标右键，从“New service”项下级菜单中选择“TCP Mapping 
      Service”，进行SMTP服务映射。<br>
      　　2.弹出“TCP Mapping service properties”窗口，在默认的“General”选项卡下，将“Service”名称改为163，在“Start 
      options”标签中将“Service”端口设为25。<br>
      　　3.在“Default Mapping”标签中，将“Enable default mapping”打钩，“Server”中填上发送邮件服务器地址“smtp.yeah.net”，on后面端口填25，点“OK”。<br>
      　　这样，163的发送邮件服务器就设好了。<br>
      　　下面来设21cn的发送邮件服务器，重复上面第1步，在第2步中将“Service”名称改为“21cn”，在“Start options”标签中将“Service”端口重新分配一个空代理服务器的端口号，这里我用端口26。下面填上21cn发送邮件服务器地址“smtp.21cn.com”，端口号还是25，点“OK”设置完毕。<br>
      　　如果要设置更多的其它发送邮件服务器，只须将“Service”名称更改，“Start options”标签下的“service”端口号设为Wingate尚未使用的空端口，具体哪些代理服务器端口为空，从“Services”选项卡的代理服务列表中显示的端口号（Port）可以看出，显示的是已经使用的，除这些以外的端口都可分配。“Default 
      Mapping”标签中“Server”填入相对应的发送邮件服务器地址，端口号都为25，不要改变，因为它是远程邮件服务器端默认的发送邮件端口，与代理服务器端口无关。<br>
      　　此外，“Default Mapping”标签“Server”中的发送邮件服务器最好填IP地址，这样速度会有很大提高，而且不易出错。如163发送邮件服务器地址可填入202.106.185.107，21cn的为202.104.32.230。设置前先ping出其IP地址，如ping 
      smtp.21cn.com。Wingate的SMTP代理服务至此设置完毕。<br>
      　　收发邮件软件只须将相应账号接收邮件服务器地址设为代理服务器地址，SMTP服务器端口设置为其在Wingate中“Start options”标签的“Service”端口号即可。<br>
      　　这样就可以通过Wingate代理服务器实现多账号收发邮件了，建议使用FoxMail收发邮件，使用Outlook Express有时会出现一些问题。我的E－mail是chuci@21cn.com，如有问题可来信一起商榷。<br>
      　　注：以上介绍的 Wingate版本为4.0.1。<br>
      (广东　崔茂春）}<!-- #EndEditable -->　　　　　　　　　　　　　 </TD>
  </TR>
</TABLE>
<TABLE WIDTH='615' BORDER='0' CELLSPACING='0' CELLPADDING='2' ALIGN='center'>
  <TR> 
    <TD>&nbsp;</TD>
    <TD ALIGN='right'><A HREF='#top'>页 首</A></TD>
  </TR>
</TABLE>
<BR>
<TABLE WIDTH='615' BORDER='0' CELLSPACING='0' CELLPADDING='0' ALIGN='center'>
  <TR ALIGN='center' VALIGN='bottom'> 
    <TD HEIGHT='6'><IMG SRC='../../images/dot.gif' WIDTH='615' HEIGHT='1'></TD>
  </TR>
</TABLE>
<TABLE WIDTH='615' BORDER='0' CELLSPACING='0' CELLPADDING='2' ALIGN='center'>
  <TR ALIGN='center'> 
    <TD> 
      <script language="JavaScript" src="file:///C%7C/WINDOWS/Desktop/download/yeskye.js">
</script>
    </TD>
    <TD> <a href='/'>《电脑报》版权所有</a>，<a href='mailto:webmaster@staff.yesky.com'>YESKY网站编辑部</a>设计制作发布</TD>
  </TR>
</TABLE>
</BODY>
<!-- #EndTemplate -->
</HTML>
