<HTML>
<HEAD>
<TITLE>Using Memory-Mapped Files</TITLE>
<link rel="STYLESHEET" type="text/css" href="advwin4.css">
<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</HEAD>
<BODY BGCOLOR="#ffffff" TEXT="#000000">
<A HREF="ch17c.htm">[Previous]</A> <A HREF="ch17e.htm">[Next]</A><P>

<A NAME="218"><H1>Using Memory-Mapped Files</H1></A>

<p>To use a memory-mapped file, you must perform three steps:</p>

<ol>
<p><li>Create or open a file kernel object that identifies the file on
disk that you want to use as a memory-mapped file.</li></p>

<p><li>Create a file-mapping kernel object that tells the system the
size of the file and how you intend to access the file.</li></p>

<p><li>Tell the system to map all or part of the file-mapping object
into your process's address space.</li></p>
</ol>

<p>When you are finished using the memory-mapped file, you must perform
three steps to clean up:</p>

<ol>
<p><li>Tell the system to unmap the file-mapping kernel object from
your process's address space.</li></p>

<p><li>Close the file-mapping kernel object.</li></p>

<p><li>Close the file kernel object.</li></p>
</ol>

<p>The next five sections discuss all these steps in more detail.</p>

<A NAME="219"><H2>Step 1: Creating or Opening a File Kernel Object</H2></A>

<p>To create or open a file kernel object, always call the <i>
CreateFile</i> function:</p>

<p><table width="95%" cellpadding="5"><tr><td>
<pre>
HANDLE燙reateFile(
牋燩CSTR爌szFileName,