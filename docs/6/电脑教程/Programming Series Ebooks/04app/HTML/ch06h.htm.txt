<HTML>
<HEAD>
<TITLE>C/C++ Run-Time Library Considerations</TITLE>
<link rel="STYLESHEET" type="text/css" href="advwin4.css">
<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</HEAD>
<BODY BGCOLOR="#ffffff" TEXT="#000000">
<A HREF="ch06g.htm">[Previous]</A> <A HREF="ch06i.htm">[Next]</A><P>

<A NAME="91"><H1>C/C++ Run-Time Library Considerations</H1></A>

<p>Six C/C++ run-time libraries ship with Visual C++. The following
table describes them. </p>

<p><table cellpadding=5 width="95%"><tr>
<th>Library Name</th>
<th>Description</th>
</tr><tr>
<td valign="top">LibC.lib</td>
<td valign="top">Statically linked library for single-threaded applications.
(This is the default library when you create a new project.)</td>
</tr><tr>
<td valign="top">LibCD.lib</td>
<td valign="top">Statically linked debug version of the library for
single-threaded applications.</td>
</tr><tr>
<td valign="top">LibCMt.lib</td>
<td valign="top">Statically linked release version of the library for
multithreaded applications.</td>
</tr><tr>
<td valign="top">LibCMtD.lib</td>
<td valign="top">Statically linked debug version of the library for
multithreaded applications.</td>
</tr><tr>
<td valign="top">MSVCRt.lib</td>
<td valign="top">Import library for dynamically linking the release
version of the MSVCRt.dll library. This library supports both
single-threaded and multithreaded applications.</td>
</tr><tr>
<td valign="top">MSVCRtD.lib</td>
<td valign="top">Import library for dynamically linking the debug version
of the MSVCRtD.dll library. The library supports both single-threaded
and multithreaded applications.</td>
</tr></table></p>

<p>When you implement any type of project, you must know which library
you're linking your project with. You select a library using the
Project Settings dialog box, shown below. On the C/C++ tab, in the Code
Generation category, select one of the six options from the Use
Run-Time Library combo box.</p>

<p>
<A HREF="javascript:fullSize('G06SI01x.htm')"> <img src="images/G06SI01.JPG" width=404 height=260 border=0 ALT="Click to view at full size."> </A>
</p>

<p>The first thing you're probably wondering is, &quot;Why do I
need one library for single-threaded applications and another library
for multithreaded applications?&quot; The reason is that the standard C
run-time library was invented around 1970, long before threads were
available on any operating system. The inventors of the library
didn't consider the problems of using the C run-time library with
multithreaded applications.</p>

<p>Consider the standard C run-time global variable <i>errno</i>. Some
functions set this variable when an error occurs. Let's say you
have the following code fragment:</p>

<p><table cellpadding=5 width="95%"><tr><td>
<PRE>
BOOLÁàÅFailure