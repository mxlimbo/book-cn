<HTML>
<HEAD>
<TITLE>Connectionless Protocols</title>
<link rel="STYLESHEET" type="text/css" href="Library.css">


</head>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<SCRIPT LANGUAGE="JavaScript">
<!--

function fullSize(sURL){
	window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}

function LibraryHeaderNav(sBackward, sForward, sImgLeftOff, sImgLeftOn, sImgRightOff, sImgRightOn, iH, iW, sImgLeftStyle, sImgRightStyle, sImgRuleStyle, sRuleColor, sRuleSize){
	var tableStr;
	//validate questionable args for defs
	tableStr = "<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 border=0 width=100%>";
	tableStr += "<TR VALIGN=top ALIGN=right>";

	tableStr += "<TD align=right class=" + sImgRuleStyle + ">&nbsp;</TD>";	
	
	tableStr += "<TD width=34 align=right class=" + sImgLeftStyle + ">";
	tableStr += "<A href='" + sBackward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgLeftOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgLeftOff + '\'\"';
	tableStr += " SRC='" + sImgLeftOff + "' vspace=0 hspace=0></a></TD>";
	
	tableStr += "<TD width=34 align=left class=" + sImgRightStyle + ">";
	tableStr += "<A href='" + sForward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgRightOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgRightOff + '\'\"';
	tableStr += " SRC='" + sImgRightOff + "' vspace=0 hspace=0></a></TD></TR>";

	tableStr += "<TR VALIGN=top>";
	tableStr += "<TD height=3 align=center colspan=3 class=" + sImgRuleStyle + ">";
	tableStr += "<HR color=" + sRuleColor + " size=" + sRuleSize + "></TD></TR></TABLE>";
	//alert(tableStr);
	document.write(tableStr);
}

 																						     //purple is: #aa22aa   orange is: #ff9900
LibraryHeaderNav("ch07d.htm" , "ch07f.htm", "images/unit_o_a1.gif", "images/unit_o_a2.gif", "images/unit_o_b1.gif", "images/unit_o_b2.gif", 18, 34, "unit01", "unit02", "headerrule", "#ff9900", "2");
//--></SCRIPT>



<A NAME="157"><H1>Connectionless Protocols</H1></A>

<p>Connectionless protocols behave differently than connection-oriented protocols, so the method for sending and receiving data is substantially different. First we'll discuss the receiver (or server, if you prefer) because the connectionless receiver requires little change when compared with the session-oriented servers. Following that we'll look at the sender.</p>

<A NAME="158"><H2>Receiver</H2></A>

<p>For a process to receive data on a connectionless socket, the steps are simple. First create the socket with either <i>socket</i> or <i>WSASocket</i>. Next bind the socket to the interface on which you wish to receive data. This is done with the <i>bind</i> function (exactly like the session-oriented example). The difference with connectionless sockets is that you do not call <i>listen</i> or <i>accept</i>. Instead, you simply wait to receive the incoming data. Because there is no connection, the receiving socket can receive datagrams originating from any machine on the network. The simplest of the receive functions is <i>recvfrom</i>, which is defined as</p>

<p><table cellpadding=5 width="95%"><tr><td>
<pre>
int爎ecvfrom(
牋牋SOCKET爏,
牋牋char燜AR*燽uf,
牋牋int爈en,
牋牋int爁lags,
牋牋struct爏ockaddr燜AR*爁rom,
牋牋int燜AR*爁romlen
);
</pre>
</td></tr></table>
</p>

<p>The first four parameters are the same as <i>recv</i>, including the possible values for <i>flags</i>&#8212;<i>MSG_OOB</i> and <i>MSG_PEEK</i>. The same warnings for using the <i>MSG_PEEK</i> flag also apply to connectionless sockets. The <i>from</i> parameter is a <i>SOCKADDR</i> structure for the given protocol of the listening socket, with <i>fromlen</i> pointing to the size of the address structure. When the API call returns with data, the <i>SOCKADDR</i> structure is filled with the address of the workstation that sent the data.</p>

<p>The Winsock 2 version of the <i>recvfrom</i> function is <i>WSARecvFrom</i>. The prototype for this function is</p>

<p><table cellpadding=5 width="95%"><tr><td>
<pre>
int燱SARecvFrom(
牋牋SOCKET爏,
牋牋LPWSABUF爈pBuffers,
牋牋DWORD燿wBufferCount,
牋牋LPDWORD爈pNumberOfBytesRecvd,
牋牋LPDWORD爈pFlags,
牋牋struct爏ockaddr燜AR