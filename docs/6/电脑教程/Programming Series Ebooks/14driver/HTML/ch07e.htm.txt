<HTML>
<HEAD>
<TITLE>Servicing an Interrupt</TITLE>
<link rel="STYLESHEET" type="text/css" href="waltoney.css">

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</head>
<BODY bgcolor="#ffffff" text="#000000">
<p>
<A HREF="ch07d.htm">[Previous]</A> <A HREF="ch07f.htm">[Next]</a>
</p>

<A NAME="236"><H1>Servicing an Interrupt</H1></A>

<p>Many devices signal completion of I/O operations by asynchronously interrupting the
processor. In this section, I'll discuss how you configure your driver for interrupt
handling and how you service interrupts when they occur.</p>

<A NAME="237"><H2>Configuring an Interrupt</H2></A>

<p>You configure an interrupt resource in your StartDevice function by calling <b>
IoConnectInterrupt</b> using parameters that you can simply extract from a
CmResourceTypeInterrupt descriptor. Your driver and device need to be entirely ready to work
correctly when you call IoConnectInterrupt&#8212;you might even have to service an interrupt
before the function returns&#8212;so you normally make the call near the end of the
configuration process. Some devices have a hardware feature that allows you to prevent them
from interrupting. If your device has such a feature, disable interrupts before calling
IoConnectInterrupt and enable them afterward. The extraction and configuration code for an
interrupt would look like this:</p>


<p>
<table cellpadding=5 width="95%">
<tr><td valign=top>
<pre>
















1 <img src="images/arorite2.jpg" width=17 height=10 border=0>
2 <img src="images/arorite2.jpg" width=17 height=10 border=0>
3 <img src="images/arorite2.jpg" width=17 height=10 border=0>
4 <img src="images/arorite2.jpg" width=17 height=10 border=0>

5 <img src="images/arorite2.jpg" width=17 height=10 border=0>
</pre>
</td>
<td valign=top>
<pre>
typedef爏truct燺DEVICE_EXTENSION爗
牋...
牋PKINTERRUPT營nterruptObject;
牋...}燚EVICE_EXTENSION,