<HTML>
<HEAD>
<TITLE>An Archetypal Synchronization Problem</TITLE>
<link rel="STYLESHEET" type="text/css" href="waltoney.css">

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</head>
<BODY bgcolor="#ffffff" text="#000000">
<p>
<A HREF="ch04a.htm">[Previous]</A> <A HREF="ch04c.htm">[Next]</a>
</p>

<A NAME="109"><H1>An Archetypal Synchronization Problem</H1></A>

<p>A hackneyed example will motivate this discussion. Suppose your driver had a static integer
variable that you used for some purpose, say to count the number of I/O requests that were
currently outstanding:</p>

<p>
<table cellpadding=5 width="95%"><tr><td valign="top">
<pre>static燣ONG爈ActiveRequests;</pre>
</td></tr>
</table>
</p>

<p>Suppose further that you increment this variable when you receive a request and decrement it
when you later complete the request:</p>

<p>
<table cellpadding=5 width="95%"><tr><td valign="top">
<pre>NTSTATUS燚ispatchPnp(PDEVICE_OBJECT爁do,燩IRP營rp)
牋{
牋++lActiveRequests;
牋...