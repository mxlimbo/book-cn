<HTML>
<HEAD>
<TITLE>Basic Driver Information</TITLE>
<link rel="STYLESHEET" type="text/css" href="waltoney.css">

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</head>
<BODY bgcolor="#ffffff" text="#000000">
<p>
<A HREF="chaca.htm">[Previous]</A> <A HREF="chacc.htm">[Next]</a>
</p>

<A NAME="438"><H1>Basic Driver Information</H1></A>

<p>The initial page (shown in Figure C-1) asks you for basic information about the driver you
want to build.</p>

<p>For Type Of Driver, you can specify these choices:</p>

<ul>
<p><li> <b>Generic Function Driver</b>&nbsp;&nbsp;Builds a function driver for a generic device. (Note that
use of the word <i>generic</i> here is unfortunate because it has nothing to do with
GENERIC.SYS.)</li></p>

<p><li> <b>Generic Filter Driver</b>&nbsp;&nbsp;Builds a filter driver with default handling for all types of
IRP.</li></p>

<p><li> <b>USB Function Driver</b>&nbsp;&nbsp;Builds a function driver for a USB device.</li></p>

<p><li> <b>Empty Driver Project</b>&nbsp;&nbsp;Builds a project with no files but with options set up for
building a WDM driver.</li></p>



<p>
<A HREF="javascript:fullSize('FCwi01x.htm')"> <img src="images/FCwi01.JPG" width=404 height=325 border=0 ALT = "Click to view at full size."> </A>
</p><p>
<!--caption--><b>Figure C-1.</b> <i>Page for entering basic driver information.</i><!--/caption-->
</p>


<p>You can select the following options:</p>


<p><li> <b>Verbose Debugging Trace&nbsp;&nbsp;</b> If you check this option, the driver project files will
include many <b>KdPrint</b> macro calls to trace important operations in the driver.</li></p>

<p><li> <b>Use Buffered Method For Reads And Writes&nbsp;&nbsp;</b> Set this option if you want to use the
DO_BUFFERED_IO method for read and write operations. Clear this option if you want to use
DO_DIRECT_IO instead.</li></p>

<p><li> <b>Use Old-Style For Device Naming&nbsp;&nbsp;</b> Set this option to generate named device objects.
Clear this option to generate a driver that uses a device interface instead. The second choice
(device interface) is the one Microsoft prefers for WDM drivers.</li></p>

<p><li> <b>Replace ASSERT For i86 Platforms&nbsp;&nbsp;</b> The DDK's <b>ASSERT</b> macro calls a
kernel-mode support routine (<b>RtlAssert</b>) that's a no-operation in the free build of
Microsoft Windows 2000. The checked build of your driver will therefore not stop in the free
build of the operating system. Set this option to redefine ASSERT so that the checked build of
your driver halts even in the free build of the operating system.</li></p>

<p><li> <b>Use GENERIC.SYS Library&nbsp;&nbsp;</b> Set this option to make use of the standardized driver code
in GENERIC.SYS. Clear this option to put all that standardized code in your own driver.</li></p>

<p><li> <b>Windows 98 Detection&nbsp;&nbsp;</b> Set this option to include a run-time check for whether your
driver is running under Windows 98 or Windows 2000. Clear this option to omit the check.</li></p>
</ul>


<p>You can also specify the base pathname where you've installed the Windows 2000 DDK and
the samples for this book. The default values&#8212;$(DDKPATH) and $(WDMBOOK)&#8212;rely on the
environment variables that the sample setup program creates.</p>

<p>Finally you can click the Dispatch Functions button to specify the types of IRP your driver
will handle, as Figure C-2 shows. The dialog box embodies some design decisions that you
can't override. Your driver will include support for IRP_MJ_PNP and IRP_MJ_POWER. If you
specify handling for IRP_MJ_CREATE, you'll get support for IRP_MJ_CLOSE. If you specify
handling for IRP_MJ_READ, IRP_MJ_WRITE, or IRP_MJ_DEVICE_CONTROL, you'll get support for
IRP_MJ_CREATE (and therefore IRP_MJ_CLOSE). WDMWIZ.AWX doesn't generate skeleton dispatch
functions for many types of IRP that are used only by file system drivers.</p>

<p>
<A HREF="javascript:fullSize('FCwi02x.htm')"> <img src="images/FCwi02.JPG" width=404 height=261 border=0 ALT = "Click to view at full size."> </A>
</p><p>
<!--caption--><B>Figure C-2. </B> <I>Dialog box for specifying the IRP major function codes for which you want dispatch functions. </I><!--/caption-->
</p>


</BODY>
</HTML>





