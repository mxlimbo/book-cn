<HTML>
<HEAD>
<TITLE>Chapter 6 -- Windows 98 Compatibility Notes</TITLE>
<link rel="STYLESHEET" type="text/css" href="waltoney.css">

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</head>
<BODY bgcolor="#ffffff" text="#000000">
<p>
<A HREF="ch06e.htm">[Previous]</A> <A HREF="ch07a.htm">[Next]</a>
</p>

<A NAME="225"><H1>Windows 98 Compatibility Notes</H1></A>

<p>Windows 98 never sends an IRP_MN_SURPRISE_REMOVAL request. Consequently, a WDM driver needs
to treat an unexpected IRP_MN_REMOVE_DEVICE as indicating surprise removal. The code samples I
showed you in this chapter accomplish that by calling AbortRequests and StopDevice when they
get this IRP out of the blue.</p>

<p>Windows 98 fails calls to the IoReportTargetDeviceChange function with STATUS_NOT_IMPLEMENTED. It doesn't export the symbol IoReportTargetDeviceChangeAsynchronous at
all; a driver that calls that function will simply fail to load in Windows