<HTML>
<HEAD>
<TITLE>Executive Work Items</TITLE>
<link rel="STYLESHEET" type="text/css" href="waltoney.css">

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</head>
<BODY bgcolor="#ffffff" text="#000000">
<p>
<A HREF="ch09e.htm">[Previous]</A> <A HREF="ch09g.htm">[Next]</a>
</p>

<A NAME="322"><H1>Executive Work Items</H1></A>

<p>From time to time, you might wish that you could temporarily <i>lower</i> the
processor's interrupt request level (IRQL) to carry out some task or another that must be
done at PASSIVE_LEVEL. Lowering IRQL is, of course, a definite no-no. So long as you're
running at or below DISPATCH_LEVEL, however, you can queue an <i>executive work item</i> to
request a callback into your driver later. The callback occurs at PASSIVE_LEVEL in the context
of a worker thread owned by the operating system. Using a work item can save you the trouble of
creating your own thread that you only occasionally wake up.</p>

<p>I'll describe a simple way of using an executive work item. First declare a structure that
starts with an unnamed instance of the WORK_QUEUE_ITEM structure. Here's an example drawn
from the WORKITEM sample on the companion disc:</p>

<p>
<table cellpadding=5 width="95%"><tr><td>
<pre>struct燺RANDOM_JUNK爗
牋struct燺WORK_QUEUE_ITEM;
牋<i>&lt;other爏tuff&gt;</i>
牋}燫ANDOM_JUNK,