<HTML>
<HEAD>
<TITLE>IRP_MJ_PNP Dispatch Function</TITLE>
<link rel="STYLESHEET" type="text/css" href="waltoney.css">

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</head>
<BODY bgcolor="#ffffff" text="#000000">
<p>
<A HREF="ch06a.htm">[Previous]</A> <A HREF="ch06c.htm">[Next]</a>
</p>

<A NAME="181"><H1>IRP_MJ_PNP Dispatch Function</H1></A>

<p>In Chapter 5, &quot;<A HREF="ch05a.htm#147">The I/O Request Packet</A>,&quot; I explained the mechanics of passing IRPs
down the driver stack in two situations: one in which you care about the result and therefore
need a completion routine, and the other in which you don't care about the result and
therefore don't install a completion routine. Many of the PnP requests fit into the second
of these categories&#8212;you're receiving the IRP and passing it down, but you don't
care what happens to it afterward. To begin with, then, I suggest writing a helper function
that you can use to pass a request down in the &quot;don't care&quot; scenario&#8212;see the
code below.</p>

<p>
<table cellpadding=5 width="95%"><tr><td valign=top>
<pre>NTSTATUS燚efaultPnpHandler(PDEVICE_OBJECT爁do,燩IRP營rp)
牋{
牋IoSkipCurrentIrpStackLocation(Irp);
牋PDEVICE_EXTENSION爌dx