<html>
<head>
<title>网络编程基础篇之CGI</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<link rel="stylesheet" href="ebook.css" type="text/css">
</head>
<body leftmargin="0" topmargin="0" background="bg.jpg">
<table width="100%" cellspacing="0">
  <tr>
    <td valign="top" bgcolor="#FFD26A">
      <table width="180" height="100%">
        <tr align="center" valign="top">
          <td>
            <p><img src="image.jpg"></p>
            <p><a href="list.htm"><img src="bd.gif" border="0"></a><br>
              <a href="08.htm"><img src="ap.gif" border="0"></a></p>
          </td>
        </tr>
        <tr align="center" valign="bottom">
          <td><a href="10.htm"><img src="np.gif" border="0"></a></td>
        </tr>
      </table>
    </td>
    <td valign="top">
      <blockquote>
        <div align="center"><img src="title.gif"></div>
        <!--正文开始-->
        <font color="#0000FF">9.计数器 </font> 
        <p>下面是一个简单的计数器程序：<br> 
  <br> 
  #******** BEGIN BODY ********<br>  
  open (GETCOUNT,"〈count.log");   
  <br>#open   
  count log for input<br>  
  $counter=〈GETCOUNT〉;   
  <br>#assign   
  contents of file to $counter<br>  
  close (GETCOUNT);   
  <br>#close   
  access to file </p>  
  <p>$counter++;   
  <br>#increase   
  $counter by 1. <br>  
  print "$counter hits";   
  <br>#print   
  number of hits to users screen <br>  
  <br>  
  open (PUTCOUNT,"〉count.log");   
  <br>#open   
  count log for output<br>  
  print PUTCOUNT ($counter);   
  <br>#replace   
  old counter value with new one<br>  
  close PUTCOUNT;   
  <br>#close   
  access to file <br>  
  <br>  
  #******** END BODY ********* </p>  
  <p>如果用SUBMIT按钮，当前页将消失，出现程序的输出页。为了在当前页上显示点击数，需要有一个页面转载时执行的程序，然后把结果潜入相同页面上。这种方法叫做Server   
  Side Include(SSI)。</p>  
  <p>注意：不是所有的web服务器都支持SSI。有些只在页面文件以".shtml"或".html-ssi"结束才起作用，有些由于安全原因完全屏蔽了这种功能。</p>  
  <p>下面是代码的工作过程：<ol>  
    <li>把上面的代码拷贝到一个新的'template.txt'文件中，命名为count.cgi。</li>  
    <li>建立一个包含起始点击数的文件，命名为count.log。</li>  
    <li>新建一个HTML页面。</li>  
    <li>插入〈!--#exec cgi="count.cgi"--〉。</li>  
    <li>把上面3个文件上传到服务器上。</li>  
    <li>Telnet到perltour文件夹中，敲入chmod a+rx count.cgi。</li>  
    <li>浏览这个页面，重载几次，可以看到数字的增加。</li>  
  </ol>  
  <p>如果不起作用，直接浏览count.cgi看它是否工作。一旦CGI起作用，把页面文件重命名为.shtml扩展名。</p>
        <!--正文结束-->
      <center>
      <hr>
      <p>本书由<a href="http://www.huiniao.com/">【灰鸟资讯】</a>免费制作<br>
          想要更多的免费电子图书，请光临<br>
          <a href="http://www.huiniao.com">http://www.huiniao.com</a></p>
      </center>
      </blockquote>
    </td>
  </tr>
</table>
</body>
</html>
