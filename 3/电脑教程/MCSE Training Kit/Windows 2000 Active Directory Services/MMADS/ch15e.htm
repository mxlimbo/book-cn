<html>
<head>
<title>Lesson 4: RIS Frequently Asked Questions and Troubleshooting</title>
<link rel="STYLESHEET" type="text/css" href="mmads.css">

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</head>
<SCRIPT LANGUAGE="JavaScript">
<!--

function fullSize(sURL){
	window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}

function LibraryHeaderNav(sBackward, sForward, sImgLeftOff, sImgLeftOn, sImgRightOff, sImgRightOn, iH, iW, sImgLeftStyle, sImgRightStyle, sImgRuleStyle, sRuleColor, sRuleSize){
	var tableStr;
	//validate questionable args for defs
	tableStr = "<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 border=0 width=100%>";
	tableStr += "<TR VALIGN=top ALIGN=right>";

	tableStr += "<TD align=right class=" + sImgRuleStyle + ">&nbsp;</TD>";	
	
	tableStr += "<TD width=34 align=right class=" + sImgLeftStyle + ">";
	tableStr += "<A href='" + sBackward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgLeftOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgLeftOff + '\'\"';
	tableStr += " SRC='" + sImgLeftOff + "' vspace=0 hspace=0></a></TD>";
	
	tableStr += "<TD width=34 align=left class=" + sImgRightStyle + ">";
	tableStr += "<A href='" + sForward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgRightOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgRightOff + '\'\"';
	tableStr += " SRC='" + sImgRightOff + "' vspace=0 hspace=0></a></TD></TR>";

	tableStr += "<TR VALIGN=top>";
	tableStr += "<TD height=3 align=center colspan=3 class=" + sImgRuleStyle + ">";
	tableStr += "<HR color=" + sRuleColor + " size=" + sRuleSize + "></TD></TR></TABLE>";
	//alert(tableStr);
	document.write(tableStr);
}

 																						     //purple is: #aa22aa   orange is: #ff9900
LibraryHeaderNav("ch15d.htm", "ch15f.htm", "images/unit_p_a1.gif", "images/unit_p_a2.gif", "images/unit_p_b1.gif", "images/unit_p_b2.gif", 18, 34, "unit01", "unit02", "headerrule", "#aa22aa", "2");
//--></SCRIPT><P>

<A NAME="880"><h1>Lesson 4: RIS Frequently Asked Questions and Troubleshooting</h1></A>
<p>This lesson provides answers to frequently asked RIS questions. It also describes some RIS problems you may encounter and possible solutions.</p>

<p>
<div class="sidebar"><blockquote>
<b>After this lesson, you will be able to</b> 

<ul>
<p><li>Troubleshoot RIS</li></p>
</ul>

<b>Estimated lesson time: 15 minutes</b> 
</blockquote></div>
</p>

<A NAME="881"><h2>Frequently Asked RIS Questions</h2></A>
<p>This section provides answers to frequently asked RIS questions.</p>

<p><b>Question 1:</b> I am not sure whether I have the correct PXE ROM version.</p>

<p><b>Answer:</b> When the Net PC or client computer containing a remote boot ROM starts, the version of the PXE ROM appears on the screen. RIS supports .99c or greater PXE ROMs. You may be required to obtain a newer version of the PXE-based ROM code from your OEM if you have problems with the existing ROM version installed on a client computer.</p>

<p><b>Question 2:</b> I am not sure whether the client computer has received an IP 
address and has contacted the RIS server.</p>

<p><b>Answer:</b> When the client computer boots, you will see the PXE boot ROM 
begin to load and initialize. The following remote boot ROM load sequence 
occurs with most PC98 and Net PCs, PXE ROM-based computers, and the 
computers using the RIS boot disk.</p>

<A NAME="882"><h3>Remote Boot ROM Load Sequence</h3></A>
<p><b>Step 1:</b> The client computer displays the message &quot;DHCP,&quot; which indicates that the client is requesting an IP address from the DHCP server. This can also mean that the client has obtained an IP address from DHCP and is awaiting a response from the RIS server. To verify that the client is receiving an IP address, check the IP leases that have been granted on your DHCP server.</p>

<p><b>Troubleshooting:</b> If the client does not receive the message, an IP address might not have been received or the BINL server might not be responding. Consider the following:</p>

<ul>
<p><li>Is the DHCP server available and has the service started? DHCP and RIS servers must be authorized in Active Directory for their services to start. Make sure the service has started and that other clients that are not remote boot-enabled are receiving IP addresses on this segment.</li></p>

<p><li>Does the DHCP server have a defined IP address scope and has it been activated?</li></p>

<p><li>Is there a router between the client and the DHCP server that is not allowing DHCP packets through?</li></p>

<p><li>Are there any error messages in the event log under the system log for DHCP?</li></p>

<p><li>Can other client computers&#8212;that is, those that are not remote boot-enabled clients&#8212;receive an IP address on this network segment?</li></p>
</ul>

<p><b>Step 2:</b> When the client receives an IP address from the DHCP server, the message may change to &quot;BINL.&quot; This indicates that the client successfully leased an IP address and is now waiting to contact the RIS server. The client will eventually time out and post the error message &quot;No Bootfile received from DHCP, BINL, or Bootp.&quot;</p>

<p><b>Troubleshooting:</b> If the client does not receive the BINL message, this indicates the client is not receiving a response from the RIS server. Consider the following:</p>

<ul>
<p><li>Is the RIS server available and has the RIS started? RIS servers must be authorized to start on the network. Use the DHCP console to authorize both DHCP and RIS servers within Active Directory.</li></p>

<p><li>Are other remote boot-enabled clients receiving the CIW? If so, this client computer either is not supported or is having remote boot ROM-related problems. Check the version of the PXE ROM on the client computer. Also, check Active Directory to see whether the administrator has prestaged this client computer to an RIS server that is offline or unavailable to the client computer.</li></p>

<p><li>Is a router between the client and the RIS server not allowing the DHCP-based requests or responses through? The RIS server communicates by way of the DHCP packet type during the initial service request and response sequence. You may need to configure the router to forward the DHCP packets.</li></p>

<p><li>Are there any error messages in the event log under the system or application logs specific to RIS (BINLSVC), DNS, or Active Directory?</li></p>
</ul>

<p><b>Step 3:</b> The client then changes to TFTP or prompts the user to press F12. This indicates that the client has contacted the RIS server and is waiting to receive the first image file&#8212;CIW. You might not see the BINL and TFTP message on some machines because this sequence can occur very rapidly.</p>

<p><b>Troubleshooting:</b> If the client machine does not get a response from the RIS server, the client will time out and send an error message saying that it did not receive a file from DHCP, BINL, or TFTP. In this case, the RIS server did not answer the client computer. Do the following:</p>

<ol>
<p><li> Stop and restart the BINLSVC service by clicking Start and pointing to Run.</li></p>

<p><li> In the Run dialog box, type <b>Net Stop BINLSVC Net Start BINLSVC</b> in the text field, then click OK.</li></p>

<p><li> Unless you have prestaged the client computer in Active Directory prior to starting the client computer, check the RIS server properties to make sure the Respond To Client Computers Requesting Service check box is selected and that the Do Not Respond To Unknown Client Computers check box is cleared.</li></p>

<p><li> Check the event log in Event Viewer to make sure no errors relating to DHCP, DNS, RIS (BINLSVC), or Active Directory exist.</li></p>
</ol>

<p><b>Step 4:</b> At this point, the client should have downloaded and displayed the CIW Welcome screen.</p>

<p><b>Question 3:</b> Is the pre-boot portion of the PXE-based remote boot ROM secure?</p>

<p><b>Answer:</b> No. The entire boot ROM sequence and OS installation or replication process is not secure with regard to packet type encryption, client/server spoofing, or wire sniffer-based mechanisms. As such, use caution when using RIS on your corporate network. Make sure you allow only authorized RIS servers on your network and that you control the number of administrators allowed to install and configure RIS servers.</p>

<p><b>Question 4:</b> Does RIS preserve the file attributes and security settings defined on the source computer when using the RIPrep image feature?</p>

<p><b>Answer:</b> Yes. The file attributes and security settings that are defined on the source computer are preserved on the destination computer that installs that image. However, the RIPrep feature does not support the encrypted file system if enabled and used on the source client computer.</p>

<p><b>Question 5:</b> How do I replicate all of the OS installation images currently located on one RIS server to other RIS servers on the network for consistency across all client installations?</p>

<p><b>Answer:</b> Currently the RIS feature does not provide a mechanism for replication of OS images from one RIS server to another, but there are several mechanisms you can use to solve this problem. Use the strong replication features of the Systems Management Server product, which provides for scheduled replication, compression, and slow-link features. You can also use other vendor solutions for OS image replication. Make sure the replication mechanism you choose supports maintaining the file attributes and security settings of the source images.</p>

<p><b>Question 6:</b> Can I have an RIS server and another vendor remote boot server on the network at the same time? If so, what are the implications?</p>

<p><b>Answer:</b> Yes, you can have multiple vendor remote boot/installation (RB/RI) servers on one physical network. It is important to understand that currently the remote boot PXE ROM code does not know the difference between vendors' RB/RI servers. As such, when a remote boot-enabled client computer starts and requests the IP address of an RB/RI server, all of the available servers will respond to that client; thus, the client has no way to ensure it is serviced by a specific RB/RI server.</p>

<p>RIS gives you the ability to prestage client computers into Active Directory and determine which RIS server will service a client computer. By configuring the RIS server to answer only known client computers (prestaged), you are assured that the correct RIS server will service the client.</p>

<p>Not all of the other RB/RI vendors have implemented the ability to ignore service requests. You might need to isolate the specific vendors' servers on the network so that these vendors' RB/RI servers do not answer clients.</p>

<p><b>Question 7:</b> Can I add more network adapters to the RIS boot disk?</p>

<p><b>Answer:</b> No. The RBFG.EXE utility cannot be modified with regard to the number of supported network adapters for this release of RIS. Microsoft will be adding network card adapters over time and will make the updated RBFG.EXE utility available through normal distribution channels such as the World Wide Web, Windows updates, and future service or feature pack updates.</p>

<p><b>Question 8:</b> Can I use the Active Directory object attributes to create a naming format for use with the RIS automatic computer-naming feature?</p>

<p><b>Answer:</b> No. Currently the existing attributes supported with the automatic computer naming feature use Active Directory. However, not all of the Active Directory object attributes are currently supported.</p>

<A NAME="883"><h2>Troubleshooting RIS</h2></A>
<p>Table 15.3 describes some RIS problems you may encounter and possible solutions.</p>

<p><b>Table 15.3</b> <i>Troubleshooting Scenarios for RIS</i></p>

<table cellpadding="5" border="0" width="95%">
<tr><th colspan="2" align="left">Symptom: Command settings are not being processed during the unattended installation</th></tr>
<tr><th>Cause</th><th>Solution</th></tr>
<tr><td valign="top">When using the &quot;OemPreinstall = yes&quot; setting in an .sif file, the correct directory information is required.</td><td valign="top">Change the directory information to \RemoteInstall\Setup\<i>applicable_language</i>\Images\<i>applicable_image_name</i>\$oem$.</td></tr>
<tr><th colspan="2" align="left">Symptom: Language choice options are not displayed during the CIW session</th></tr>
<tr><th>Cause</th><th>Solution</th></tr>
<tr><td valign="top">By default, RIS uses the WELCOME.OSC file to manage the client installation image choices. For multiple language installation image options, you need to replace the default WELCOME.OSC file with the MULTILNG.OSC file.</td><td valign="top">The CIW uses the WELCOME.OSC file located in the \RemoteInstall\OSChooser folder to manage client installation image choices. When you remove the WELCOME.OSC file and rename the MULTILNG.OSC file to WELCOME.OSC, the CIW will also offer a menu of multiple language choices to the user. You can edit the WELCOME.OSC file to create custom language options.</td></tr>
<tr><th colspan="2" align="left">Symptom: The client computer is prestaged to an RIS server but is being serviced by a different server</th></tr>
<tr><th>Cause</th><th>Solution</th></tr>
<tr><td valign="top">When you prestage a client computer into a domain with multiple domain controllers, the replication delay of the CAO information can cause a client computer to be serviced by another RIS server.</td><td valign="top">You can wait for the computer account information to be propagated during the next scheduled replication session or modify the replication frequency between your domain controllers.</td></tr>
<tr><th colspan="2" align="left">Symptom: Following the restoration of a backup of an RIS volume, RIS no longer functions properly</th></tr>
<tr><th>Cause</th><th>Solution</th></tr>
<tr><td valign="top">Backup restored the volume without an SIS directory.</td><td valign="top">Verify the configuration of the RIS volume and then restore the volume again.</td></tr>
</table>

<A NAME="884"><h2>Lesson Summary</h2></A>
<p>In this lesson you reviewed frequently asked RIS questions and answers. You also examined some RIS problems you may encounter and possible solutions.</p>

</BODY>
</HTML>







