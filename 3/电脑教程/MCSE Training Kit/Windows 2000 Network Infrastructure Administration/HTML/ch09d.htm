<HTML>
<HEAD>
<TITLE>Lesson 3: Implementing WINS</TITLE>
<link rel="STYLESHEET" type="text/css" href="mmnet.css">

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</HEAD>
<BODY BGCOLOR="#ffffff" TEXT="#000000">
<A HREF="ch09c.htm">[Previous]</A> <A HREF="ch09e.htm">[Next]</A><P>



<A NAME="373"><H1>Lesson 3: Implementing WINS</H1></A>

<p>For networks with servers running Windows 2000 Server and all other computers running Windows 2000 Professional, NetBIOS is no longer required for TCP/IP-based networking. Because of this change, WINS is needed for most networks but might not be required in some instances. In this lesson, you will learn how to implement WINS on your network.</p>

<p><div class="sidebar"><blockquote>
<b>After this lesson, you will be able to</b>

<ul>
<p><li>Install and configure a WINS server</li></p>

<p><li>Install and configure a WINS client</li></p>

<p><li>Troubleshoot WINS clients and servers</li></p>

<p><li>Manage and monitor WINS</li></p>
</ul>



<p><b>Estimated lesson time: 40 minutes</b></p>
</blockquote></div></p>

<A NAME="374"><H2>When to Use WINS</H2></A>

<p>When deciding whether you need to use WINS, you should first consider the 
following questions:</p>

<ul>
<p><li><b> Do I have any legacy computers or applications on my network that require the use of NetBIOS names?</b> Remember that all networked computers that run under any previously released Microsoft operating system, such as versions of MS-DOS, Windows, or Windows NT, require NetBIOS name support. Windows 2000 is the first Microsoft operating system that no longer requires NetBIOS naming. Therefore, NetBIOS names can still be required on your network to provide basic file and print services and support for many legacy applications used.</li></p>

<p><li><b> Are all computers on my network configured and able to support the use of another type of network naming, such as DNS?</b> Network naming is still a vital service for locating computers and resources throughout your network, even when NetBIOS names are not required. Before you decide to eliminate WINS or NetBIOS name support, be sure that all computers and programs on your network are able to function using another naming service, such as DNS.</li></p>

<p><li><b> Is my network a single subnet or routed with multiple subnets?</b> If your entire network is a small local area network (LAN) that occupies one physical network segment and has less than 50 clients, you can probably do without a WINS server.</li></p>
</ul>

<A NAME="375"><H2>Considerations for WINS Servers</H2></A>

<p>Before you implement WINS in an internetwork, consider the number of WINS servers you will need. Only one WINS server is required for an internetwork 
because requests for name resolution are directed datagrams that can be routed. Two WINS servers ensure a backup system for fault tolerance. If one server 
becomes unavailable, the second server can be used to resolve names. You should also consider the following WINS server recommendations:</p>

<ul>
<p><li>There is no built-in limit to the number of WINS requests that can be handled by a WINS server, but typically it can handle 1500 name registrations and about 4500 name queries per minute.</li></p>

<p><li>A conservative recommendation is one WINS server and a backup server for every 10,000 WINS clients.</li></p>

<p><li>Computers with multiple processors have demonstrated performance improvements of approximately 25 percent for each additional processor, as a separate WINS thread is started for each processor.</li></p>

<p><li>If logging of database changes is turned off (through WINS Manager), name registrations are much faster, but if a crash occurs, there is a risk of losing the last few updates.</li></p>
</ul>



<A NAME="376"><H2>WINS Requirements</H2></A>

<p>Before you install WINS, you should determine that your server and clients meet the configuration requirements. The WINS service must be configured on at least one computer within the TCP/IP internetwork running Windows NT Server or Windows 2000 Server (it does not have to be a domain controller). The server must have an IP address, subnet mask, default gateway, and other TCP/IP parameters. These parameters can be assigned by a DHCP server, but statically assigned parameters are recommended.</p>

<p>A WINS client can be a computer running any of the following supported 
operating systems:</p>

<ul>
<p><li>Windows 2000</li></p>

<p><li>Windows NT 3.5 and later</li></p>

<p><li>Windows 95 or Windows 98</li></p>

<p><li>Windows for Workgroups 3.11 running Microsoft TCP/IP-32</li></p>

<p><li>Microsoft Network Client 3.0 for MS-DOS</li></p>

<p><li>LAN Manager 2.2c for MS-DOS</li></p>
</ul>


<p>The client must have an IP address of a WINS server configured for a primary WINS server or for primary and secondary WINS servers.</p>

<p><li><b>To install WINS on a Windows 2000-based server</b></li></p>

<ol>
<p><li>In Control Panel, double-click Add/Remove Programs.</li></p>

<p><li>Click Add/Remove Windows Components.</li></p>

<p>The Windows Component Wizard opens.</p>

<p><li>On the Windows Components page, under Components, click Networking Services, then click Details.</li></p>
<p>The Networking Services dialog box appears.</p>

<p><li>Select the Windows Internet Name Service (WINS) check box, click OK, then click Next.</li></p>
</ol>

<A NAME="377"><H2>Using Static Mappings</H2></A>

<p>Mapped name-to-address entries can be added to WINS in either of two ways:</p>

<ul>
<p><li>Dynamically, by WINS-enabled clients directly contacting a WINS server to register, release, or renew their NetBIOS names in the server database</li></p>

<p><li>Manually, by an administrator using the WINS console or command-line tools to add or delete statically mapped entries in the server database</li></p>
</ul>



<p>Static entries are only useful when you need to add a name-to-address mapping to the server database for a computer that does not directly use WINS. For example, in some networks, servers running other operating systems cannot register a NetBIOS name directly with a WINS server. Although these names might be added to and resolved from an LMHOSTS file or by querying a DNS server, you might consider using a static WINS mapping instead.</p>

<p><li><b>To configure a static mapping</b></li></p>

<ol>
<p><li>Click Start, point to Programs, point to Administrative Tools, then click WINS.</li></p>

<p><li>In the WINS console, click Active Registrations under your WINS server.</li></p>

<p><li>On the Action menu, click New Static Mapping.</li></p>

<p>The New Static Mapping dialog box appears, as illustrated in Figure 9.9.</p>

<p><li>In Computer Name, type the NetBIOS name of the computer.</li></p>

<p><li>In NetBIOS Scope (optional), you can type a NetBIOS scope identifier, if one is used, for the computer. Otherwise, leave this field blank.</li></p>

<p><li>In Type, click one of the supported types to indicate whether this entry is a Unique, Group, Domain Name, Internet, or Multihomed type entry, as detailed in Table 9.3.</li></p>

<p><li>In IP Address, type the address for the computer.</li></p>

<p><li>Click Apply to add the static mapping entry to the database.</li></p>
<p>You can aslo add additional static mapping entries. Click Apply each time you complete an entry, then click Cancel to close when you finish adding static mapping entries.</p>

<p><li>Click OK to close the Add Static Mapping dialog box.</li></p>
</ol>

<p>
<img src="images/09ntk09.JPG" width=404 height=448 border="0">
</p><p>
<!-- caption --><b>Figure 9.9</b> <i>The Add Static Mapping dialog box</i><!-- /caption -->
</p>

<p><b>Table 9.3 </b> <i>Static WINS Mapping Types</i></p>

<p><table cellpadding=5 width="95%"><tr>
<th>Type Option</th> <th>Description</th>
</tr><tr>
<td valign="top">Unique</td> <td valign="top">A unique name maps to a single IP address.</td>
</tr><tr>
<td valign="top">Group</td> <td valign="top">Also referred to as a &quot;Normal&quot; group. When adding an entry to a 
 group by using WINS Manager, you must enter the computer name 
 and IP address. However, the IP addresses of individual members 
 of a group are not stored in the WINS database. Because the member 
 addresses are not stored, there is no limit to the number of members 
 that can be added to a group. Broadcast name packets are used to 
 communicate with group members.</td>
</tr><tr>
<td valign="top">Domain Name</td> <td valign="top">A NetBIOS name-to-address mapping that has 0x1C as the 16th byte. 
 A domain group stores up to a maximum of 25 addresses for members. 
 For registrations after the 25th address, WINS overwrites a replica 
 address or, if none is present, it overwrites the oldest registration.</td>
</tr><tr>
<td valign="top">Internet Group</td> <td valign="top">Internet groups are user-defined groups that enable you to group 
 resources, such as printers, for easy reference and browsing. An 
 Internet group can store up to a maximum of 25 addresses for mem- 
 bers. A dynamic member, however, does not replace a static member 
 added by using WINS Manager or importing the LMHOSTS file.</td>
</tr><tr>
<td valign="top">Multihomed</td> <td valign="top">A unique name that can have more than one address. This is used for 
 multihomed computers. Each multihomed group name can contain a 
 maximum of 25 addresses. For registrations after the 25th address, 
 WINS overwrites a replica address or, if none is present, it overwrites 
 the oldest registration.</td>
</tr></table></p>

<p><img src="images/practic.JPG" width=90 height=72 border="0"></p>

<A NAME="378"><H2>Practice: Configuring a WINS Client</H2></A>

<p>If a computer is a DHCP client, you can configure the DHCP server to provide DHCP clients with WINS configuration information. However, you can also manually configure WINS clients. If you manually configure WINS client computers with IP addresses of one or more WINS servers, those values take precedence over the same parameters that a DHCP server provides.</p>

<p><li><b>To configure a WINS client with the IP address of one or more WINS servers</b></li></p>

<ol>
<p><li>Open Network And Dial-Up Connections.</li></p>

<p><li>Right-click Local Area Connection, then click Properties.</li></p>

<p>The Local Area Connection Properties dialog box appears.</p>

<p><li>Select the Internet Protocol (TCP/IP) Properties entry in the list, then click Properties.</li></p>
<p>The Internet Protocol (TCP/IP) Properties dialog box appears.</p>

<p><li>Click Advanced and select the WINS Address tab, as illustrated in Figure 9.10.</li></p>


<p>
<img src="images/09ntk10.JPG" width=404 height=481 border="0">
</p><p>
<!-- caption --><b>Figure 9.10</b> <i>The WINS service on a Windows 2000 client</i><!-- /caption -->
</p>

<p><li>Click Add, type the IP address of your WINS server in the TCP/IP WINS Server dialog box, then click Add.</li></p>

<p>The TCP/IP WINS Server dialog box will close and the WINS server you 
entered will be added to the list in the Advanced TCP/IP Settings dialog box.</p>

<p><li>Click OK to close the Advanced TCP/IP Settings dialog box.</li></p>

<p><li>Click OK to close the Internet Protocol (TCP/IP) Properties dialog box.</li></p>

<p><li>Click OK to close the Local Area Connection Properties dialog box.</li></p>
</ol>

<A NAME="379"><H2>Troubleshooting WINS</H2></A>

<p>The following conditions can indicate basic problems with WINS:</p>

<ul>
<p><li>Administrator cannot connect to a WINS server using the WINS console</li></p>

<p><li>TCP/IP NetBIOS Helper service on the WINS client is down and cannot be restarted</li></p>

<p><li>WINS service is not running and cannot be restarted</li></p>
</ul>



<p>The first action you should take to resolve WINS problems is to verify that the appropriate services are running. You can do this at both the WINS server and WINS client.</p>

<p><li><b>To verify running services</b></li></p>

<ol>
<p><li>Verify that the WINS service is running on the server.</li></p>

<p><li>Verify that the Workstation service, the Server service, and the TCP/IP NetBIOS Helper service are started on the clients.</li></p>
</ol>

<p>If services do not start properly, you can use the Computer Management administrative tool to check the status column of the services, and then try to start them manually. If the service cannot be started, use Event Viewer to check the system event log and determine the cause of failure.</p>

<p><div class="note"><blockquote><b>NOTE</b><HR>For WINS clients, &quot;Started&quot; should appear in the status column for TCP/IP NetBIOS Helper service. For WINS servers, &quot;Started&quot; should appear in the status column for Windows Internet Name Service (WINS).</blockquote></div></p>

<p>The most common WINS client problem is failed name resolution. When name resolution fails at a client, answer the following questions to identify the source of the problem:</p>

<ul>
<p><li><b> Is the client computer able to use WINS, and is it correctly configured?</b> First, check that the client is configured to use both TCP/IP and WINS. Client configuration of WINS-related settings can be done manually by an administrator setting the TCP/IP configuration of the client or it can be done dynamically by a DHCP server providing the client its TCP/IP configuration. In most cases, computers running earlier versions of Microsoft operating systems are already able to use WINS once TCP/IP is installed and configured at the client. For Windows 2000, administrators can optionally disable NetBT for each client. If you disable NetBT, WINS cannot be used at the client.</li></p>
</ul>



<p><div class="note"><blockquote><b>NOTE</b><HR>If the WINS server does not respond to a direct ping, the source of the problem is likely to be a network connectivity problem between the client and the WINS server.</blockquote></div></p>

<ul>
<p><li><b> Was the name that failed to resolve a NetBIOS or DNS name?</b> NetBIOS names are 15 characters or less and not structured like DNS names, which are generally longer and use periods to delimit each domain level within a name. For example, the short NetBIOS name PRINT-SRV1 and the longer DNS name print-srv1.example.microsoft.com might both refer to the same resource computer running Windows 2000 (a network print server) configured to use either name. If the short name was used at the client in the previous example, Windows 2000 would first involve NetBIOS name services, such as WINS or NetBT broadcasts, in its initial attempts to resolve the name. If a longer DNS name (or a name that uses periods) was involved in the failure, DNS is more likely the cause of the failed name resolution.</li></p>
</ul>



<p>The most common WINS server problem is the inability to resolve names for 
clients. When a server fails to resolve a name for its clients, the failure most 
often is discovered by clients in one of two ways:</p>

<ul>
<p><li>The server sends a negative query response back to the client, such as an error message indicating &quot;Name not found.&quot;</li></p>

<p><li>The server sends a positive response back to the client, but the information contained in the response is incorrect.</li></p>
</ul>



<p>If you determine that a WINS-related problem does not originate at the client, answer the following question to further troubleshoot the source of the problem at the WINS server of the client:</p>

<ul>
<p><li><b> Is the WINS server able to service the client?</b> At the WINS server for the client that cannot locate a name, use Event Viewer or the WINS management console to see if WINS is currently running. If WINS is running on the server, search for the name previously requested by the client to see if it is in the WINS server database.</li></p>
</ul>



<p>If the WINS server is failing or registering database corruption errors, you can use WINS database recovery techniques to help restore WINS operations. You can back up the WINS database by using the WINS administrative console. First, you specify a backup directory for the database, and then WINS will execute database backups. The backup is performed every three hours by default. If your WINS 
database becomes corrupted, you can easily restore it. The easiest way to restore a local server database is to replicate data back from a replication partner. If the 
corruption is limited to a certain number of records, you can repair them by forcing replication of uncorrupted WINS records. This will remove the affected records from other WINS servers. If changes are replicated among WINS servers quickly, the best way to restore a local WINS server database is to use a replication partner, provided that the WINS data is mostly up to date on the replication partner.</p>

<A NAME="380"><H2>Managing and Monitoring WINS</H2></A>

<p>The WINS console is fully integrated with the Microsoft Management Console (MMC), a powerful and more user-friendly environment you can customize for your efficiency. Because all server administrative utilities included for your use in Windows 2000 Server are part of MMC, new MMC-based utilities are easier to use, as they operate more predictably and follow a common design. In addition, several useful WINS features from earlier versions of Windows NT Server that were only configurable through the registry are now more directly usable. These include the ability to block records by a specific owner or WINS replication 
partner (formerly known as Persona Non Grata) or the ability to allow override 
of static mappings (formerly known as Migrate On/Off). In this lesson, you will learn how to manage and monitor WINS through the WINS console.</p>

<A NAME="381"><H3>Viewing WINS Server Statistics</H3></A>

<p>You should view WINS server statistics periodically to monitor performance. By default, statistics automatically refresh every 10 minutes. As an option, you can also disable this feature by clearing the Automatically Update Statistics Every check box.</p>

<p><li><b>To open the WINS Server Statistics dialog box</b></li></p>

<ol>
<p><li>Click Start, point to Programs, point to Administrative Tools, then click WINS.</li></p>

<p><li>In the console tree, click the applicable WINS server.</li></p>

<p><li>On the Action menu, click Display Server Statistics.</li></p>

<p><li>To update the display while viewing WINS statistics, click Refresh.</li></p>
</ol>

<A NAME="382"><H2>Lesson Summary</H2></A>

<p>To implement WINS, both the server and client require configuration. Configuring a static mapping for non-WINS clients allows WINS clients on remote networks to communicate with them. When troubleshooting WINS, the first action you should take is to verify that the appropriate services are running.</p>

</BODY>
</HTML>





