<HTML>
<HEAD>
<TITLE>Lesson 4: Installing DNS</TITLE>
<link rel="STYLESHEET" type="text/css" href="mmnet.css">

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</HEAD>
<BODY BGCOLOR="#ffffff" TEXT="#000000">
<A HREF="ch07d.htm">[Previous]</A> <A HREF="ch07f.htm">[Next]</A><P>



<A NAME="312"><H1>Lesson 4: Installing DNS</H1></A>

<p>Microsoft DNS is an RFC-compliant DNS server; as a result, it creates and uses standard DNS zone files and supports all standard resource record types. It is interoperable with other DNS servers and includes the DNS diagnostic utility NSLOOKUP. Microsoft DNS is tightly integrated with Windows Internet Name Service (WINS) and is administered through the graphical administration utility called DNS Manager. In this lesson, you will install the DNS service on 
Windows 2000.</p>

<p><div class="sidebar"><blockquote>
<b>After this lesson, you will be able to</b>

<ul>
<p><li>Install the Microsoft DNS Server service</li></p>

<p><li>Troubleshoot DNS with NSLOOKUP</li></p>
</ul>



<p><b>Estimated lesson time: 45 minutes</b></p>
</blockquote></div></p>

<p>Before installing the Microsoft Windows 2000 DNS Server service, it is important that the Windows 2000 server's TCP/IP protocol be configured correctly. The DNS Server service obtains the default settings for the host name and domain name through the Microsoft TCP/IP Properties dialog box. The DNS Server service will create default SOA, host, and NS records based on the specified domain name and host name. If the host name and domain name are not specified, only the SOA record is created.</p>

<p>
<img src="images/practic.JPG" width=90 height=72 border="0">
</p>

<A NAME="313"><H2>Practice: Installing the DNS Server Service</H2></A>

<p>In this procedure, you install the Microsoft DNS Server service. You will 
configure DNS in a later lesson.</p>

<p>
<img src="images/cd.JPG" width=66 height=66 border="0">
</p>

<p>Before you continue with the lesson, run the Ch07a.exe demonstration file located in the Media folder on the Supplemental Course Materials CD-ROM that accompanies this book. The file provides an overview of installing the DNS server service.</p>

<p><div class="note"><blockquote><b>NOTE</b><HR>Complete this procedure from the computer you designate as the 
DNS server.</blockquote></div>
</p>

<p>Before configuring DNS, verify that your DNS client settings are correct.</p>

<p><li><b>To verify DNS client settings</b></li></p>

<ol>
<p><li>Right-click My Network Places, then click Properties.</li></p>


<p>The Network And Dial-Up Connections dialog box appears.</p>

<p><li>Right-click the connection (typically the Local Area Network properties) for which you want to configure the DNS server, then click Properties.</li></p>


<p>The Connection Properties dialog box appears.</p>


<p><li>Click Internet Protocol (TCP/IP), then click Properties.</li></p>


<p>The Internet Protocol (TCP/IP) Properties dialog box appears.</p>


<p><li>On the Internet Protocol (TCP/IP) Properties page, enter the IP address of the existing DNS server in the Preferred DNS Server field.</li></p>


<p>You can also add the IP address of an alternate DNS server in the Alternate DNS Server field.</p>


<p><li>If you need to specify more than one alternate DNS server, click Advanced, click the DNS tab, then enter the servers in the DNS Server Addresses box.</li></p>

<p><li>Click OK to close the TCP/IP Properties dialog box.</li></p>

<p><li>Click OK to close the Connection Properties dialog box.</li></p>
</ol>

<p><li><b>To install the DNS Server service</b></li></p>

<ol>
<p><li>In Control Panel, double-click Add/Remove Programs, then click Add/Remove Windows Components.</li></p>

<p>The Windows Components Wizard appears.</p>


<p><li>Click Networking Services, then click Details.</li></p>


<p>The Networking Services dialog box appears.</p>


<p><li>If it is not already selected, select the check box next to Domain Name System (DNS) as illustrated in Figure 7.7, then click OK.</li></p>


<p><li>Click Next.</li></p>


<p>Windows 2000 installs DNS.</p>


<p><li>Click Finish.</li></p>



<p>
<A HREF="javascript:fullSize('07ntk07x.htm')"> <img src="images/07ntk07.JPG" width=404 height=310 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 7.7</b> <i>Domain Name System (DNS) check box in Networking Services</i><!-- /caption -->
</p>

</ol>

<A NAME="314"><H2>Troubleshooting DNS with NSLOOKUP</H2></A>

<p>NSLOOKUP is a useful tool for troubleshooting DNS problems such as host name resolution. When you start NSLOOKUP, it shows the host name and IP 
address of the DNS server that is configured for the local system, and then 
displays a command prompt for further queries. If you type a question mark (?), NSLOOKUP shows all available commands. You can exit the program by typing exit. To look up a host's IP address using DNS, type the host name and press 
Enter. NSLOOKUP defaults to using the DNS server configured for the computer on which it is running, but you can focus it on a different DNS server by typing <b>server &lt;<i>name</i>&gt;</b> (where <b>&lt;<i>name</i>&gt;</b> is the host name of the server you want to use for future lookups). Once another server is specified, anything entered 
after that point is interpreted as a host name.</p>

<A NAME="315"><H3>NSLOOKUP Modes</H3></A>

<p>NSLOOKUP has two modes: interactive and noninteractive. If a single piece of data is needed, use noninteractive or command-line mode. If more than one piece of data is needed, interactive mode can be used.</p>

<A NAME="316"><H3>NSLOOKUP Syntax</H3></A>

<p>NSLOOKUP.EXE is a command line administrative tool for testing and troubleshooting DNS servers. The following syntax is ued to run the NSLOOKUP utility:</p>

<p><b>nslookup</b> [_option <b>...</b>] [computer-to-find <b>|</b> _ [server]]</p>

<p>
<table cellpadding=5 width="95%">
<tr> 
<th>Syntax  </th>
<th>Description  </th></tr>
<tr>
<td valign="top">&#8211;<i>option</i> ...  </td>
<td valign="top">Specifies one or more NSLOOKUP commands. For a list of 
commands, use the help option inside NSLOOKUP.  </td></tr>
<tr>
<td valign="top"><i>computer-to-find</i>  </td>
<td valign="top">If <i>computer-to-find</i> is an IP address and the query type is host or PTR, the name of the computer is returned. If <i>computer-to-find</i> is a name and does not have a trailing period, the default DNS domain name is appended to the name. To look up a computer outside of the current DNS domain, append a period to the name. If a hyphen (-) is typed instead of <i>computer-to-find</i>, the command prompt changes to NSLOOKUP interactive mode.  </td></tr>
<tr>
<td valign="top"><i>server</i>  </td>
<td valign="top">Use this server as the DNS name server. If the server is omitted, the currently configured default DNS server is used.  </td></tr>
</table></p>


<p><li><b>To use NSLOOKUP in command mode</b></li></p>

<ol>
<p><li>At a command prompt, modify the properties so that the command prompt window has a screen buffer size of 50.</li></p>


<p>As illustrated in Figure 7.8, use the Layout property page to do this. You should apply this change to all future instances of the command prompt 
window; it will be needed in later lessons.</p>


<p><li>Type the following command:</li></p>


<p><table cellpadding=5 width="95%"><tr><td><pre>
nslookup hostx
</pre></td></tr></table></p>

<p>where hostx is a host in your domain.</p>


<p><li>NSLOOKUP will return the IP address of the computer hostx because the information is stored in the DNS database.</li></p>

<p><li>Exit the command prompt.</li></p>



<p>
<img src="images/07ntk08.JPG" width=376 height=461 border="0">
</p><p>
<!-- caption --><b>Figure 7.8</b> <i>Command Prompt Properties dialog box</i><!-- /caption -->
</p>

</ol>

<p><li><b>To use NSLOOKUP in interactive mode</b></li></p>

<ol>
<p><li>At a command prompt, type <b>nslookup</b> then press Enter.</li></p>


<p>The &gt; prompt appears.</p>


<p><li>Type <b>set all</b> at the &gt; prompt.</li></p>


<p>This command lists all of the current values of the NSLOOKUP options.</p>


<p><li>Use the following set commands to change the timeout value to 1 second and the number of retries to 7, as illustrated in Figure 7.9.</li></p>


<p><table cellpadding=5 width="95%"><tr><td><pre>
Set ti=1
Set ret=7
</pre></td></tr></table></p>


<p><li>Use Set All to verify that the defaults were changed.</li></p>

<p><li>Type the names of the other computers, one at a time, at the &gt; prompt. Press Enter after each name.</li></p>

<p><li>Exit the command prompt.</li></p>


<p>
<A HREF="javascript:fullSize('07ntk09x.htm')"> <img src="images/07ntk09.JPG" width=404 height=205 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 7.9</b> <i>Setting the timeout and retry values in NSLOOKUP</i><!-- /caption -->
</p>

</ol>

<A NAME="317"><H2>Lesson Summary</H2></A>

<p>Microsoft DNS is interoperable with other DNS servers. Before installing the DNS Server service, you should make sure that the Windows 2000 server's 
TCP/IP protocol is configured correctly.</p>

<p>The NSLOOKUP utility is the primary diagnostic tool for DNS. It lets you 
display resource records on DNS servers.</p>

</BODY>
</HTML>





