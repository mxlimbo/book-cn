<HTML>
<HEAD>
<TITLE>Lesson 1: Working with Zones</TITLE>
<link rel="STYLESHEET" type="text/css" href="mmnet.css">

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</HEAD>
<BODY BGCOLOR="#ffffff" TEXT="#000000">
<A HREF="ch08a.htm">[Previous]</A> <A HREF="ch08c.htm">[Next]</A><P>



<A NAME="332"><H1>Lesson 1: Working with Zones</H1></A>

<p>Servers refer to their zones (also called DNS database files) to resolve names. The zones contain resource records that comprise the resource information associated with the DNS domain. For example, some resource records map friendly names to Internet Protocol (IP) addresses, and others map IP addresses to friendly names. Some resource records not only include information about servers in the DNS domain, but also serve to define the domain by specifying which servers are authoritative for which zones. In this lesson, you will learn how to configure DNS zones in Windows 2000.</p>

<p><div class="sidebar"><blockquote>
<b>After this lesson, you will be able to</b>

<ul>
<p><li>Implement a delegated zone for DNS</li></p>

<p><li>Configure zones for dynamic updates</li></p>
</ul>



<p><b>Estimated lesson time: 20 minutes</b></p>
</blockquote></div></p>

<A NAME="333"><H2>Delegating Zones</H2></A>

<p>A DNS database can be partitioned into multiple zones. A zone is a portion of the DNS database that contains the resource records with the owner names that belong to the contiguous portion of the DNS name space. Zone files are maintained on DNS servers. A single DNS server can be configured to host zero, one, or multiple zones. Each zone is anchored at a specific domain name referred to as the zone's root domain. A zone contains information about all names that end with the zone's root domain name. A DNS server is considered authoritative for a name if it loads the zone containing that name. The first record in any zone file is a start of authority (SOA) resource record. The SOA resource record identifies a primary DNS name server for the zone as the best source of information for the data within that zone and as an entity processing the updates for the zone.</p>

<p>Names within a zone can also be delegated to other zone(s). Delegation is a process of assigning responsibility for a portion of a DNS name space to a separate entity. This separate entity could be another organization, department, or workgroup within your company. In technical terms, delegating means assigning 
authority over portions of your DNS name space to other zones. The name server record that specifies the delegated zone and the DNS name of the server authoritative for that zone represents such delegation. Delegating across multiple zones was part of the original design goal of DNS. The following are the main reasons for the delegation of a DNS name space:</p>

<ul>
<p><li>A need to delegate management of a DNS domain to a number of organizations or departments within an organization</li></p>

<p><li>A need to distribute the load of maintaining one large DNS database among multiple name servers to improve the name resolution performance as well as create a DNS fault-tolerant environment</li></p>

<p><li>A need to allow for hosts' organizational affiliations by including them in appropriate domains</li></p>

</ul>



<p>The name server's resource records facilitate delegation by identifying DNS servers for each zone. They appear in all forward and reverse lookup zones. Whenever a DNS server needs to cross a delegation, it will refer to the name server's resource records for DNS servers in the target zone. In Figure 8.1, the management of the microsoft.com domain is delegated across two zones, microsoft.com and mydomain.microsoft.com.</p>



<p>
<A HREF="javascript:fullSize('08ntk01x.htm')"> <img src="images/08ntk01.JPG" width=404 height=303 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 8.1</b> <i>The microsoft.com domain delegated across two zones</i><!-- /caption -->
</p>

<p><div class="note"><blockquote><b>NOTE</b><HR>If multiple name server records exist for a delegated zone identifying multiple DNS servers available for querying, the Windows 2000 DNS server will be able to select the closest DNS server based on the round-trip intervals measured over time for every DNS server.</blockquote></div>
</p>

<A NAME="334"><H3>Understanding DNS Zones and Domains</H3></A>

<p>Domain name servers store information about part of the domain name space called a zone. The name server is authoritative for a particular zone. A single name server can be authoritative for many zones. Understanding the difference between a zone and a domain is sometimes confusing.</p>

<p>A zone is simply a portion of a domain. For example, the domain microsoft.com may contain all of the data for microsoft.com, marketing.microsoft.com, and development.microsoft.com. However, the zone microsoft.com contains only 
information for microsoft.com and references to the authoritative name servers for the subdomains. The zone microsoft.com can contain the data for subdomains of microsoft.com if they have not been delegated to another server. For example, marketing.microsoft.com may manage its own delegated zone. The parent, microsoft.com, may manage development.microsoft.com. If there are no subdomains, then the zone and domain are essentially the same. In this case the zone contains all data for the domain.</p>

<p><div class="note"><blockquote><b>NOTE</b><HR>All domains (or subdomains) that appear as part of the applicable zone delegation must be created in the current zone prior to performing delegation as described here. As necessary, use the DNS console to first add domains to the zone before completing this procedure.</blockquote></div>
</p>

<p><li><b>To create a zone delegation</b></li></p>

<ol>
<p><li>Click Start, point to Programs, point to Administrative Tools, then click DNS.</li></p>

<p><li>In the console tree, right-click your subdomain and then click New Delegation, as illustrated in Figure 8.2.</li></p>


<p>The New Delegation Wizard appears.</p>



<p>
<A HREF="javascript:fullSize('08ntk02x.htm')"> <img src="images/08ntk02.JPG" width=404 height=333 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 8.2</b> <i>Adding a new delegation server</i><!-- /caption -->
</p>


<p><li>Click Next.</li></p>

<p><li>In the Delegated Domain Name dialog box, type a delegated domain name, then click Next.</li></p>

<p><li>In the Name Servers dialog box, click Add to specify names and IP addresses of DNS servers you want to have host the delegated zone.</li></p>


<p>The New Resource Record dialog box will appear, allowing you to specify DNS servers.</p>


<p><li>Type the DNS server name, click Add, then click OK.</li></p>

<p><li>In the Name Servers dialog box, click Next.</li></p>

<p><li>Click Finish to close the New Delegation Wizard.</li></p>
</ol>

<A NAME="335"><H2>Configuring Zones for Dynamic Update</H2></A>

<p>Originally, DNS was designed to support only static changes to a zone database. 
Because of the design limitations of static DNS, the ability to add, remove, or modify resource records could only be performed manually by a DNS system administrator. For example, a DNS system administrator would edit records on a zone's primary server and the revised zone database would then be propagated to secondary servers during zone transfer. This design is workable when the number of changes is small and updates occur infrequently, but can otherwise become unmanageable.</p>

<p>Windows 2000 provides client and server support for the use of dynamic updates. Dynamic updates enable DNS client computers to register and dynamically update their resource records with a DNS server whenever changes occur. This reduces the need for manual administration of zone records, especially for clients that frequently move or change locations and use DHCP to obtain an IP address.</p>

<p>By default, computers that run Windows 2000 and are statically configured for TCP/IP attempt to dynamically register host and pointer resource records for IP addresses configured and used by their installed network connections. Dynamic updates can be sent for any of the following reasons or events:</p>

<ul>
<p><li>An IP address is added, removed, or modified in the TCP/IP propertiesconfiguration for any one of the installed network connections </li></p>


<p><li>An IP address lease changes or renews with the DHCP server any one of the installed network connections; for example, when the computer is started or if the ipconfig/renew command is used</li></p>

<p><li>The ipconfig/registerdns command is used to manually force a refresh of the client name registration in DNS</li></p>

<p><li>When the computer is turned on</li></p>
</ul>



<A NAME="336"><H3>Dynamic Update Requirements</H3></A>

<p>For DNS servers, the DNS service allows dynamic update to be enabled or 
disabled on a per-zone basis at each server configured to load either a standard primary or directory-integrated zone. By default, client computers running under any version of Windows 2000 dynamically update their host resource records in DNS when configured for TCP/IP. When DNS zones are stored in Active Directory, DNS is configured by default to accept dynamic updates.</p>

<p><div class="note"><blockquote><b>NOTE</b><HR>Windows 2000 DNS servers support dynamic updates. The DNS server provided with Windows NT Server 4.0 does not.</blockquote></div>
</p>

<p>For a request for a dynamic update to be performed, several prerequisite conditions can be configured. Each prerequisite must be satisfied for an update to occur. 
After all prerequisites are met, the zone's primary server can then proceed with an update of its local zones. Some examples of prerequisites that can be set are:</p>

<ul>
<p><li>A required resource record or resource record set already exists or is in use prior to an update.</li></p>

<p><li>A required resource record or resource record set does not exist or is not in use prior to an update.</li></p>

<p><li>A requester is permitted to initiate an update of a specified resource record or resource record set.</li></p>
</ul>



<p>For client computers to be registered and updated dynamically with a DNS server, either:</p>

<ul>
<p><li>Install or upgrade client computers to Windows 2000.</li></p>

<p><li>Install and use a Windows 2000 DHCP server on your network to lease client computers.</li></p>

</ul>


<p>
<img src="images/practic.JPG" width=90 height=72 border="0">
</p>

<A NAME="337"><H2>Practice: Enabling Dynamic Updates</H2></A>

<p>In this practice, you will allow for DNS client computers to register and dynamically update their resource records with a DNS server whenever changes occur by enabling dynamic updates for a DNS zone.</p>

<p><li><b>To allow dynamic updates</b></li></p>

<ol>
<p><li>Click Start, point to Programs, point to Administrative Tools, then click DNS.</li></p>


<p>The DNS administrative console appears.</p>


<p><li>In the console tree, right-click your zone, then click Properties.</li></p>


<p>The Zone Properties dialog box appears, as illustrated in Figure 8.3.</p>


<p><li>In the Allow Dynamic Updates list box, click Yes.</li></p>

<p><li>Click OK to close the Zone Properties dialog box.</li></p>

<p><li>Close the DNS administrative console.</li></p>


<p>
<img src="images/08ntk03.JPG" width=404 height=448 border="0">
</p><p>
<!-- caption --><b>Figure 8.3</b> <i>Zone Properties dialog box</i><!-- /caption -->
</p>

</ol>

<A NAME="338"><H2>Lesson Summary</H2></A>

<p>Delegation is a process of assigning responsibility for a portion of a DNS name space to a separate entity. The names server's resource records facilitate delegation by identifying DNS servers for each zone. They appear in all forward and reverse lookup zones. Windows 2000 provides client and server support for the use of dynamic updates. Dynamic updates enable DNS client computers to register 
and dynamically update their resource records with a DNS server whenever changes occur.</p>

</BODY>
</HTML>





