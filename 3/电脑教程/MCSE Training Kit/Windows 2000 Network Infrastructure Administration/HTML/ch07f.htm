<HTML>
<HEAD>
<TITLE>Lesson 5: Configuring DNS</TITLE>
<link rel="STYLESHEET" type="text/css" href="mmnet.css">

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</HEAD>
<BODY BGCOLOR="#ffffff" TEXT="#000000">
<A HREF="ch07e.htm">[Previous]</A> <A HREF="ch07g.htm">[Next]</A><P>



<A NAME="318"><H1>Lesson 5: Configuring DNS</H1></A>

<p>There are two ways to administrate the Microsoft DNS server: use the DNS 
Manager or manually edit the DNS configuration files. This lesson reviews the tools used to administer a DNS server.</p>

<p><div class="sidebar"><blockquote><b>After this lesson, you will be able to</b>

<ul>
<p><li>Administer a DNS server</li></p>

<p><li>Create a zone file and populate it with resource records</li></p>
</ul>



<p><b>Estimated lesson time: 60 minutes</b></p>
</blockquote></div></p>

<A NAME="319"><H2>Configuring DNS Server Properties</H2></A>

<p>The primary tool that you use to manage Windows 2000 DNS servers is the DNS console, illustrated in Figure 7.10. Because the DNS server has no initial information about a user's network, the DNS server installs as a caching-only name server for the Internet. This means that the DNS server contains only information on the Internet root servers. For most DNS server configurations, additional 
information must be supplied to obtain the preferred operation.</p>

<p><li><b>To open DNS</b></li></p>

<ol>
<p><li>Click Start, point to Programs, point to Administrative Tools, then click DNS.</li></p>


<p>
<A HREF="javascript:fullSize('07ntk10x.htm')"> <img src="images/07ntk10.JPG" width=404 height=286 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 7.10</b> <i>DNS settings in Microsoft Management Console (MMC)</i><!-- /caption -->
</p>

</ol>

<p><li><b>To configure a new DNS server</b></li></p>

<ol>
<p><li>Click Start, point to Programs, point to Administrative Tools, then click DNS.</li></p>

<p><li>Highlight your server. On the Action menu, click Configure The Server.</li></p>

<p><li>Follow the instructions in the Configure DNS Server Wizard.</li></p>


<p>In the Configure DNS Server Wizard, you can create one or more forward lookup zones. The type of zone you create can be</p>

<ul>
<p><li><b>Active Directory-integrated.</b> Active Directory-integrated DNS enables Active Directory storage and replication of DNS zone databases. Zone data is stored as an Active Directory object and is replicated as part of domain replication.</li></p>

<p><li><b>Standard primary.</b> Standard primary zones are required to create and manage zones in your DNS name space if you are not using Active Directory.</li></p>

<p><li><b>Standard secondary.</b> Standard secondary zones help balance the processing load of primary servers and provide fault tolerance.</li></p>
</ul>

<p><li>The next step in the New Zone Wizard is to create a forward or reverse lookup zone. If you select Forward lookup zone, you must provide a name for the new zone and then specify a zone file. If you select Reverse lookup zone, you must provide the network ID or zone name, and then specify a zone file.</li></p>

<p><li>Click Finish to close the wizard.</li></p>
</ol>

<A NAME="320"><H3>Manually Configuring DNS</H3></A>

<p>The DNS server can be configured manually by editing files in the default installation path \<i>system_root</i>\System32\Dns. Administration is identical to administration of traditional DNS. These files can be modified using a text editor, as illustrated in Figure 7.11. The DNS service must then be stopped and restarted.</p>


<p>
<A HREF="javascript:fullSize('07ntk11x.htm')"> <img src="images/07ntk11.JPG" width=404 height=239 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 7.11</b> <i>Editing the CACHE.DNS file</i><!-- /caption -->
</p>

<A NAME="321"><H2>Adding DNS Domains and Zones</H2></A>

<p>The first step in configuring the DNS server is to determine the hierarchy for your DNS domains and zones. Once the domain and zone information has been determined, this information must be entered into the DNS configuration using the DNS console.</p>

<A NAME="322"><H3>Adding Primary or Secondary Zones</H3></A>

<p>You add primary and secondary zones through the DNS console, as illustrated in Figure 7.12. After you enter your zone information, DNS Manager will construct a default zone file name. If the zone file already exists in the DNS directory, DNS console will automatically import these records.</p>


<p>
<A HREF="javascript:fullSize('07ntk12x.htm')"> <img src="images/07ntk12.JPG" width=404 height=288 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 7.12</b> <i>Creating a new zone with the DNS console</i><!-- /caption -->
</p>

<p>A primary zone stores name-to-address mappings locally. When you configure a primary zone, you need no information other than the zone name.</p>

<p>Secondary zones obtain name-to-address mappings from a master server by zone transfer. When you configure a secondary zone, you must supply the names for the zone and master name server.</p>

<p>Once all zones have been added to the server, subdomains under the zones can 
be added. If multiple levels of subdomains are needed, create each successive subdomain. There is a key written to the DNS registry entry for each zone 
for which the DNS will be authoritative. The keys are located under HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\DNS\Zones.</p>

<p>Each zone has its own key that contains the name of the database file, which 
indicates whether the DNS server is a primary or secondary name server. For 
example, for the zone dev.volcano.com, there is the following registry entry: HKEY_LOCAL_MACHINE\SYSTEM\\CurrentControlSet\Services\DNS\ Zones\dev.volcano.com.</p>

<A NAME="323"><H3>Configuring Zone Properties</H3></A>

<p>After you have successfully added a zone, you can configure and modify the zone properties (described in Table 7.6).</p>

<p><b>Table 7.6</b> <i>Zone Properties</i></p>

<p>
<table cellpadding=5 width="95%">
<tr> 
<th>Property  </th>
<th>Description  </th></tr>
<tr>
<td valign="top">General  </td>
<td valign="top">Configures the zone file in which the resource records are stored and 
 specifies whether this is a primary or secondary name server.  </td></tr>
<tr>
<td valign="top">SOA record  </td>
<td valign="top">Configures zone transfer information and the name server 
 administrator mailbox.  </td></tr>
<tr>
<td valign="top">Notify  </td>
<td valign="top">Specifies the secondary servers to be alerted when the primary server data- 
 base changes. Also, additional security can be applied to the name server 
 by specifying that only the listed secondary servers can contact this server.  </td></tr>
<tr>
<td valign="top">WINS lookup </td>
<td valign="top">Enables the name server to query WINS to resolve names. A list of WINS 
 servers can be configured in this dialog. The WINS servers can be set on 
 a per-name-server basis by selecting the Settings Only Affect Local 
 Server check box. If this is not selected, secondary servers will also use 
 the configured WINS servers.  </td></tr>
</table></p>

<p>
<img src="images/practic.JPG" width=90 height=72 border="0">
</p>

<A NAME="324"><H2>Practice: Configuring a DNS Server</H2></A>

<p>In this procedure, you configure the DNS server by adding a primary zone. 
Complete this procedure from the DNS server computer.</p>

<p>
<img src="images/cd.JPG" width=66 height=66 border="0">
</p>

<p>Before you continue with the lesson, run the Ch07b.exe demonstration file located in the Media folder on the Supplemental Course Materials CD-ROM that accompanies this book. The file provides an overview of configuring the DNS server service.</p>

<p><li><b>To add a zone to a server</b></li></p>

<ol>
<p><li>Right-click your computer name, then click New Zone.</li></p>

<p>The New Zone Wizard appears.</p>

<p><li>Click Next, select Standard Primary, then click Next.</li></p>

<p><li>Select Forward Lookup Zone, then click Next.</li></p>

<p><li>In the Name box, type <b>zone1.org</b> (where zone1.org is your zone name).</li></p>

<p><li>Click Create A New File With This File Name, then click Next.</li></p>


<p>Zone1.org.dns will be the file name (where zone1.org is your zone name).</p>


<p><li>Click Finish to create the new zone.</li></p>


<p>The Forward Lookup Zones folder now contains your new zone, as illustrated in Figure 7.13.</p>
<p>
<A HREF="javascript:fullSize('07ntk13x.htm')"> <img src="images/07ntk13.JPG" width=404 height=205 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 7.13</b> <i>Zone added to the Forward Lookup Zones folder</i><!-- /caption -->
</p>
</ol>


<A NAME="325"><H2>Adding Resource Records</H2></A>

<p>Once the zones and subdomains are configured, resource records can be added. To create a new host, right-click a zone or subdomain and then click New Host, as illustrated in Figure 7.14. Simply type the host name and click Add Host, and the host record will be created.</p>


<p>
<A HREF="javascript:fullSize('07ntk14x.htm')"> <img src="images/07ntk14.JPG" width=404 height=333 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 7.14</b> <i>Adding a new host</i><!-- /caption -->
</p>

<p>To create a record of a different type, right-click a zone or subdomain and 
then click Other New Records. Next, select which resource record type to create. A dialog box displays various fields specific to record type, as illustrated in 
Figure 7.15.</p>


<p>
<img src="images/07ntk15.JPG" width=384 height=379 border="0">
</p><p>
<!-- caption --><b>Figure 7.15</b> <i>Selecting a type of record to create</i><!-- /caption -->
</p>

<A NAME="326"><H2>Configuring Reverse Lookup</H2></A>

<p>To find a host name, given the host's IP address, a reverse lookup zone must be created for each network on which hosts in the DNS database reside. Adding a reverse lookup zone is procedurally identical to adding any other type of zone, except for the zone name. For example, if a host has an address of 198.231.25.89, it would be represented in the in-addr.arpa domain as 89.25.231.198.in-addr.arpa. Furthermore, to enable this host to appear to a client who has its IP address, a zone would need to be added to the DNS for 25.231.198.in-addr.arpa. All PTR records for the network 198.231.25.0 would be added to this reverse lookup zone.</p>

<A NAME="327"><H2>Lesson Summary</H2></A>

<p>The first step in configuring Windows 2000 DNS server is to determine the 
hierarchy for your DNS domains and zones. Once the zones and subdomains are configured, resource records can be added. To find a host name, given the host's IP address, a reverse lookup zone must be created for each network on which hosts in the DNS database reside.</p>

</BODY>
</HTML>





