<!DOCTYPE html SYSTEM "msxhtml1-strict.dtd">
<html lang="en" xml:lang="en">
<head>
<link rel="stylesheet" type="text/css" href="styles.css" />
<script type="text/javascript" language="JavaScript" src="expando.js"></script>
<title>Lesson 3: Using Security Logs</title>


</head>
<body>
<div class="prevnext"><p><a href="ch21c.htm">3</a> <a href="ch21e.htm">4</a></p></div>

<h1><a name="1572">Lesson 3: Using Security Logs</a></h1>


<p>The security log contains information on security events that are specified in the audit policy. To view the security log, you use the Event Viewer console. Event Viewer also allows you to find specific events within log files, filter the events shown in log files, and archive security log files.</p>

<hr />
<p><b>After this lesson, you will be able to</b></p>

<ul>
<li>View a log</li>

<li>Locate events in a log</li>

<li>Filter events in a log</li>

<li>Configure the size of audit logs</li>

<li>Archive security logs</li>
</ul>

<p><b>Estimated lesson time: 25 minutes</b></p>
<hr />

<h2><a name="1573">Understanding Windows 2000 Logs</a></h2>


<p>You use the Event Viewer console to view information contained in Windows 2000 logs. By default, there are three logs available to view in Event Viewer. These logs are described in Table 21.9.</p>

<p><b>Table 21.9</b> <i>Logs Maintained by Windows 2000</i></p>
<table>
<tr>
<th>Log</th>
<th>Description</th>
</tr><tr>
<td>Application log</td>
<td>Contains errors, warnings, or information generated by programs such as a database program or an e-mail program. The program developer presets which events to record.</td>
</tr><tr>
<td>Security log</td>
<td>Contains information about the success or failure of audited events. The events that Windows 2000 records are a result of your audit policy.</td>
</tr><tr>
<td>System log</td>
<td>Contains errors, warnings, and information generated by Windows 2000. Windows 2000 presets which events to record.</td>
</tr>
</table>

<p>Application and system logs can be viewed by all users. Security logs are accessible only to system administrators. By default, security logging is turned off. To enable security logging, you must use group policy at the appropriate level to set up an audit policy.</p>

<blockquote><div class="note"><b>NOTE</b><hr />
If additional services are installed, they might add their own event log. For example, the Domain Name System (DNS) Service logs events that this service generates in the DNS server log.</div></blockquote>

<h2><a name="1574">Viewing Security Logs</a></h2>


<p>The security log contains information about events that are monitored by an audit policy, such as failed and successful logon attempts.</p>

<p><b>Follow these steps to view the security log:</b></p>

<ol>
<li>Click Start, point to Programs, point to Administrative Tools, and then click Event Viewer.</li>

<li>In the console tree, select Security Log.
<p>In the details pane, Event Viewer displays a list of log entries and summary information for each item, as shown in Figure 21.8.</p>

<p>Successful events appear with a key icon and unsuccessful events appear with a lock icon. Other important information includes the date and time that the event occurred, the category of the event, and the user who generated the event.</p>


<p>The category indicates the event category, such as object access, account management, directory service access, or logon events.</p></li>
</ol>

<div class="figure">
<a href="javascript:fullSize('F21cc08x.htm')"><img src="images/F21cc08.JPG" /></a>
<div class="caption"><b>Figure 21.8</b> <i>Event Viewer displaying a sample security log</i>
</div>
</div>


<ol start="3">
<li>To view additional information for any event, double-click the event.</li>
</ol>

<p>Windows 2000 records events in the security log on the computer at which the event occurred. You can view these events from any computer as long as you have administrative privileges for the computer where the events occurred.</p>


<p><b>Follow these steps to view the security log on a remote computer:</b></p>
<ol>
<li>Ensure that security auditing has been enabled on a remote machine. (See <a href="ch21c.htm">Lesson 2</a>, &quot;<a href="ch21c.htm#1553">Auditing</a>,&quot; for details.)</li>

<li>Click Start, point to Programs, point to Administrative Tools, and then click Event Viewer.</li>

<li>Right-click the Event Viewer (Local) node and select Connect To Another Computer.</li>

<li>In the Select Computer dialog box, click Another Computer and type the network name, IP address, or DNS address for the computer for which Event Viewer will display a security log. You can also browse for the computer name.</li>

<li>Click OK.</li>
</ol>

<h2><a name="1575">Locating Events</a></h2>


<p>When you first start Event Viewer, it automatically displays all events that are recorded in the security log. You can search for specific events by using the Find command.</p>

<p><b>Follow these steps to find events:</b></p>

<ol>
<li>Start Event Viewer, click the security log, and then click Find on the View menu.</li>

<li>On the Find In dialog box for the security log, configure the options shown in Figure 21.9 and described in Table 21.10.</li>
</ol>
<p><b>Table 21.10</b> <i>Options on the Find In Dialog Box</i></p>
<table>
<tr>
<th>Option</th>
<th>Description</th>
</tr><tr>
<td>Event Types</td>
<td>Check boxes that indicate the types of events to find. In the security log you can only find audit events, because others are not recorded.</td>
</tr><tr>
<td>Event Source</td>
<td>A list that indicates the software or component driver that logged the event.</td>
</tr><tr>
<td>Category</td>
<td>A list that indicates the event category, such as a logon or logoff attempt or a system event.</td>
</tr><tr>
<td>Event ID</td>
<td>An event number to identify the event. This number helps product support representatives track events.</td>
</tr><tr>
<td>User</td>
<td>A user logon name.</td>
</tr><tr>
<td>Computer</td>
<td>A computer name.</td>
</tr><tr>
<td>Description</td>
<td>Text that is in the description of the event.</td>
</tr><tr>
<td>Search Direction</td>
<td>The direction in which to search the log (up or down).</td>
</tr><tr>
<td>Find Next</td>
<td>Finds and selects the next occurrence defined by the Find settings.</td>
</tr>
</table>

<div class="figure">
<img src="images/F21cc09.JPG" />
<div class="caption"><b>Figure 21.9</b> <i>The Find In dialog box for a security log</i></div></div>


<h2><a name="1576">Filtering Events</a></h2>


<p>An event log can contain a lot of information that may not be of use in specific circumstances. For example if you want to see an attempt to write to a text file without the necessary permissions, you might have to dig through hundreds of non-related events before finding what you want. To show specific events that appear in the security log you can reduce the number of events to display by using the Filter command.</p>

<p><b>Follow these steps to filter events:</b></p>

<ol>
<li>Start Event Viewer, click the security log, and then click Filter on the View menu.</li>

<li>In the Security Log Properties dialog box, in the Filter tab, configure the options shown in Figure 21.10 and described in Table 21.11.</li>
</ol>
<p><b>Table 21.11</b> <i>Options on the Filter Tab of the Security Log Properties Dialog Box</i></p>
<table>
<tr>
<th>Option</th>
<th>Description</th>
</tr><tr>
<td>Event Types</td>
<td>Check boxes that indicate the types of events to filter. In the security log you can only filter using audit events, because others are not recorded.</td>
</tr><tr>
<td>Event Source</td>
<td>A list that indicates the software or component driver that logged the event.</td>
</tr><tr>
<td>Category</td>
<td>A list that indicates the type of event, such as a logon or logoff attempt or a system event.</td>
</tr><tr>
<td>Event ID</td>
<td>An event number to identify the event. This number helps product support representatives track events.</td>
</tr><tr>
<td>User</td>
<td>A user logon name.</td>
</tr><tr>
<td>Computer</td>
<td>A computer name.</td>
</tr><tr>
<td>From</td>
<td>The beginning of the range of events that you want to filter. In the list under From, select First Event to see events starting with the first event in the log. Select Events On to see events that occurred starting at a specific time and date.</td>
</tr><tr>
<td>To</td>
<td>The end of the range of events that you want to filter. In the list under To, select Last Event to see events ending with the last event in the log. Select Events On to see events that occurred ending at a specific time and date.</td>
</tr>
</table>

<div class="figure">
<img src="images/F21cc10.JPG" />
<div class="caption"><b>Figure 21.10</b> <i>The Filter tab of the Security Log Properties dialog box</i></div></div>


<h2><a name="1577">Configuring Security Logs</a></h2>


<p>Security logging begins when you set an audit policy for the domain controller or local computer. Logging stops when the security log becomes full and cannot overwrite itself, either because it has been set for manual clearing or because the first event in the log is not old enough. When security logging stops, an error may be written to the application log. You can avoid a full security log by logging only key events. You can configure the properties of each individual audit log.</p>

<p><b>Follow these steps to configure the settings for security logs:</b></p>

<ol>
<li>Open Event Viewer.</li>

<li>Right-click the security log in the console tree, and then click Properties.</li>

<li>In the Security Log Properties dialog box, in the General tab, configure the options shown in Figure 21.11 and described in Table 21.12.</li>
</ol>
<p><b>Table 21.12</b> <i>Options on the General Tab of the Security Log Properties Dialog Box</i></p>
<table>
<tr>
<th>Option</th>
<th>Description</th>
</tr><tr>
<td>Display Name</td>
<td>The name of the log view. You can change the name to distinguish different views of the same log on one computer or to distinguish logs on different computers.</td>
</tr><tr>
<td>Log Name</td>
<td>The name and location of the log file.</td>
</tr><tr>
<td>Maximum Log Size</td>
<td>The size of each log, which can be from 64 KB to 4,194,240 KB (4 GB). The default size is 512 KB.</td>
</tr><tr>
<td>Overwrite Events As Needed</td>
<td>Specifies whether all new events will be written to the log, even when the log is full. When the log is full, each new event replaces the oldest event. Use this option with caution; it can be used to hide undesirable events.</td>
</tr><tr>
<td>Overwrite Events Older Than X Days</td>
<td>Specifies the number of days (1 to 365) that a log file is retained before it is overwritten. New events will not be added if the maximum log size is reached and there are no events older than this period.</td>
</tr><tr>
<td>Do Not Overwrite Events (Clear Log Manually)</td>
<td>Specifies whether existing events will be retained when the log is full. If the maximum log size is reached, new events are discarded. This option requires you to manually clear the log.</td>
</tr><tr>
<td>Using A Low Speed Connection</td>
<td>Specifies whether the log file is located on another computer, and whether your computer is connected to it by a low-speed device, such as a modem.</td>
</tr>
</table>

<div class="figure">
<img src="images/F21cc11.JPG" />
<div class="caption"><b>Figure 21.11</b> <i>The General tab of the Security Log Properties dialog box</i></div></div>


<p>When the log is full and no more events can be logged, you can free the log by manually clearing it. Clearing the log erases all events permanently. Reducing the amount of time you keep an event also frees the log if it allows the next record to be overwritten.</p>

<p><b>Follow these steps to manually clear the security log:</b></p>

<ol>
<li>Open Event Viewer.</li>

<li>Right-click the security log in the console tree, and then click Clear All Events.</li>

<li>On the Event Viewer message box

<ul>
<li>Click Yes to archive the log before clearing</li>

<li>Click No to permanently discard the current event records and start recording new events</li>
</ul></li>

<li>If you clicked Yes, in the Save As dialog box, in the File Name list, type a name to use for the log file to be archived.</li>

<li>In the Save As Type list, click a file format, and then click Save.</li>
</ol>

<h2><a name="1578">Archiving Security Logs</a></h2>


<p>Archiving security logs allows you to maintain a history of security-related events. Many organizations have policies on keeping archive logs for a specified period to track security-related information over time. When you archive a log file, the entire log is saved, regardless of filtering options.</p>

<p><b>Follow these steps to archive a security log:</b></p>

<ol>
<li>Open Event Viewer.</li>

<li>Right-click the security log in the console tree, and then click Save Log File As.</li>

<li>In the Save As dialog box, in the File Name list, type a name to use for the log file to be archived.</li>

<li>In the Save As Type list, click a file format, and then click Save.</li>
</ol>
<p>If you archive a log in log-file format you can reopen it in Event Viewer. Logs saved as event log files (*.evt) retain the binary data for each event recorded. If you archive a log in text or comma-delimited format (*.txt and *.csv, respectively), you can reopen the log in other programs such as word processing or spreadsheet programs. Logs saved in text or comma-delimited format do not retain the binary data.</p>

<p><b>Follow these steps to view an archived security log:</b></p>

<ol>
<li>Open Event Viewer.</li>

<li>Right-click the security log in the console tree, and then click Open Log File.</li>

<li>In the Open dialog box, click the file you want to open. You may need to search for the drive or folder that contains the document.</li>

<li>In the Log Type list, select Security for the type of log to be opened.</li>

<li>In the Display Name box, enter the name of the file as you want it to appear in the console tree, and then click Open.</li>
</ol>
<p>To remove an archived log file from your system, delete the file in Windows Explorer.</p>

<p><img src="images/practice.jpg" /></p>

<h2><a name="1579">Practice: Using the Security Log</a></h2>


<p>In this practice you view the security log file and configure Event Viewer to overwrite events when the log file is filled. You then clear and archive a security log file.</p>

<blockquote><div class="caution"><b>IMPORTANT</b><hr />
Before attempting the exercises in this practice, you must first complete all exercises in <a href="ch21c.htm">Lesson 2</a>.</div></blockquote>

<h3><a name="1580">Exercise 1: Viewing the Security Log</a></h3>


<p>In this exercise you view the security log for your computer. Then, you use Event Viewer to filter events and to search for potential security breaches.</p>

<p>To view the security log for your computer</p>

<ol>
<li>Click Start, click Programs, click Administrative Tools, and then click Event Viewer.</li>

<li>In the console tree, click the security log and view the contents. As you scroll through the log, double-click a couple of events to view a description.</li>
</ol>

<h3><a name="1581">Exercise 2: Managing the Security Log</a></h3>


<p>In this exercise you configure Event Viewer to overwrite events when the log file gets full.</p>

<p>To configure the size and contents of the security log file</p>

<ol>
<li>Right-click the security log in the console tree, and then click Properties.</li>

<li>In the Security Log Properties dialog box, click Overwrite Events As Needed.</li>

<li>In the Maximum Log Size box, change the maximum log size to 2048 KB, and then click OK.

<p>Windows 2000 now allows the log to grow to 2048 KB and will overwrite older events with new events as necessary.</p></li>
</ol>

<h3><a name="1582">Exercise 3: Clearing and Archiving the Security Log</a></h3>


<p>In this exercise you clear the security log, archive a security log, and view the archived security log.</p>

<p>To clear and archive the security log</p>

<ol>
<li>Open Event Viewer.</li>

<li>Right-click the security log in the console tree, and then click Clear All Events.</li>

<li>In the Event Viewer message box, click Yes to archive the log before clearing.</li>

<li>In the Save As dialog box, in the File Name list, type <b>archive</b> to name the log file to be archived.</li>

<li>In the Save As Type list, ensure that the Event Log (*.evt) file type is selected, and then click Save.</li>

<li>To view the archived security log, right-click the security log in the console tree, and then click Open Log File.</li>

<li>On the Open dialog box, click the ARCHIVE.EVT file (or the name of the file you archived).</li>

<li>In the Log Type list, select Security for the type of log to be opened.</li>

<li>In the Display Name box, ensure that Saved Security Log appears, and then click Open.
<p>The Saved Security Log appears in Event Viewer. You cannot click Refresh or Clear All Events to update the display or to clear an archived log.</p></li>


<li>Close Event Viewer.</li>
</ol>

<h2><a name="1583">Lesson Summary</a></h2>


<p>In this lesson you learned about the Windows 2000 security log. You learned how to use Event Viewer to view the contents of the Windows 2000 security logs, to locate and display specific events in security logs, to configure log size, and to archive security logs.</p>

<p>In the practice portion of this lesson you viewed the security log file and configured Event Viewer to overwrite events when the log file is filled. You then cleared and archived a security log file.</p>

</body>
</html>



