<!DOCTYPE html SYSTEM "msxhtml1-strict.dtd">
<html lang="en" xml:lang="en">
<head>
<link rel="stylesheet" type="text/css" href="styles.css" />
<script type="text/javascript" language="JavaScript" src="expando.js"></script>
<title>Lesson 1: Basic Concepts of IP Routing</title>


</head>
<body>
<div class="prevnext"><p><a href="ch09a.htm">3</a> <a href="ch09c.htm">4</a></p></div>

<h1><a name="666">Lesson 1: Basic Concepts of IP Routing</a></h1>


<p>Routing is the process of choosing a path over which to send packets, which is a primary function of the internet protocol (IP). A router (commonly referred to as a gateway) is a device that forwards packets from one physical network to another. When a router receives a packet, the network adapter forwards the datagrams to the IP layer. IP examines the destination address on the datagram and then compares it to an IP routing table. A decision is then made as to where the packet is to be forwarded. This lesson explains basic IP routing concepts.</p>

<hr />
<p><b>After this lesson, you will be able to</b></p>
<ul>
<li>Update a Windows 2000&#8212;based routing table by means of static routes</li>
<li>Manage and monitor internal routing</li>
<li>Manage and monitor border routing</li>
</ul>
<p><b>Estimated lesson time: 40 minutes</b></p>
<hr />

<h2><a name="667">Overview of Routing</a></h2>


<p>A router helps local area networks (LANs) and wide area networks (WANs) to achieve interoperability and connectivity, and can link LANs that have different network topologies, such as Ethernet and Token Ring. Each packet sent over a LAN has a packet header that contains source and destination address fields. Routers match packet headers to a LAN segment and choose the best path for the packet, optimizing network performance. As each route is found, the packet is sent to the next router, called a <i>hop</i>, until finally delivered to the destination host. If a route is not found, an error message is sent to the source host. For example, if a packet is sent from Computer A to Computer C, as illustrated in Figure 9.1, the best route uses only one hop. If Router 1 is the default router for Computer A, the packet will be rerouted through Router 2. Computer A will be notified of the better route by which to send packets to Computer C.</p>

<div class="figure">
<a href="javascript:fullSize('F09cc01x.htm')"><img src="images/F09cc01.JPG" /></a>
<div class="caption"><b>Figure 9.1</b> <i>Packet routed from Computer A to Computer C</i>
</div>
</div>


<p>To make routing decisions, the IP layer consults a routing table that is stored in memory, as illustrated in Figure 9.2.</p>

<div class="figure">
<a href="javascript:fullSize('F09cc02x.htm')"><img src="images/F09cc02.JPG" /></a>
<div class="caption"><b>Figure 9.2</b> <i>IP layer consulting a routing table</i>
</div>
</div>

<p>A routing table contains entries with the IP addresses of router interfaces to other networks that it can communicate with. A routing table is a series of entries, called <i>routes</i>, that contain information about where the network IDs of the internetwork are located. A routing table in a computer that is running Windows 2000 is built automatically, based on its TCP/IP configuration. You can view a routing table by typing <b>route print</b> at a command prompt, as illustrated in Figure 9.3.</p>

<div class="figure">
<a href="javascript:fullSize('F09cc03x.htm')"><img src="images/F09cc03.JPG" /></a>
<div class="caption"><b>Figure 9.3</b> <i>Displaying a routing table using a command prompt</i>
</div>
</div>


<blockquote><div class="note"><b>NOTE</b><hr />
The routing table is not exclusive to a router. A host also has a routing table that is used to determine the optimal route.
</div></blockquote>

<h2><a name="668">Static and Dynamic IP Routing</a></h2>


<p>Routers use different processes to obtain routing information depending on whether the router performs static or dynamic IP routing. Static routing is a function of IP that limits you to fixed routing tables. Static routing requires that routing tables are built and updated manually. You use the Route command to add static entries to the routing table (see Table 9.1).</p>

<p><b>Table 9.1</b><i> Route Commands</i></p>

<table>
<tr><th>To add or modify a static route, type the following:</th><th>Purpose</th></tr>
<tr><td><b>route add [</b><i>network</i><b>] mask [</b><i>netmask</i><b>] [</b><i>gateway</i><b>]</b></td><td>Adds a route</td></tr>
<tr><td><b>route -p add [</b><i>network</i><b>] mask [</b><i>netmask</i><b>] [</b><i>gateway</i><b>]</b></td><td>Adds a persistent route</td></tr>
<tr><td><b>route delete [</b><i>network</i><b>] [</b><i>gateway</i><b>]</b></td><td>Deletes a route</td></tr>
<tr><td><b>route change [</b><i>network</i><b>] [</b><i>gateway</i><b>]</b></td><td>Modifies a route</td></tr>
<tr><td><b>route print</b></td><td>Displays the routing table</td></tr>
<tr><td><b>route -f</b></td><td>Clears all routes</td></tr>
</table>

<p><img src="images/practice.jpg" /></p><h2><a name="669">Practice: Updating a Windows 2000-Based Routing Table</a></h2>


<p>In this practice, you update a Windows 2000-based routing table by means of static routers.</p>

<h3><a name="670">Exercise 1: Updating a Routing Table</a></h3>


<ol>
<li>On Pro1, open a command prompt.</li>
<li>At the command prompt, type <b>route add <i>IP_ address</i> mask <i>net_mask gateway</i></b> to add a route to enable communications with a network from a host on another network.
<p>For example, to add a route to enable communications with network 10.107.24.0 from a host on network 10.107.16.0, you would type <b>route add 10.107.24.0 mask 255.255.255.0 10.107.16.2</b>, as illustrated in Figure 9.4.</p></li>
<li>At the command prompt, type <b>route print</b> to see the addition of the route in your routing table.</li>
<li>At the command prompt, type <b>route del <i>IP_address</i></b> (the same IP address you used in step 2) to delete the route you just added.</li>
<li>Verify the route has been removed from the routing table by typing <b>route print</b> again.</li>
</ol>

<div class="figure">
<a href="javascript:fullSize('F09cc04x.htm')"><img src="images/F09cc04.JPG" /></a>
<div class="caption"><b>Figure 9.4</b> <i>Adding a static route to a routing table</i>
</div>
</div>


<h3><a name="671">Using Dynamic Routing</a></h3>


<p>If a route changes, static routers do not inform each other of the change. Neither do static routers exchange routes with dynamic routers. In contrast, dynamic routing automatically updates the routing tables, reducing administrative overhead. However, dynamic routing increases traffic in large networks.</p>

<h3><a name="672">Routing Protocols</a></h3>


<p>Dynamic routing is a function of routing protocols, such as the Routing Information Protocol (RIP) and Open Shortest Path First (OSPF). Routing protocols periodically exchange routes to known networks among dynamic routers. If a route changes, other routers are automatically informed of the change. You must have multiple network adapters (one per network) on a Windows 2000 Server or Windows 2000 Advanced Server. In addition, you must install and configure Routing and Remote Access because dynamic routing protocols are not installed by default when you install Windows 2000.</p>

<p>Windows 2000 offers two primary IP routing protocols: The Routing Information Protocol (RIP) and the Open Shortest Path First (OPFS) protocol. You can choose one or the other depending on such factors as network size and topology. These routing protocols are explained in the next two sections.</p>

<h3><a name="673">Routing Information Protocol (RIP)</a></h3>


<p>RIP is a routing protocol provided for backwards compatibility with existing RIP networks. RIP allows a router to exchange routing information with other RIP routers to make them aware of any change in the internetwork layout. RIP broadcasts the information to neighboring routers, and sends periodic RIP broadcast packets containing all routing information known to the router. These broadcasts keep all internetwork routers synchronized.</p>

<h3><a name="674">Open Shortest Path First (OSPF)</a></h3>


<p>OSPF is a routing protocol that enables routers to exchange routing information and create a map of the network that calculates the best possible path to each network. Upon receiving changes to this map (actually a database, called the link-state database), the routing table is recalculated. As the size of the link-state database increases, memory requirements and route computation times increase. To address this scaling problem, OSPF divides the inter-network into collections of contiguous networks called areas. Areas are connected to each other through a backbone area. A backbone router in OSPF is a router that is connected to the backbone area. Backbone routers include routers that are connected to more than one area. However, backbone routers do not have to be Area Border Routers (ABRs). Routers that have all networks connected to the backbone are internal routers.</p>

<p>Each router only keeps a link-state database for those areas that are connected to the router. ABRs connect the backbone area to other areas, as illustrated in Figure 9.5.</p>

<div class="figure">
<a href="javascript:fullSize('F09cc05x.htm')"><img src="images/F09cc05.JPG" /></a>
<div class="caption"><b>Figure 9.5</b> <i>A basic OSPF area design</i>
</div>
</div>

<p>An OSPF-routed environment is best suited to a large to very large, multipath, dynamic IP internetwork such as a corporate or institutional campus or worldwide corporate or institutional internetwork.</p>

<p>The following are guidelines for managing your internal and border routers.</p>

<ul>
<li>Ensure that the ABRs for the area are configured with the proper pairs (Destination, Network Mask) that summarize that area's routes.</li>

<li>Ensure that the source and route filtering configured on the ABR is not too restrictive, thus preventing proper routes from being propagated to the OSPF autonomous system. External source and route filtering is configured on the External Routing tab in the OSPF Routing Protocol Properties dialog box.</li>

<li>Ensure that all ABRs are either physically connected to the backbone or logically connected to the backbone by using a virtual link. There should not be backdoor routers, which are routers that connect two areas without going through the backbone.</li>
</ul>



<p><b>Follow these steps on Server01 (the Windows 2000 Server) to administer a router:</b></p>

<ol>
<li>Click Start, point to Programs, point to Administrative Tools, and then click Routing And Remote Access.</li>

<li>In the console tree, right-click Server Status, then click Add Server.</li>

<li>In the Add Server dialog box, do one of the following:

<ul>
<li>Click The Following Computer, and type the computer name or IP address of the server.</li>

<li>Click All Routing And Remote Access Servers In The Domain, and then type the name of the domain containing the server you want to administer. Click OK, and then select the server.</li>

<li>Click Browse The Active Directory, click Next, and in the Find Routers Or Remote Access Servers dialog box, select the check boxes next to the types of servers that you want to search for. Click OK, and then select the server.</li>
</ul></li>
</ol>


<p>You can administer a remote server once it appears as an item in the console tree.</p>

<h2><a name="675">Lesson Summary</a></h2>


<p>Routers forward packets from one physical network to another. The IP layer consults a routing table that is stored in memory. A routing table contains entries with the IP addresses of router interfaces to other networks. Static routers require that routing tables be built and updated manually. With dynamic routing, if a route changes, other routers are automatically informed 
of the change.</p>

</body>
</html>



