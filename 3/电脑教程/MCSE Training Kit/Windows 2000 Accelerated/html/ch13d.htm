<!DOCTYPE html SYSTEM "msxhtml1-strict.dtd">
<html lang="en" xml:lang="en">
<head>
<link rel="stylesheet" type="text/css" href="styles.css" />
<script type="text/javascript" language="JavaScript" src="expando.js"></script>
<title>Lesson 4: Configuring WINS Replication</title>


</head>
<body>
<div class="prevnext"><p><a href="ch13c.htm">3</a> <a href="ch13e.htm">4</a></p></div>

<h1><a name="1029">Lesson 4: Configuring WINS Replication</a></h1>


<p>All WINS servers on an internetwork can be configured to fully replicate data-base entries with other WINS servers. This ensures that a name registered with one WINS server is eventually replicated to all other WINS servers. This lesson explains how WINS database entries are replicated to other WINS servers.</p>

<hr />
<p><b>After this lesson, you will be able to</b></p>
<ul>
<li>Add a replication partner</li>
<li>Perform WINS database replication</li>
</ul>
<p><b>Estimated lesson time: 20 minutes</b></p>
<hr />

<h2><a name="1030">Replication Overview</a></h2>


<p>Database replication occurs whenever the database changes, including when a name is released. Replicating databases enables a WINS server to resolve NetBIOS names of hosts registered with another WINS server. For example, if a host on Subnet 1 is registered with a WINS server on the same subnet but wants to communicate with a host on Subnet 2 and that host is registered with a different WINS server, the NetBIOS name cannot be resolved unless the two WINS servers have replicated their databases with each other.</p>

<p>To replicate database entries, each WINS server must be configured as either a pull or a push partner with at least one other WINS server. A push partner is a WINS server that sends a message to its pull partners notifying them when its WINS database has changed. When a WINS server's pull partners respond to the message with a replication request, the WINS server sends a copy of its new database entries (replicas) to its pull partners.</p>

<p>A pull partner is a WINS server that requests new database entries (replicas) from its push partners. This is done by requesting entries with a higher version number than the last entries it received during the last replication.</p>

<blockquote><div class="note"><b>NOTE</b><hr />
WINS servers replicate only new entries in their database. The entire WINS database is not replicated each time replication occurs.</div></blockquote>

<h2><a name="1031">Configuring a WINS Server as a Push or Pull Partner</a></h2>


<p>Determining whether to configure a WINS server as a pull partner or push partner depends on your network environment. Remember the following rules when configuring WINS server replication:</p>

<ul>
<li>You must configure a push partner when servers are connected by fast links, because push replication occurs when the configured number of updated WINS database entries is reached.</li>

<li>You must configure a pull partner between sites, especially across slow links, because pull replication can be configured to occur at specific intervals.</li>

<li>You must configure each server to be both a push and pull partner to replicate database entries between them.</li>
</ul>

<blockquote><div class="note"><b>NOTE</b><hr />
You configure a WINS server as a push or pull partner with the WINS administration tool.</div></blockquote>

<div class="figure">
<a href="javascript:fullSize('F13cc11x.htm')"><img src="images/F13cc11.JPG" /></a>
<div class="caption"><b>Figure 13.11</b> <i>Push and pull partner configuration</i>
</div>
</div>

<p>When you apply these rules to the environment depicted in Figure 13.11, you must configure the server in the following manner.</p>

<ul>
<li>In both Sydney and Seattle, all WINS servers at each site push their new database entries to a single server at their site.</li>

<li>The servers that receive the push replication are configured for pull replication between each other because the network link between Sydney and Seattle is relatively slow. Replication should occur when the link is the least used, such as late at night.</li>
</ul>

<h2><a name="1032">Configuring Database Replication</a></h2>


<p>Database replication requires that you configure at least one push partner and one pull partner. There are four methods of starting the replication of the WINS database:</p>

<ol>
<li>At system startup. Once a replication partner is configured, by default, WINS automatically pulls database entries each time WINS is started. The WINS server can also be configured to push on system startup.</li>

<li>At a configured interval, such as every 5 hours.</li>

<li>When a WINS server has reached a configured threshold for the number of registrations and changes to the WINS database. When the threshold (the update count setting) is reached, the WINS server notifies all of its pull partners, which will then request the new entries.</li>

<li>By forcing replication in the WINS administrative console, as illustrated in Figure 13.12.</li>
</ol>

<div class="figure">
<img src="images/F13cc12.JPG" />
<div class="caption"><b>Figure 13.12</b> <i>Forcing WINS database replication</i></div></div>

<p><img src="images/practice.jpg" /></p>
<h2><a name="1033">Practice: Performing WINS Database Replication</a></h2>


<p>In this practice, you configure your WINS server to perform database replication with another WINS server.</p>

<blockquote><div class="note"><b>NOTE</b><hr />
To complete this practice you first need to configure your second computer (Server02) as a WINS server.</div></blockquote>

<h3><a name="1034">Exercise 1: Configuring WINS Replication Partners</a></h3>


<p>In this exercise, you configure your second computer (Server02, a WINS server) as a replication partner.</p>

<ol>
<li>Open the WINS administrative console.</li>

<li>Right-click the Replication Partners folder under your WINS server, and then click New Replication Partner.
<p>The New Replication Partners dialog box appears.</p></li>
 
<li>In the WINS Server box, type an IP address of a partner WINS server, and then click OK.
<p>The Replication Partners dialog box appears with your IP address added to the list of WINS servers, as illustrated in Figure 13.13.</p></li>
</ol>

<div class="figure">
<a href="javascript:fullSize('F13cc13x.htm')"><img src="images/F13cc13.JPG" /></a>
<div class="caption"><b>Figure 13.13</b> <i>Replication partners listed in the WINS administrative console</i>
</div>
</div>

<ol start="4">
<li>Right-click the replication partner that you just added in the right pane, and then click Properties.
<p>The Server Properties dialog box appears.</p></li>

<li>Click the Advanced tab.</li>

<li>In the Replication Partner Type drop-down list box, select Pull.</li>

<li>The replication interval is set for 30 minutes.</li>

<li>Click OK.</li>
</ol>

<h3><a name="1035">Exercise 2: Forcing Replication</a></h3>


<p>In this exercise, you force WINS to replicate the WINS database with the WINS server.</p>

<ol>
<li>Right-click on the Replication Partners folder.</li>

<li>From the Context menu, click Replicate Now.
<p>A dialog box appears asking you if you are sure you want to start
replication.</p></li>

<li>Click Yes.
<p>A message box appears indicating the replication request has been queued.</p></li>

<li>Click OK.</li>
</ol>

<h3><a name="1036">Planning How Many WINS Servers to Use</a></h3>


<p>On a smaller network, a single WINS server can adequately service up to 10,000 clients for NetBIOS name resolution requests. To provide additional fault tolerance, you can configure a second computer running Windows 2000 Server as a backup WINS server for clients. If you use only two WINS servers, you can easily set them up as replication partners of each other. For simple replication between two servers, one server should be set as a pull partner and the other as a push partner. Replication can be either manual or automatic, which you can configure by selecting the Enable Automatic Partner Configuration check box in the Advanced tab of the Replication Partner Properties dialog box.</p>

<p>A larger network sometimes requires more WINS servers for several reasons, including, most importantly, the number of client connections per server. The number of users that each WINS server can support varies with usage patterns, data storage, and the processing capabilities of the WINS server computer. Some enterprise network environments require more robust hardware to handle WINS activity, so you might benefit from upgrading the server computer. When planning your servers, remember that each WINS server can simultaneously handle hundreds of registrations and queries per second. Any number of WINS servers can be specified for fault tolerance purposes. However, you should avoid deploying large numbers of WINS servers unless they are definitely necessary. By limiting the number of WINS servers on your network, you minimize traffic that results from replication, provide more effective NetBIOS name resolution, and reduce administrative requirements.</p>

<h3><a name="1037">WINS Automatic Replication Partners</a></h3>


<p>If your network supports multicasting, the WINS server can be configured to automatically find other WINS servers on the network by multicasting to the IP address 224.0.1.24. This multicasting occurs by default every 40 minutes. Any WINS servers found on the network are automatically configured as push and pull replication partners, with pull replication set to occur every 2 hours. If network routers do not support multicasting, the WINS server will find only other WINS servers on its subnet. Automatic WINS server partnerships are turned off by default. To manually disable this feature, use the Registry Editor to set UseSelfFndPnrs to 0 and McastIntvl to a large value.</p>

<h2><a name="1038">Backing Up the WINS Database</a></h2>


<p>The WINS console provides backup tools so that you can back up and restore the WINS database. When WINS backs up the server database, it creates a \Wins_bak\New folder under the backup folder you have specified as the Default backup path in Server Properties. Actual backups of the WINS database (WINS.MDB) are stored in this folder. By default, the backup path is the root folder on your system partition, such as C:\. After you specify a backup folder for the database, WINS performs complete database backups every three hours using the specified folder. WINS can also be configured to back up the database automatically when the service is stopped or the server computer is shut down.</p>

<p><b>Follow these steps to back up the WINS database:</b></p>

<ol>
<li>Click Start, point to Programs, point to Administrative Tools, and then click WINS.</li>

<li>In the console tree, click the applicable WINS server.</li>

<li>On the Action menu, click Backup Database.</li>

<li>When prompted to confirm, click Yes.</li>

<li>After backup is completed, click OK.</li>
</ol>
<blockquote><div class="warning"><b>Important</b> Do not specify a network drive as the backup location. In addition, if you change the WINS backup or database path in server properties, perform new backups to ensure successful future restorations of the WINS database. This is the only way for the active WINS database to be backed up, because the database is locked open while the WINS server is running.</div></blockquote>

<h2><a name="1039">Lesson Summary</a></h2>


<p>All of the WINS servers on a given network can be configured to communicate with each other so that a name registered with one WINS server eventually will be known by all WINS servers. A pull partner requests WINS new database entries. A push partner sends a message to its pull partners notifying them that its WINS database has changed.</p>


</body>
</html>



