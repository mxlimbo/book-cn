<html>
<head>
<title>Lesson 1: Managing NTFS Compression</title>
<link rel="STYLESHEET" type="text/css" href="mmpro.css">

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</head>
<SCRIPT LANGUAGE="JavaScript">
<!--

function fullSize(sURL){
	window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}

function LibraryHeaderNav(sBackward, sForward, sImgLeftOff, sImgLeftOn, sImgRightOff, sImgRightOn, iH, iW, sImgLeftStyle, sImgRightStyle, sImgRuleStyle, sRuleColor, sRuleSize){
	var tableStr;
	//validate questionable args for defs
	tableStr = "<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 border=0 width=100%>";
	tableStr += "<TR VALIGN=top ALIGN=right>";

	tableStr += "<TD align=right class=" + sImgRuleStyle + ">&nbsp;</TD>";	
	
	tableStr += "<TD width=34 align=right class=" + sImgLeftStyle + ">";
	tableStr += "<A href='" + sBackward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgLeftOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgLeftOff + '\'\"';
	tableStr += " SRC='" + sImgLeftOff + "' vspace=0 hspace=0></a></TD>";
	
	tableStr += "<TD width=34 align=left class=" + sImgRightStyle + ">";
	tableStr += "<A href='" + sForward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgRightOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgRightOff + '\'\"';
	tableStr += " SRC='" + sImgRightOff + "' vspace=0 hspace=0></a></TD></TR>";

	tableStr += "<TR VALIGN=top>";
	tableStr += "<TD height=3 align=center colspan=3 class=" + sImgRuleStyle + ">";
	tableStr += "<HR color=" + sRuleColor + " size=" + sRuleSize + "></TD></TR></TABLE>";
	//alert(tableStr);
	document.write(tableStr);
}

 																						     //purple is: #aa22aa   orange is: #ff9900
LibraryHeaderNav("ch18a.htm", "ch18c.htm", "images/unit_p_a1.gif", "images/unit_p_a2.gif", "images/unit_p_b1.gif", "images/unit_p_b2.gif", 18, 34, "unit01", "unit02", "headerrule", "#aa22aa", "2");
//--></SCRIPT><P>




<A NAME="609"><H1>Lesson 1: Managing NTFS Compression</H1></A>

<p>Microsoft Windows 2000 File System (NTFS) compression enables you to compress files and folders. Compressed files and folders occupy less space on an NTFS-formatted volume, which enables you to store more data. Each file and folder on an NTFS volume has a <i>compression state,</i> which is either compressed or uncompressed.</p>

<p><div class="sidebar"><blockquote>
<b>After this lesson, you will be able to</b>

<ul>
<p><li>Manage disk compression.</li></p>

<p><li>Compress and uncompress files and folders.</li></p>
</ul>

<p><b>Estimated lesson time: 40 minutes</b></p>
</blockquote></div></p>

<A NAME="610"><H2>Using Compressed Files and Folders</H2></A>

<p>Compressed files can be read and written to by any Microsoft Windows-based 
or MS-DOS-based application without first being uncompressed by another program. When an application, such as Microsoft Word for Windows, or an operating system command, such as Copy, requests access to a compressed file, NTFS automatically uncompresses the file before making it available. When you close or explicitly save a file, NTFS compresses it again.</p>

<p>NTFS allocates disk space based on the uncompressed file size. If you copy a compressed file to an NTFS volume with enough space for the compressed file but not enough space for the uncompressed file, you might get an error message stating that there is not enough disk space for the file. The file will not be copied to the volume.</p>

<A NAME="611"><H2>Compressing Files and Folders</H2></A>

<p>You can set the compression state of folders and files, and you can change the color that is used to display compressed files and folders in Windows Explorer.</p>

<p>If you want to set the compression state of a folder or file, right-click the folder or file in Windows Explorer, click Properties, and then click the Advanced button. In the Advanced Attributes dialog box, select the Compress Contents To Save Disk Space check box, as shown in Figure 18.1. Click OK, and then click Apply in the Properties dialog box.</p>

<p><div class="note"><blockquote><b>NOTE</b><HR>NTFS encryption and compression are mutually exclusive. Therefore, if you select the Encrypt Contents To Secure Data check box, you can't compress the folder or file.</blockquote></div></p>

<p>
<A HREF="javascript:fullSize('F18tk01x.htm')"> <img src="images/F18tk01.JPG" width=404 height=378 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 18.1</b> <i>The Advanced Attributes dialog box</i><!-- /caption -->
</p>

<p><div class="caution"><blockquote><b>IMPORTANT</b><HR>To change the compression state for a file or folder, you must have Write permission for that file or folder.</blockquote></div></p>

<p>The compression state for a folder doesn't reflect the compression state of the files and subfolders in that folder. A folder can be compressed, yet all of the files in that folder can be uncompressed. Alternatively, an uncompressed folder can contain compressed files. When you compress a folder, Windows 2000 displays the Confirm Attribute Changes dialog box, which has the two additional options explained in Table 18.1.</p>

<p><b>Table 18.1</b> <i>Confirm Attribute Changes Dialog Box Options</i></p>

<p>
<table cellpadding=5 width="95%">
<tr> 
<th>Option  </th>
<th>Description  </th></tr>
<tr>
<td valign="top">Apply Changes To This Folder Only </td>
<td valign="top">Compresses only the folder that you have selected   </td></tr>
<tr>
<td valign="top">Apply Changes To This Folder, Subfolder, And Files  </td>
<td valign="top">Compresses the folder and all subfolders and files that 
 are contained within it and added to it subsequently  </td></tr>
</table></p>


<p><div class="note"><blockquote><b>NOTE</b><HR>Windows 2000 doesn't support NTFS compression for cluster sizes larger than 4 KB because compression on large clusters causes performance degradation. If you select a larger cluster size when you format an NTFS volume, compression isn't available for that volume.</blockquote></div></p>

<A NAME="612"><H2>Selecting an Alternate Display Color for Compressed Files and Folders</H2></A>

<p>Windows Explorer makes it easy for you to quickly determine whether a file or folder is compressed by allowing you to select a different display color for compressed files and folders to distinguish them from uncompressed files and folders.</p>

<p>You can set an alternative display color for compressed files and folders as follows:</p>

<ol>
<p><li> In Windows Explorer, on the Tools menu, click Folder Options.</li></p>

<p><li> On the View tab, select the Display Compressed Files And Folders With Alternate Color check box.</li></p>

</ol>

<A NAME="613"><H2>Copying and Moving Compressed Files and Folders</H2></A>

<p>Specific rules determine whether the compression state of files and folders is 
retained when you copy or move them within and between NTFS and FAT volumes. The following list describes how Windows 2000 treats the compression state of a file or folder when you copy or move a compressed file or folder within or between NTFS volumes or between NTFS and FAT volumes.</p>

<ul>
<p><li>Copying a file within an NTFS volume. When you copy a file within an NTFS volume (shown as A in Figure 18.2), the file inherits the compression state of the target folder. For example, if you copy a compressed file to an uncompressed folder, the file is automatically uncompressed.</li></p>

<p><li>Moving a file or folder within an NTFS volume. When you move a file or folder within an NTFS volume (shown as B in Figure 18.2), the file or folder retains its original compression state. For example, if you move a compressed file to an uncompressed folder, the file remains compressed.</li></p>

<p><li>Copying a file or folder between NTFS volumes. When you copy a file or folder between NTFS volumes (shown as C in Figure 18.2), the file or folder inherits the compression state of the target folder.</li></p>

<p><li>Moving a file or folder between NTFS volumes. When you move a file or folder between NTFS volumes (shown as C in Figure 18.2), the file or folder inherits the compression state of the target folder. Because Windows 2000 treats a move as a copy and then a delete, the files inherit the compression state of the target folder.</li></p>

<p><li>Moving or copying a file or folder to a FAT volume. Windows 2000 supports compression only for NTFS files. Because of this, when you move or copy a compressed NTFS file or folder to a FAT volume, Windows 2000 automatically uncompresses the file or folder.</li></p>

<p><li>Moving or copying a compressed file or folder to a floppy disk. When you move or copy a compressed NTFS file or folder to a floppy disk, Windows 2000 automatically uncompresses the file or folder.</li></p>


<p>
<A HREF="javascript:fullSize('F18tk02x.htm')"> <img src="images/F18tk02.JPG" width=404 height=256 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 18.2</b> <i>The effects of copying and moving compressed folders and files</i><!-- /caption -->
</p>

</ul>

<p><div class="note"><blockquote><b>NOTE</b><hr>When you copy a compressed NTFS file, Windows 2000 uncompresses the file, copies the file, and then compresses the file again as a new file. This might cause performance degradation.</blockquote></div>
</p>

<A NAME="614"><H2>Using NTFS Compression</H2></A>

<p>The following list provides best practices for using compression on NTFS 
volumes:</p>

<ul>
<p><li>Because some file types compress more than others, select file types to compress based on the anticipated resulting file size. For example, because Windows bitmap files contain more redundant data than application executable files, this file type compresses to a smaller size. Bitmaps will often compress to less than 50 percent of the original file size, whereas application files rarely compress to less than 75 percent of the original size.</li></p>

<p><li>Do not store compressed files, such as PKZIP files, in a compressed folder. Windows 2000 will attempt to compress the file, wasting system time and yielding no additional disk space.</li></p>

<p><li>To make it easier to locate compressed data, use a different display color for compressed folders and files.</li></p>

<p><li>Compress static data rather than data that changes frequently. Compressing and uncompressing files incurs some system overhead. By choosing to compress files that are infrequently accessed, you minimize the amount of system time that is dedicated to compression and uncompression activities.</li></p>

<p><li>NTFS compression can cause performance degradation when you copy and move files. When a compressed file is copied, it is uncompressed, copied, and then compressed again as a new file. Compress static data rather than data that changes frequently or is copied or moved frequently.</li></p>
</ul>

<p>
<img src="images/practic.JPG" width=92 height=74 border="0">
</p>

<A NAME="615"><H2>Practice: Managing NTFS Compression</H2></A>

<p>In this practice, you will compress files and folders. You will then display the compressed files and folders in a different color. Then you will uncompress a file and test the effects that copying and moving files have on compression.</p>

<p><div class="note"><blockquote><b>NOTE</b><HR>This practice assumes that you installed Windows 2000 Professional on the C drive and that the C drive is formatted with NTFS. If you installed Windows 2000 Professional on a different partition and that partition is formatted with NTFS, use that drive letter when the practice refers to drive C.</blockquote></div></p>

<A NAME="616"><H3>Exercise 1: Compressing Files in an NTFS Partition</H3></A>

<p>In this exercise, you will use Windows Explorer to compress files and folders to make more disk space available on your NTFS partition. You will also configure Windows Explorer to display the compressed files and folders in a different color. Next you will uncompress a file. Finally you will view the effects that copying and moving files has on compressed files.</p>

<p><li> <b>To view the capacity and free space for drive C</b></li></p>

<ol>
<p><li> Log on as Administrator, right-click the My Computer icon on your desktop, and then click Explore.</li></p>

<p><li> Right-click drive C, and then click Properties.</li></p>

<p>Windows 2000 displays the Local Disk (C:) Properties dialog box with the General tab active.</p>

<p>What is the capacity of drive C? </p>

<p><a href="chaaa.htm#959">Answer</a></p>

<p>What is the free space on drive C? </p>

<p><a href="chaaa.htm#959">Answer</a></p>


<p><li> Click Cancel to close the Local Disk (C:) Properties dialog box and return to Windows Explorer.</li></p>
</ol>

<p><li> <b>To compress a folder tree</b></li></p>

<ol>
<p><li> In Windows Explorer, expand Local Disk (C:).</li></p>

<p><li> Create a folder in drive C and name it CompTest.</li></p>

<p><li> Double-click CompTest to expand the folder.</li></p>

<p><li> Create a folder in CompTest and name it CompTest2.</li></p>

<p><li> Right-click the CompTest folder, and then click Properties.</li></p>


<p>Windows 2000 displays the CompTest Properties dialog box with the General tab active.</p>


<p><li> On the General tab, click the Advanced button.</li></p>


<p>Windows 2000 displays the Advanced Attributes dialog box.</p>


<p><li> Select the Compress Contents To Save Disk Space check box.</li></p>

<p><li> Select the Encrypt Contents To Secure Data check box.</li></p>


<p>Notice that the system automatically removes the check mark from the Compress Contents To Save Disk Space check box.</p>


<p><li> Select the Compress Contents To Save Disk Space check box.</li></p>

<p><li> Click OK to return to the CompTest Properties dialog box.</li></p>

<p><li> Click Apply to apply your settings.</li></p>


<p>Windows 2000 displays the Confirm Attribute Changes dialog box, prompting you to specify whether to compress only this folder or this folder, all subfolders, and all files.</p>


<p><li> Select the Apply Changes To This Folder, Subfolders And Files check box, and then click OK.</li></p>


<p>Windows 2000 displays the Applying Attributes message box, indicating the progress of the operation and the paths and names of folders and files as they are compressed. Because little data is on drive C, compression will complete too quickly for you to view this dialog box.</p>


<p><li> Click OK to close the Properties dialog box.</li></p>
</ol>

<p><li> <b>To display compressed files and folders with an alternate color</b></li></p>

<ol>
<p><li> In Windows Explorer, click Local Disk (C:) and, on the Tools menu, click Folder Options.</li></p>


<p>The Folder Options dialog box appears with the General tab active.</p>


<p><li> Click the View tab.</li></p>

<p><li> In the Advanced Settings list, select the Display Compressed Files And Folders With Alternate Color check box.</li></p>

<p><li> Click OK to apply your changes.</li></p>

<p>The names of the compressed files and folders are displayed in blue.</p>
</ol>

<p><li> <b>To uncompress a folder</b></li></p>

<ol>
<p><li> In Windows Explorer, expand the CompTest folder.</li></p>

<p><li> In the CompTest folder, right-click CompTest2, and then click Properties.</li></p>


<p>Windows 2000 displays the CompTest2 Properties dialog box with the 
General tab active.</p>


<p><li> On the General tab, click the Advanced button.</li></p>


<p>Windows 2000 displays the Advanced Attributes dialog box.</p>


<p><li> Clear the Compress Contents To Save Disk Space check box, and then click OK to apply your settings and return to the CompTest2 Properties dialog box.</li></p>

<p><li>Click OK to close the CompTest2 Properties dialog box.</li></p>


<p>Since the CompTest2 folder is empty, Windows 2000 doesn't display the 
Confirm Attributes Changes dialog box asking you to specify whether to uncompress only this folder or this folder and all subfolders.</p>

<p>What indication do you have that the CompTest2 folder is no longer 
compressed?</p>
</ol>

<A NAME="617"><H3>Exercise 2: Copying and Moving Files</H3></A>

<p>In this exercise, you will see the effects that copying and moving files has on compressed files.</p>

<p><li> <b>To create a compressed file</b></li></p>

<ol>
<p><li> In Windows Explorer, click the CompTest folder.</li></p>

<p><li> On the File menu, click New, and then click Text Document.</li></p>

<p><li> Type <b>Text1</b> and then press Enter.</li></p>


<p>How can you verify that Text1 is compressed? </p>

<p><a href="chaaa.htm#961">Answer</a></p>
</ol>

<p><li><b> To copy a compressed file to an uncompressed folder</b></li></p>

<ol>
<p><li> Copy Text1 to the CompTest\CompTest2 folder.</li></p>


<p>Make sure that you copy (hold down the Ctrl key while you drag the file) and do not move the file.</p>


<p><li> Examine the properties for Text1 in the CompTest2 folder.</li></p>


<p>Is the Text1.txt file in the CompTest\CompTest2 folder compressed or uncompressed? Why? </p>

<p><a href="chaaa.htm#961">Answer</a></p>
</ol>

<p><li> <b>To move a compressed file to an uncompressed folder</b></li></p>

<ol>
<p><li> Examine the properties of the Text1.txt file in the CompTest folder.</li></p>


<p>Is Text1.txt compressed or uncompressed? </p>

<p><a href="chaaa.htm#961">Answer</a></p>


<p><li> Move Text1.txt to the CompTest\CompTest2 folder. When the Confirm File Replace dialog box appears prompting whether you want to replace the file, click Yes.</li></p>


<p><li> Examine the properties of Text1.txt in the CompTest2 folder.</li></p>


<p>Is Text1.txt compressed or uncompressed? Why? </p>

<p><a href="chaaa.htm#961">Answer</a></p>
</ol>

<p><li> <b>To uncompress the NTFS folder</b></li></p>

<ol>
<p><li> In Windows Explorer, right-click the CompTest folder, and then click Properties.</li></p>


<p>Windows 2000 displays the CompTest Properties dialog box with the General tab active.</p>


<p><li>On the General tab, click the Advanced button.</li></p>


<p>Windows 2000 displays the Advanced Attributes dialog box.</p>


<p><li> Clear the Compress Contents To Save Disk Space check box, and then click OK to return to the CompTest Properties dialog box.</li></p>

<p><li> Click Apply.</li></p>


<p>Windows 2000 displays the Confirm Attribute Changes dialog box, prompting you to specify whether to uncompress only this folder or this folder and all subfolders.</p>


<p><li> Click Apply Changes To This Folder, Subfolders And All Files, and then click OK.</li></p>


<p>Windows 2000 briefly displays the Applying Attributes message box. This might happen so fast that you don't see it.</p>


<p><li> Click OK to close the Properties dialog box, and then close Windows Explorer.</li></p>

</ol>

<A NAME="618"><H2>Lesson Summary</H2></A>

<p>In this lesson, you learned how to compress and uncompress files and folders on an NTFS volume. You learned that compressed files can be read and written to by any Microsoft Windows-based or MS-DOS-based application without first being uncompressed by another program. The Windows NTFS file system automatically uncompresses the file before making it available, and when you close or explicitly save a file, NTFS compresses it again.</p>

<p>You also learned how to change the color that is used to display compressed files and folders in Windows Explorer to distinguish them from uncompressed files and folders. And you learned that NTFS encryption and compression are mutually exclusive.</p>

<p>Finally, you learned about copying and moving compressed files. When you copy a file within an NTFS volume, the file inherits the compression state of the target folder. When you move a file or folder within an NTFS volume, the file or folder retains its original compression state. When you copy or move a file or folder 
between NTFS volumes, the file or folder inherits the compression state of the target folder. Finally, when you move or copy a compressed NTFS file or folder to a FAT volume or a floppy disk, Windows 2000 automatically uncompresses the file or folder.</p>

</BODY>
</HTML>


