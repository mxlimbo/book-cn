<html>
<head>
<title>Lesson 1: TCP/IP</title>
<link rel="STYLESHEET" type="text/css" href="mmpro.css">

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</head>
<SCRIPT LANGUAGE="JavaScript">
<!--

function fullSize(sURL){
	window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}

function LibraryHeaderNav(sBackward, sForward, sImgLeftOff, sImgLeftOn, sImgRightOff, sImgRightOn, iH, iW, sImgLeftStyle, sImgRightStyle, sImgRuleStyle, sRuleColor, sRuleSize){
	var tableStr;
	//validate questionable args for defs
	tableStr = "<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 border=0 width=100%>";
	tableStr += "<TR VALIGN=top ALIGN=right>";

	tableStr += "<TD align=right class=" + sImgRuleStyle + ">&nbsp;</TD>";	
	
	tableStr += "<TD width=34 align=right class=" + sImgLeftStyle + ">";
	tableStr += "<A href='" + sBackward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgLeftOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgLeftOff + '\'\"';
	tableStr += " SRC='" + sImgLeftOff + "' vspace=0 hspace=0></a></TD>";
	
	tableStr += "<TD width=34 align=left class=" + sImgRightStyle + ">";
	tableStr += "<A href='" + sForward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgRightOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgRightOff + '\'\"';
	tableStr += " SRC='" + sImgRightOff + "' vspace=0 hspace=0></a></TD></TR>";

	tableStr += "<TR VALIGN=top>";
	tableStr += "<TD height=3 align=center colspan=3 class=" + sImgRuleStyle + ">";
	tableStr += "<HR color=" + sRuleColor + " size=" + sRuleSize + "></TD></TR></TABLE>";
	//alert(tableStr);
	document.write(tableStr);
}

 																						     //purple is: #aa22aa   orange is: #ff9900
LibraryHeaderNav("ch07a.htm", "ch07c.htm", "images/unit_p_a1.gif", "images/unit_p_a2.gif", "images/unit_p_b1.gif", "images/unit_p_b2.gif", 18, 34, "unit01", "unit02", "headerrule", "#aa22aa", "2");
//--></SCRIPT><P>



<A NAME="234"><H1>Lesson 1: TCP/IP</H1></A>

<p>TCP/IP provides communication across networks of computers with various hardware architectures and operating systems. Microsoft's implementation of TCP/IP enables enterprise networking and connectivity on computers running Windows 2000.</p>

<p><div class="sidebar"><blockquote>
<b>After this lesson, you will be able to</b>

<ul>
<p><li>Describe the TCP/IP protocol suite and the TCP/IP utilities that ship with Windows 2000.</li></p>

<p><li>Configure TCP/IP.</li></p>
</ul>



<p><b>Estimated lesson time: 65 minutes</b></p>
</blockquote></div></p>

<A NAME="235"><H2>Understanding the TCP/IP Protocol Suite</H2></A>

<p>TCP/IP is an industry-standard suite of protocols that enables enterprise networking and connectivity on Windows 2000-based computers. Adding TCP/IP to a Windows 2000 configuration offers the following advantages:</p>

<ul>
<p><li>A routable networking protocol supported by most operating systems. Most large networks rely on TCP/IP.</li></p>

<p><li>A technology for connecting dissimilar systems. You can use many standard connectivity utilities to access and transfer data between dissimilar systems. Windows 2000 includes several of these standard utilities.</li></p>

<p><li>A robust, scaleable, cross-platform client/server framework. TCP/IP supports the Microsoft Windows Sockets (winsock) interface, which is ideal for developing client/server applications for WinSock-compliant stacks.</li></p>

<p><li>A method of gaining access to Internet resources.</li></p>
</ul>



<p>The TCP/IP suite of protocols provides a set of standards for how computers communicate and how networks are interconnected. The TCP/IP suite of protocols map to a four-layer conceptual model: network interface, Internet, transport, and application. These layers can be seen in Figure 7.1.</p>

<A NAME="236"><H3>The Network Interface Layer</H3></A>

<p>At the base of the model is the network interface layer. This layer puts frames on the wire and pulls frames off the wire.</p>

<p>
<A HREF="javascript:fullSize('F07tk01x.htm')"> <img src="images/F07tk01.JPG" width=404 height=286 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 7.1</b> <i>The TCP/IP suite of protocols within four layers</i><!-- /caption -->
</p>

<A NAME="237"><H3>The Internet Layer</H3></A>

<p>Internet layer protocols encapsulate packets into Internet datagrams and run all the necessary routing algorithms. The four Internet layer protocols are Internet Protocol (IP), Address Resolution Protocol (ARP), Internet Control Message Protocol (ICMP), and Internet Group Management Protocol (IGMP). Table 7.1 describes these four Internet layer protocols.</p>

<p><b>Table 7.1</b> <i>Protocols Included in the Internet Layer</i></p>

<p>
<table cellpadding=5 width="95%">
<tr> 
<th>Protocol  </th>
<th>Description </th></tr>
<tr>
<td valign="top">IP   </td>
<td valign="top">Provides connectionless packet delivery for all other protocols in the suite. 
 Doesn't guarantee packet arrival or correct packet sequence.  </td></tr>
<tr>
<td valign="top">ARP  </td>
<td valign="top">Provides IP address mapping to the media access control (MAC) sublayer 
 address to acquire the physical MAC control address of the destination. IP 
 broadcasts a special ARP inquiry packet containing the IP address of the 
 destination system. The system that owns the IP address replies by sending 
 its physical address to the requester. The MAC sublayer communicates 
 directly with the network adapter card and is responsible for delivering 
 error-free data between two computers on a network.  </td></tr>
<tr>
<td valign="top">ICMP  </td>
<td valign="top">Provides special communication between hosts, allowing them to share 
 status and error information. Higher-level protocols use this information 
 to recover from transmission problems. Network administrators use this 
 information to detect network trouble. The ping utility uses ICMP packets 
 to determine whether a particular IP device on a network is functional.  </td></tr>
<tr>
<td valign="top">IGMP  </td>
<td valign="top">Provides multicasting, which is a limited form of broadcasting, to 
 communicate and manage information between all member devices in a 
 multicast group. IGMP informs neighboring multicast routers of the host 
 group memberships present on a particular network. Windows 2000 
 supports multicast capabilities that allow developers to create multicast 
 programs, such as Windows 2000 Server NetShow Services.  </td></tr>
</table></p>


<A NAME="238"><H3>The Transport Layer</H3></A>

<p>Transport layer protocols provide communication sessions between computers. The desired method of data delivery determines the transport protocol. The two transport layer protocols are Transmission Control Protocol (TCP) and User Datagram Protocol (UDP). Table 7.2 describes the two protocols included in the transport layer.</p>

<p><b>Table 7.2</b> <i>Protocols Included in the Transport Layer</i></p>

<p>
<table cellpadding=5 width="95%">
<tr> 
<th>Protocol  </th>
<th>Description </th></tr>
<tr>
<td valign="top">TCP  </td>
<td valign="top">Provides connection-oriented, reliable communications for applications that typically transfer large amounts of data at one time or that require an acknowledgment for data received. TCP guarantees the delivery of packets, ensures proper sequencing of the data, and provides a checksum feature that validates both the packet header and its data for accuracy.  </td></tr>
<tr>
<td valign="top">UDP   </td>
<td valign="top">Provides connectionless communications and doesn't guarantee that packets will be delivered. Applications that use UDP typically transfer small amounts of data at one time. Reliable delivery is the responsibility of the application.  </td></tr>
</table></p>



<A NAME="239"><H3>The Application Layer</H3></A>

<p>At the top of the model is the application layer, in which applications gain access to the network. Many standard TCP/IP utilities and services reside in the application layer, such as FTP, Telnet, Simple Network Management Protocol (SNMP), Domain Name System (DNS), and so on.</p>

<p>TCP/IP provides two interfaces for network applications to use the services of the TCP/IP protocol stack: Winsock and the NetBIOS over TCP/IP (NetBT) 
interface. Table 7.3 describes the two interfaces, which network applications use for TCP/IP services.</p>

<p><b>Table 7.3</b> <i>Interfaces Through Which Applications Use TCP/IP Services</i></p>

<p>
<table cellpadding=5 width="95%">
<tr> 
<th>Interface  </th>
<th>Description  </th></tr>
<tr>
<td valign="top">Winsock   </td>
<td valign="top">Serves as the standard interface between socket-based applications and 
 TCP/IP protocols.  </td></tr>
<tr>
<td valign="top">NetBT  </td>
<td valign="top">Serves as the standard interface for NetBIOS services, including name, 
 datagram, and session services. It also provides a standard interface 
 between NetBIOS-based applications and TCP/IP protocols.  </td></tr>
</table></p>


<A NAME="240"><H2>Configuring TCP/IP to Use a Static IP Address</H2></A>

<p>By default, client computers running Windows 2000, Windows 95, or Windows 98 obtain TCP/IP configuration information automatically from the Dynamic Host Configuration Protocol (DHCP) Service. However, even in a DHCP-enabled environment, you should assign a static IP address to selected network computers. For example, the computer running the DHCP Service can't be a DHCP client, so it must have a static IP address. If the DHCP Service isn't available, you must also configure TCP/IP to use a static IP address. For each network adapter card that uses TCP/IP in a computer, you can configure an IP address, subnet mask, and default gateway, as shown in Figure 7.2.</p>

<p>
<img src="images/F07tk02.JPG" width=404 height=448 border="0">
</p><p>
<!-- caption --><b>Figure 7.2</b> <i>Configuring a static TCP/IP address</i><!-- /caption -->
</p>

<p>Table 7.4 describes the options used in configuring a static TCP/IP address.</p>

<p><b>Table 7.4</b> <i>Options for Configuring a Static TCP/IP Address</i></p>

<p>
<table cellpadding=5 width="95%">
<tr> 
<th>Option  </th>
<th>Description  </th></tr>
<tr>
<td valign="top">IP address  </td>
<td valign="top">A logical 32-bit address that identifies a TCP/IP host. Each network adapter card in a computer running TCP/IP requires a 
unique IP address, such as 192.168.1.108. Each address has two parts: a network ID, which identifies all hosts on the same physical network, and a host ID, which identifies a host on the network. In this example, the network ID is 192.168.1, and the host ID is 108.  </td></tr>
<tr>
<td valign="top">Subnet mask  </td>
<td valign="top">A network in a multiple-network environment that uses IP addresses derived from a single network ID. Subnets divide a large network into multiple physical networks connected with routers. A subnet mask blocks out part of the IP address so that TCP/IP can distinguish the network ID from the host ID. When TCP/IP hosts try to communicate, the subnet mask determines whether the destination host is on a local or remote network. To communicate on a network, computers must have the same subnet mask.  </td></tr>
<tr>
<td valign="top">Default gateway  </td>
<td valign="top">The intermediate device on a local network that stores network IDs of other networks in the enterprise or Internet. To communicate with a host on another network, configure an IP address for the default gateway. TCP/IP sends packets for remote networks to the default gateway (if no other route is configured), which forwards the packets to other gateways until the packet is delivered to a gateway connected to the specified destination.  </td></tr>
</table></p>


<p>You can follow these steps to configure TCP/IP to use a static IP address:</p>

<ol>
<p><li> Right-click My Network Places, and then click Properties.</li></p>

<p><li> In the Network And Dial-Up Connections window, right-click Local Area Connection, and then click Properties.</li></p>

<p><li> In the Local Area Connection Properties dialog box, click Internet Protocol (TCP/IP), verify that the check box to its left is selected, and then click Properties.</li></p>

<p><li> In the Internet Protocol (TCP/IP) Properties dialog box, on the General tab, click Use The Following IP Address, type the TCP/IP configuration parameters, and then click OK.</li></p>

<p><li> Click OK to close the Local Area Connection Properties dialog box and then close the Network And Dial-Up Connections window.</li></p>
</ol>

<p><div class="caution"><blockquote><b>CAUTION</b><hr>IP communications can fail if duplicate IP addresses exist on a network. Therefore, you should always check with the network administrator to obtain a valid static IP address.</blockquote></div></p>

<A NAME="241"><H2>Configuring TCP/IP to Obtain an IP Address Automatically</H2></A>

<p>If a server running the DHCP Service is available on the network, it can automatically assign TCP/IP configuration information to the DHCP client, as 
shown in Figure 7.3. Then you can configure any clients running Windows 2000, 
Windows 95, and Windows 98 to obtain TCP/IP configuration information automatically from the DHCP Service. Using DHCP to configure TCP/IP automatically on client computers can simplify administration and ensure correct configuration information.</p>

<p><div class="note"><blockquote><b>NOTE</b><HR>Windows 2000 Professional doesn't include the DHCP Service. Only the Windows 2000 Server products provide the DHCP Service.</blockquote></div></p>

<p>
<img src="images/F07tk03.JPG" width=264 height=372 border="0">
</p><p>
<!-- caption --><b>Figure 7.3</b> <i>A server running the DHCP Service assigns TCP/IP addresses</i><!-- /caption -->
</p>

<p><div class="note"><blockquote><b>NOTE</b><HR>Windows 2000 also includes an Automatic Private IP Addressing feature that provides DHCP clients with limited network functionality if a DHCP server is unavailable during startup.</blockquote></div></p>

<p>You can use the DHCP Service to provide clients with TCP/IP configuration 
information automatically. However, you must configure a computer as a DHCP client before it can interact with the DHCP Service.</p>

<p>You can configure a DHCP client by doing the following:</p>

<ol>
<p><li> Right-click My Network Places, and then click Properties.</li></p>

<p><li> In the Network And Dial-Up Connections window, right-click Local Area Connection, and then click Properties.</li></p>

<p><li> In the Local Area Connection Properties dialog box, click Internet Protocol (TCP/IP), verify that the check box to its left is selected, and then click Properties.</li></p>

<p><li> In the Internet Protocol (TCP/IP) Properties dialog box, on the General tab, click Obtain An IP Address Automatically.</li></p>

<p><li> Click OK to close the Local Area Connection Properties dialog box, and then close the Network And Dial-Up Connections window.</li></p>
</ol>

<A NAME="242"><H2>Using Automatic Private IP Addressing</H2></A>

<p>The Windows 2000 implementation of TCP/IP supports a new mechanism for automatic address assignment of IP addresses for simple LAN-based network configurations. This addressing mechanism is an extension of dynamic IP 
address assignment for LAN adapters, enabling configuration of IP addresses without using static IP address assignment or installing the DHCP Service.</p>

<p>For the Automatic Private IP Addressing feature to function properly on a computer running Windows 2000, you must configure a network LAN adapter for TCP/IP and click Obtain An IP Address Automatically in the Internet Protocol (TCP/IP) Properties dialog box.</p>

<p>The process for the Automatic Private IP Addressing feature, as shown in Figure 7.4, is explained in the following steps:</p>

<ol>
<p><li> Windows 2000 TCP/IP attempts to find a DHCP server on the attached network to obtain a dynamically assigned IP address.</li></p>

<p><li> In the absence of a DHCP server during startup&#8212;for example, the server is down for maintenance or repairs&#8212;the client cannot obtain an IP address.</li></p>

<p><li> Automatic Private IP Addressing generates an IP address in the form of 169.254.<i>x</i>.<i>y</i> (where <i>x</i>.<i>y</i> is the client's unique identifier) and a subnet mask of 255.255.0.0.</li></p>
</ol>

<p>
<img src="images/F07tk04.JPG" width=310 height=380 border="0">
</p><p>
<!-- caption --><b>Figure 7.4</b> <i>The Automatic Private IP Addressing feature</i><!-- /caption -->
</p>

<p><div class="note"><blockquote><b>NOTE</b><HR>The Internet Assigned Numbers Authority (IANA) has reserved 169.254.0.0-169.254.255.255 for Automatic Private IP Addressing. As a result, Automatic Private IP Addressing provides an address that is guaranteed not to conflict with routable addresses.</blockquote></div></p>

<p>After the computer generates the address, it broadcasts to this address and then assigns the address to itself, if no other computer responds. The computer continues to use this address until it detects and receives configuration information from a DHCP server. This allows two computers to be plugged in to a LAN hub to restart without any IP address configuration and to be able to use TCP/IP for local network access.</p>

<p><div class="note"><blockquote><b>NOTE</b><HR>Windows 98 also supports Automatic Private IP Addressing.</blockquote></div></p>

<p>Automatic Private IP Addressing can assign a TCP/IP address to DHCP clients automatically. However, Automatic Private IP Addressing doesn't generate all the information that typically is provided by DHCP, such as the address of a default gateway.</p>

<p>Consequently, computers enabled with Automatic Private IP Addressing can communicate only with computers on the same subnet that also have addresses 
of the form 169.254.<i>x</i>.<i>y</i>.</p>

<A NAME="243"><H2>Disabling Automatic Private IP Addressing</H2></A>

<p>By default, the Automatic Private IP Addressing feature is enabled. However, you can disable this feature by adding the IPAutoconfigurationEnabled value to the HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\ 
Parameters\Interfaces\Adapter subkey of the registry and setting its value to 0.</p>

<p><div class="note"><blockquote><b>NOTE</b><HR>This subkey includes the globally unique identifier (GUID) for the computer's LAN adapter. For more information about GUIDs, see <A HREF="ch09a.htm">Chapter 9</A>, &quot;Introducing Active Directory Directory Services.&quot; For more information about the registry, see <A HREF="ch05a.htm">Chapter 5</A>, &quot;Using the Registry.&quot;</blockquote></div></p>

<p>The IPAutoconfigurationEnabled entry takes a REG_DWORD data type. To disable Automatic Private IP Addressing, specify a value of 0 for the entry. Specify a value of 1 to enable Automatic Private IP Addressing, the default state when this value is omitted from the registry.</p>

<A NAME="244"><H2>Using TCP/IP Utilities</H2></A>

<p>Windows 2000 includes the utilities diagrammed in Figure 7.5 that you can use to troubleshoot TCP/IP and test connectivity.</p>

<p>
<A HREF="javascript:fullSize('F07tk05x.htm')"> <img src="images/F07tk05.JPG" width=404 height=292 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 7.5</b> <i>TCP/IP utilities included with Windows 2000</i><!-- /caption -->
</p>

<A NAME="245"><H3>Troubleshooting TCP/IP</H3></A>

<p>Windows 2000 offers several utilities to assist you in troubleshooting TCP/IP. Table 7.5 describes the Windows 2000 utilities that you can use to troubleshoot TCP/IP.</p>

<p><b>Table 7.5</b> <i>Utilities Used to Troubleshoot TCP/IP</i></p>

<p>
<table cellpadding=5 width="95%">
<tr> 
<th>Option  </th>
<th>Description  </th></tr>
<tr>
<td valign="top">Ping   </td>
<td valign="top">Verifies configurations and tests connections  </td></tr>
<tr>
<td valign="top">ARP   </td>
<td valign="top">Displays locally resolved IP addresses as physical addresses </td></tr>
<tr>
<td valign="top">Ipconfig  </td>
<td valign="top">Displays the current TCP/IP configuration  </td></tr>
<tr>
<td valign="top">Nbtstat  </td>
<td valign="top">Displays statistics and connections using NetBIOS over TCP/IP  </td></tr>
<tr>
<td valign="top">Netstat   </td>
<td valign="top">Displays TCP/IP protocol statistics and connections  </td></tr>
<tr>
<td valign="top">Route  </td>
<td valign="top">Displays or modifies the local routing table  </td></tr>
<tr>
<td valign="top">Hostname   </td>
<td valign="top">Returns the local computer's host name for authentication by the 
 Remote Copy Protocol (RCP), remote shell (RSH), and remote 
 execution (REXEC) utilities.  </td></tr>
<tr>
<td valign="top">Tracert  </td>
<td valign="top">Checks the route to a remote system  </td></tr>
</table></p>


<p>These troubleshooting utilities are all executed from within the Command Prompt window. For information on how to use all of these commands, except Hostname and Tracert, open the Command Prompt window, type the command followed by <b>/?</b> and then press Enter. For example, for information on the Ping command, open the Command Prompt window, type <b>Ping /?</b> and then press Enter.</p>

<p>To use the Hostname utility, open the Command Prompt window, type Hostname, and then press Enter. Hostname will return the name of the local computer.</p>

<p>For information on how to use the Tracert command, open a Command Prompt window, type <b>Tracert</b> and then press Enter.</p>

<A NAME="246"><H3>Testing TCP/IP Connectivity</H3></A>

<p>Windows 2000 also provides utilities for testing TCP/IP connectivity. Table 7.6 describes these Windows 2000 utilities.</p>

<p><b>Table 7.6</b> <i>Utilities Used to Test TCP/IP Connectivity</i></p>

<p>
<table cellpadding=5 width="95%">
<tr> 
<th>Option  </th>
<th>Description  </th></tr>
<tr>
<td valign="top">FTP  </td>
<td valign="top">Provides bidirectional file transfer between a computer running Windows 2000 and any TCP/IP host running FTP. Windows 2000 Server ships with the ability to serve as an FTP client or server.</td></tr>
<tr>
<td valign="top">Trivial File Transfer Protocol (TFTP) </td>
<td valign="top">Provides bidirectional file transfer between a computer running Windows 2000 and a TCP/IP host running TFTP.</td></tr>
<tr>
<td valign="top">Telnet  </td>
<td valign="top">Provides terminal emulation to a TCP/IP host running Telnet. Windows 2000 Server ships with the ability to serve as a Telnet client.</td></tr>
<tr>
<td valign="top">Remote Copy Protocol (RCP)  </td>
<td valign="top">Copies files between a client and a host that support RCP; for example, a computer running Windows 2000 and a UNIX host.  </td></tr>
<tr>
<td valign="top">Remote shell (RSH)  </td>
<td valign="top">Runs commands on a UNIX host.</td></tr>
<tr>
<td valign="top">Remote execution  (REXEC)  </td>
<td valign="top">Runs a process on a remote computer.</td></tr>
<tr>
<td valign="top">Finger  </td>
<td valign="top">Retrieves system information from a remote computer that supports TCP/IP and the finger utility.  </td></tr>
</table></p>



<A NAME="247"><H2>Testing a TCP/IP Configuration</H2></A>

<p>After configuring TCP/IP and restarting the computer, you should use the ipconfig and ping command-prompt utilities to test the configuration and connections to other TCP/IP hosts and networks. Such testing helps to ensure that TCP/IP is functioning properly.</p>

<A NAME="248"><H3>Using Ipconfig</H3></A>

<p>You use the ipconfig utility to verify the TCP/IP configuration parameters on a host. This helps to determine whether the configuration is initialized, or whether a duplicate IP address exists. Use the ipconfig command with the /all switch to verify configuration information.</p>

<p><div class="tip"><blockquote><b>TIP</b><hr>Type <b>ipconfig /all | more</b> to prevent the ipconfig output from scrolling off the screen; to scroll down and view additional output, press the Spacebar.</blockquote></div></p>

<p>The result of the ipconfig /all command is as follows:</p>

<ul>
<p><li>If a configuration has initialized, the ipconfig utility displays the IP address and subnet mask, and, if it is assigned, the default gateway.</li></p>

<p><li>If a duplicate IP address exists, the ipconfig utility indicates that the IP address is configured; however, the subnet mask is 0.0.0.0.</li></p>

<p><li>If the computer is unable to obtain an IP address from a server running the DHCP Service on the network, the ipconfig utility displays the IP address as the address provided by Automatic Private IP Addressing.</li></p>
</ul>



<A NAME="249"><H3>Using Ping</H3></A>

<p>After you have verified the TCP/IP configuration, use the ping utility to test connectivity. The <i>ping</i> <i>utility</i> is a diagnostic tool that you can use to test TCP/IP configurations and diagnose connection failures. Use the ping utility to determine whether a particular TCP/IP host is available and functional. To test connectivity, use the Ping command with the following syntax:</p>

<p><table cellpadding=5 width="95%"><tr><td>
<pre>
ping <i>IP</i>_<i>address</i>
</pre>
</td></tr></table>
</p>

<A NAME="250"><H3>Using Ipconfig and Ping</H3></A>

<p>Figure 7.6 outlines the steps for verifying a computer's configuration and for testing router connections.</p>

<p>
<A HREF="javascript:fullSize('F07tk06x.htm')"> <img src="images/F07tk06.JPG" width=404 height=298 border=0 ALT="Click to view at full size."> </A>
</p><p>
<!-- caption --><b>Figure 7.6</b> <i>Using ipconfig and ping</i><!-- /caption -->
</p>

<p>The following list explains the steps outlined in Figure 7.6:</p>

<ol>
<p><li> Use the ipconfig command to verify that the TCP/IP configuration has been initialized.</li></p>

<p><li> Use the ping command with the loopback address (ping 127.0.0.1) to verify that TCP/IP is correctly installed and bound to your network adapter card.</li></p>

<p><li> Use the ping command with the IP address of the computer to verify that your computer is not a duplicate of another IP address on the network.</li></p>

<p><li> Use the ping command with the IP address of the default gateway to verify that the default gateway is operational and that your computer can communicate with the local network.</li></p>

<p><li> Use the ping command with the IP address of a remote host to verify that the computer can communicate through a router.</li></p>
</ol>

<p><div class="note"><blockquote><b>NOTE</b><HR>Typically, if you ping the remote host (step 5) and the ping command is successful, steps 1 through 4 are successful by default. If the ping command 
isn't successful, ping the IP address of another remote host before completing 
the entire diagnostic process because the current host might be turned off.</blockquote></div></p>

<p>By default, the following message appears four times in response to a successful ping command:</p>

<p><table cellpadding=5 width="95%"><tr><td>
<pre>
Reply from <i>IP_address</i>
</pre>
</td></tr></table>
</p>

<p>
<img src="images/practic.JPG" width=92 height=74 border="0">
</p>

<A NAME="251"><H2>Practice: Installing and Configuring TCP/IP</H2></A>

<p>In this practice, you will use two TCP/IP utilities to verify your computer's 
configuration. Then you will configure your computer to use a static IP address and verify your computer's new configuration. Next you will configure your computer to use a DHCP server to automatically assign an IP address to your computer, whether or not a DHCP server is available on your network. Finally you will test the Automatic Private IP Addressing feature in Windows 2000 by disabling the DHCP server, if one exists on your network.</p>

<p>To complete this practice, you need</p>

<ul>
<p><li>TCP/IP as the only installed protocol.</li></p>

<p><li>Optional: A server running the DHCP Service to provide IP addresses. If you are working on a computer that isn't part of a network and a server isn't running the DHCP service, you won't be able to do certain procedures in this practice.</li></p>

</ul>



<p>In the following table, record the IP address, subnet mask, and default gateway that your network administrator provides for you to use during this practice. Also, ask your network administrator whether you can use another computer to test your computer's connectivity, and record the IP address of that computer as well. If you are not on a network, you can use the suggested values.</p>

<p>
<table cellpadding=5 width="95%">
<tr> 
<th>Variable value  </th>
<th>Suggested value  </th>
<th>Your value  </th></tr>
<tr>
<td valign="top">Static IP address  </td>
<td valign="top">192.168.1.201  </td>
<td valign="top">  </td></tr>
<tr>
<td valign="top">Subnet mask  </td>
<td valign="top">255.255.255.0  </td>
<td valign="top">  </td></tr>
<tr>
<td valign="top">Default gateway (if required)  </td>
<td valign="top">None  </td>
<td valign="top">  </td></tr>
<tr>
<td valign="top">Computer to test connectivity  </td>
<td valign="top">N/A  </td>
<td valign="top">  </td></tr>
</table></p>


<A NAME="252"><H3>Exercise 1: Verifying a Computer's TCP/IP Configuration</H3></A>

<p>In this exercise, you will use two TCP/IP utilities, ipconfig and ping, to verify your computer's configuration.</p>

<p><div class="note"><blockquote><b>NOTE</b><HR>As you complete the exercises in this practice, you will use the Command Prompt and Network Connections windows frequently. For the sake of efficiency, you will open the windows one time and then minimize and restore them as 
necessary.</blockquote></div></p>


<p><li><b>To verify a computer's configuration</b></li></p>

<ol>
<p><li> Open the Command Prompt window.</li></p>

<p><li> At the command prompt, type <b>ipconfig /all | more</b> and then press Enter.</li></p>


<p>The Windows 2000 IP Configuration utility displays the TCP/IP configuration of the physical and logical adapters configured on your computer.</p>


<p><li> Press Spacebar as necessary to display the heading Local Area Connection. Use the information displayed in this section to complete as much of the following table as possible. Press Spacebar to display additional information, as necessary, and to return to the command prompt.</li></p>

<p>
<table cellpadding=5 width="95%">
<tr> 
<th>Setting   </th>
<th>Value  </th></tr>
<tr>
<td valign="top">Host name  </td>
<td valign="top">  </td></tr>
<tr>
<td valign="top">Description  </td>
<td valign="top">  </td></tr>
<tr>
<td valign="top">Physical address  </td>
<td valign="top">  </td></tr>
<tr>
<td valign="top">DHCP enabled  </td>
<td valign="top">  </td></tr>
<tr>
<td valign="top">Autoconfiguration enabled  </td>
<td valign="top">  </td></tr>
<tr>
<td valign="top">IP address  </td>
<td valign="top">  </td></tr>
<tr>
<td valign="top">Subnet mask  </td>
<td valign="top">  </td></tr>
<tr>
<td valign="top">Default gateway  </td>
<td valign="top">  </td></tr>
<tr>
<td valign="top">DNS servers  </td>
<td valign="top">  </td></tr>
</table></p>

<p><li> Press Spacebar as necessary to scroll through the configuration information and return to the command prompt.</li></p>

<p><li> To verify that the IP address is working and configured for your adapter, type <b>ping 127.0.0.1</b> and then press Enter.</li></p>


<p>A response similar to the following indicates a successful ping:</p>

<p><table cellpadding=5 width="95%"><tr><td>
<pre>
Pinging 127.0.0.1 with 32 bytes of data:

Reply from 127.0.0.1: bytes=32 time&lt;10ms TTL=128
Reply from 127.0.0.1: bytes=32 time&lt;10ms TTL=128
Reply from 127.0.0.1: bytes=32 time&lt;10ms TTL=128
Reply from 127.0.0.1: bytes=32 time&lt;10ms TTL=128

Ping statistics for 127.0.0.1:
    Packets: Sent = 4, Received = 4, Lost = 0 &lt;0% loss&gt;,
Approximate round trip times in milliseconds:

    Minimum = 0ms, Maximum = 0ms, Average = 0ms
</pre>
</td></tr></table>
</p>


<p><li> Minimize the Command Prompt window.</li></p>
</ol>

<A NAME="253"><H3>Exercise 2: Configuring TCP/IP to Use a Static IP Address</H3></A>

<p>In this exercise, you will configure TCP/IP to use a static IP address.</p>


<p><li><b>To configure TCP/IP to use a static IP address</b></li></p>


<ol>
<p><li> Right-click My Network Places, and then click Properties.</li></p>


<p>The Network And Dial-Up Connections window appears.</p>


<p><li> Right-click Local Area Connection, and then click Properties.</li></p>


<p>The Local Area Connection Properties dialog box appears, displaying the 
network adapter in use and the network components used in this connection.</p>


<p><li> Click Internet Protocol (TCP/IP), and then verify that the check box to the left of the entry is selected.</li></p>

<p><li> Click Properties.</li></p>


<p>The Internet Protocol (TCP/IP) Properties dialog box appears.</p>


<p><li> Click Use The Following IP Address.</li></p>

<p><li> In the IP Address box, the Subnet Mask box, and the Default Gateway box (if required), type the values that you entered in the table prior to Exercise 1, or the suggested values listed in the table.</li></p>
</ol>

<p><div class="caution"><blockquote><b>IMPORTANT</b><HR>Be careful when manually entering IP configuration settings, 
especially numeric addresses. The most frequent cause of TCP/IP connection problems is incorrectly entered IP address information.</blockquote></div></p>

<ol>
<p><li value="7"> Click OK.</li></p>


<p>You are returned to the Local Area Connection Properties dialog box.</p>


<p><li> Click OK to close the Local Area Connection Properties dialog box.</li></p>

<p><li> Minimize the Network And Dial-Up Connections window.</li></p>
</ol>


<p><li><b>To test the static TCP/IP configuration</b></li></p>

<ol>
<p><li> Restore the Command Prompt.</li></p>

<p><li> At the command prompt, type <b>ipconfig /all | more</b> and then press Enter.</li></p>


<p>The Windows 2000 IP Configuration utility displays the physical and logical adapters configured on your computer.</p>


<p><li> Press Spacebar as needed to scroll through the configuration information and locate the local area connection information.</li></p>

<p><li> Record the current TCP/IP configuration settings for your local area connection in the following table.</li></p>

<p>
<table cellpadding=5 width="95%">
<tr> 
<th>Setting  </th>
<th>Value  </th></tr>
<tr>
<td valign="top">IP address  </td>
<td valign="top">  </td></tr>
<tr>
<td valign="top">Subnet mask  </td>
<td valign="top">  </td></tr>
<tr>
<td valign="top">Default gateway  </td>
<td valign="top">  </td></tr>
</table></p>

<p><li> Press Spacebar as necessary to scroll through the configuration information and return to the command prompt.</li></p>

<p><li> To verify that the IP address is working and configured for your adapter, type <b>ping 127.0.0.1</b> and then press Enter.</li></p>


<p>What happens?</p>

<p><a href="chaaa.htm#906">Answer</a></p>

<p><li> If you have a computer that you are using to test connectivity, type <b>ping <i>ip_address</i></b> (where <i>ip_address</i> is the IP address of the computer you are using to test connectivity), and then press Enter. If you don't have a computer to test connectivity, skip to step 8.</li></p>


<p>What happens?</p>

<p><a href="chaaa.htm#906">Answer</a></p>

<p><li> Minimize the command prompt.</li></p>
</ol>

<A NAME="254"><H3>Exercise 3: Configuring TCP/IP to Automatically Obtain an IP Address</H3></A>

<p>In this exercise, you will configure TCP/IP to automatically obtain an IP address. Then you will test the configuration to verify that the DHCP Service has provided the appropriate IP addressing information. Be sure to perform the first part of this exercise even if you have no DHCP Service server because you will also use these settings in Exercise 4.</p>


<p><li><b>To configure TCP/IP to automatically obtain an IP address</b></li></p>

<ol>
<p><li> Restore the Network And Dial-Up Connections window, right-click Local Area Connection, and then click Properties.</li></p>


<p>The Local Area Connection dialog box appears.</p>


<p><li> Click Internet Protocol (TCP/IP), and then verify that the check box to the left of the entry is selected.</li></p>

<p><li> Click Properties.</li></p>


<p>The Internet Protocol (TCP/IP) Properties dialog box appears.</p>


<p><li> Click Obtain An IP Address Automatically.</li></p>


<p>Which IP address settings will the DHCP Service configure for your 
computer? </p>

<p><a href="chaaa.htm#907">Answer</a></p>

<p><li> Click OK to close the Internet Protocol (TCP/IP) Properties dialog box.</li></p>

<p><li> Click OK to close the Local Area Connection Properties dialog box.</li></p>

<p><li> Minimize the Network And Dial-Up Connections window.</li></p>
</ol>


<p><li><b>To test the TCP/IP configuration</b></li></p>

<p><div class="note"><blockquote><b>NOTE</b><HR>If a server isn't available running the DHCP Service to provide an IP 
address, skip this procedure and continue with Exercise 4.</blockquote></div></p>

<ol>
<p><li> Restore the command prompt, type <b>ipconfig /release</b> and then press Enter.</li></p>

<p><li> At the command prompt, type <b>ipconfig /renew</b> and then press Enter.</li></p>

<p><li> At the command prompt, type <b>ipconfig | more</b> and then press Enter.</li></p>

<p><li> Pressing Spacebar as necessary, record the current TCP/IP configuration settings for your local area connection in the following table.</li></p>

<p>
<table cellpadding=5 width="95%">
<tr> 
<th>Setting  </th>
<th>Value  </th></tr>
<tr>
<td valign="top">IP address  </td>
<td valign="top">  </td></tr>
<tr>
<td valign="top">Subnet mask  </td>
<td valign="top">  </td></tr>
<tr>
<td valign="top">Default gateway  </td>
<td valign="top">  </td></tr>
</table></p>

<p><li> To test that TCP/IP is working and bound to your adapter, type <b>ping 127.0.0.1</b> and then press Enter.</li></p>
</ol>

<p>The internal loopback test displays four replies if TCP/IP is bound to the adapter.</p>

<A NAME="255"><H3>Exercise 4: Obtaining an IP Address By Using Automatic Private IP Addressing</H3></A>

<p>In this exercise, if you have a server running the DHCP Service, you will need to disable it on that server so that a DHCP server will not be available to provide an IP address for your computer. Without a DHCP server available to provide an IP address, the Windows 2000 Automatic Private IP Addressing feature will provide unique IP addresses for your computer. If the DHCP Service can't be disabled, you can simply disconnect your network adapter cable.</p>


<p><li><b>To obtain an IP address by using Automatic Private IP Addressing</b></li></p>




<ol>
<p><li> At the command prompt, type <b>ipconfig /release</b> and then press Enter.</li></p>

<p><li> At the command prompt, type <b>ipconfig /renew</b> and then press Enter.</li></p>


<p>There will be a pause while Windows 2000 attempts to locate a DHCP server on the network.</p>

<p>What message appears, and what does it indicate? </p>

<p><a href="chaaa.htm#908">Answer</a></p>
</ol>

<p><li><b>To test the TCP/IP configuration</b></li></p>

<ol>
<p><li> At the command prompt, type <b>ipconfig | more</b> and then press Enter.</li></p>

<p><li> Pressing Spacebar as necessary, record the current TCP/IP settings for your local area connection in the following table.</li></p>

<p>
<table cellpadding=5 width="95%">
<tr> 
<th>Setting  </th>
<th>Value  </th></tr>
<tr>
<td valign="top">IP address  </td>
<td valign="top">  </td></tr>
<tr>
<td valign="top">Subnet mask  </td>
<td valign="top">  </td></tr>
<tr>
<td valign="top">Default gateway  </td>
<td valign="top">  </td></tr>
</table></p>

<p>Is this the same IP address assigned to your computer in Exercise 3? Why or why not? </p>

<p><a href="chaaa.htm#908">Answer</a></p>

<p><li> Press Spacebar to finish scrolling through the configuration information, as necessary.</li></p>

<p><li> To verify that TCP/IP is working and bound to your adapter, type <b>ping 127.0.0.1</b> and then press Enter.</li></p>


<p>The internal loopback test displays four replies if TCP/IP is bound to the adapter.</p>


<p><li> If you have a computer to test TCP/IP connectivity with your computer, type <b>ping <i>ip_address</i></b> (where <i>ip_address</i> is the IP address of the computer that you are using to test connectivity), and then press Enter. If you don't have a computer to test connectivity, skip this step and proceed to Exercise 5.</li></p>


<p>Were you successful? Why or why not? </p>

<p><a href="chaaa.htm#908">Answer</a></p>
</ol>

<A NAME="256"><H3>Exercise 5: Obtaining an IP Address by Using DHCP</H3></A>

<p>In this exercise, enable the DHCP Service running on the computer that is acting as a DHCP server (or reconnect your network cable if you disconnected it in Exercise 4). Your computer will obtain IP addressing information from the DHCP server.</p>

<p><div class="note"><blockquote><b>NOTE</b><HR>If a server isn't available running the DHCP Service to provide an IP 
address, skip this exercise.</blockquote></div></p>


<p><li><b>To obtain an IP address by using DHCP</b></li></p>

<ol>
<p><li> At the command prompt, type <b>ipconfig /release</b> and then press Enter.</li></p>

<p><li> At the command prompt, type <b>ipconfig /renew</b> and then press Enter.</li></p>


<p>After a short wait, a message indicates the adapter's local area connection.</p>


<p><li> At the command prompt, type <b>ipconfig /all | more</b> and then press Enter.</li></p>

<p><li> Verify that the DHCP server has assigned an IP address to your computer.</li></p>

<p><li> Close the Command Prompt window.</li></p>
</ol>

<A NAME="257"><H2>Lesson Summary</H2></A>

<p>In this lesson, you learned that Microsoft's implementation of TCP/IP enables enterprise networking and connectivity on computers running Windows 2000. It provides a robust, scaleable, cross-platform client/server framework that is supported by most large networks, including the Internet. You learned that the TCP/IP suite of protocols map to a four-layer conceptual model: network interface, Internet, transport, and application.</p>

<p>By default, client computers running Windows 2000 obtain TCP/IP configura- 
tion information automatically from the Dynamic Host Configuration Protocol (DHCP) Service. However, even in a DHCP-enabled environment, some computers, such as the computer running the DHCP Service, require a static IP address. For each network adapter card that uses TCP/IP in a computer, you can configure an IP address, subnet mask, and default gateway.</p>

<p>You also learned that Windows 2000 includes utilities that you can use to troubleshoot TCP/IP and test connectivity. Ping and ipconfig are two of the common troubleshooting utilities, and FTP and telnet are two of the connectivity utilities.</p>

<p>Finally, in this lesson you learned that the Windows 2000 implementation of TCP/IP supports automatic private IP addressing. Automatic private IP addressing is a new mechanism for automatic address assignment of IP addresses for simple LAN-based network configurations. It is an extension of dynamic IP 
address assignment for LAN adapters and enables configuration of IP addresses without using static IP address assignments or installing the DHCP Service. By default, the Automatic Private IP Addressing feature is enabled. However, you can disable this feature by adding IPAutoconfigurationEnabled to the registry.</p>

</BODY>
</HTML>

