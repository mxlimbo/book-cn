<HTML>
<HEAD>
<TITLE>Lesson 6: Solving Permissions Problems</TITLE>
<link rel="STYLESHEET" type="text/css" href="mmpro.css"><SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</HEAD>
<SCRIPT LANGUAGE="JavaScript">
<!--

function fullSize(sURL){
	window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}

function LibraryHeaderNav(sBackward, sForward, sImgLeftOff, sImgLeftOn, sImgRightOff, sImgRightOn, iH, iW, sImgLeftStyle, sImgRightStyle, sImgRuleStyle, sRuleColor, sRuleSize){
	var tableStr;
	//validate questionable args for defs
	tableStr = "<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 border=0 width=100%>";
	tableStr += "<TR VALIGN=top ALIGN=right>";

	tableStr += "<TD align=right class=" + sImgRuleStyle + ">&nbsp;</TD>";	
	
	tableStr += "<TD width=34 align=right class=" + sImgLeftStyle + ">";
	tableStr += "<A href='" + sBackward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgLeftOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgLeftOff + '\'\"';
	tableStr += " SRC='" + sImgLeftOff + "' vspace=0 hspace=0></a></TD>";
	
	tableStr += "<TD width=34 align=left class=" + sImgRightStyle + ">";
	tableStr += "<A href='" + sForward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgRightOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgRightOff + '\'\"';
	tableStr += " SRC='" + sImgRightOff + "' vspace=0 hspace=0></a></TD></TR>";

	tableStr += "<TR VALIGN=top>";
	tableStr += "<TD height=3 align=center colspan=3 class=" + sImgRuleStyle + ">";
	tableStr += "<HR color=" + sRuleColor + " size=" + sRuleSize + "></TD></TR></TABLE>";
	//alert(tableStr);
	document.write(tableStr);
}

 																						     //purple is: #aa22aa   orange is: #ff9900
LibraryHeaderNav("ch14f.htm", "ch14h.htm", "images/unit_p_a1.gif", "images/unit_p_a2.gif", "images/unit_p_b1.gif", "images/unit_p_b2.gif", 18, 34, "unit01", "unit02", "headerrule", "#aa22aa", "2");
//--></SCRIPT><P>



<A NAME="508"><H1>Lesson 6: Solving Permissions Problems</H1></A>

<p>When you assign or modify NTFS permissions to files and folders, problems might arise. Troubleshooting these problems is important to keep resources available to users.</p>

<p><div class="sidebar"><blockquote>
<b>After this lesson, you will be able to</b>

<ul>
<p><li>Troubleshoot resource access problems.</li></p>
</ul>

<p><b>Estimated lesson time: 20 minutes</b></p>
</blockquote></div></p>

<A NAME="509"><H2>Troubleshooting Permissions Problems</H2></A>

<p>Table 14.6 describes some common permissions problems that you might encounter and provides solutions that you can use to try to resolve these problems.</p>

<p><b>Table 14.6</b> <i>Permissions Problems and Troubleshooting Solutions</i></p>

<p><table cellpadding=5 width="95%"><tr>
<th>Problem</th><th>Solution</th>
</tr><tr>
<td valign="top">A user can't gain access to a file or folder.</td> <td valign="top">If the file or folder was copied, or if it was moved to another NTFS volume, the permissions might have changed.
<p>Check the permissions that are assigned to the user account and to groups of which the user is a member. The user might not have permission or might be denied access either individually or as a member of a group.</p></td>
</tr><tr>
<td valign="top">You add a user account to a group to give that user access to a file or folder, but the user still can't gain access.</td><td valign="top">For access permissions to be updated to include the new group to which you have added the user account, the user must either log off and then log on again, or close all network connections to the computer on which the file or folder resides and then make new connections.</td>
</tr><tr>
<td valign="top">A user with Full Control permission to a folder deletes a file in the folder, although that user doesn't have permission to delete the file itself. You want to stop the user from being able to delete more files.</td><td valign="top">You have to clear the special access permission&#8212;the Delete Subfolders And Files check box&#8212;on the folder to prevent users with Full Control of the folder from being able to delete files in the folder.</td>
</tr></table></p>

<p><div class="note"><blockquote><b>NOTE</b><HR>Windows 2000 supports POSIX applications that are designed to run on UNIX. On UNIX systems, Full Control permission allows you to delete files in a folder. In Windows 2000, the Full Control permission includes the Delete Subfolders And Files special access permission, allowing you the same ability to delete files in that folder regardless of the permissions that you have for the files in the folder.</blockquote></div></p>

<A NAME="510"><H2>Avoiding Permissions Problems</H2></A>

<p>The following list provides best practices for implementing NTFS permissions. These guidelines will help you avoid permission problems.</p>

<ul>
<p><li>Assign the most restrictive NTFS permissions that still enable users and groups to accomplish necessary tasks.</li></p>

<p><li>Assign all permissions at the folder level, not at the file level. Group files in a separate folder for which you want to restrict user access, and then assign that folder restricted access.</li></p>

<p><li>For all application-executable files, assign Read &amp; Execute and Change Permissions to the Administrators group, and assign Read &amp; Execute to the Users group. Damage to application files is usually a result of accidents and viruses. By assigning Read &amp; Execute to Users and Read &amp; Execute and Change Permissions to Administrators, you can prevent users or viruses from modifying or deleting executable files. To update files, members of the Administrators group can assign Full Control to their user account to make changes and then reassign Read &amp; Execute and Change Permissions to their user account.</li></p>

<p><li>Assign Full Control to the CREATOR OWNER group for public data folders so that users can delete and modify files and folders that they create. Doing so gives the user who creates the file or folder (CREATOR OWNER) full access to only the files or folders that he or she creates in the public data folder.</li></p>

<p><li>For public folders, assign Full Control to the CREATOR OWNER group and Read and Write to the Everyone group. This gives users full access to the files that they create, but members of the Everyone group can only read files in the folder and add files to the folder.</li></p>

<p><li>Use long, descriptive names if the resource will be accessed only at the computer. If a folder will eventually be shared, use folder and filenames that are accessible by all client computers.</li></p>

<p><li>Allow permissions rather than denying permissions. If you don't want a user or group to gain access to a particular folder or file, don't assign permissions. Denying permissions should be an exception, not a common practice.</li></p>
</ul>

<p>
<img src="images/practic.JPG" width=92 height=74 border="0">
</p>

<A NAME="511"><H2>Practice: Managing NTFS Permissions</H2></A>

<p>In this practice, you will observe the effects of taking ownership of a file. Then you will determine the effects of permission and ownership when you copy or move files. Finally, you will determine what happens when a user, having the Full Control permission to a folder, has been denied all access to a file in that folder, and the user attempts to delete the file.</p>

<p>To successfully complete this practice, you must have completed &quot;<A HREF="ch14d.htm#489">Practice: Planning and Assigning NTFS Permissions</A>,&quot; in Lesson 3 of this chapter.</p>

<A NAME="512"><H3>Exercise 1: Taking Ownership of a File</H3></A>

<p>In this exercise, you will observe the effects of taking ownership of a file. To do this, you must determine permissions for a file, assign the Take Ownership permission to a user account, and then take ownership as that user.</p>

<p><li><b>To determine the permissions for a file</b></li></p>

<ol>
<p><li>Log on as Administrator, and then start Windows Explorer.</li></p>

<p><li>In the Public folder, create a text file named Owner.</li></p>

<p><li>Right-click Owner.txt, and then click Properties.</li></p>

<p>Microsoft Windows 2000 displays the Owner Properties dialog box with the General tab active.</p>

<p><li>Click the Security tab to display the permissions for the Owner.txt file.</li></p>

<p>What are the current allowed permissions for Owner.txt? </p>

<p><a href="chaaa.htm#935">Answer</a></p>

<p><li>Click Advanced.</li></p>

<p>Windows 2000 displays the Access Control Settings For Owner dialog box with the Permissions tab active.</p>

<p><li>Click the Owner tab.</li></p>

<p>Who is the current owner of the Owner.txt file? </p>

<p><a href="chaaa.htm#935">Answer</a></p>
 </ol>

<p><li><b>To assign permission to a user to take ownership</b></li></p>

<ol>
<p><li>In the Access Control Settings For Owner dialog box, click the Permissions tab.</li></p>

<p><li>Click Add.</li></p>

<p>Windows 2000 displays the Select User, Computer, Or Group dialog box.</p>

<p><li>In the Look In box at the top of the dialog box, ensure that your computer is selected.</li></p>

<p><li>Under Name, click User84, and then click OK.</li></p>

<p>Windows 2000 displays the Permission Entry For Owner dialog box.</p>

<p>Notice that all of the permission entries for User84 are blank.</p>

<p><li>Under Permissions, select the Allow check box next to Take Ownership.</li></p>

<p><li>Click OK.</li></p>

<p>The Access Control Settings For Owner dialog box with the Permissions tab displayed is once again active.</p>

<p><li>Click OK to return to the Owner Properties dialog box.</li></p>

<p><li>Click OK to apply your changes and close the Owner Properties dialog box.</li></p>

<p><li>Close all applications, and then log off Windows 2000.</li></p>
</ol>

<p><li><b>To take ownership of a file</b></li></p>

<ol>
<p><li>Log on as User84, and then start Windows Explorer.</li></p>

<p><li>Expand the Public folder.</li></p>

<p><li>Right-click Owner.txt, and then click Properties.</li></p>

<p>Windows 2000 displays the Owner Properties dialog box with the General tab active.</p>

<p><li>Click the Security tab to display the permissions for Owner.txt.</li></p>

<p>Windows 2000 displays the Security message box, indicating that you can view only the current security information on Owner.txt.</p>

<p><li>Click OK.</li></p>

<p>Windows 2000 displays the Owner Properties dialog box with the Security tab active.</p>

<p><li>Click Advanced to display the Access Control Settings For Owner dialog box, and then click the Owner tab.</li></p>

<p>Who is the current owner of Owner.txt? </p>

<p><a href="chaaa.htm#935">Answer</a></p>

<p><li>In the Change Owner To box, select User84, and then click Apply.</li></p>

<p>Who is the current owner of Owner.txt? </p>

<p><a href="chaaa.htm#935">Answer</a></p>

<p><li>Click Cancel to close the Access Control Settings For Owner dialog box.</li></p>

<p>The Owner Properties dialog box with the Security tab displayed is once again active.</p>

<p><li>Click OK to close the Owner Properties dialog box.</li></p>
</ol>

<p><li><b>To test permissions for a file as the owner</b></li></p>

<ol>
<p><li>While you are logged on as User84, assign User84 the Full Control permission for the Owner.txt file, and click Apply.</li></p>

<p><li>Clear the Allow Inheritable Permissions From Parent To Propagate To This Object check box.</li></p>

<p><li>In the Security dialog box, click Remove.</li></p>

<p><li>Click OK to close the Owner Properties dialog box.</li></p>

<p><li>Delete the Owner.txt file.</li></p>
</ol>

<A NAME="513"><H3>Exercise 2: Copying and Moving Folders</H3></A>

<p>In this exercise, you will see the effects of permissions and ownership when you copy and move folders.</p>

<p><li><b>To create a folder while logged on as a user</b></li></p>

<ol>
<p><li>While you are logged on as User84, in Windows Explorer, in drive C, create a folder named Temp1.</li></p>

<p>What are the permissions that are assigned to the folder?</p>

<p><a href="chaaa.htm#936">Answer</a></p>

<p>Who is the owner? Why?</p>

<p><a href="chaaa.htm#936">Answer</a></p>

<p><li>Close all applications, and then log off Windows 2000.</li></p>
</ol>

<p><li><b>To create a folder while logged on as Administrator</b></li></p>

<ol>
<p><li>Log on as Administrator, and then start Windows Explorer.</li></p>

<p><li>In drive C, create the following two folders: Temp2 and Temp3.</li></p>

<p>What are the permissions for the folders that you just created?</p>

<p><a href="chaaa.htm#936">Answer</a></p>

<p>Who is the owner of the Temp2 and Temp3 folders? Why?</p>

<p><a href="chaaa.htm#936">Answer</a></p>

<p><li>Remove the Everyone group, and then assign the following permissions to the Temp2 and Temp3 folders. You will have to clear the Allow Inheritable Permissions From Parent To Propagate To This Object check box. To select a group, select the group name in the Name list and then click Add.</li></p>

<p><table cellpadding=5 width="95%"><tr>
<th>Folder</th><th>Assign these permissions</th>
</tr><tr>
<td valign="top">Temp2</td> <td valign="top">Administrators: Full Control Users: Read &amp; Execute</td>
</tr><tr>
<td valign="top">Temp3</td> <td valign="top">Backup Operators: Read &amp; Execute Users: Full Control</td>
</tr></table></p>
</ol>

<p><li><b>To copy a folder to another folder within a Windows 2000 NTFS volume</b></li></p>

<ol>
<p><li>In Windows Explorer, copy C:\Temp2 to C:\Temp1 by selecting C:\Temp2, holding down the Ctrl key, and then dragging C:\Temp2 to C:\Temp1.</li></p>

<p>Since this is a copy, C:\Temp2 and C:\Temp1\Temp2 should both exist.</p>

<p><li>Select C:\Temp1\Temp2, and then compare the permissions and ownership with C:\Temp2.</li></p>

<p>Who is the owner of C:\Temp1\Temp2 and what are the permissions? Why? </p>

<p><a href="chaaa.htm#936">Answer</a></p>

<p><li>Close all applications, and then log off Windows 2000.</li></p>
</ol>

<p><li><b>To move a folder within the same NTFS volume</b></li></p>

<ol>
<p><li>Log on as User84.</li></p>

<p><li>In Windows Explorer, select C:\Temp3, and then move it to C:\Temp1.</li></p>

<p>What happens to the permissions and ownership for C:\Temp1\Temp3? Why? </p>

<p><a href="chaaa.htm#936">Answer</a></p>

<p><li>Close all windows and log off.</li></p>
</ol>

<A NAME="514"><H3>Exercise 3: Deleting a File with All Permissions Denied</H3></A>

<p>In this exercise, you will grant a user Full Control permission to a folder but deny all permissions to a file in the folder. You will then observe what happens when the user attempts to delete that file.</p>

<p><li><b>To assign the Full Control permission for a folder</b></li></p>

<ol>
<p><li>Log on as Administrator, and then start Windows Explorer.</li></p>

<p><li>Expand drive C, and then create a folder named Fullaccess.</li></p>

<p><li>Verify that the Everyone group has the Full Control permission for the Fullaccess folder.</li></p>
</ol>

<p><li><b>To create a file and deny access to it</b></li></p>

<ol>
<p><li>In the Fullaccess folder, create a text file named Noaccess.txt.</li></p>

<p><li>Deny the Everyone group the Full Control permission for the Noaccess.txt file.</li></p>

<p>Windows 2000 displays the Security dialog box with the following message:</p>

<p><table cellpadding=5 width="95%"><tr><td>
<pre>
You have denied everyone access to NoAccess.txt. No one will be able
to access NoAccess.txt and only the owner will be able to change
permissions. 

Do you wish to continue?
</pre>
</td></tr></table></p>

<p><li>Click Yes to apply your changes and close the Security dialog box.</li></p>
</ol>

<p><li><b>To view the result of the Full Control permission for a folder</b></li></p>

<ol>
<p><li>In Windows Explorer, double-click Noaccess.txt in the Fullaccess folder to open the file.</li></p>

<p>Were you successful? Why or why not? </p>

<p><a href="chaaa.htm#937">Answer</a></p>

<p><li>Click the Start button, point to Programs, point to Accessories, and then click Command Prompt.</li></p>

<p><li>Change to C:\Fullaccess.</li></p>

<p><li>Delete Noaccess.txt.</li></p>

<p>Were you successful? Why or why not? </p>

<p><a href="chaaa.htm#937">Answer</a></p>

<p>How would you prevent users with Full Control permission for a folder from deleting a file in that folder for which they have been denied the Full Control permission? </p>
</ol> 

<A NAME="515"><H2>Lesson Summary</H2></A>

<p>When you assign or modify NTFS permissions for files and folders, problems might arise. Troubleshooting these problems is important to keep resources available to users. In this lesson, you learned some common permissions problems and some possible solutions to resolve these problems. In the practice exercises for this lesson, you determined the permissions for a file, assigned the Take Ownership permission to a user account, and then took ownership as that user. You also observed the effects of permissions and ownership when you copy and move folders. Finally, in these exercises you practiced assigning permissions to a folder and a file, and then you observed the results when a user has Full Control permission to a folder and has been denied all permissions to a file in that folder.</p>

</BODY>
</HTML>






