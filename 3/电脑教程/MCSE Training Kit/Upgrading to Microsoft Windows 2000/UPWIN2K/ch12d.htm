<HTML>
<HEAD>
<TITLE>Lesson 3: Using the Recovery Console</TITLE>
<link rel="STYLESHEET" type="text/css" href="upwin2k.css">

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</head>
<SCRIPT LANGUAGE="JavaScript">
<!--

function fullSize(sURL){
	window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}

function LibraryHeaderNav(sBackward, sForward, sImgLeftOff, sImgLeftOn, sImgRightOff, sImgRightOn, iH, iW, sImgLeftStyle, sImgRightStyle, sImgRuleStyle, sRuleColor, sRuleSize){
	var tableStr;
	//validate questionable args for defs
	tableStr = "<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 border=0 width=100%>";
	tableStr += "<TR VALIGN=top ALIGN=right>";

	tableStr += "<TD align=right class=" + sImgRuleStyle + ">&nbsp;</TD>";	
	
	tableStr += "<TD width=34 align=right class=" + sImgLeftStyle + ">";
	tableStr += "<A href='" + sBackward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgLeftOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgLeftOff + '\'\"';
	tableStr += " SRC='" + sImgLeftOff + "' vspace=0 hspace=0></a></TD>";
	
	tableStr += "<TD width=34 align=left class=" + sImgRightStyle + ">";
	tableStr += "<A href='" + sForward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgRightOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgRightOff + '\'\"';
	tableStr += " SRC='" + sImgRightOff + "' vspace=0 hspace=0></a></TD></TR>";

	tableStr += "<TR VALIGN=top>";
	tableStr += "<TD height=3 align=center colspan=3 class=" + sImgRuleStyle + ">";
	tableStr += "<HR color=" + sRuleColor + " size=" + sRuleSize + "></TD></TR></TABLE>";
	//alert(tableStr);
	document.write(tableStr);
}

 																						     //purple is: #aa22aa   orange is: #ff9900
LibraryHeaderNav("ch12c.htm", "ch12e.htm", "images/unit_p_a1.gif", "images/unit_p_a2.gif", "images/unit_p_b1.gif", "images/unit_p_b2.gif", 18, 34, "unit01", "unit02", "headerrule", "#aa22aa", "2");
//--></SCRIPT><P>

<A NAME="571"><H1>Lesson 3: Using the Recovery Console</H1></A>

<p>The Windows 2000 Recovery Console is a command-line interface that
you can use to perform a variety of troubleshooting and recovery tasks,
including the following:</p>

<ul>
<p><li>Starting and stopping services</li></p>

<p><li>Reading and writing data on a local drive (including drives
that are formatted with the NTFS file system)</li></p>

<p><li>Formatting hard disks</li></p>
</ul>


<p>
<div class="sidebar"><blockquote>
<p><b>After this lesson, you will be able to</b></p>

<ul>
<p><li>Install and use the Recovery Console.</li></p>
</ul>


<p><b>Estimated lesson time: 20 minutes</b></p>
</blockquote></div>
</p>

<A NAME="572"><H2>Installing and Starting the Recovery Console</H2></A>

<p>To install the Recovery Console, start a command prompt in Windows
2000, change to the I386 (or Alpha) folder on the Windows 2000 CD-ROM,
and then run the Winnt32 command with the /cmdcons switch. After you
install the Recovery Console, you can access it from the startup menu. You can also
access the Recovery Console by using the Windows 2000 Setup disks or
the Windows 2000 CD-ROM to start your computer and then selecting the
Recovery Console option when you are prompted to choose repair
options.</p>

<p>After you start the Recovery Console, you must specify which
installation of Windows 2000 you want to log on to (if you have a dual
boot or multiple boot configuration), and then you must log on as the
Administrator user.</p>

<A NAME="573"><H2>Understanding the Recovery Console Commands</H2></A>

<p>There are a number of commands available in the Recovery Console.
Table 12.3 describes some of these commands.</p>

<p><b>Table 12.3</b> <i>Recovery Console Commands</i></p>

<p><table cellpadding=5 width="95%"><tr>
<th>Command</th>
<th>Description</th>
</tr><tr>
<td valign="top">CD or Chdir</td>
<td valign="top">Displays the name of the current folder or changes the
current folder</td>
</tr><tr>
<td valign="top">Chkdsk</td>
<td valign="top">Checks a disk and displays a status report</td>
</tr><tr>
<td valign="top">Cls</td>
<td valign="top">Clears the screen</td>
</tr><tr>
<td valign="top">Copy</td>
<td valign="top">Copies a single file to another location</td>
</tr><tr>
<td valign="top">Del or Delete</td>
<td valign="top"> Deletes one or more files</td>
</tr><tr>
<td valign="top">Dir</td>
<td valign="top">Displays a list of files and subfolders in a folder</td>
</tr><tr>
<td valign="top">Disable</td>
<td valign="top">Disables a system service or a device driver</td>
</tr><tr>
<td valign="top">Enable</td>
<td valign="top">Starts or enables a system service or a device driver</td>
</tr><tr>
<td valign="top">Exit</td>
<td valign="top">Exits the Recovery Console and restarts your computer</td>
</tr><tr>
<td valign="top">Fdisk</td>
<td valign="top">Manages partitions on your hard disks</td>
</tr><tr>
<td valign="top">Fixboot</td>
<td valign="top">Writes a new partition boot sector onto the system
partition</td>
</tr><tr>
<td valign="top">Fixmbr</td>
<td valign="top">Repairs the master boot record of the partition boot
sector</td>
</tr><tr>
<td valign="top">Format</td>
<td valign="top">Formats a disk</td>
</tr><tr>
<td valign="top">Help</td>
<td valign="top">Lists the commands that you can use in the Recovery Console</td>
</tr><tr>
<td valign="top">Listsvc</td>
<td valign="top">Lists all available services and drivers on the computer</td>
</tr><tr>
<td valign="top">Logon</td>
<td valign="top">Logs on to a Windows 2000 installation</td>
</tr><tr>
<td valign="top">Map</td>
<td valign="top">Displays the drive letter mappings</td>
</tr><tr>
<td valign="top">MD or Mkdir</td>
<td valign="top">Creates a folder</td>
</tr><tr>
<td valign="top">More</td>
<td valign="top">Displays a text file</td>
</tr><tr>
<td valign="top">RD or Rmdir</td>
<td valign="top">Deletes a folder</td>
</tr><tr>
<td valign="top">REN or Rename</td>
<td valign="top">Renames a single file</td>
</tr><tr>
<td valign="top">Systemroot</td>
<td valign="top">Sets the current folder to the systemroot folder of the
system that  you are currently logged on to</td>
</tr><tr>
<td valign="top">Type</td>
<td valign="top">Displays a text file</td>
</tr></table></p>

<p><img src="images/practic.JPG" width=68 height=54 border="0"></p>

<A NAME="574"><H2>Practice: Using the Recovery Console</H2></A>

<p>In this practice, you will install and start the Recovery Console.
You will look at Help to determine the commands available in the
Recovery Console, you will use Listsrv to view the services, and then
you will use the Disable command to disable the Alerter service.</p>

<A NAME="575"><H3>Exercise 1: Installing the Windows 2000 Recovery Console</H3></A>

<p>In this exercise, you will install the Recovery Console.</p>


<p><li><b>To install the Recovery Console</b></li></p>
<ol>
<p><li>Log on as Administrator.</li></p>

<p><li>Insert the CD-ROM that you used to install Microsoft Windows
2000 Server into the CD-ROM drive.</li></p>

<p><li>When the Microsoft Windows 2000 CD window appears, close
it.</li></p>

<p><li>In the Run dialog box, type <b><i>&lt;X&gt;</i>:\i386\winnt32
/cmdcons</b> (where <i>&lt;X&gt;</i> represents the letter assigned to
your CD-ROM drive), and then click OK.</li></p>

<p>The Windows 2000 Setup dialog box appears.</p>

<p><li>Click Yes to install the Windows 2000 Recovery Console.</li></p>

<p>Windows 2000 Setup installs the Windows 2000 Recovery Console to
your hard disk.</p>

<p><li>Click OK to close the Windows 2000 Server Setup dialog box.</li></p>
</ol>

<A NAME="576"><H3>Exercise 2: Using the Windows 2000 Recovery Console</H3></A>

<p>In this exercise, you will use the Help command to view the
available Recovery Console commands. You will then view and scroll
through a list of all available services. Finally, you will disable the
Alerter service.</p>

<ol>
<p><li>Restart your computer.</li></p>

<p><li>Select Microsoft Windows 2000 Recovery Console from the boot
loader menu.</li></p>

<p>The Windows 2000 Recovery Console starts up and prompts you to
select which Windows 2000 installation you would like to log on to. If
you have more than one Windows 2000 installation on this computer, they
will be listed here.</p>

<p><li>Type the number corresponding to the installation you want to
log on to, and then press Enter.</li></p>

<p><li>Type <b>password</b> when prompted for the Administrator
password, and then press Enter.</li></p>
</ol>

<p>
<div class="note"><blockquote><b>NOTE</b><hr>
As of the writing of this training kit, the
administrator's password may not be accepted. This is a limitation
in pre-release versions of the Windows 2000 Server software. If this
occurs when you attempt to log on in the Recovery Console, leave the
password box empty and press Enter.
</blockquote></div>
</p>

<ol>
<p><li value="5">Type <b>help</b> and then press Enter to see the list of
available commands.</li></p>

<p><li>To view all available services, type <b>listsvc</b> and press
Enter.</li></p>

<p><li>Press Spacebar to scroll through each page of available services
until you are returned to a command prompt.</li></p>

<p><li>To disable the alerter service, type <b>disable alerter</b>, and
then press Enter.</li></p>

<p>You are prompted that the Alerter service has a start type of
SERVICE_AUTO_START, but that it is now disabled, with a start type of SERVICE_DISABLED.</p>

<p><li>Type <b>exit</b> and then press Enter to restart your
computer.</li></p>
</ol>

<A NAME="577"><H3>Exercise 3: Restarting the Alerter Service</H3></A>

<p>In this exercise, you will confirm that the Alerter service is
disabled, and then you will restart it.</p>

<ol>
<p><li>Log on as Administrator.</li></p>

<p><li>Open Computer Management, expand Services And Applications, and
then click Services.</li></p>

<p>Notice that the Startup type value for the Alerter service is
Disabled.</p>

<p><li>Double-click Alerter, change the Startup Type to Automatic, and
then click OK.</li></p>

<p><li>Right-click Alerter, and then click Start.</li></p>

<p><li>Close Computer Management.</li></p>

<p><li>Restart your computer.</li></p>
</ol>

<A NAME="578"><H2>Lesson Summary</H2></A>

<p>The Windows 2000 Recovery Console is a command-line interface that
you can use to perform a variety of troubleshooting and recovery tasks,
including starting and stopping services, reading and writing data on a
local drive, and formatting hard disks. You install the Recovery
Console by starting a command prompt, changing to the I386 (or Alpha)
folder on the Windows 2000 CD-ROM, and running the Winnt32 command along with the /cmdcons switch. After you
install the Recovery Console, you can access it from the startup menu
or by using the Windows 2000 Setup disks or the Windows 2000 CD-ROM to
start your computer and then selecting the Recovery Console option when
you are prompted to choose repair options.</p>

</BODY>
</HTML>



