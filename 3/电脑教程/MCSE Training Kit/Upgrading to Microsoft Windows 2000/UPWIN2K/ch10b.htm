<HTML>
<HEAD>
<TITLE>Lesson 1: New DHCP Functionality</TITLE>
<link rel="STYLESHEET" type="text/css" href="upwin2k.css">

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</head>
<SCRIPT LANGUAGE="JavaScript">
<!--

function fullSize(sURL){
	window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}

function LibraryHeaderNav(sBackward, sForward, sImgLeftOff, sImgLeftOn, sImgRightOff, sImgRightOn, iH, iW, sImgLeftStyle, sImgRightStyle, sImgRuleStyle, sRuleColor, sRuleSize){
	var tableStr;
	//validate questionable args for defs
	tableStr = "<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 border=0 width=100%>";
	tableStr += "<TR VALIGN=top ALIGN=right>";

	tableStr += "<TD align=right class=" + sImgRuleStyle + ">&nbsp;</TD>";	
	
	tableStr += "<TD width=34 align=right class=" + sImgLeftStyle + ">";
	tableStr += "<A href='" + sBackward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgLeftOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgLeftOff + '\'\"';
	tableStr += " SRC='" + sImgLeftOff + "' vspace=0 hspace=0></a></TD>";
	
	tableStr += "<TD width=34 align=left class=" + sImgRightStyle + ">";
	tableStr += "<A href='" + sForward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgRightOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgRightOff + '\'\"';
	tableStr += " SRC='" + sImgRightOff + "' vspace=0 hspace=0></a></TD></TR>";

	tableStr += "<TR VALIGN=top>";
	tableStr += "<TD height=3 align=center colspan=3 class=" + sImgRuleStyle + ">";
	tableStr += "<HR color=" + sRuleColor + " size=" + sRuleSize + "></TD></TR></TABLE>";
	//alert(tableStr);
	document.write(tableStr);
}

 																						     //purple is: #aa22aa   orange is: #ff9900
LibraryHeaderNav("ch10a.htm", "ch10c.htm", "images/unit_p_a1.gif", "images/unit_p_a2.gif", "images/unit_p_b1.gif", "images/unit_p_b2.gif", 18, 34, "unit01", "unit02", "headerrule", "#aa22aa", "2");
//--></SCRIPT><P>

<A NAME="479"><H1>Lesson 1: New DHCP Functionality</H1></A>

<p>DHCP centralizes and simplifies Internet Protocol (IP) address
management on Transmission Control Protocol/Internet Protocol (TCP/IP)-based
networks. Windows 2000 includes an enhanced implementation of DHCP that
provides additional tools that are designed to reduce the complexity of
configuring and administering TCP/IP network clients. Enhancements to DHCP in Windows
2000 include the following:</p>

<ul>
<p><li><b>Unauthorized DHCP server detection.</b> On a Windows 2000
Server network using the directory services based on Active Directory
technology, unauthorized DHCP servers are prevented from creating
address assignment conflicts. A DHCP server object stored in Active
Directory directory services contains the IP addresses of authorized DHCP servers on the network. When a DHCP server attempts to start up, Active Directory directory services
are queried and the server's IP address is compared to the list of
authorized DHCP server IP addresses. If no match is found, the DHCP service is automatically shut down.</li></p>

<p><li><b>Integration of DHCP with DNS.</b> When DHCP assigns an IP
address to a client, the service can also register the IP address with DNS name
servers that support the DNS dynamic update protocol. This can help to
reduce the administrative effort required to manage DNS name
servers.</li></p>

<p><li><b>Expanded scope support.</b> DHCP adds support for
superscopes and multicast scopes, which you can use to streamline your
ongoing administration of IP configurations.</li></p>

<p><li><b>Support for option classes.</b> DHCP supports the option
classes, which you use to separate and distribute appropriate options
for clients with similar or special configuration needs.</li></p>

<p><li><b>Automatic assignment of IP addresses.</b> DHCP clients
running Windows 2000 can automatically assign a temporary IP
configuration if a DHCP server is unavailable to provide one. Addresses
are self-assigned from a network address range that is reserved for private TCP/IP usage and is not used on the Internet.</li></p>

<p><li><b>Enhanced monitoring and statistical reporting.</b> New
System Monitoring counters added to Windows 2000 Server monitor DHCP
server performance. The DHCP console included in Windows 2000 also
provides a graphical display of statistical data to help you monitor
system status, such as the number of available addresses versus the
number of depleted addresses or the number of leases being processed
per second.</li></p>
</ul>

<p>
<div class="sidebar"><blockquote>
<p><b>After this lesson, you will be able to</b></p>
<ul>
<p><li>Describe the new DHCP functionality.</li></p>
<p><li>Install the DHCP Server service.</li></p>
<p><li>Authorize a DHCP server.</li></p>
<p><li>Configure scopes, superscopes, and multicast scopes.</li></p>
</ul>
<p><b>Estimated lesson time: 60 minutes</b></p>
</blockquote></div>
</p>

<A NAME="480"><H2>Authorizing a DHCP Server</H2></A>

<p>In previous versions of Windows NT, the implementations of DHCP allowed any user to create DHCP servers on the network. These unauthorized DHCP servers often caused conflicts in IP address assignments. In Windows 2000, before a DHCP server can issue leases to DHCP clients, it must be authorized in the Active Directory directory services. Only members of the Enterprise Admins group, which exists in the root domain of the forest, can authorize a DHCP server in Active Directory directory services. Since unauthorized DHCP servers cannot issue leases to DHCP clients, the new implementation of DHCP that ships with Windows 2000 reduces IP address conflicts and the amount of time you spend on DHCP administration.</p>

<A NAME="481"><H3>Authorization Status in a Domain</H3></A>

<p>When a DHCP server that is a member of a domain starts, it contacts
a domain controller to determine if it is authorized to operate on the
network. If the DHCP server is authorized, the service starts properly.
If the DHCP server is not authorized, the service logs an error in the
system log.</p>

<p>
<div class="note"><blockquote><b>NOTE</b><hr>
If the DHCP server cannot contact a domain controller, it assumes that it is not authorized within the domain, logs an error in the system log, and does not respond to client requests.
</blockquote></div>
</p>

<A NAME="482"><H3>Authorization Status in a Workgroup</H3></A>

<p>When a DHCP server that is a member of a workgroup starts, it sends
a broadcast message. If the DHCP server receives a response from a DHCP
server in a domain, it assumes that it is unauthorized on the network.
If the DHCP server receives a response only from workgroup DHCP
servers, it determines that it can operate normally. As a result, a
network can include multiple operational DHCP servers if all of them
are in a workgroup.</p>

<p>
<div class="note"><blockquote><b>NOTE</b><hr>
In both a domain and workgroup environment, a
DHCP server broadcasts periodically to determine if there is a change
in its authorization status.
</blockquote></div>
</p>

<p>To authorize a DHCP server, you would do the following:</p>

<ol>
<p><li>Log on to the domain with an account that is a member of the
Enterprise Admins group.</li></p>

<p><li>On the Start menu, point to Programs, point to Administrative
Tools, and then click DHCP.</li></p>

<p><li>In the console tree, right-click DHCP, and then click Manage
Authorized Servers.</li></p>

<p><li>In the Manage Authorized Servers dialog box, click the name of
the DHCP server that you wish to authorize and click Authorize.</li></p>

<p><li>In the Authorize DHCP Server dialog box, enter the name or IP
address of the DHCP server to authorize, and then click OK.</li></p>

<p><li>In the DHCP dialog box, click Yes to confirm the
authorization.</li></p>
</ol>

<A NAME="483"><H2>Updating DNS Name Servers Dynamically</H2></A>

<p>In Windows 2000, you can configure the DHCP servers and the DNS
servers to allow dynamic update of the DNS name servers. This is
commonly referred to as Dynamic DNS (DDNS). With DDNS enabled, when
DHCP assigns an IP address to a client, the service can also register
the IP address with DNS name servers that support the DNS dynamic
update protocol. In addition, when the IP address of the client
changes, DHCP can automatically update the DNS name server.</p>

<A NAME="484"><H3>Configuring DHCP to Allow Dynamic Updates</H3></A>

<p>You must configure the DHCP server to perform dynamic updates.
Otherwise, the ability to perform DNS dynamic updates is disabled. You
configure DHCP to enable dynamic update of DNS name servers on the DNS tab of the
Properties dialog box for a DHCP server (see Figure 10.1). On the DNS
tab, select Automatically Update DHCP Client Information In DNS.</p>

<p>When you configure DHCP to enable dynamic update of DNS name
servers, you also must specify one of the following options:</p>

<ul>
<p><li><b>Update DNS Only If DHCP Client Requests.</b> Specifies to
update forward and reverse DNS lookup zones based on the type of
request that the client makes during the lease process. This is selected by default.
If this option is selected, the DHCP client updates the A (host address)
resource record and the DHCP server updates the PTR (Pointer) resource
record.</li></p>

<p><li><b>Always Update DNS.</b> Specifies to update forward and
reverse DNS lookup zones when a client acquires a lease, regardless of
the type of lease request. If this option is selected, the DHCP server updates the A and PTR resource records regardless of the DHCP client's request.</li></p>
</ul>

<p>
<img src="images/F10UP01.JPG" width=404 height=448 border=0>
</p><p>
<!--caption--><b>Figure 10.1</b> <i>Configuring DHCP to automatically update client information in DNS name servers</i><!--/caption-->
</p>


<p>There are two additional options you may also configure:</p>

<ul>
<p><li><b>Discard Forward (Name-To-Address) Lookups When Lease
Expires.</b> Specifies whether or not the DHCP server discards forward
DNS lookups for clients when the lease expires.</li></p>

<p><li><b>Enable Updates For DNS Clients That Do Not Support
Dynamic Update.</b> Specifies whether the DHCP server sends dynamic
updates to the DNS server for any DHCP clients that do not directly
support dynamic updates. If this option is selected, clients running earlier versions of Windows are updated by the DHCP server for both their host (A) and pointer (PTR)
resource records.</li></p>
</ul>

<A NAME="485"><H3>Configuring DNS to Allow Dynamic Updates</H3></A>

<p>To configure a zone for dynamic updates, open the Properties dialog
box for the zone in the DNS tool. On the General tab there are three
possible selections for the Allow Dynamic Updates option. Note that the
Only Secure Updates option is available only after changing the
zone's type to Active Directory-Integrated, as shown in Figure
10.2.</p>

<ul>
<p><li><b>No.</b> Disables dynamic updates for the zone.</li></p>

<p><li><b>Yes.</b> Allows all DNS dynamic updates requested for the
zone.</li></p>

<p><li><b>Only Secure Updates.</b> Allows only DNS dynamic updates
that use secure DNS for the Active Directory&#8211;integrated zone.</li></p>
</ul>


<p>
<img src="images/F10UP02.JPG" width=404 height=448 border=0>
</p><p>
<!--caption--><b>Figure 10.2</b> <i>Configuring a zone for dynamic updates</i><!--/caption-->
</p>


<p>By default, communication between DHCP and DNS is not encrypted. However if the zone type is Active Directory Integrated Primary, the Only Secure Updates option appears in the Allow Dynamic Update list. Select this option to enable secure dynamic updates. With secure dynamic updates, the authoritative name server accepts updates only from clients and servers that are authorized to send dynamic updates. Secure dynamic update provides the following benefits:</p>

<ul>
<p><li>It protects zones and resource records from being modified
by users without authorization.</li></p>

<p><li>It enables you to specify exactly which users and groups can
modify zones and resource records.</li></p>
</ul>

<A NAME="486"><H2>Configuring DHCP Scopes in Windows 2000</H2></A>

<p>Windows 2000 extends DHCP functionality to include support for superscopes and multicast scopes. You use these new features to assign IP addresses to a physical network that contains more than one logical subnet. In addition to extended scope support, Windows 2000 includes a set of wizards that make the task of configuring DHCP scopes, superscopes, and multicast scopes easier.</p>

<A NAME="487"><H3>Configuring a Scope</H3></A>

<p>In Windows 2000, you use the Create Scope wizard to configure a new
scope. To start the Create Scope wizard, on the Start menu, point to Programs,
point to Administrative Tools, and click DHCP. In the console tree,
click the name of the DHCP server for which you want to create a scope.
Right-click the name of the DHCP server, and then click New Scope.</p>

<p>When you configure a new scope, you specify the information listed
in Table 10.1.</p>

<p><b>Table 10.1</b> <i>Parameters for Creating a New Scope</i></p>

<table cellpadding=5 width="95%">
<tr><th valign="top">Parameter</th> <th valign="top">Description</th></tr>
<tr><td vAlign=top>Scope Name</td> 
<td vAlign=top>The name of the scope.</td></tr>

<tr><td vAlign=top>Description</td> 
<td vAlign=top>An optional description for the scope.</td></tr>

<tr><td vAlign=top>Start IP Address</td> 
<td vAlign=top>The starting IP address that can be assigned to a DHCP client from this scope.</td></tr>

<tr><td vAlign=top>End IP Address</td> 
<td vAlign=top>The ending IP address that can be assigned to a DHCP client from this scope.</td></tr>

<tr><td vAlign=top>Length</td> 
<td vAlign=top>The subnet mask to assign to DHCP clients is automatically filled in based on the IP address range entered, but  you can modify it by changing the Length field.</td></tr>

<tr><td vAlign=top>Subnet Mask</td> 
<td vAlign=top>The subnet mask to assign to DHCP clients. This field is  automatically filled in based on the IP address range  entered, but you can modify the suggested Subnet Mask.</td></tr>

<tr><td vAlign=top>Exclusion Start IP Address</td> 
<td vAlign=top>The starting IP address of the range to exclude from the  pool of addresses. The addresses in this exclusion range  will not be assigned to DHCP clients. This is important  if you have static IP addresses configured on non-DHCP  clients. (This is optional.)</td></tr>

<tr><td vAlign=top>Exclusion End IP Address</td> 
<td vAlign=top>The ending IP address of the range to exclude from the  pool of addresses. The addresses in this exclusion range  will not be assigned to DHCP clients. This is important  if you have static IP addresses configured on non-DCHP  clients. (This is optional.)</td></tr>

<tr><td vAlign=top>Lease Duration Limited To</td> 
<td vAlign=top>The number of days, hours, and minutes that a DHCP client lease is available before it must be renewed. The  default lease duration is three days.</td></tr>

<tr><td vAlign=top>Lease Duration Unlimited </td>
<td vAlign=top>A parameter that indicates that DHCP leases assigned to  clients never expire.</td></tr>
</table>

<p>You can also configure some common DHCP options including the
following:</p>

<ul>
<p><li>IP addresses of any gateways</li></p>

<p><li>Domain name and the IP address of any DNS servers</li></p>

<p><li>IP addresses of any WINS servers</li></p>
</ul>


<p>When you create a new scope, it must be activated before it can
start lease distribution. You can choose to activate the new scope
during completion of the New Scope wizard, or you can activate it
later. To activate a scope later, right-click the scope name, and then
click Activate.</p>

<A NAME="488"><H3>Configuring a Superscope</H3></A>

<p>In a Microsoft Windows NT 4.0 network, IP addresses for DHCP clients
are limited to a single logical subnet per physical network. The Windows
2000 implementation of DHCP supports superscopes, which provide IP
addresses from multiple logical subnets to DHCP clients on a single physical
network. In Figure 10.3, SuperscopeA contains Scope1, which contains IP
addresses from one logical subnet, and Scope2, which contains IP
addresses from a second logical subnet.</p>

<p>
<A HREF="javascript:fullSize('f10up03x.htm')"> <img src="images/f10up03.JPG" width=404 height=276 border=0 ALT = "Click to view at full size."> </A>
</p><p>
<!--caption--><b>Figure 10.3</b> <i>Superscope</i><!--/caption-->
</p>


<p>You use superscopes in a variety of situations, including the
following:</p>

<ul>
<p><li>You need to add more hosts on a subnet than originally
planned.</li></p>

<p><li>You replace existing address ranges with new address
ranges.</li></p>

<p><li>The network uses two DHCP servers to manage separate logical
subnets on the same physical subnet.</li></p>
</ul>

<p>You use the New Superscope wizard to configure a new superscope. To
start the New Superscope wizard, on the Start menu, point to Programs,
point to Administrative Tools, and click DHCP. In the console tree, click the
name of the DHCP server for which you want to create a superscope.
Right-click the name of the DHCP server, and then click New Superscope. In the New
Superscope wizard, enter the superscope name, and then specify the
scopes to include.</p>

<A NAME="489"><H3>Configuring a Multicast Scope</H3></A>

<p>Multicast scopes are supported through the use of Multicast Address
Dynamic Client Allocation Protocol (MADCAP). MADCAP is a new proposed
standard protocol for performing multicast address allocation. In
earlier versions of Windows, DHCP scopes provided client configuration by allocating
ranges of IP addresses from the Class A, B, and C address classes. DHCP in
Windows 2000 provides the same ranges of IP addresses, but it also
supports MADCAP in the form of multicast scopes. Multicast scopes allow
DHCP-enabled clients to lease Class D addresses (224.0.0.0 to
239.255.255.255).</p>

<p>Most IP addresses are unique and specific to a single network
computer. Multicast addresses are shared by many network computers.
When the destination address of an IP datagram is a multicast address,
the datagram is forwarded to all members of a multicast group.
Multicast address assignment allows selected computers on a network to participate in collaborative
application sessions. Typically, conferencing and audio applications use
multicasting technology for deploying information to several computers at one time
without generating network traffic. Without a multicast scope, users
must manually configure multicast addresses. Membership in a multicast
group is dynamic, so hosts can leave or join the group at any time.
Group membership can be any size and hosts can be members of multiple
multicast groups.</p>

<p>
<div class="note"><blockquote><b>NOTE</b><hr>
For more information on multicast addresses, see
RFC 1112 and RFC 2236.
</blockquote></div>
</p>

<p>You use the New Multicast Scope wizard to configure a new multicast
scope. To start the New Multicast Scope wizard, start DHCP, and in the
console tree, click the name of the DHCP server for which you want to
create a multicast scope. Right-click the name of the DHCP server, and
then click New Multicast Scope. In the New Multicast Scope wizard,
enter the multicast scope's name and the IP address range. Specify
any excluded IP addresses and the lease duration. When prompted,
activate the multicast scope.</p>

<A NAME="490"><H2>Examining Option Classes</H2></A>

<p>In a Windows NT 4.0 network, a DHCP server provides the same
configuration information to all DHCP clients that receive an IP
address. The Windows 2000 implementation of DHCP supports option
classes, which you can use to provide unique configurations to client
computers. For example, you might configure an option class to provide
a group of computers with Internet access. Therefore, you must configure both the DHCP server and DHCP clients to allow
option class support.</p>

<p>Windows 2000 supports two types of option classes:</p>

<ul>
<p><li><b>Vendor-defined classes.</b> Configure vendor-defined
classes to manage DHCP options that are assigned to clients that are
identified by vendor type. For example, you can configure a vendor-defined class to provide a configuration for a specific brand of computer. The vendor-class
identifier information is a string of character data interpreted by the
DHCP servers. Vendors can choose to define specific vendor class
identifiers to convey particular configuration or other identification
information about a client. For example, the identifier can encode the
client's hardware or software configuration. Most vendor types are
derived from the standard reserved-hardware and OS-type abbreviation
codes listed in RFC 1700.</li></p>

<p><li><b>User-defined classes.</b> Configure user-defined classes
to manage DHCP options that are assigned to clients that require a common
configuration that is not based on vendor type; for example, you might want to assign
shorter leases to a dial-up client or a laptop portable computer. As of
the writing of this training kit, user class options for DHCP is a
proposed Internet standard. For more information on DHCP user options,
see the Internet Engineering Task Force (IETF) Web site
(<a href="http://www.ietf.org" target="_window2">http://www.ietf.org</a>).</li></p>
</ul>

<p>After you define option classes on a DHCP server, you must configure
individual scopes with any class-related options that you want to
provide to clients.</p>

<A NAME="491"><H2>Using Automatic Private IP Addressing</H2></A>

<p>Windows 2000 supports a new mechanism for automatic IP address
assignment for simple local area network (LAN)-based network
configurations. This addressing mechanism, called Automatic Private IP Addressing (APIPA), is an extension of dynamic IP address assignment for LAN adapters,
enabling the configuration of IP addresses without using static IP
address assignment or installing the DHCP Service.</p>

<p>For the APIPA feature to function properly on a computer running
Windows 2000, you must configure a network LAN adapter for TCP/IP and
click Obtain An IP Address Automatically in the Internet Protocol
(TCP/IP) Properties dialog box.</p>

<p>When Windows 2000 starts, TCP/IP attempts to find a DHCP server on
the attached network to obtain a dynamically assigned IP address. If there
is no DHCP server available, the client cannot obtain an IP address.
However, if the Obtain An IP Address Automatically option has been
selected, APIPA generates an IP address in the form of
169.254.<i>x</i>.<i>y</i> (where <i>x</i>.<i>y</i> is a unique
identifier on the network that the client generates) and a subnet mask
of 255.255.0.0.</p>

<p>
<div class="note"><blockquote><b>NOTE</b><hr>
The Internet Assigned Numbers Authority (IANA)
has reserved 169.254.0.1 through 169.254.255.254 for APIPA. As a
result, APIPA provides an address that is guaranteed not to conflict with routable
addresses.
</blockquote></div>
</p>

<p>After generating the address, the client computer broadcasts it, and
then, if no other computer responds, assigns the address to itself. The
computer continues to use this address until it detects and receives
configuration information from a DHCP server. This allows the computer
to be connected to a LAN hub, to restart without any IP address
configuration, and to be able to use TCP/IP for local network
access.</p>

<A NAME="492"><H3>Understanding the Limitations of APIPA</H3></A>

<p>APIPA can assign an IP address to DHCP clients automatically.
However, APIPA does not generate all of the information that DHCP
typically provides, such as the address of a default gateway.
Consequently, computers that are enabled with APIPA can communicate
only with computers on the same subnet that have also been assigned
addresses through APIPA.</p>

<A NAME="493"><H3>Disabling APIPA</H3></A>

<p>By default, the APIPA feature is enabled. However, you can disable
this feature. To disable APIPA, add the IPAutoconfigurationEnabled entry to
the HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\
Parameters\Interfaces\<i>GUID_of_the_adapter</i> subkey in the
registry.</p>

<p>The IPAutoconfigurationEnabled entry takes a REG_DWORD data type.
To disable APIPA, specify a value of 0 for the entry.</p>

<p><img src="images/practic.JPG" width=68 height=54 border=0></p>

<A NAME="494"><H2>Practice: Supporting DHCP in Windows 2000</H2></A>

<p>In this practice, you will install and configure the DHCP Service
and then add the DHCP server to the list of authorized servers for the
domain.</p>

<A NAME="495"><H3>Exercise 1: Installing the DHCP Service</H3></A>

<p>In this exercise, you will install the DHCP Service on your
computer.</p>


<p><li><b>To install the DHCP Service</b></li></p>
<ol>
<p><li>Log on to your domain as Administrator.</li></p>

<p><li>Click Start, point to Programs, and then point to Administrative
Tools.</li></p>

<p>Are there any entries for DHCP?  </p>

<p><li>Open Control Panel.</li></p>

<p><li>Double-click Add/Remove Programs.</li></p>

<p>The Add/Remove Programs window appears.</p>

<p><li>Click Add/Remove Windows Components.</li></p>

<p>The Windows Components wizard appears.</p>

<p><li>Click Networking Services, but do not remove the check mark in
the box to the left of the component.</li></p>
</ol>

<p>
<div class="note"><blockquote><b>NOTE</b><hr>
If you have been following this entire course,
you have already installed some optional networking components on this
computer and the Networking Services check box is already selected. If
there is not a check mark in front of Networking Services, that
indicates that no optional network services have been installed on this
computer.
</blockquote></div>
</p>

<ol>
<p><li value="7">Click Details.</li></p>

<p>The Networking Services dialog box appears.</p>
 
<p><li>Under Subcomponents Of Networking Services, click to place a
check mark in the box to the left of Dynamic Host Configuration
Protocol (DHCP).</li></p>

<p><li>Click OK.</li></p>

<p>You are returned to the Windows Components page.</p>

<p><li>Click Next.</li></p>

<p>Windows 2000 Server begins installing the required components.</p>

<p><li>If the Insert Disk dialog box appears, insert the Windows 2000
CD-ROM, if necessary, and then click OK. Otherwise, go to step 15.</li></p>

<p>The Windows 2000 CD-ROM window appears.</p>

<p><li>Close the Windows 2000 CD-ROM window.</li></p>

<p>Windows 2000 Server Setup copies the required files.</p>

<p><li>Remove the CD-ROM.</li></p>

<p><li>Click Finish to close the Windows Components wizard.</li></p>

<p><li>Close the Add/Remove Programs window.</li></p>

<p><li>Close Control Panel.</li></p>

<p><li>Click Start, point to Programs, and then point to
Administrative Tools.</li></p>

<p>Are there any entries for DHCP?</p>
</ol>

<p><a href="chaaa.htm#721">Answer</a></p>

<A NAME="496"><H3>Exercise 2: Authorizing a DHCP Server</H3></A>

<p>In this exercise, you authorize a DHCP server.</p>


<p><li><b>To authorize a DHCP server</b></li></p>
<ol>
<p><li>Click Start, point to Programs, and then point to Administrative
Tools. Click DHCP.</li></p>

<p>The DHCP window appears.</p>

<p><li>In the console pane, click Server1.domain.com.</li></p>

<p>A message appears in the details pane describing how to authorize
the DHCP server.</p>

<p><li>On the Action menu, click Authorize.</li></p>

<p>Authorization begins and can take several minutes to complete. When
authorization is complete, a green upward-pointing arrow appears on the
server's icon in the console pane.</p>

<p><li>If the hard disk light stops flashing, or if an extended amount
of time has elapsed, and the arrow is still red, press F5 to
refresh.</li></p>

<p>A green upward-pointing arrow should appear on the server's icon
in the console pane.</p>
</ol>

<A NAME="497"><H3>Exercise 3: Creating and Configuring a DHCP Scope</H3></A>

<p>In this exercise, you create and configure a DHCP scope.</p>

<p><li><b>To create and configure a DHCP scope</b></li></p>
<ol>
<p><li>Right-click Server1.domain.com (or the name of your computer),
and then click New Scope.</li></p>
<p>The New Scope wizard appears.</p>
<p><li>Click Next.</li></p>
<p>The Scope Name page appears.</p>
<p><li>Type <b>Scope1</b> in the Name box, and then click Next.</li></p>
<p>The IP Address Range page appears.</p>
<p><li>Type <b>192.168.1.70</b> in the Start IP Address box, and type
<b>192.168.1.140</b> in the End IP Address box.</li></p>
</ol>

<p><div class="caution"><blockquote><b>CAUTION</b><HR>
If you are on a network, do not assume that you can use this range of addresses. You must check with your network administrator to determine a range of addresses that you can use.</blockquote></div></p>

<ol>
<p><li value="5">Ensure that the Mask is 255.255.255.0.</li></p>

<p><li>Click Next.</li></p>

<p>The Add Exclusions page appears.</p>

<p><li>Type <b>192.168.1.76</b> in the Start IP Address box.</li></p>

<p><li>Type <b>192.168.1.90</b> in the End IP Address box.</li></p>

<p><li>Click Add.</li></p>

<p>Notice that 192.168.1.76 to 192.168.1.90 appears in the Excluded
Address Range box.</p>

<p><li>Click Next.</li></p>

<p>The Lease Duration page appears.</p>

<p><li>Click Next to accept the default lease duration of 8 days.</li></p>

<p>The Configure DHCP Options page appears.</p>

<p><li>Click No, I Will Configure These Options Later, and then click
Next.</li></p>

<p>The Completing The New Scope Wizard page appears.</p>

<p><li>Click Finish.</li></p>

<p>An icon representing the new scope appears in the DHCP snap-in.</p>
</ol>

<p>
<div class="note"><blockquote><b>NOTE</b><hr>
The red arrow pointing downward indicates that the scope is not activated.
</blockquote></div>
</p>

<ol>
<p><li value="14">Double-click Scope1, right-click Scope1, and then click
Activate.</li></p>


<p>The red arrow pointing downward disappears indicating that the scope
is activated.</p>
</ol>

<p><li><b>To create a DHCP superscope</b></li></p>
<ol>
<p><li>Right-click Server1.domain.com (or the name of your computer),
and then click New Superscope.</li></p>

<p><li>In the New Superscope wizard, click Next.</li></p>

<p><li>On the Superscope Name page, type <b>superscope</b> in the Name
box, and then click Next.</li></p>

<p>The Select Scopes page appears.</p>

<p><li>On the Select Scopes page, click Scope1.</li></p>

<p><li>Click Next, and then click Finish.</li></p>

<p>The superscope appears in the console tree.</p>
</ol>

<p><li><b>To create a DHCP multicast scope</b></li></p>
<ol>
<p><li>Right-click Server1.domain.com (or the name of your computer),
and then click New Multicast Scope.</li></p>

<p><li>In the New Multicast Scope wizard, click Next.</li></p>

<p><li>On the Multicast Scope Name page, type <b>multicast</b> in the
Name box, and then click Next.</li></p>

<p>The IP Address Range page appears.</p>

<p><li>On the IP Address Range page, type <b>224.1.1.1</b> in the Start
IP Address box, type <b>224.1.1.254</b> in the End IP Address box, and
then click Next.</li></p>

<p><li>On the Add Exclusions page, click Next.</li></p>

<p><li>On the Lease Duration page, click Next to accept the default
setting of 30 days.</li></p>

<p><li>On the Activate Multicast Scope page, ensure the Yes option is
selected, and then click Next.</li></p>

<p><li>Click Finish.</li></p>

<p>The multicast scope appears in the console tree.</p>

<p><li>Close the DHCP window.</li></p>
</ol>

<A NAME="498"><H2>Lesson Summary</H2></A>

<p>Windows 2000 includes an enhanced implementation of DHCP that
simplifies IP address management. In earlier versions of Windows NT, a user could
easily create an unauthorized DHCP server on the network. In Windows
2000, DHCP prevents unauthorized DHCP servers from assigning IP
addresses&#8212;thus reducing this major source of address assignment
conflicts. Another enhancement to the Windows 2000 implementation of
DHCP is that the DHCP service can now be configured so that when it
assigns an IP address to a client, it can also register the IP address
with DNS name servers that support the DNS dynamic update protocol. This can help to reduce the administrative effort required to
manage DNS name servers.</p>

<p>DHCP in Windows 2000 also has expanded scope support, adding support
for superscopes and multicast scopes. A superscope allows you to group
scopes so they can provide IP addresses from multiple logical subnets
to DHCP clients on a single physical network. Multicast scopes simplify support for
Multicast DHCP. Multicast addresses are shared by many network
computers. When the destination address of an IP datagram is a
multicast address, the datagram is forwarded to all members of a multicast group. Multicast address
assignment allows selected computers on a network to participate in collaborative
application sessions. Without a multicast scope, users must manually
configure multicast addresses.</p>

<p>Other enhancements to the Windows 2000 implementation of DHCP include support for the option classes, which you use to separate and distribute appropriate options for clients with similar or special configuration needs; automatic assignment of IP addresses; and enhanced monitoring and statistical reporting. DHCP clients running Windows 2000 can automatically assign a temporary IP configuration if a DHCP server is unavailable to provide one. Addresses are self-assigned from a network address range that is reserved for private TCP/IP usage and is not used on the Internet. The enhanced monitoring and statistical reporting are found in the DHCP console. The DHCP console provides a graphical display of statistical data to help you monitor system status, such as the number of available addresses versus the number of depleted addresses or the number of leases being processed per second.</p>

<p>Windows 2000 supports a new mechanism for automatic IP address
assignment for simple LAN-based network configurations called Automatic
Private IP Addressing (APIPA). For APIPA to function properly on a computer
running Windows 2000, you must configure a network LAN adapter for
TCP/IP and click the Obtain An IP Address Automatically check box in
the Internet Protocol (TCP/IP) Properties dialog box. By default, APIPA is enabled; you can disable it by adding the IPAutoconfigurationEnabled entry to the HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters\Interfaces\
<i>GUID_of_the_adapter</i> subkey in the registry.</p>

<p>APIPA can assign an IP address to DHCP clients automatically, but it
does not generate all of the information that DHCP typically provides,
such as the address of a default gateway. Consequently, computers that
are enabled with APIPA can communicate only with computers on the same
subnet that have also been assigned addresses through APIPA.</p>

</BODY>
</HTML>



