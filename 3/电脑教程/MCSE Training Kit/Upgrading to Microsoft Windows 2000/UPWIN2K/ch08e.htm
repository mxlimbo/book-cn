<HTML>
<HEAD>
<TITLE>Lesson 4: Managing Disk Quotas on NTFS Volumes</TITLE>
<link rel="STYLESHEET" type="text/css" href="upwin2k.css">

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</head>
<SCRIPT LANGUAGE="JavaScript">
<!--

function fullSize(sURL){
	window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}

function LibraryHeaderNav(sBackward, sForward, sImgLeftOff, sImgLeftOn, sImgRightOff, sImgRightOn, iH, iW, sImgLeftStyle, sImgRightStyle, sImgRuleStyle, sRuleColor, sRuleSize){
	var tableStr;
	//validate questionable args for defs
	tableStr = "<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 border=0 width=100%>";
	tableStr += "<TR VALIGN=top ALIGN=right>";

	tableStr += "<TD align=right class=" + sImgRuleStyle + ">&nbsp;</TD>";	
	
	tableStr += "<TD width=34 align=right class=" + sImgLeftStyle + ">";
	tableStr += "<A href='" + sBackward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgLeftOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgLeftOff + '\'\"';
	tableStr += " SRC='" + sImgLeftOff + "' vspace=0 hspace=0></a></TD>";
	
	tableStr += "<TD width=34 align=left class=" + sImgRightStyle + ">";
	tableStr += "<A href='" + sForward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgRightOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgRightOff + '\'\"';
	tableStr += " SRC='" + sImgRightOff + "' vspace=0 hspace=0></a></TD></TR>";

	tableStr += "<TR VALIGN=top>";
	tableStr += "<TD height=3 align=center colspan=3 class=" + sImgRuleStyle + ">";
	tableStr += "<HR color=" + sRuleColor + " size=" + sRuleSize + "></TD></TR></TABLE>";
	//alert(tableStr);
	document.write(tableStr);
}

 																						     //purple is: #aa22aa   orange is: #ff9900
LibraryHeaderNav("ch08d.htm", "ch08f.htm", "images/unit_p_a1.gif", "images/unit_p_a2.gif", "images/unit_p_b1.gif", "images/unit_p_b2.gif", 18, 34, "unit01", "unit02", "headerrule", "#aa22aa", "2");
//--></SCRIPT><P>

<A NAME="405"><H1>Lesson 4: Managing Disk Quotas on NTFS Volumes</H1></A>

<p>You use disk quotas to manage storage growth in distributed
environments. Disk quotas allow you to allocate disk space to users
based on the files and folders that they own. You can set disk quotas,
quota thresholds, and quota limits for all users and for individual
users. You can also monitor the amount of hard disk space that users
have filled and the amount that they have left against their quota.</p>

<p>
<div class="sidebar"><blockquote>
<p><b>After this lesson, you will be able to</b></p>

<ul>
<p><li>Manage disk quotas on NTFS volumes.</li></p>
</ul>

<p><b>Estimated lesson time: 30 minutes</b></p>
</blockquote></div>
</p>

<A NAME="406"><H2>Using Disk Quotas</H2></A>

<p>Windows 2000 disk quotas track and control disk usage on a per-user,
per-volume basis. Windows 2000 tracks disk quotas for each volume, even if
the volumes are on the same hard disk. Because quotas are tracked on a
per-user basis, every user's disk space is tracked regardless of the folder
in which the user stores files. Table 8.5 describes the characteristics
of Windows 2000 disk quotas.</p>

<p><b>Table 8.5</b> <i>Disk Quota Characteristics and Descriptions</i></p>
<p>
<table valign="top" cellpadding="5" width="95%">
<tr>
<th>Characteristic</th>
<th>Description</th>
</tr>
<tr>
<td valign="top">Disk usage is based  on file and folder ownership.</td>
<td valign="top">Windows 2000 calculates disk space usage for
users based on the files and folders that they own. When a
user copies or saves a new file to an NTFS volume or takes  ownership of a file on an NTFS volume, Windows 2000  charges the disk space for the file against the user's  quota limit.</td>
</tr>
<tr>
<td valign="top">Disk quotas do not use compression.</td>
<td valign="top">Windows 2000 ignores compression when it
calculates hard disk space usage. Users are charged for each
uncompressed byte, regardless of how much hard disk  space is actually used. File compression produces different degrees of compression for different types of files. Different uncompressed file types that are the same size might end up to be very different sizes when they are compressed.</td>
</tr>
<tr>
<td valign="top">Free space for applications is based on quota limit.</td>
<td valign="top">When you enable disk quotas, the free space that applications is Windows 2000 reports to  for the volume the amount of space remaining within the
user's disk  quota limit.</td>
</tr>
</table>
</p>

<p>
<div class="note"><blockquote><b>NOTE</b><hr>
 You can apply disk quotas only to volumes formatted with
the version of NTFS that is used in Windows 2000.
</blockquote></div>
</p>

<p>To monitor and control hard disk space usage, system administrators
can do the following:</p>

<ul>
<p><li>Set a disk quota limit to specify the amount of disk space
for each user.</li></p>

<p><li>Set a disk quota warning to specify when Windows 2000 should
log an event, indicating that the user is nearing his or her
limit.</li></p>

<p><li>Enforce disk quota limits and deny users access if they
exceed their limit.</li></p>

<p><li>Log an event when a user exceeds a specified disk space
threshold. The threshold could be when users exceed their quota limit
or when they exceed their warning level.</li></p>
</ul>

<p>After you enable disk quotas for a volume, Windows 2000 collects
disk usage data for all users who own files and folders on the volume.
This allows you to monitor volume usage on a per-user basis. By
default, only members of the Administrators group can view and change quota settings. However, you
can allow users to view quota settings.</p>

<A NAME="407"><H2>Setting Disk Quotas</H2></A>

<p>You can enable disk quotas and enforce disk quota warnings and
limits for all users and for individual users.</p>

<p>If you want to enable disk quotas, in the Properties dialog box for
a disk, on the Quota tab, configure the options that are described in
Table 8.6.</p>

<p><b>Table 8.6</b> <i>Quota Tab Options</i></p>
<p>
<table valign="top" cellpadding="5" width="95%">
<tr>
<th>Option</th>
<th>Description</th>
</tr>
<tr>
<td valign="top">Enable Quota Management</td>
<td valign="top">Select this check box to enable disk quota management.</td>
</tr>
<tr>
<td valign="top">Deny Disk Space To Users Exceeding Quota Limit</td>
<td valign="top">Select this check box so that when users
exceed their hard disk space allocation, they receive an
&quot;out of disk  space&quot; message and cannot write to the volume.</td>
</tr>
<tr>
<td valign="top">Do Not Limit Disk Usage</td>
<td valign="top">Click this option when you do not want to limit the  amount of hard disk space for users.</td>
</tr>
<tr>
<td valign="top">Limit Disk Space To</td>
<td valign="top">Configure the amount of disk space that users can fill.</td>
</tr>
<tr>
<td valign="top">Set Warning Level To</td>
<td valign="top">Configure the amount of disk space that users
can fill  before Windows 2000 logs an event, indicating that a  user is nearing his or her limit.</td>
</tr>
<tr>
<td valign="top">Quota Entries</td>
<td valign="top">Click this button to open the Quota Entries
window, where you can add a new entry, delete an entry, and  view the properties for a quota entry.</td>
</tr>
</table>
</p>

<p>If you want to enforce quota limits for all users, you would do the
following:</p>

<ol>
<p><li>In the Limit Disk Space To box and the Set Warning Level To box,
enter the values for the limit and warning level that you want to
set.</li></p>

<p><li>Select the Deny Disk Space To Users Exceeding Quota Limit check
box.</li></p>
</ol>

<p>Windows 2000 will monitor usage and will not allow users to create
files or folders on the volume when they exceed the limit.</p>

<p>If you want to enforce quota limits for a specific user, you would
do the following:</p>

<ol>
<p><li>In the Properties dialog box for a disk, on the Quota tab, click
the Quota Entries button.</li></p>

<p><li>In the Quota Entries window (see Figure 8.6), double-click the
user account for which you want to set a disk quota limit or create an
entry by clicking New Quota Entry on the Quota menu.</li></p>

<p><li>Configure the disk space limit and the warning level for the
individual user.</li></p>

<p>
<A HREF="javascript:fullSize('f08up06x.htm')"> <img src="images/f08up06.JPG" width=404 height=235 border=0 ALT = "Click to view at full size."> </A>
</p><p>
<!--caption--><b>Figure 8.6</b> <i>Configuring disk quotas</i><!--/caption-->
</p>

</ol>

<p>You can determine the status of disk quotas in the Properties dialog
box for a disk. A traffic light icon designates the status (see Figure
8.6):</p>

<ul>
<p><li>A red (top) light indicates that disk quotas are
disabled.</li></p>

<p><li>A yellow (middle) light indicates that Windows 2000 is
rebuilding disk quota information.</li></p>

<p><li>A green (bottom) light indicates that the disk quota system
is active.</li></p>
</ul>

<p>You use the Quota Entries window to monitor usage for all users who
have copied, saved, or taken ownership of files and folders on the volume.
Windows 2000 will scan the volume and monitor the amount of disk space
in use by each user. Use the Quota Entries window to view the
following:</p>

<ul>
<p><li>The amount of hard disk space that each user fills.</li></p>

<p><li>Users who are over their quota-warning threshold, which is
signified by a yellow triangle (see Figure 8.6).</li></p>

<p><li>Users who are over their quota limit, which is signified by
a red circle (see Figure 8.6).</li></p>

<p><li>The warning threshold and the disk quota limit for each
user.</li></p>
</ul>

<p>
<img src="images/practic.JPG" width=68 height=54 border="0">
</p>

<A NAME="408"><H2>Practice: Configuring Disk Quotas</H2></A>

<p>In this practice, you will configure the quota management settings
for drive C to limit the data that users can store on the volume. You
will then configure custom quota settings for a user account. Finally,
you will remove the quota management limits.</p>

<A NAME="409"><H3>Exercise 1: Assigning Disk Quotas</H3></A>

<p><li><b>To configure default quota management settings</b></li></p>

<ol>
<p><li>Log on to your domain as Administrator and start Windows
Explorer.</li></p>

<p><li>In Windows Explorer, right-click the drive C icon, and then
click Properties.</li></p>

<p>Windows 2000 displays the Local Disk (C:) Properties dialog box with
the General tab active.</p>

<p><li>Click the Quota tab.</li></p>

<p>Notice that disk quotas are disabled by default.</p>

<p><li>On the Quota tab, click the Enable Quota Management check
box.</li></p>

<p>Notice that the default disk space limit for new users is set to 1
KB.</p>

<p><li>Type <b>10</b> in the Limit Disk Space To box, and select MB in
the drop-down list box to the right.</li></p>

<p><li>Type <b>6</b> in the Set Warning Level To box and select MB in
the drop-down list box to the right.</li></p>

<p><li>Click Apply.</li></p>

<p>Windows 2000 displays the Disk Quota message box, warning you that
the disk volume will be rescanned to update disk usage statistics if
you enable quotas.</p>

<p><li>Click OK to enable disk quotas.</li></p>
</ol>

<p><li><b>To configure quota management settings for a user</b></li></p>

<ol>
<p><li>In the Local Disk (C:) Properties dialog box, click the Quota
Entries button.</li></p>

<p>Windows 2000 displays the Quota Entries For Local Disk (C:) window.
It may take a couple of minutes for the names to be filled in.</p>
</ol>

<p>
<div class="note"><blockquote><b>NOTE</b><hr>
Any user accounts that have stored files on
drive C are listed along with the amount of disk space they are currently using, their quota
limit, the warning level indicating the amount of disk space that can
be used before a warning is generated, and the percentage of their quota limit in use.
</blockquote></div>
</p>

<ol>
<p><li value="2">On the Quota menu, click New Quota Entry.</li></p>

<p>Windows 2000 displays the Select Users dialog box.</p>

<p><li>In the Look In box, ensure your domain is selected.</li></p>

<p><li>Near the top of the dialog box, in the Name column, select User
Three, the user for which you want to set up a quota, and then click
Add.</li></p>

<p>User Three appears in the list at the bottom of the dialog box.</p>

<p><li>Click OK.</li></p>

<p>Windows 2000 displays the Add New Quota Entry dialog box.</p>

<p>What are the default settings for the user you just set a quota
limit for?</p>

<p><li>Click OK to accept the default settings and return to the Quota
Entries For Local Disk (C:) window.</li></p>

<p><li>Close the Quota Entries window and the Local Disk (C:)
Properties dialog box, and then click OK to close the Local Disk (C:)
Properties dialog box.</li></p>
</ol>

<p><a href="chaaa.htm#720">Answers</a></p>

<A NAME="410"><H3>Exercise 2: Disabling Quota Management</H3></A>

<p>In this exercise, you will disable quota management settings for
drive C.</p>


<p><li><b>To disable quota management settings for drive C</b></li></p>
<ol>
<p><li>Ensure you are logged on to your domain as Administrator and
that Windows Explorer is open.</li></p>

<p><li>Right-click the drive C icon, and then click Properties.</li></p>

<p>Windows 2000 displays the Local Disk (C:) Properties dialog box with
the General tab active.</p>

<p><li>Click the Quota tab.</li></p>

<p><li>On the Quota tab, clear the Enable Quota Management check
box.</li></p>

<p>Notice that all quota settings for drive C are no longer
available.</p>

<p><li>Click Apply.</li></p>

<p>Windows 2000 displays the Disk Quota message box, warning you that
if you disable quotas, the volume will be rescanned if you enable them
later.</p>

<p><li>Click OK to close the Disk Quota message box.</li></p>

<p><li>Click OK to close the Local Disk (C:) Properties dialog
box.</li></p>

<p><li>Close all applications.</li></p>
</ol>

<A NAME="411"><H2>Lesson Summary</H2></A>

<p>Disk quotas are used to allocate disk space usage to users. You can
set disk quotas, quota thresholds, and quota limits for all users and for
individual users. You can also monitor the amount of hard disk space
that users have filled and the amount that they have left against their
quotas. Windows 2000 ignores compression when it calculates hard disk
space usage. You can apply disk quotas only to NTFS volumes created by
Windows 2000.</p>

<p>Windows 2000 disk quotas track and control disk usage on a per-user,
per-volume basis. Windows 2000 tracks disk quotas for each volume, even if
the volumes are on the same hard disk. Because quotas are tracked on a
per-user basis, every user's disk space is tracked regardless of the folder
in which the user stores files.</p>

</BODY>
</HTML>



