<HTML>
<HEAD>
<TITLE>Lesson 1: Disk Monitoring and Optimization</TITLE>
<link rel="STYLESHEET" type="text/css" href="mmserver.css">

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</HEAD>
<SCRIPT LANGUAGE="JavaScript">
<!--

function fullSize(sURL){
	window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}

function LibraryHeaderNav(sBackward, sForward, sImgLeftOff, sImgLeftOn, sImgRightOff, sImgRightOn, iH, iW, sImgLeftStyle, sImgRightStyle, sImgRuleStyle, sRuleColor, sRuleSize){
	var tableStr;
	//validate questionable args for defs
	tableStr = "<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 border=0 width=100%>";
	tableStr += "<TR VALIGN=top ALIGN=right>";

	tableStr += "<TD align=right class=" + sImgRuleStyle + ">&nbsp;</TD>";	
	
	tableStr += "<TD width=34 align=right class=" + sImgLeftStyle + ">";
	tableStr += "<A href='" + sBackward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgLeftOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgLeftOff + '\'\"';
	tableStr += " SRC='" + sImgLeftOff + "' vspace=0 hspace=0></a></TD>";
	
	tableStr += "<TD width=34 align=left class=" + sImgRightStyle + ">";
	tableStr += "<A href='" + sForward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgRightOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgRightOff + '\'\"';
	tableStr += " SRC='" + sImgRightOff + "' vspace=0 hspace=0></a></TD></TR>";

	tableStr += "<TR VALIGN=top>";
	tableStr += "<TD height=3 align=center colspan=3 class=" + sImgRuleStyle + ">";
	tableStr += "<HR color=" + sRuleColor + " size=" + sRuleSize + "></TD></TR></TABLE>";
	//alert(tableStr);
	document.write(tableStr);
}

 																						     //purple is: #aa22aa   orange is: #ff9900
LibraryHeaderNav("ch13a.htm", "ch13c.htm", "images/unit_p_a1.gif", "images/unit_p_a2.gif", "images/unit_p_b1.gif", "images/unit_p_b2.gif", 18, 34, "unit01", "unit02", "headerrule", "#aa22aa", "2");
//--></SCRIPT><P>

<A NAME="735"><h1>Lesson 1: Disk Monitoring and Optimization</h1></A>
<p>Windows 2000 includes several tools that you can use to diagnose disk problems, improve performance, and compress data, such as Check Disk, the Disk Defragmenter snap-in, data compression, and disk quotas. This lesson discusses each of these tools and shows how the tools are used. Lesson 2 explores disk monitoring in the context of system performance monitoring.</p>

<p>
<div class="sidebar"><blockquote>
<b>After this lesson, you will be able to</b> 

<ul>
<p><li>Use Check Disk, the Disk Defragmenter snap-in, data compression, and disk quotas to optimize disk performance</li></p>
</ul>

<b>Estimated lesson time: 40 minutes</b> 
</blockquote></div>
</p>

<A NAME="736"><h2>Check Disk</h2></A>
<p>The Check Disk tool, also referred to as the Error-checking tool, allows you to check for file system errors and bad sectors on your hard disk. To use Check Disk, open the Properties dialog box for the specific disk you want to check. You can open the Properties dialog box from Windows Explorer or from My Computer. On the Tools tab, click Check Now to open the Check Disk dialog box and select the appropriate options (Figure 13.1).</p>

<p>
<img src="images/f13xx01.jpg" border=0>
</p><p>
<!--caption--><b>Figure 13.1</b> <i>Check Disk dialog box, accessed through the Tools tab of the Properties dialog box</i><!--/caption-->
</p>

<p>All running applications or open files on the disk being checked must be closed in order for the Check Disk process to be able to automatically fix file system errors. If any open files or applications are running, a message box appears informing you that exclusive access to the drive could not be obtained and asking if you want to reschedule disk checking for the next time your start your computer.</p>

<p>If a volume is formatted with NT file system (NTFS), Windows 2000 logs all file transactions, replaces bad clusters automatically, and stores copies of key information for all files on the NTFS volume.</p>

<A NAME="737"><h2>Disk Defragmenter Snap-In</h2></A>
<p>Windows 2000 saves files and folders in the first available space on a hard disk and not necessarily in an area of contiguous space. This leads to file and folder fragmentation. When your hard disk contains a lot of fragmented files and folders, your computer takes longer to gain access to them because it requires several additional reads to collect the various pieces. Creating new files and folders also takes longer because the available free space on the hard disk is scattered. Your computer must save a new file or folder in various locations on the hard disk.</p>

<A NAME="738"><h3>Defragmenting Disks</h3></A>
<p>The process of finding and consolidating fragmented files and folders is called <i>defragmenting</i>. The Disk Defragmenter snap-in is used to locate fragmented files and folders and then defragment them. It does this by moving the pieces of each file or folder to one location so that each file or folder occupies a single area of contiguous space on the hard disk. Consequently, your system can gain access to and save files and folders more efficiently. By consolidating files and folders, the Disk Defragmenter snap-in also consolidates free space, making it less likely that new files will be fragmented. Disk Defragmenter defragments FAT16, FAT32, and NTFS volumes.</p>

<p>You can access the Disk Defragmenter snap-in through the Computer Management snap-in or by creating a custom console containing the Disk Defragmenter snap-in. When the Disk Defragmenter is selected, the detail window is split into three areas, as shown in Figure 13.2. You can also access the Disk Defragmenter snap-in through Windows Explorer or My Computer by opening the Properties dialog box for the specific drive. On the Tools tab, click Defragment Now.</p>

<p>
<A HREF="javascript:fullSize('f13xx02x.htm')"> <img src="images/f13xx02.jpg" border=0 ALT = "Click to view at full size."> </A>
</p><p>
<!--caption--><b>Figure 13.2</b> <i>The Disk Defragmenter snap-in, accessed through a custom console</i><!--/caption-->
</p>

<p>The upper portion of the window lists the volumes you can analyze and defragment. The middle portion is a graphic representation of how fragmented the selected volume is. The lower portion is a dynamic representation of the volume that is continuously updated during defragmentation. The display colors indicate the condition of the volume.</p>

<ul>
<p><li>Red indicates fragmented files.</li></p>

<p><li>Dark blue indicates contiguous (nonfragmented) files.</li></p>

<p><li>White indicates free space on the volume.</li></p>

<p><li>Green indicates system files, which Disk Defragmenter cannot move.</li></p>
</ul>

<p>By comparing the Analysis display band to the Defragmentation display band during defragmentation and at its conclusion, you can quickly see the improvement in the volume.</p>

<p>To analyze or defragment a volume, you can choose one of the options described in the following table.</p>

<table cellpadding=5 width="95%">
<tr><th valign="top">Option</th> <th valign="top">Description</th></tr>

<tr><td valign="top">Analyze</td> 
<td valign="top">Click this button to analyze the disk for fragmentation. After the analysis, the Analysis display band provides a graphical representation of how fragmented the volume is.</td></tr>

<tr>
<td valign="top">Defragment</td> 
<td valign="top">Click this button to defragment the disk. After defragmentation, the Defragmentation display band provides a graphical representation of the defragmented volume.</td></tr>
</table>

<A NAME="739"><h3>Using Disk Defragmenter Effectively</h3></A>
<p>The following list provides guidelines for using the Disk Defragmenter snap-in.</p>

<ul>
<p><li>Run Disk Defragmenter when the computer will receive the least usage. During defragmentation, data is moved around on the hard disk. The defragmentation process is CPU intensive and will adversely affect access time to other disk-based resources.</li></p>

<p><li>Recommend users defragment their local hard disks at least once a month to prevent accumulation of fragmented files.</li></p>

<p><li>Analyze the target volume before you install large applications, and then defragment the volume if necessary. Installations are completed more quickly when the target medium has adequate contiguous free space. Additionally, gaining access to the application after it is installed is faster.</li></p>

<p><li>When you delete a large number of files or folders, your hard disk might become excessively fragmented, so be sure to analyze it afterwards. Generally, you should defragment hard disks on busy file servers more often than those on single-user client computers.</li></p>

<p><li>Consider using a disk defragmentation utility that allows you to perform a regularly scheduled network-wide defragmentation from a central location. Executive Software created the manual Disk Defragmenter included with Windows 2000 and manufactures an automated, more feature-rich version of this utility as a separate product called Diskeeper.</li></p>
</ul>

<p>
<div class="note"><blockquote><b>NOTE</b> <hr>
For more information about Executive Software Diskeeper 5.0, visit their Web site at <i><a href="http://www.execsoft.com" target="_window2">http://www.execsoft.com</a></i>.</blockquote></div>
</p>

<A NAME="740"><h2>Data Compression</h2></A>
<p>Data compression enables you to compress files and folders on NTFS volumes. Compressed files and folders occupy less space on an NTFS-formatted volume, which enables you to store more data. The compression state for each file and folder on an NTFS volume is set to either compressed or uncompressed.</p>

<A NAME="741"><h3>Using Compressed Files and Folders</h3></A>
<p>Compressed files can be read by and written to any Windows-based or MS-DOS-based application without first being uncompressed by another program. When an application, such as Microsoft Word for Windows, or an operating system command, such as copy, requests access to a compressed file, NTFS automatically uncompresses the file before making it available. When you close or explicitly save a file, NTFS compresses it again.</p>

<p>NTFS allocates disk space based on the uncompressed file size. If you copy a compressed file to an NTFS volume with enough space for the compressed file, but not enough space for the uncompressed file, you will get an error message stating there is not enough disk space for the file. The file will not be copied to the volume.</p>

<A NAME="742"><h3>Compressing Files and Folders</h3></A>
<p>You can set the compression state of folders and files in Windows Explorer or by using the compact command-line utility. For information on compact utility syntax, go to a command prompt and type <b>compact /?</b>.</p>

<p>To compress a file or folder, open the Properties dialog box for the specific file or folder. On the General tab, click Advanced. In the Advanced Attributes dialog box, select the Compress Contents To Save Disk Space check box, as shown in Figure 13.3. Note that NTFS encryption and compression are mutually exclusive. If you choose the Encrypt Contents To Secure Data check box, you cannot compress that folder or file.</p>

<p>
<A HREF="javascript:fullSize('f13xx03x.htm')"> <img src="images/f13xx03.jpg" border=0 ALT = "Click to view at full size."> </A>
</p><p>
<!--caption--><b>Figure 13.3</b> <i>Advanced Attributes dialog box</i><!--/caption-->
</p>

<p>You can also set compression on the entire drive. To do so, open the Properties dialog box for the specific drive. On the General tab, select the Compress Drive To Save Disk Space check box.</p>

<p>To change the compression state for a file or folder, you must have Write permission for it.</p>

<p>The compression flag on a folder does not reflect the compression state of the files in that folder and its subfolders. A folder can be marked so that files added afterward will be compressed, yet all of the files currently in that folder remain uncompressed. Alternatively, a folder not marked with the compression flag can contain compressed files. When you select the folder compression option and then click Apply or OK in the Properties dialog box, Windows 2000 displays the Confirm Attribute Changes dialog box, which has the two additional options. These options are described in the following table.</p>

<table cellpadding=5 width="95%">
<tr><th valign="top">Option</th> <th valign="top">Description</th></tr>
<tr>
<td valign="top">Apply changes to this folder only</td> 
<td valign="top">Compresses only the files in the folder you have selected</td>
</tr>
<tr>
<td valign="top">Apply changes to this folder, subfolders and files</td>
<td valign="top">Compresses the files in the folder, marks subfolders with the compression flag, and compresses files that are contained within it and added to it subsequently</td>
</tr>
</table>

<p>
<div class="note"><blockquote><b>NOTE</b> <hr>
Windows 2000 does not support NTFS compression for cluster sizes larger than 4 kilobytes (KB) because compression on large clusters causes performance degradation. If you select a larger cluster size when you format an NTFS volume, compression is not available for that volume.</blockquote></div>
</p>

<A NAME="743"><h3>Selecting an Alternate Display Color for Compressed Files and Folders</h3></A>
<p>Windows Explorer makes it easy for you to determine quickly if a file or folder is compressed by allowing you to select a different display color for compressed files and folders to distinguish them from uncompressed files and folders.</p>

<p>To set an alternative display color for compressed files and folders, select Folder Options from the Tools menu. On the View tab, select the Display Compressed Files And Folders With Alternate Color check box.</p>

<A NAME="744"><h3>Copying and Moving Compressed Files and Folders</h3></A>
<p>There are rules that determine whether the compression state of files and folders is retained when you copy or move them within and between NTFS and FAT volumes. The following sections describe how Windows 2000 treats the compression state of a file or folder when you copy or move a compressed file or folder within or between NTFS volumes or between NTFS and FAT volumes.</p>

<p><b>Copying a File Within an NTFS Volume</b></p>

<p>When you copy a file within an NTFS volume, the file inherits the compression state of the target folder. For example, if you copy a compressed file to an uncompressed folder, the file is automatically uncompressed.</p>

<p><b>Moving a File or Folder Within an NTFS Volume</b></p>

<p>When you move a file or folder within an NTFS volume, the file or folder retains its original compression state. For example, if you move a compressed file to an uncompressed folder, the file remains compressed.</p>

<p><b>Copying a File or Folder Between NTFS Volumes</b></p>

<p>When you copy a file or folder between NTFS volumes, the file or folder inherits the compression state of the target folder.</p>

<p><b>Moving a File or Folder Between NTFS Volumes</b></p>

<p>When you move a file or folder between NTFS volumes, the file or folder inherits the compression state of the target folder. Because Windows 2000 treats a move as a copy and then a delete, the files inherit the compression state of the target folder.</p>

<p><b>Moving or Copying a File or Folder to a FAT Volume</b></p>

<p>Windows 2000 supports compression for NTFS files only. Because of this, when you move or copy a compressed NTFS file or folder to a FAT volume, Windows 2000 automatically uncompresses the file or folder.</p>

<p><b>Moving or Copying a Compressed File or Folder to a Floppy Disk</b></p>

<p>When you move or copy a compressed NTFS file or folder to a floppy disk, Windows 2000 automatically uncompresses the file or folder.</p>

<p>
<div class="note"><blockquote><b>NOTE</b> <hr>
When you copy a compressed NTFS file, Windows 2000 uncompresses the file, copies the file, and then if the target folder is marked for compression, compresses the file again as a new file. This might cause performance degradation.</blockquote></div>
</p>

<A NAME="745"><h3>Using NTFS Compression</h3></A>
<p>The following is a list of best practices for using compression on NTFS volumes.</p>

<ul>
<p><li>Because some file types compress more than others, select file types to compress based on the anticipated resulting file size. for example, because windows bitmap files contain more redundant data than application-executable files, this file type compresses to a smaller size. Bitmaps often compress to less than a quarter of their original file size, whereas application files rarely compress to less than 75 percent of their original size.</li></p>

<p><li>Do not store compressed files, such as PKZIP files, in a compressed folder. Windows 2000 will attempt to compress the file, wasting system time and yielding no additional disk space.</li></p>

<p><li>To make it easier to locate compressed data, use a different display color for compressed folders and files.</li></p>

<p><li>Compress static data rather than data that changes frequently. Compressing and uncompressing files incurs some system overhead. By choosing to compress files that are infrequently accessed, you minimize the amount of system time dedicated to compression and uncompression activities.</li></p>

<p><li>NTFS compression can cause performance degradation when you copy and move files. When a compressed file is copied to another folder marked for compression, it is uncompressed, copied, and then compressed again as a new file.</li></p>
</ul>

<A NAME="746"><h2>Disk Quotas</h2></A>
<p>You can use disk quotas to manage storage growth in distributed environments. Disk quotas allow you to allocate disk space usage to users based on the files and folders that they own. You can set disk quotas, quota thresholds, and quota limits for all users and for individual users. You can also monitor the amount of hard disk space users have used and the amount they have left against their quota.</p>

<A NAME="747"><h3>Managing Disk Quotas</h3></A>
<p>Windows 2000 disk quotas track and control disk usage on a per-user, per-volume basis. Windows 2000 tracks disk quotas for each volume, even if the volumes are on the same hard disk. Because quotas are tracked on a per-user basis, every user's disk space is tracked regardless of the folder in which the user stores files. Third-party disk quota management tools provide granular quota management capabilities like tracking disk usage on per-user, per-folder basis.</p>

<p>The following list describes several important characteristics of Windows 2000 disk quotas.</p>

<ul>
<p><li>Windows 2000 calculates disk space usage for users based on the files and folders they own. When a user copies or saves a new file to an NTFS volume or takes ownership of a file on an NTFS volume, Windows 2000 charges the disk space for the file against the user's quota limit.</li></p>

<p><li>Windows 2000 ignores compression when it calculates hard disk space usage. Users are charged for each uncompressed byte, regardless of how much hard disk space is actually used. In part, this charge is made because file compression produces different degrees of compression for different types of files. Different file types that are the same size when uncompressed might end up to be very different sizes when they are compressed.</li></p>

<p><li>When you enable disk quotas, the free space Windows 2000 reports to applications for the volume is the amount of space remaining within the user's disk quota limit. For example, a user whose files occupy 50 megabytes (MB) of an assigned disk quota limit of 100 MB will show 50 MB of free space even if the volume contains several gigabytes of free space.</li></p>
</ul>

<p>
<div class="note"><blockquote><b>NOTE</b> <hr>
Disk quotas can be applied only to Windows 2000 NTFS volumes.</blockquote></div>
</p>

<p>You can use disk quotas to monitor and control hard disk space usage. System administrators can perform the following tasks:</p>

<ul>
<p><li>Set a disk quota limit to specify the amount of disk space for each user.</li></p>

<p><li>Set a disk quota warning to specify when Windows 2000 should log an event, indicating that the user is nearing his or her limit.</li></p>

<p><li>Enforce disk quota limits and either deny users access if they exceed their limit or allow them continued access.</li></p>

<p><li>Log an event when a user exceeds a specified disk space threshold. For example, a threshold might be when users exceed their quota limit or when they exceed their warning level.</li></p>
</ul>

<p>After you enable disk quotas for a volume, Windows 2000 collects disk usage data for all users who own files and folders on the volume. This allows you to monitor volume usage on a per-user basis. By default, only members of the Administrators group can view and change quota settings. However, you can allow users to view quota settings.</p>

<A NAME="748"><h3>Setting Disk Quotas</h3></A>
<p>You can enable disk quotas and enforce disk quota warnings and limits for all users or for individual users. To enable disk quotas, open the Properties dialog box of a particular disk, click the Quota tab, and configure the disk quota options (Figure 13.4).</p>

<p>
<img src="images/f13xx04.jpg" border="0">
</p><p>
<!--caption--><b>Figure 13.4</b> <i>Quota tab of a disk's Properties dialog box</i><!--/caption-->
</p>

<p>The options on the Quota tab are described in the following table.</p>

<table cellpadding=5 width="95%">
<tr>
<th valign="top">Option</th> <th valign="top">Description</th>
</tr>
<tr>
<td valign="top">Enable Quota Management</td> 
<td valign="top">Select this check box to enable disk quota management.</td>
</tr>
<tr>
<td valign="top">Deny Disk Space To Users Exceeding Quota Limit</td>
<td valign="top">Select this check box so that when users exceed their hard disk space allocation, they receive an &quot;out of disk space&quot; message and cannot write to the volume.</td>
</tr>
<tr>
<td valign="top">Do Not Limit Disk Usage</td> 
<td valign="top">Click this option when you do not want to limit the amount of hard disk space for users.</td>
</tr>
<tr>
<td valign="top">Limit Disk Space To</td> 
<td valign="top">Configure the amount of disk space that users can use.</td>
</tr>
<tr>
<td valign="top">Set Warning Level To</td> 
<td valign="top">Configure the amount of disk space that a user can fill before Windows 2000 logs an event, indicating that a user is nearing his or her limit.</td>
</tr>
<tr>
<td valign="top">Quota Entries</td> 
<td valign="top">Click this button to open the Quota Entries for a dialog box, where you can add a new entry, delete an entry, and view the per-user quota information.</td>
</tr>
</table>
<p>To enforce identical quota limits for all users, enter the appropriate values in the Limit Disk Space To text box and the Set Warning Level To text box, and then select the Deny Disk Space To Users Exceeding Quota Limit check box.</p>

<p>Windows 2000 monitors usage and will not allow users to create files or folders on the volume when they exceed the limit.</p>

<A NAME="749"><h3>Determining the Status of Disk Quotas</h3></A>
<p>You can determine the status of disk quotas in the Properties dialog box for a disk by checking the traffic light icon and reading the status message to its right (Figure 13.4). The traffic light colors and the status they indicate are
as follows:</p>

<ul>
<p><li>A red traffic light indicates that disk quotas are disabled.</li></p>

<p><li>A yellow traffic light indicates that Windows 2000 is rebuilding disk quota information.</li></p>

<p><li>A green traffic light indicates that the disk quota system is active.</li></p>
</ul>

<A NAME="750"><h3>Enforcing Disk Quotas</h3></A>
<p>To enforce different quota limits for one or more specific users, click the Quota Entries button to open the Quota Entries For dialog box. Configure the disk space limit and the warning level for each individual user.</p>

<p>You can use the Quota Entries For &lt;<i>volume_name&gt;</i> dialog box to monitor usage for all users who have copied, saved, or taken ownership of files and folders on the volume. Windows 2000 scans the volume and monitor the amount of disk space in use by each user. The Quota Entries For &lt;<i>volume_name&gt;</i> dialog box allows you to view the following information:</p>

<ul>
<p><li>The amount of hard disk space that each user uses</li></p>

<p><li>Users who are over their quota-warning threshold, which is signified by a yellow triangle</li></p>

<p><li>Users who are over their quota limit, which is signified by a red circle</li></p>

<p><li>The warning threshold and the disk quota limit for each user</li></p>
</ul>

<p>Volume usage is tracked for all users owning files on a volume where the Disk quota system is active. Existing users owning files are limited to the default disk quotas unless you modify the user quota setting using the Quota Entries For &lt;<i>volume_name</i>&gt; dialog box. Users not owning files on the volume will not appear in the Quota Entries For &lt;<i>volume_name</i>&gt; dialog box but can also be added manually. By default, quota limits are not applied to the Administrators local group.</p>

<A NAME="751"><h3>Best Uses of Disk Quotas</h3></A>
<p>The following is a list of guidelines for using disk quotas:</p>

<ul>
<p><li>If you enable disk quota settings on the volume where Windows 2000 is installed and your user account has a disk quota limit, log on as Administrator to install additional Windows 2000 components and applications. When you do so, Windows 2000 will not charge the disk space you use to install applications against the disk quota allowance for your user account.</li></p>

<p><li>You can monitor hard disk usage and generate hard disk usage information without preventing users from saving data. To do so, clear the Deny Disk Space To Users Exceeding Quota Limit check box when you enable disk quotas.</li></p>

<p><li>Set more restrictive default limits for all user accounts, and then modify the limits from the Quota Entries For &lt;<i>volume_name</i>&gt; dialog box to allow more disk space to users who work with large files.</li></p>

<p><li>Generally, you should set disk quotas on shared volumes to limit storage for users. Set disk quotas on public folders and network servers to ensure that users share hard disk space appropriately. When storage resources are scarce, you may want to set disk quotas on all shared hard disk space.</li></p>

<p><li>Delete disk quota entries users who no longer store their files on a volume. You can delete quota entries for a user account only after all files that the user owns have been removed from the volume or another user has taken ownership of the files.</li></p>

<p><li>Before you can delete a quota entry for a user account, all files that the user owns must be removed from the volume or another user must take ownership of the files. An efficient way to remove a user's files or take ownership of them for this purpose is to delete the user account in the Quota Entries For &lt;<i>volume_name</i>&gt; dialog box. The Disk Quota management system will display the Disk Quota dialog box. From this dialog box you can take ownership, delete, or move the files.</li></p>
</ul>

<p><img src="images/practic.JPG" border="0"></p>

<A NAME="752"><h3>Exercise 1: Implementing Disk Quotas</h3></A>
<p>In this exercise, you configure default quota management settings to limit the amount of data users can store on drive C of Server01. Drive C on Server01 contains the HomeDirs share you created for user John Smith to store his files. Next you configure a custom quota setting for a user account. You increase the amount of data the user may store on drive C to 20 MB with a warning level set to 16. Finally, you turn off quota management for drive C. Complete this exercise on Server01.</p>

<p><li><b>Procedure 1: Configuring quota management settings</b></li></p>

<p>In this procedure, you configure the quota management settings for drive C to limit the data that users can store on the volume.</p>

<ol>
<p><li>Log on to Server01 as Administrator with a password of &quot;password.&quot;</li></p>

<p><li>On the desktop, double-click My Computer.</li></p>

<p><li>Click the Local Disk (C:) icon, click the File menu, and then click Properties.</li></p>

<p>Windows 2000 displays the Local Disk (C:) Properties dialog box with the General tab active.</p>

<p><li>Click the Quota tab.</li></p>

<p>Notice that disk quotas are disabled by default.</p>

<p><li>On the Quota tab, click the Enable Quota Management check box.</li></p>

<p><li>Click the Limit Disk Space To radio button.</li></p>

<p><li>Type <b>10</b> in the Limit Disk Space To text box, and then type <b>6</b> in the Set Warning Level To text box.</li></p>

<p>Notice the default unit size is KB.</p>

<p><li>Change the unit sizes to MB, and then click the Apply button.</li></p>

<p>A Disk Quota dialog box appears, warning you that the volume will be rescanned to update disk usage statistics if you enable quotas.</p>

<p><li>Click OK to enable disk quotas.</li></p>

<p><li>Do not close the Local Disk (C:) Properties dialog box; you will use it in the next procedure.</li></p>
</ol>

<p><li><b>Procedure 2: Creating a custom quota setting for a user</b></li></p>


<p>In this procedure, you configure a custom quota setting for the John Smith user account.</p>

<ol>
<p><li>On the Quota tab of the Local Disk (C:) Properties dialog box, click the Quota Entries button.</li></p>

<p>Windows 2000 displays the Quota Entries For Local Disk (C:) dialog box. Notice that the user accounts you created, the NT AUTHORITY\
SYSTEM, and the BUILTIN\Administrators group are listed. The user accounts you created are added because all three accounts (Jane_Doe, John_Smith, and Bob_Train) own files on the volume.</p>

<p><li>In the Quota Entries For Local Disk (C:) dialog box, double-click the row containing John Smith.</li></p>

<p>The Quota Settings For John Smith dialog box appears.</p>

<p><li>Increase the amount of data that John Smith can store on drive C by changing the value in the Limit Disk Space To box to 20 MB and changing the value in the Set Warning Level To box to 16 MB.</li></p>

<p><li>Click OK to return to the Quota Entries For Local Disk (C:) dialog box.</li></p>

<p><li>Close the Quota Entries For Local Disk (C:) dialog box.</li></p>

<p><li>Leave the Local Disk (C:) Properties dialog box open since you will be using it in the next procedure.</li></p>
</ol>

<p><li><b>Procedure 3: Disabling quota management</b></li></p>


<p>In this procedure, you disable quota management settings for drive C.</p>

<ol>
<p><li>On the Quota tab, clear the Enable Quota Management check box.</li></p>

<p>Notice that all quota settings for drive C are no longer available.</p>

<p><li>Click Apply.</li></p>

<p>A Disk Quota message box appears, warning that if you disable quotas, the volume will be rescanned if you enable them later.</p>

<p><li>Click OK to close the Disk Quota dialog box.</li></p>

<p><li>Click OK to close the Local Disk (C:) Properties dialog box.</li></p>

<p><li>Close the My Computer window.</li></p>
</ol>

<A NAME="753"><h2>Lesson Summary</h2></A>
<p>Windows 2000 includes several tools you can use to diagnose disk problems, improve performance, or compress data. The Check Disk tool, also referred to as the Error-checking tool, allows you to check for file system errors and bad sectors on a disk. The Disk Defragmenter snap-in allows you to locate fragmented files and folders and then defragment them. It does this by moving the pieces of each file or folder to one location so that each file or folder occupies a single area contiguous space on the hard disk. Data compression enables you to compress files and folders on NTFS volumes. Compressed files can be read and written to by any Windows-based or MS-DOS-based application without first being uncompressed by another program. Disk quotas allow you to allocate disk space usage to users based on the files and folders they own. You can set disk quotas, quota thresholds, and quota limits for all users and individual users. Disk quotas track and control disk usage on a per-user, per-volume basis.</p>

</BODY>
</HTML>



