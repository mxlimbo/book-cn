<HTML>
<HEAD>
<TITLE>Lesson 3: Configuring and Running Telnet Services</TITLE>
<link rel="STYLESHEET" type="text/css" href="mmserver.css">

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</HEAD>
<SCRIPT LANGUAGE="JavaScript">
<!--

function fullSize(sURL){
	window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}

function LibraryHeaderNav(sBackward, sForward, sImgLeftOff, sImgLeftOn, sImgRightOff, sImgRightOn, iH, iW, sImgLeftStyle, sImgRightStyle, sImgRuleStyle, sRuleColor, sRuleSize){
	var tableStr;
	//validate questionable args for defs
	tableStr = "<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 border=0 width=100%>";
	tableStr += "<TR VALIGN=top ALIGN=right>";

	tableStr += "<TD align=right class=" + sImgRuleStyle + ">&nbsp;</TD>";	
	
	tableStr += "<TD width=34 align=right class=" + sImgLeftStyle + ">";
	tableStr += "<A href='" + sBackward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgLeftOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgLeftOff + '\'\"';
	tableStr += " SRC='" + sImgLeftOff + "' vspace=0 hspace=0></a></TD>";
	
	tableStr += "<TD width=34 align=left class=" + sImgRightStyle + ">";
	tableStr += "<A href='" + sForward + "'>";
	tableStr += "<IMG HEIGHT=" + iH + " WIDTH=" + iW + " BORDER=0";
	tableStr += ' OnMouseOver=\"this.src=\'' + sImgRightOn + '\'\"';
	tableStr += ' OnMouseOut=\"this.src=\'' + sImgRightOff + '\'\"';
	tableStr += " SRC='" + sImgRightOff + "' vspace=0 hspace=0></a></TD></TR>";

	tableStr += "<TR VALIGN=top>";
	tableStr += "<TD height=3 align=center colspan=3 class=" + sImgRuleStyle + ">";
	tableStr += "<HR color=" + sRuleColor + " size=" + sRuleSize + "></TD></TR></TABLE>";
	//alert(tableStr);
	document.write(tableStr);
}

 																						     //purple is: #aa22aa   orange is: #ff9900
LibraryHeaderNav("ch14c.htm", "ch14e.htm", "images/unit_p_a1.gif", "images/unit_p_a2.gif", "images/unit_p_b1.gif", "images/unit_p_b2.gif", 18, 34, "unit01", "unit02", "headerrule", "#aa22aa", "2");
//--></SCRIPT><P>

<A NAME="820"><h1>Lesson 3: Configuring and Running Telnet Services</h1></A>
<p>In Windows 2000, Telnet provides user support for the Telnet protocol, a part of the TCP/IP suite. Telnet is a remote access protocol that you can use to log on to a remote computer, network device, or private TCP/IP network. Telnet Server and Telnet Client work together to allow users to communicate with a remote computer. In Windows 2000, Telnet Server is installed as a service, simply named Telnet. The Telnet service allows users of a Telnet client to log on to the computer running the Telnet service and run character-mode applications on that computer. The Telnet service acts as a gateway through which computers running the Telnet client can communicate with each other. The Telnet client allows users to connect to a remote computer and interact with that computer through a terminal window.</p>

<p>
<div class="sidebar"><blockquote>
<b>After this lesson, you will be able to</b> 

<ul>
<p><li>Set up the Windows 2000 Telnet service to allow a computer running the Telnet client to access it</li></p>

<p><li>Use the Microsoft Telnet Client to connect to the Telnet service</li></p>
</ul>

<b>Estimated lesson time: 25 minutes</b> 
</blockquote></div>
</p>

<A NAME="821"><h2>Telnet Service</h2></A>
<p>Windows 2000 Telnet Service allows users of a Telnet client to connect to the computer running the Telnet service and use command-line commands on the computer as if they were sitting in front of it. Telnet clients can connect to a server, log on to that server, and run character-mode applications. The Telnet service also acts as a gateway for Telnet clients to communicate with each other. A computer running the Telnet service can support a maximum of 63 Telnet client computers at any given time.</p>

<p><b>Telnet Server Connection Licensing</b></p>

<p>Two Telnet service connection licenses are provided with each installation of Windows 2000 Server. This limits Telnet service to two connecting Telnet clients at a time. If you need additional licenses, use Telnet services from the Windows Services for UNIX add-on pack.</p>

<p><b>Telnet Authentication</b></p>

<p>You can use your local Windows 2000 user name and password or domain account information to access the Telnet server. The security scheme is integrated into Windows 2000 security. If you do not use the NT LAN Manager (NTLM) authentication option, the user name and password are sent to the Telnet server as plain text.</p>

<p>If you are using NTLM authentication, the client uses the Windows 2000 security context for authentication and the user is not prompted for a user name and password. The user name and password are encrypted.</p>

<p>
<div class="note"><blockquote><b>NOTE</b> <hr>
If the User Must Change Password At Next Logon option is set for a user, the user cannot log on to the Telnet service when NTLM authentication is used. The user must log on to the server directly and change the password, and then log on through the Telnet client.
</blockquote></div>
</p>

<A NAME="822"><h3>Starting and Stopping Telnet Server</h3></A>
<p>In a Windows 2000 Server default installation, the Telnet service is set to manual startup. You can use the Services snap-in or the Computer Management snap-in to start, stop, or configure the Telnet service for automatic startup. Figure 14.18 shows the Telnet Properties dialog box for the Telnet service.</p>

<p>
<A HREF="javascript:fullSize('f14xx18x.htm')"> <img src="images/f14xx18.jpg" border=0 ALT = "Click to view at full size."> </A>
</p><p>
<!--caption--><b>Figure 14.18</b> <i>Telnet Properties page showing the Startup type options for this server service</i><!--/caption-->
</p>

<p>In the Computer Management snap-in, Telnet is a service located under the Services and Applications node. Select Services from the console tree, and then select Telnet from the list of services in the details pane.</p>

<p>You can also start or stop the Telnet service from a command prompt. To start Telnet Server, type <b>net start tlntsvr</b> or <b>net start telnet</b> at the command prompt, and then press Enter. To stop Telnet Server, type <b>net stop tlntsvr</b> or <b>net stop telnet</b> at the command prompt, and then press Enter.</p>

<A NAME="823"><h3>Telnet Server Admin Utility</h3></A>
<p>You can use the Telnet Server Admin utility to start, stop, or get information about Telnet Server. You can also use it to get a list of current users, terminate a user's session, or change Telnet Server registry settings.</p>

<p>
<div class="caution"><blockquote><b>CAUTION</b><hr>
Incorrectly editing the registry may severely damage your system. Before making changes to the registry, it is strongly recommended that you back up any valuable data on the computer.
</blockquote></div>
</p>

<p>To open the Telnet Server Admin utility, click the Telnet Administration Tool in the Administrative Tools program group or click Start, click Run, type <b>tlntadmn</b>, and then click OK. If you cannot open the Telnet Server Admin utility, you may need to install the Administration Tools pack (Adminpak.msi).</p>

<p>The following table lists the Telnet Server Administration utility options.</p>

<p>
	<table valign="top" cellpadding="5" width="95%">
	
		<tr>
			<th>Option</th>
			<th>Name</th>
			<th>Description</th>
		</tr>
		
		<tr>
			<td valign="top">0</td>
			<td valign="top">Quit this application</td>			
			<td valign="top">Ends the Telnet Server Admin utility session.</td>
		</tr>

		<tr>
			<td valign="top">1</td>
			<td valign="top">List the current users</td>			
			<td valign="top">Gives a list of the current users, including the user name, domain, remote computer address, session ID, and log time.</td>
		</tr>

		<tr>
			<td valign="top">2</td>
			<td valign="top">Terminate a user session</td>			
			<td valign="top">Terminates a selected user's session.</td>
		</tr>

		<tr>
			<td valign="top">3</td>
			<td valign="top">Display/change registry settings</td>			
			<td valign="top">Provides a list of registry settings that you can change. See the following table.</td>
		</tr>

		<tr>
			<td valign="top">4</td>
			<td valign="top">Start the service</td>			
			<td valign="top">Starts the Telnet Server service.</td>
		</tr>
		
		<tr>
			<td valign="top">5</td>
			<td valign="top">Stop the service</td>
			<td valign="top">Stops the Telnet Server service.</td>
		</tr>

	</table>
</p>

<p>Registry changes made using the Telnet Server Admin utility modifies settings stored in the following registry key on the Telnet server computer: HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\TelnetServer\1.0. This registration location is shown in Figure 14.19.</p>

<p>
<A HREF="javascript:fullSize('f14xx19x.htm')"> <img src="images/f14xx19.jpg" border=0 ALT = "Click to view at full size."> </A>
</p><p>
<!--caption--><b>Figure 14.19</b> <i>Telnet Server registry settings that can be modified by using the Telnet Server Admin utility</i><!--/caption-->
</p>

<p>The following table lists the Telnet Server registry settings that you can change:</p>

<p>
	<table valign="top" cellpadding="5" width="95%">
	
		<tr>
			<th>Option</th>
			<th>Name</th>
			<th>Description</th>
			<th>Default Value</th>
		</tr>
		
		<tr>
			<td valign="top">0</td>
			<td valign="top">Exit this menu</td>
			<td valign="top">Exits this menu and returns to the original Telnet Server Administration utility options.</td>
			<td valign="top">N/A</td>
		</tr>

		<tr>
			<td valign="top">1</td>
			<td valign="top">AllowTrustedDomain</td>
			<td valign="top">Changes the current value of the trusted domain.</td>
			<td valign="top">1</td>
		</tr>

		<tr>
			<td valign="top">2</td>
			<td valign="top">AltKeyMapping</td>
			<td valign="top">Changes the current value.</td>
			<td valign="top">1</td>
		</tr>

		<tr>
			<td valign="top">3</td>
			<td valign="top">DefaultDomain</td>
			<td valign="top">Sets the default domain name.</td>
			<td valign="top">. (a period means the current domain of the Telnet server)</td>
		</tr>

		<tr>
			<td valign="top">4</td>
			<td valign="top">DefaultShell</td>
			<td valign="top">Displays the path location for the shell installation.</td>
			<td valign="top">%systemroot%\System32\Cmd.exe /q /k. The /q switch disables echo and the /k switch carries out a command but does not close the command window.</td>
		</tr>

		<tr>
			<td valign="top">5</td>
			<td valign="top">LogonScript</td>
			<td valign="top">Displays the path location and name for the Telnet service  global client login script file. By default this file maps the Telnet client to their home directory if one is specified in the user's profile.</td>
			<td valign="top">%systemroot%\System32\login.cmd</td>
		</tr>

		<tr>
			<td valign="top">6</td>
			<td valign="top">MaxFailedLogins</td>
			<td valign="top">Displays the maximum number of failed attempts to log on before a connection is terminated.</td>
			<td valign="top">3</td>
		</tr>

		<tr>
			<td valign="top">7</td>
			<td valign="top">NTLM</td>
			<td valign="top">Displays the current number of allowed NTLM authenticated logons.</td>
			<td valign="top">2</td>
		</tr>
		
		<tr>
			<td valign="top">8</td>
			<td valign="top">TelnetPort</td>
			<td valign="top">Displays the default Telnet Server port.</td>
			<td valign="top">23</td>
		</tr>

	</table>
</p>

<p>
<div class="note"><blockquote><b>NOTE</b> <hr>
The Termcap registry setting specifies the location of the Termcap (Terminal Capabilities) file, which is used by a number of terminal client utilities to determine how to move the cursor during a terminal session.
</blockquote></div>
</p>

<p>When you change the default domain account, the setting takes effect only after the Telnet service is restarted. You must be logged on as a member of the Administrators group to use the Telnet Server Administration utility.</p>

<A NAME="824"><h3>Troubleshooting</h3></A>
<p>The following table provides information about a few common problems you might encounter when running Telnet Server.</p>

<p>
	<table valign="top" cellpadding="5" width="95%">
	
		<tr>
			<th>Error message</th>
			<th>Cause</th>
			<th>Solution</th>
		</tr>
		
		<tr>
			<td valign="top">Invalid input</td>
			<td valign="top">The entered value was not acceptable.</td>			
			<td valign="top">Review the range of the optional values and re-enter your choice.</td>
		</tr>

		<tr>
			<td valign="top">Failed to open the registry key</td>
			<td valign="top">The Telnet server must be running to open a registry key. This error indicates that it is not currently running.</td>			
			<td valign="top">Start Telnet service.</td>
		</tr>

		<tr>
			<td valign="top">Failed to query the registry value</td>
			<td valign="top">The Telnet server must be running to query a registry value. This error indicates that it is not currently running.</td>			
			<td valign="top">Start Telnet service.</td>
		</tr>
		
	</table>
</p>

<A NAME="825"><h2>Telnet Client</h2></A>
<p>You can use Microsoft Telnet Client to connect to a remote computer running the Telnet service or other Telnet server software. Once you have made this connection, you can communicate with the Telnet server. The type of session you conduct depends on how the Telnet software is configured. Communication, games, system administration, and local logon simulations are some typical uses of Telnet.</p>

<p>The Telnet client uses the Telnet protocol, part of the TCP/IP suite of protocols, to connect to a remote computer over a network. The Telnet client software allows a computer to connect to a remote server. You can use the Telnet client provided with Windows 2000 to connect to a remote computer, log on to the remote computer, and interact with it as if you were sitting in front of it.</p>

<p>Users of previous versions of Microsoft's Telnet client may notice a few changes in the version included with Windows 2000. The most obvious change is that Microsoft Telnet Client is now a command-line application rather than a Windows application. As a command-line application, Microsoft Telnet Client will seem very familiar to users of UNIX-based Telnet clients.</p>

<p>An important new feature found in Microsoft Telnet Client is NTLM authentication support. Using this feature, a computer using Microsoft Telnet Client can log on to a Windows 2000 computer running the Telnet service by using NTLM authentication.</p>

<p>
<div class="note"><blockquote><b>NOTE</b> <hr>
Telnet session logging is not supported in Microsoft Telnet Client.
</blockquote></div>
</p>

<p><b>Using Telnet</b></p>

<p>To open Telnet, click Start, click Run, and then type <b>telnet</b>. You can also type <b>telnet</b> at the command prompt. To use Telnet, you must have the TCP/IP protocol installed and configured on your computer and you must have a user account established on a remote host.</p>

<p>To display help for Telnet, type <b>help</b> at the Microsoft Telnet command prompt. To connect to a site, type <b>connect &lt;<i>computer_name</i>&gt;</b> where &lt;<i>computer_name</i>&gt; is the IP address or host name of the computer running the Telnet service.</p>

<p>
<img src="images/practic.JPG" border="0">
</p>

<A NAME="826"><h3>Exercise 2: Configuring and Connecting to the Telnet Service</h3></A>
<p>In this exercise you configure the Telnet service to start on Server01. Then, you connect to the Telnet service from Server01 and verify the connection. Complete this exercise from Server01.</p>

<p>
<div class="note"><blockquote><b>NOTE</b> <hr>
If you are running Server02, you may complete Procedure 2 from Server02.
</blockquote></div>
</p>

<p><li><b>Procedure 1: Enabling and configuring the Telnet service</b></li></p>

<p>In this procedure, you configure the Telnet service for automatic startup and then start the Telnet service.</p>

<ol>
<p><li>Log on to Server01 as Administrator with a password of &quot;password.&quot;</li></p>

<p><li>Click the Start button, point to Programs, point to Administrative Tools and then click Services.</li></p>

<p>The Services console appears.</p>

<p><li>In the details pane, scroll down and double-click Telnet.</li></p>

<p>The Telnet Properties (Local Computer) dialog box appears.</p>

<p><li>Change the Startup Type drop-down list box from Manual to Automatic.</li></p>

<p><li>Under Service status, click the Start button.</li></p>

<p>A Service Control status box appears briefly as the Telnet service starts.</p>

<p><li>Click OK to close the Telnet Properties (Local Computer) dialog box.</li></p>

<p><li>Close the Services console.</li></p>
</ol>

<p><li><b>Procedure 2: Using the Microsoft Telnet Client</b></li></p>


<p>In this procedure you connect to the Telnet service from the Microsoft Telnet Client. You may complete this procedure on either Server01 or Server02. Completing the procedure from Server02 provides remote access to Server01. However, for the purpose of training, running these commands from Server01 is adequate. If you complete this procedure from Server02, log on as Administrator before starting.</p>

<ol>
<p><li>Click the Start button, and then click Run.</li></p>

<p>The Run dialog box appears.</p>

<p><li>In the Open text box, type <b>telnet</b> and then click OK.</li></p>

<p>The Microsoft Telnet command prompt appears.</p>

<p><li>Type <b>help</b> or <b>?</b> to see a list of available commands.</li></p>

<p>A list of supported commands appears.</p>

<p><li>Type <b>open server01</b> .</li></p>

<p>A Welcome to Microsoft Telnet Server message appears.</p>
</ol>

<p>
<div class="note"><blockquote><b>NOTE</b> <hr>
You can use abbreviations for the commands you enter. For example, <b>o server01</b> is equivalent to <b>open server01</b>.
</blockquote></div>
</p>

<ol start=5>
<p><li>Any commands that you can run from the command line on Server01 can be run from the Telnet shell.</li></p>

<p><li>Leave the Telnet session active while you complete the next procedure.</li></p>
</ol>

<p><li><b>Procedure 3: Running the Telnet Server Administration tool</b></li></p>

<p>In this procedure you monitor the Telnet service for Telnet client connections and then disconnect the connected Telnet client using the Telnet Server Administrator.</p>

<ol>
<p><li>Click the Start button, and then click Run.</li></p>

<p>The Run dialog box appears.</p>

<p><li>In the Open text box, type <b>tlntadmn</b> and then click OK.</li></p>

<p>The Telnet Server Admin utility command window appears.</p>

<p><li>Type <b>1</b> to list the current users.</li></p>

<p>Statistics on the administrator user appear.</p>

<p><li>Type <b>2</b> to terminate a user session.</li></p>

<p>A message appears instructing you to enter a user's session ID to terminate.</p>

<p><li>Type <b>1</b>; this is the session ID of the connected user.</li></p>

<p>A list of command options reappear.</p>

<p><li>Return to the Microsoft Telnet client window on Server01 or Server02.</li></p>

<p>Notice that the connection with the host was lost.</p>

<p><li>Press any key to continue.</li></p>

<p>You are returned to the Microsoft Telnet Client command window.</p>

<p><li>Type <b>q</b> or <b>quit</b> to close the Microsoft Telnet Client command window.</li></p>

<p><li>Return to the Telnet Server Administrator command window.</li></p>

<p><li>Type <b>0</b> to close the Telnet Server Administrator.</li></p>
</ol>

<A NAME="827"><h2>Lesson Summary</h2></A>
<p>The Telnet service and a Telnet client work together to allow users to communicate with a remote computer. The Windows 2000 Telnet service allows users of the Microsoft Telnet Client to remotely connect to the computer and use command-line applications on the computer as if they were sitting in front of it. You can use the Services snap-in, the Computer Management snap-in, or the command prompt to start or stop the Telnet service. In addition, you can use the Telnet Server Admin utility to start, stop, or get information about the Telnet service. You can also use it to get a list of current users, terminate a user's session, or change Telnet service registry settings. Microsoft Telnet Client allows you to connect to a remote computer running Telnet server software. NTLM authentication is supported when a Microsoft Telnet Client connects to the Microsoft Telnet service. Telnet provides user support for the Telnet protocol, a remote access protocol you can use to log on to a remote computer, network device, or private network.</p>

</BODY>
</HTML>



