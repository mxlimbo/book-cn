<HTML>
<HEAD>
<link rel="STYLESHEET" type="text/css" href="squeal7.css">
<TITLE>Altering a Database</TITLE>

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullSize(sURL){window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>
</HEAD>
<BODY BGCOLOR="#ffffff" TEXT="#000000">
<A HREF="ch05g.htm">[Previous]</A> <A HREF="ch05i.htm">[Next]</A><P>

<A NAME="189"><H1>Altering a Database</H1></A>
<P>You can use the ALTER DATABASE statement to change a database's 
definition in one of the following ways:</P>
<P>
<UL>
<P><LI>Add one or more new data files to the database, which you can 
optionally put in a user-defined filegroup. You must put all files 
added in a single ALTER DATABASE statement in the same filegroup.</LI></P>
<P><LI>Add one or more new log files to the database.</LI></P>
<P><LI>Remove a file or a filegroup from the database. You can do this 
only if the file or filegroup is completely empty. Removing a filegroup 
will remove all the files in the filegroup.</LI></P>
<P><LI>Add a new filegroup to a database.</LI></P>
<P><LI>Modify an existing file in one of the following ways:</LI></P>
<UL>
<P><LI>Increase the value of the SIZE property.</LI></P>
<P><LI>Change the MAXSIZE or FILEGROWTH properties.</LI></P>
<P><LI>Change the NAME property for files only in the 
<I>tempdb</I> database; this change doesn't go into effect until you stop and restart 
SQL Server.</LI></P>
</ul>
<P><LI>Modify an existing filegroup in one of the following ways:</LI></P>
<UL>
<P><LI>Mark the filegroup as READONLY so that updates to objects  
in the filegroup aren't allowed. The primary filegroup cannot 
be made READONLY.</LI></P>
<P><LI>Mark the filegroup as READWRITE, which reverses 
the READONLY property.</LI></P>
<P><LI>Mark the filegroup as the default filegroup for the database.</LI></P>
</ul>
</UL>
</P>
<P>The ALTER DATABASE statement can make only one of the changes 
just described each time it is executed. Note that it's impossible to move a file 
from one filegroup to another.</P>
<A NAME="190"><H2>ALTER DATABASE Examples</H2></A>
<P>The following examples demonstrate what you can do with ALTER 
DATABASE. This first example increases the size of a database file:</P>

<p><table cellpadding=5 width="95%"><tr><td><pre>
USE master 
GO 
ALTER DATABASE Test1  
MODIFY FILE 
(NAME = 'test1dat3', 
SIZE = 20MB)
</pre></td></tr></table></p>

<P>This next example creates a new filegroup in a database, adds two 
5-MB files to the filegroup, and makes the new filegroup the default filegroup. 
Three ALTER DATABASE statements are needed:</P>

<p><table cellpadding=5 width="95%"><tr><td><pre>
ALTER DATABASE Test1  
ADD FILEGROUP Test1FG1 
GO 
ALTER DATABASE Test1  
ADD FILE  
( NAME = 'test1dat3', 
FILENAME = 'c:\mssql7\data\t1dat3.ndf', 
SIZE = 5MB, 
MAXSIZE = 100MB, 
FILEGROWTH = 5MB), 
( NAME = 'test1dat4', 
FILENAME = 'c:\mssql7\data\t1dat4.ndf', 
SIZE = 5MB, 
MAXSIZE = 100MB, 
FILEGROWTH = 5MB) 
TO FILEGROUP Test1FG1 
GO 
ALTER DATABASE Test1 
MODIFY FILEGROUP Test1FG1 DEFAULT 
GO
</pre></td></tr></table></p>
</BODY>
</HTML>



