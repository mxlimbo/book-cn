 
<HTML>
<!-- #BeginTemplate "/模板/software.dwt" --> 
<HEAD>
<META HTTP-EQUIV='Content-Type' CONTENT='text/html; charset=gb2312'>
<META NAME='author' CONTENT='William Wan'>
<LINK REL='STYLESHEET' HREF='epcw.css' TYPE='text/css'>
<!-- #BeginEditable "doctitle" --> 
<TITLE>电脑报电子版 --用好Linux的启动盘（上）</TITLE>
<!-- #EndEditable --> 
<style type="text/css">
<!--
.centertitle {  font-weight: bold; text-align: center; line-height: 35px; font-size: 9pt; color: #000000}
.lefttitle {  line-height: 35px; font-weight: bold; font-size: 9pt; color: #000000}
-->
</style>
</HEAD>
<BODY BGCOLOR='white'>
<span class="centertitle"></span> 
<TABLE BORDER='0' WIDTH='615' CELLSPACING='0' CELLPADDING='0' HEIGHT='6' ALIGN='Center' BGCOLOR='#CCCC99'>
  <TR VALIGN='top'> 
    <TD WIDTH='100%'><IMG SRC='../../images/dot.gif' WIDTH='615' HEIGHT='1'></TD>
  </TR>
</TABLE>
<TABLE WIDTH='615' BORDER='0' CELLSPACING='0' CELLPADDING='0' ALIGN='Center'>
  <TR> 
    <TD WIDTH='145' BGCOLOR='#CCCC99' 	ALIGN='Center' VALIGN='top'><A HREF='http://www.yesky.com'><IMG SRC='images/logo.gif' WIDTH='140' HEIGHT='60' ALT='天极网' BORDER='0'></A></TD>
    <TD WIDTH='470' BGCOLOR='#CCCC99' HEIGHT='50'> 
      <a href="http://chat.yesky.com/" target="_blank"><img src="images/0823-3.gif" width="468" height="60" border="0" alt="天极聊天室"></a>
    </TD>
  </TR>
</TABLE>
<TABLE BORDER='0' WIDTH='615' CELLSPACING='0' CELLPADDING='0' HEIGHT='2' ALIGN='Center' BGCOLOR='#CCCC99'>
  <TR> 
    <TD WIDTH='100%'><IMG SRC='../../images/pixel.gif' WIDTH='1' HEIGHT='1'></TD>
  </TR>
</TABLE>
<TABLE BORDER='0' WIDTH='615' CELLSPACING='0' CELLPADDING='0' HEIGHT='3' ALIGN='Center' BGCOLOR='#CCCC99'>
  <TR VALIGN='bottom'> 
    <TD WIDTH='100%'><IMG SRC='../../images/dot.gif' WIDTH='615' HEIGHT='1'></TD>
  </TR>
</TABLE>
<table width='615' border='0' cellspacing='0' cellpadding='2' align='Center'>
  <tr> 
    <td width='615' colspan='2'><font color="#FF6666">当前位置：</font><a href='http://www.cpcw.com/issue/index.html'>CPCW电子版</a> 
      &gt; <A HREF='http://www.cpcw.com/issue/all.html' target="_blank">2000年</A> &gt; <a href="index.html"><!-- #BeginEditable "%C6%DA" -->43期<!-- #EndEditable --></a> 
      &gt; <!-- #BeginEditable "%C0%B8%C4%BF" --><a href="software.html">软件世界</a><!-- #EndEditable --> 
      &gt; <!-- #BeginEditable "%B1%EA%CC%E2" -->{用好Linux的启动盘（上）}<!-- #EndEditable --></td>
  </tr>
</table>
<TABLE WIDTH='615' BORDER='0' CELLSPACING='0' CELLPADDING='0' ALIGN='center'>
  <TR ALIGN='center' VALIGN='bottom'> 
    <TD HEIGHT='6'><IMG SRC='../../images/dot.gif' WIDTH='615' HEIGHT='1'></TD>
  </TR>
</TABLE>
<BR>
<TABLE WIDTH='615' BORDER='0' CELLSPACING='0' CELLPADDING='2' BGCOLOR='#FFCC66' ALIGN='center'>
  <TR> 
    <TD><SPAN CLASS='title'>《 <!-- #BeginEditable "%CE%C4%D5%C2%CD%B7" -->{用好Linux的启动盘（上）}<!-- #EndEditable --> 
      》</SPAN></TD>
  </TR>
</TABLE>
<BR>
<TABLE WIDTH='615' BORDER='0' CELLSPACING='0' CELLPADDING='2' ALIGN='center'>
  <TR> 
    <TD><!-- #BeginEditable "%CE%C4%D5%C2%C4%DA%C8%DD" -->{　　一、为什么需要Linux启动盘<br>
      　　有很多理由来说明这个问题：首先它可用于启动Linux系统。其次，当系统发生错误，需要进行系统恢复时我们需要用到它。还有，如果你喜欢经常更新系统内核的话，那么一张启动盘则是必不可少的。<br>
      　　希望了解Linux系统组成及启动过程的朋友，如果按照本文提供的方法做下去，相信你做完启动盘之后，你对Linux又会有新的认识。<br>
      　　二、启动盘的类型<br>
      　　启动盘一般可分为如下两种：一种是只含内核（kernel）的启动盘，这种盘只含有系统内核，并不包括根文件系统（root file system），它在其内核中指明了根文件系统所在的位置，在启动过程中根据该参数去安装根文件系统。也就是说，这种类型的启动盘必须和硬盘上的根文件系统配合才能使用。我们平常意义上的启动盘一般指的就是这种类型，有些资料上也把这种盘称之为boot盘。<br>
      　　另外还有一种类型的启动盘除了包含内核以外，还包含了文件系统。这种类型的启动盘从某种意义上来说已经是一个完整的操作系统。由于有自己的根文件系统，这种类型的启动盘可以在没有硬盘的机器上启动一个小的Linux系统。这种类型的盘有时也称作boot/root盘。<br>
      　　三、启动盘的制作<br>
      　　1.boot盘的制作<br>
      　　很多Linux发行套件已经提供了boot盘，一般情况是在DOS下使用RAWRITE制作一张boot盘。当然这种方法是在安装Linux之前进行制作。如果在安装了Linux之后希望再制作系统盘，请按以下步骤进行：<br>
      　　(1)以root的身份进行登录。<br>
      　　(2)确定内核的位置，一般情况下内核位于/vmlinuz中，当然不同的发行套件中该位置可能会有区别，可以查看相关的文档。<br>
      　　(3)用rdev命令设置根设备为Linux系统的根文件系统。首先查看内核中对根文件系统的配置，执行如下命令<br>
      　　＃rdev /vmlinuz<br>
      　　如果你的Linux根文件系统位于/dev/hda1,那么应该有如下的信息：<br>
      　　Root Device /dev/hda1<br>
      　　注意：该信息随你在安装时的配置不同而结果可能不同。另外还有一点值得注意的是，该设置值可能并不正确，例如我的系统（RedHat 6.0 kernel 
      2.2.5－15）上的配置值就显示如下：<br>
      　　＃rdev /boot/vmlinuz<br>
      　　Root Device /dev/sdc1 （显示为sdc1即第三SCSI硬盘，而我的机器上根本没有！）<br>
      　　但是这并不表明该配置有问题，因为lilo.conf中的相关配置项会覆盖该值，详见boot/root盘中的分析。<br>
      　　(4)如果上一步的显示信息和你的实际配置有偏差，可以执行如下命令进行修正：<br>
      　　rdev /dev/vmlinuz /dev/hda1 （假设根文件系统位于/dev/hda1上）<br>
      　　再次执行rdev /vmliuz确保正确，否则做出来的盘是不会启动的！<br>
      　　(5)拿一张已格式化的软盘（Linux下用fdformat格式化），执行下述命令：<br>
      　　＃dd if=/vmlinuz of=/def/fd0 bs=8192<br>
      　　至此，一张专用于引导Linux系统的boot盘就做好了。去测试一下吧！<br>
      　　2．boot/root盘的制作<br>
      　　boot/root盘由两部分组成,即核心和根文件系统。要把这两部分都放到一个1.44MB的软盘上去，通常要对内核和根文件系统进行压缩，压缩核心的最好方法是进行重新编译内核，将一些不必要的支持去掉，如对网络和其它周边设备的支持，重要的一点是记住内核必须支持RAMDISK及ext2,否则系统不能正常引导。关于内核的编译本文不再阐述，下面重点介绍如何生成根文件系统的压缩包。对于根文件系统的压缩包括两方面的问题，第一是只保留必要的根文件系统组件，第二是将根文件系统做成一个压缩包，类似于内核工作的原理。<br>
      　　(1)根文件系统概述<br>
      　　一个根文件系统必须包括支持完整Linux系统的全部东西，它至少应包括以下几项：<br>
      　　・基本文件系统结构<br>
      　　・至少含有以下目录：/dev、 /proc、 /bin、 /etc、 /lib、 /usr、 /tmp<br>
      　　・最基本的应用程序，如sh、 ls、 cp、 mv等<br>
      　　・最低限度的配置文件，如rc、 inittab、 fstab等<br>
      　　・设备：/dev/hd＊、 /dev/tty＊、 /dev/fd0<br>
      　　・基本程序运行所需的库函数<br>
      　　以上所需文件一般情况下会超过1.44M，因此我们通常的做法是先准备好内容后再压缩到软盘中，当用软盘启动时，再把文件解压到内存中，形成一个虚拟盘（RAMDISK），通过RAMDISK控制系统启动。<br>
      　　为了能创建以上的根文件系统，你必须有一个空闲的能够放下大约4MB文件的RAMDISK。系统缺省情况下已替我们建好了一个大小为4096KB的RAMDISK，其设备名一般为/dev/ram0,我们就使用它来保存我们预先准备好的根文件系统。(未完待续)}<!-- #EndEditable --></TD>
  </TR>
</TABLE>
<TABLE WIDTH='615' BORDER='0' CELLSPACING='0' CELLPADDING='2' ALIGN='center'>
  <TR> 
    <TD>&nbsp;</TD>
    <TD ALIGN='right'><A HREF='#top'>页 首</A></TD>
  </TR>
</TABLE>
<BR>
<TABLE WIDTH='615' BORDER='0' CELLSPACING='0' CELLPADDING='0' ALIGN='center'>
  <TR ALIGN='center' VALIGN='bottom'> 
    <TD HEIGHT='6'><IMG SRC='../../images/dot.gif' WIDTH='615' HEIGHT='1'></TD>
  </TR>
</TABLE>
<TABLE WIDTH='615' BORDER='0' CELLSPACING='0' CELLPADDING='2' ALIGN='center'>
  <TR ALIGN='center'> 
    <TD> 
      <script language="JavaScript" src="../../download/yeskye.js">
</script>
    </TD>
    <TD> <noscript></noscript> <a href='/'>《电脑报》版权所有</a>，<a href='mailto:webmaster@staff.yesky.com'>YESKY网站编辑部</a>设计制作发布</TD>
  </TR>
</TABLE>
</BODY>
<!-- #EndTemplate -->
</HTML>
